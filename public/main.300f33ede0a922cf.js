"use strict";(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{2011:(ct,Te,L)=>{L.d(Te,{Dh:()=>ue,GT:()=>ye,cc:()=>Me,hO:()=>qe,on:()=>z,pX:()=>ne,xv:()=>ge});var _=L(5e3),G=L(127),N=L(5813);ct=L.hmd(ct);const ie=["ngOnDestroy"],ne=(Ie,et,$e,Re={})=>new Proxy(Ie,{get:(Ae,Ee)=>$e.runOutsideAngular(()=>{var Ze;if(Ie[Ee])return(null===(Ze=null==Re?void 0:Re.spy)||void 0===Ze?void 0:Ze.get)&&Re.spy.get(Ee,Ie[Ee]),Ie[Ee];if(ie.indexOf(Ee)>-1)return()=>{};const ee=et.toPromise().then(Xe=>{const Qe=Xe&&Xe[Ee];return"function"==typeof Qe?Qe.bind(Xe):Qe&&Qe.then?Qe.then(se=>$e.run(()=>se)):$e.run(()=>Qe)});return new Proxy(()=>{},{get:(Xe,Qe)=>ee[Qe],apply:(Xe,Qe,se)=>ee.then(oe=>{var le;const be=oe&&oe(...se);return(null===(le=null==Re?void 0:Re.spy)||void 0===le?void 0:le.apply)&&Re.spy.apply(Ee,se,be),be})})})}),ye=(Ie,et)=>{et.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(Re=>{Object.defineProperty(Ie.prototype,Re,Object.getOwnPropertyDescriptor($e.prototype||$e,Re))})})};class ce{constructor(et){return et}}const ue=new _.OlP("angularfire2.app.options"),ge=new _.OlP("angularfire2.app.name");function z(Ie,et,$e){const Ae="object"==typeof $e&&$e||{};Ae.name=Ae.name||"string"==typeof $e&&$e||"[DEFAULT]";const Ze=G.Z.apps.filter(ee=>ee&&ee.name===Ae.name)[0]||et.runOutsideAngular(()=>G.Z.initializeApp(Ie,Ae));try{JSON.stringify(Ie)!==JSON.stringify(Ze.options)&&q("error",`${Ze.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ee){}return new ce(Ze)}const q=(Ie,...et)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Ie](...et)},te={provide:ce,useFactory:z,deps:[ue,_.R0b,[new _.FiY,ge]]};let qe=(()=>{class Ie{constructor($e){G.Z.registerVersion("angularfire",N.q4.full,"core"),G.Z.registerVersion("angularfire",N.q4.full,"app-compat"),G.Z.registerVersion("angular",_.q4F.full,$e.toString())}static initializeApp($e,Re){return{ngModule:Ie,providers:[{provide:ue,useValue:$e},{provide:ge,useValue:Re}]}}}return Ie.\u0275fac=function($e){return new($e||Ie)(_.LFG(_.Lbi))},Ie.\u0275mod=_.oAB({type:Ie}),Ie.\u0275inj=_.cJS({providers:[te]}),Ie})();function Me(Ie,et,$e,Re,Ae){const[,Ee,Ze]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===Ie)||[];if(Ee)return function Le(Ie,et){try{return Ie.toString()===et.toString()}catch($e){return Ie===et}}(Ae,Ze)||(me("error",`${et} was already initialized on the ${$e} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Ae,was:Ze})),Ee;{const ee=Re();return globalThis.\u0275AngularfireInstanceCache.push([Ie,ee,Ae]),ee}}const Ue=!!ct.hot,me=(Ie,...et)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Ie](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,Te,L)=>{L.d(Te,{q4:()=>za,iC:()=>Wl,fc:()=>or,HU:()=>Uu,vb:()=>ug,JM:()=>es});var _=L(5e3),G=L(5867),N=L(5861),ie=L(9681),ne=L(2090),ye=L(4859),ce=L(1877);const ue="@firebase/installations",q="w:0.5.8",te="FIS_v2",Ie=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(C){return C instanceof ne.ZR&&C.code.includes("request-failed")}function $e({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Re(C){return{token:C.token,requestStatus:2,expiresIn:se(C.expiresIn),creationTime:Date.now()}}function Ae(C,T){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,N.Z)(function*(C,T){const B=(yield T.json()).error;return Ie.create("request-failed",{requestName:C,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Ze({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function ee(C,{refreshToken:T}){const M=Ze(C);return M.append("Authorization",function oe(C){return`${te} ${C}`}(T)),M}function Xe(C){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function se(C){return Number(C.replace("s","000"))}function le(C,T){return be.apply(this,arguments)}function be(){return(be=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:M}){const B=$e(C),X=Ze(C),re=T.getImmediate({optional:!0});if(re){const Tt=yield re.getHeartbeatsHeader();Tt&&X.append("x-firebase-client",Tt)}const ke={method:"POST",headers:X,body:JSON.stringify({fid:M,authVersion:te,appId:C.appId,sdkVersion:q})},it=yield Xe(()=>fetch(B,ke));if(it.ok){const Tt=yield it.json();return{fid:Tt.fid||M,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Re(Tt.authToken)}}throw yield Ae("Create Installation",it)})).apply(this,arguments)}function pe(C){return new Promise(T=>{setTimeout(T,C)})}const xt=/^[cdef][\w-]{21}$/;function on(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function He(C){return function Fe(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return xt.test(M)?M:""}catch(C){return""}}function Qt(C){return`${C.appName}!${C.appId}`}const lr=new Map;function Mn(C,T){const M=Qt(C);Jt(M,T),function Sn(C,T){const M=function Tr(){return!_r&&"BroadcastChannel"in self&&(_r=new BroadcastChannel("[Firebase] FID Change"),_r.onmessage=C=>{Jt(C.data.key,C.data.fid)}),_r}();M&&M.postMessage({key:C,fid:T}),function Dr(){0===lr.size&&_r&&(_r.close(),_r=null)}()}(M,T)}function Jt(C,T){const M=lr.get(C);if(M)for(const B of M)B(T)}let _r=null;const yr="firebase-installations-store";let Sr=null;function Gi(){return Sr||(Sr=(0,ne.X3)("firebase-installations-database",1,(C,T)=>{0===T&&C.createObjectStore(yr)})),Sr}function dt(C,T){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,N.Z)(function*(C,T){const M=Qt(C),X=(yield Gi()).transaction(yr,"readwrite"),re=X.objectStore(yr),Pe=yield re.get(M);return yield re.put(T,M),yield X.complete,(!Pe||Pe.fid!==T.fid)&&Mn(C,T.fid),T})).apply(this,arguments)}function Vn(C){return an.apply(this,arguments)}function an(){return(an=(0,N.Z)(function*(C){const T=Qt(C),B=(yield Gi()).transaction(yr,"readwrite");yield B.objectStore(yr).delete(T),yield B.complete})).apply(this,arguments)}function zn(C,T){return ii.apply(this,arguments)}function ii(){return(ii=(0,N.Z)(function*(C,T){const M=Qt(C),X=(yield Gi()).transaction(yr,"readwrite"),re=X.objectStore(yr),Pe=yield re.get(M),ke=T(Pe);return void 0===ke?yield re.delete(M):yield re.put(ke,M),yield X.complete,ke&&(!Pe||Pe.fid!==ke.fid)&&Mn(C,ke.fid),ke})).apply(this,arguments)}function Pn(C){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,N.Z)(function*(C){let T;const M=yield zn(C.appConfig,B=>{const X=Ur(B),re=Ms(C,X);return T=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function Ur(C){return Wt(C||{fid:on(),registrationStatus:0})}function Ms(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ie.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function Vt(C,T){return lt.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:rt(C)}:{installationEntry:T}}function lt(){return(lt=(0,N.Z)(function*(C,T){try{const M=yield le(C,T);return dt(C.appConfig,M)}catch(M){throw et(M)&&409===M.customData.serverCode?yield Vn(C.appConfig):yield dt(C.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function rt(C){return si.apply(this,arguments)}function si(){return(si=(0,N.Z)(function*(C){let T=yield Wi(C.appConfig);for(;1===T.registrationStatus;)yield pe(100),T=yield Wi(C.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield Pn(C);return B||M}return T})).apply(this,arguments)}function Wi(C){return zn(C,T=>{if(!T)throw Ie.create("installation-not-found");return Wt(T)})}function Wt(C){return function qi(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Bn(C,T){return ln.apply(this,arguments)}function ln(){return(ln=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:T},M){const B=_t(C,M),X=ee(C,M),re=T.getImmediate({optional:!0});if(re){const Tt=yield re.getHeartbeatsHeader();Tt&&X.append("x-firebase-client",Tt)}const ke={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:q,appId:C.appId}})},it=yield Xe(()=>fetch(B,ke));if(it.ok)return Re(yield it.json());throw yield Ae("Generate Auth Token",it)})).apply(this,arguments)}function _t(C,{fid:T}){return`${$e(C)}/${T}/authTokens:generate`}function jn(C){return qt.apply(this,arguments)}function qt(){return(qt=(0,N.Z)(function*(C,T=!1){let M;const B=yield zn(C.appConfig,re=>{if(!kt(re))throw Ie.create("not-registered");const Pe=re.authToken;if(!T&&K(Pe))return re;if(1===Pe.requestStatus)return M=Ge(C,T),re;{if(!navigator.onLine)throw Ie.create("app-offline");const ke=Y(re);return M=ht(C,ke),ke}});return M?yield M:B.authToken})).apply(this,arguments)}function Ge(C,T){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,N.Z)(function*(C,T){let M=yield tt(C.appConfig);for(;1===M.authToken.requestStatus;)yield pe(100),M=yield tt(C.appConfig);const B=M.authToken;return 0===B.requestStatus?jn(C,T):B})).apply(this,arguments)}function tt(C){return zn(C,T=>{if(!kt(T))throw Ie.create("not-registered");return function he(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function ht(C,T){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,N.Z)(function*(C,T){try{const M=yield Bn(C,T),B=Object.assign(Object.assign({},T),{authToken:M});return yield dt(C.appConfig,B),M}catch(M){if(!et(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield dt(C.appConfig,B)}else yield Vn(C.appConfig);throw M}})).apply(this,arguments)}function kt(C){return void 0!==C&&2===C.registrationStatus}function K(C){return 2===C.requestStatus&&!function j(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+36e5}(C)}function Y(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}function V(){return(V=(0,N.Z)(function*(C){const T=C,{installationEntry:M,registrationPromise:B}=yield Pn(T);return B?B.catch(console.error):jn(T).catch(console.error),M.fid})).apply(this,arguments)}function ae(){return(ae=(0,N.Z)(function*(C,T=!1){const M=C;return yield Be(M),(yield jn(M,T)).token})).apply(this,arguments)}function Be(C){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(C){const{registrationPromise:T}=yield Pn(C);T&&(yield T)})).apply(this,arguments)}function nr(C){return Ie.create("missing-app-config-values",{valueName:C})}const Eu="installations",Ye=C=>{const T=C.getProvider("app").getImmediate(),M=function Ri(C){if(!C||!C.options)throw nr("App Configuration");if(!C.name)throw nr("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!C.options[M])throw nr(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ie._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},$t=C=>{const T=C.getProvider("app").getImmediate(),M=(0,ie._getProvider)(T,Eu).getImmediate();return{getId:()=>function O(C){return V.apply(this,arguments)}(M),getToken:X=>function $(C){return ae.apply(this,arguments)}(M,X)}};(function fn(){(0,ie._registerComponent)(new ye.wA(Eu,Ye,"PUBLIC")),(0,ie._registerComponent)(new ye.wA("installations-internal",$t,"PRIVATE"))})(),(0,ie.registerVersion)(ue,"0.5.8"),(0,ie.registerVersion)(ue,"0.5.8","esm2017");const Br="@firebase/remote-config",$n=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cl{constructor(T,M,B,X){this.client=T,this.storage=M,this.storageCache=B,this.logger=X}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,X=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${X}.`),X}fetch(T){var M=this;return(0,N.Z)(function*(){const[B,X]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(X&&M.isCachedDataFresh(T.cacheMaxAgeMillis,B))return X;T.eTag=X&&X.eTag;const re=yield M.client.fetch(T),Pe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Pe.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Pe),re})()}}function Cu(C=navigator){return C.languages&&C.languages[0]||C.language}class Ns{constructor(T,M,B,X,re,Pe){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=B,this.projectId=X,this.apiKey=re,this.appId=Pe}fetch(T){var M=this;return(0,N.Z)(function*(){const[B,X]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},it={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:X,app_id:M.appId,language_code:Cu()},Tt={method:"POST",headers:ke,body:JSON.stringify(it)},Ht=fetch(Pe,Tt),At=new Promise((hi,Fi)=>{T.signal.addEventListener(()=>{const wo=new Error("The operation was aborted.");wo.name="AbortError",Fi(wo)})});let ar;try{yield Promise.race([Ht,At]),ar=yield Ht}catch(hi){let Fi="fetch-client-network";throw"AbortError"===hi.name&&(Fi="fetch-timeout"),$n.create(Fi,{originalErrorMessage:hi.message})}let Yn=ar.status;const Ya=ar.headers.get("ETag")||void 0;let qs,Ei;if(200===ar.status){let hi;try{hi=yield ar.json()}catch(Fi){throw $n.create("fetch-client-parse",{originalErrorMessage:Fi.message})}qs=hi.entries,Ei=hi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ei?Yn=500:"NO_CHANGE"===Ei?Yn=304:("NO_TEMPLATE"===Ei||"EMPTY_CONFIG"===Ei)&&(qs={}),304!==Yn&&200!==Yn)throw $n.create("fetch-status",{httpStatus:Yn});return{status:Yn,eTag:Ya,config:qs}})()}}class os{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,N.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:B}){var X=this;return(0,N.Z)(function*(){yield function ai(C,T){return new Promise((M,B)=>{const X=Math.max(T-Date.now(),0),re=setTimeout(M,X);C.addEventListener(()=>{clearTimeout(re),B($n.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const re=yield X.client.fetch(T);return yield X.storage.deleteThrottleMetadata(),re}catch(re){if(!function Qp(C){if(!(C instanceof ne.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const Pe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(B),backoffCount:B+1};return yield X.storage.setThrottleMetadata(Pe),X.attemptFetch(T,Pe)}})()}}class Jp{constructor(T,M,B,X,re){this.app=T,this._client=M,this._storageCache=B,this._storage=X,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pa(C,T){const M=C.target.error||void 0;return $n.create(T,{originalErrorMessage:M&&M.message})}const $o="app_namespace_store";class Qc{constructor(T,M,B,X=function tg(){return new Promise((C,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{T(Pa(B,"storage-open"))},M.onsuccess=B=>{C(B.target.result)},M.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore($o,{keyPath:"compositeKey"})}}catch(M){T($n.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=B,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,N.Z)(function*(){const B=yield M.openDbPromise;return new Promise((X,re)=>{const ke=B.transaction([$o],"readonly").objectStore($o),it=M.createCompositeKey(T);try{const Tt=ke.get(it);Tt.onerror=Ht=>{re(Pa(Ht,"storage-get"))},Tt.onsuccess=Ht=>{const At=Ht.target.result;X(At?At.value:void 0)}}catch(Tt){re($n.create("storage-get",{originalErrorMessage:Tt&&Tt.message}))}})})()}set(T,M){var B=this;return(0,N.Z)(function*(){const X=yield B.openDbPromise;return new Promise((re,Pe)=>{const it=X.transaction([$o],"readwrite").objectStore($o),Tt=B.createCompositeKey(T);try{const Ht=it.put({compositeKey:Tt,value:M});Ht.onerror=At=>{Pe(Pa(At,"storage-set"))},Ht.onsuccess=()=>{re()}}catch(Ht){Pe($n.create("storage-set",{originalErrorMessage:Ht&&Ht.message}))}})})()}delete(T){var M=this;return(0,N.Z)(function*(){const B=yield M.openDbPromise;return new Promise((X,re)=>{const ke=B.transaction([$o],"readwrite").objectStore($o),it=M.createCompositeKey(T);try{const Tt=ke.delete(it);Tt.onerror=Ht=>{re(Pa(Ht,"storage-delete"))},Tt.onsuccess=()=>{X()}}catch(Tt){re($n.create("storage-delete",{originalErrorMessage:Tt&&Tt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ho{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const M=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),X=T.storage.getActiveConfig(),re=yield M;re&&(T.lastFetchStatus=re);const Pe=yield B;Pe&&(T.lastSuccessfulFetchTimestampMillis=Pe);const ke=yield X;ke&&(T.activeConfig=ke)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Xc(){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,N.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(C){return!1}})).apply(this,arguments)}!function ng(){(0,ie._registerComponent)(new ye.wA("remote-config",function C(T,{instanceIdentifier:M}){const B=T.getProvider("app").getImmediate(),X=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw $n.create("registration-window");if(!(0,ne.hl)())throw $n.create("indexed-db-unavailable");const{projectId:re,apiKey:Pe,appId:ke}=B.options;if(!re)throw $n.create("registration-project-id");if(!Pe)throw $n.create("registration-api-key");if(!ke)throw $n.create("registration-app-id");const it=new Qc(ke,B.name,M=M||"firebase"),Tt=new Ho(it),Ht=new ce.Yd(Br);Ht.logLevel=ce.in.ERROR;const At=new Ns(X,ie.SDK_VERSION,M,re,Pe,ke),ar=new os(At,it),Yn=new Cl(ar,it,Tt,Ht),Ya=new Jp(B,Yn,Tt,it,Ht);return function $r(C){const T=(0,ne.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ya),Ya},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Br,"0.3.7"),(0,ie.registerVersion)(Br,"0.3.7","esm2017")}();const as="/firebase-messaging-sw.js",Na="/firebase-cloud-messaging-push-scope",yi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Go="google.c.a.c_id",Du="google.c.a.c_l",$h="google.c.a.ts",ka="google.c.a.e";var Pi=(()=>{return(C=Pi||(Pi={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Pi;var C})();function us(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Su(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),X=new Uint8Array(B.length);for(let re=0;re<B.length;++re)X[re]=B.charCodeAt(re);return X}const Oa="fcm_token_details_db",Wo="fcm_token_object_Store";function rg(C){return qo.apply(this,arguments)}function qo(){return qo=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Oa))return null;let T=null;return(yield(0,ne.X3)(Oa,5,function(){var B=(0,N.Z)(function*(X,re,Pe,ke){var it;if(re<2||!X.objectStoreNames.contains(Wo))return;const Tt=ke.objectStore(Wo),Ht=yield Tt.index("fcmSenderId").get(C);if(yield Tt.clear(),Ht)if(2===re){const At=Ht;if(!At.auth||!At.p256dh||!At.endpoint)return;T={token:At.fcmToken,createTime:null!==(it=At.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:us(At.vapidKey)}}}else if(3===re){const At=Ht;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:us(At.auth),p256dh:us(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:us(At.vapidKey)}}}else if(4===re){const At=Ht;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:us(At.auth),p256dh:us(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:us(At.vapidKey)}}}});return function(X,re,Pe,ke){return B.apply(this,arguments)}}())).close(),yield(0,ne.Lj)(Oa),yield(0,ne.Lj)("fcm_vapid_details_db"),yield(0,ne.Lj)("undefined"),Tl(T)?T:null}),qo.apply(this,arguments)}function Tl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Os="firebase-messaging-store";let io=null;function Dl(){return io||(io=(0,ne.X3)("firebase-messaging-database",1,(C,T)=>{0===T&&C.createObjectStore(Os)})),io}function vn(C){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(C){const T=Ls(C),B=yield(yield Dl()).transaction(Os).objectStore(Os).get(T);if(B)return B;{const X=yield rg(C.appConfig.senderId);if(X)return yield oo(C,X),X}})).apply(this,arguments)}function oo(C,T){return pn.apply(this,arguments)}function pn(){return(pn=(0,N.Z)(function*(C,T){const M=Ls(C),X=(yield Dl()).transaction(Os,"readwrite");return yield X.objectStore(Os).put(T,M),yield X.complete,T})).apply(this,arguments)}function Sl(C){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*(C){const T=Ls(C),B=(yield Dl()).transaction(Os,"readwrite");yield B.objectStore(Os).delete(T),yield B.complete})).apply(this,arguments)}function Ls({appConfig:C}){return C.appId}const rr=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xu(C,T){return vi.apply(this,arguments)}function vi(){return(vi=(0,N.Z)(function*(C,T){const M=yield Zi(C),B=vt(T),X={method:"POST",headers:M,body:JSON.stringify(B)};let re;try{re=yield(yield fetch(Ni(C.appConfig),X)).json()}catch(Pe){throw rr.create("token-subscribe-failed",{errorInfo:Pe})}if(re.error)throw rr.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw rr.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function zr(C,T){return ls.apply(this,arguments)}function ls(){return(ls=(0,N.Z)(function*(C,T){const M=yield Zi(C),B=vt(T.subscriptionOptions),X={method:"PATCH",headers:M,body:JSON.stringify(B)};let re;try{re=yield(yield fetch(`${Ni(C.appConfig)}/${T.token}`,X)).json()}catch(Pe){throw rr.create("token-update-failed",{errorInfo:Pe})}if(re.error)throw rr.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw rr.create("token-update-no-token");return re.token})).apply(this,arguments)}function ao(C,T){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,N.Z)(function*(C,T){const B={method:"DELETE",headers:yield Zi(C)};try{const re=yield(yield fetch(`${Ni(C.appConfig)}/${T}`,B)).json();if(re.error)throw rr.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(X){throw rr.create("token-unsubscribe-failed",{errorInfo:X})}})).apply(this,arguments)}function Ni({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Zi(C){return cs.apply(this,arguments)}function cs(){return(cs=(0,N.Z)(function*({appConfig:C,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function vt({p256dh:C,auth:T,endpoint:M,vapidKey:B}){const X={web:{endpoint:M,auth:T,p256dh:C}};return B!==yi&&(X.web.applicationPubKey=B),X}const La=6048e5;function ed(C){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,N.Z)(function*(C){const T=yield Wh(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:us(T.getKey("auth")),p256dh:us(T.getKey("p256dh"))},B=yield vn(C.firebaseDependencies);if(B){if(Ru(B.subscriptionOptions,M))return Date.now()>=B.createTime+La?Gh(C,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield ao(C.firebaseDependencies,B.token)}catch(X){console.warn(X)}return De(C.firebaseDependencies,M)}return De(C.firebaseDependencies,M)})).apply(this,arguments)}function td(C){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,N.Z)(function*(C){const T=yield vn(C.firebaseDependencies);T&&(yield ao(C.firebaseDependencies,T.token),yield Sl(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Gh(C,T){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,N.Z)(function*(C,T){try{const M=yield zr(C.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield oo(C.firebaseDependencies,B),M}catch(M){throw yield td(C),M}})).apply(this,arguments)}function De(C,T){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,N.Z)(function*(C,T){const B={token:yield xu(C,T),createTime:Date.now(),subscriptionOptions:T};return yield oo(C,B),B.token})).apply(this,arguments)}function Wh(C,T){return wn.apply(this,arguments)}function wn(){return(wn=(0,N.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Su(T)})})).apply(this,arguments)}function Ru(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}function Fs(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ki(C,T){if(!T.notification)return;C.notification={};const M=T.notification.title;M&&(C.notification.title=M);const B=T.notification.body;B&&(C.notification.body=B);const X=T.notification.image;X&&(C.notification.image=X)}(T,C),function Al(C,T){!T.data||(C.data=T.data)}(T,C),function Ua(C,T){if(!T.fcmOptions)return;C.fcmOptions={};const M=T.fcmOptions.link;M&&(C.fcmOptions.link=M);const B=T.fcmOptions.analytics_label;B&&(C.fcmOptions.analyticsLabel=B)}(T,C),T}function ig(C){return"object"==typeof C&&!!C&&Go in C}function xl(C,T){const M=[];for(let B=0;B<C.length;B++)M.push(C.charAt(B)),B<T.length&&M.push(T.charAt(B));return M.join("")}function Xo(C){return rr.create("missing-app-config-values",{valueName:C})}xl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hr{constructor(T,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Qo(C){if(!C||!C.options)throw Xo("App Configuration Object");if(!C.name)throw Xo("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const B of T)if(!M[B])throw Xo(B);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:X,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Yi(C){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,N.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(as,{scope:Na}),C.swRegistration.update().catch(()=>{})}catch(T){throw rr.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function ea(C,T){return ui.apply(this,arguments)}function ui(){return(ui=(0,N.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield Yi(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw rr.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function qh(C,T){return ta.apply(this,arguments)}function ta(){return(ta=(0,N.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=yi)})).apply(this,arguments)}function Va(){return(Va=(0,N.Z)(function*(C,T){if(!navigator)throw rr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw rr.create("permission-blocked");return yield qh(C,null==T?void 0:T.vapidKey),yield ea(C,null==T?void 0:T.serviceWorkerRegistration),ed(C)})).apply(this,arguments)}function Rl(C,T,M){return uo.apply(this,arguments)}function uo(){return(uo=(0,N.Z)(function*(C,T,M){const B=zh(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[Go],message_name:M[Du],message_time:M[$h],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zh(C){switch(C){case Pi.NOTIFICATION_CLICKED:return"notification_open";case Pi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Pl(){return(Pl=(0,N.Z)(function*(C,T){const M=T.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===Pi.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Fs(M)):C.onMessageHandler.next(Fs(M)));const B=M.data;ig(B)&&"1"===B[ka]&&(yield Rl(C,M.messageType,B))})).apply(this,arguments)}const Mu="@firebase/messaging",lo=C=>{const T=new hr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ml(C,T){return Pl.apply(this,arguments)}(T,M)),T},Nl=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:B=>function nd(C,T){return Va.apply(this,arguments)}(T,B)}};function rd(){return co.apply(this,arguments)}function co(){return(co=(0,N.Z)(function*(){try{yield(0,ne.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kh(){(0,ie._registerComponent)(new ye.wA("messaging",lo,"PUBLIC")),(0,ie._registerComponent)(new ye.wA("messaging-internal",Nl,"PRIVATE")),(0,ie.registerVersion)(Mu,"0.9.12"),(0,ie.registerVersion)(Mu,"0.9.12","esm2017")}();const Ol="analytics",id="firebase_id",Ll="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pu="https://www.googletagmanager.com/gtag/js",ir=new ce.Yd("@firebase/analytics");function sd(C){return Promise.all(C.map(T=>T.catch(M=>M)))}function od(C,T){const M=document.createElement("script");M.src=`${Pu}?l=${C}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Nu(C,T,M,B,X,re){return $a.apply(this,arguments)}function $a(){return($a=(0,N.Z)(function*(C,T,M,B,X,re){const Pe=B[X];try{if(Pe)yield T[Pe];else{const it=(yield sd(M)).find(Tt=>Tt.measurementId===X);it&&(yield T[it.appId])}}catch(ke){ir.error(ke)}C("config",X,re)})).apply(this,arguments)}function Yh(C,T,M,B,X){return na.apply(this,arguments)}function na(){return(na=(0,N.Z)(function*(C,T,M,B,X){try{let re=[];if(X&&X.send_to){let Pe=X.send_to;Array.isArray(Pe)||(Pe=[Pe]);const ke=yield sd(M);for(const it of Pe){const Tt=ke.find(At=>At.measurementId===it),Ht=Tt&&T[Tt.appId];if(!Ht){re=[];break}re.push(Ht)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),C("event",B,X||{})}catch(re){ir.error(re)}})).apply(this,arguments)}function w_(){const C=window.document.getElementsByTagName("script");for(const T of Object.values(C))if(T.src&&T.src.includes(Pu))return T;return null}const Rr=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fr=new class li{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function ud(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Kn(C){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,N.Z)(function*(C){var T;const{appId:M,apiKey:B}=C,X={method:"GET",headers:ud(B)},re=Ll.replace("{app-id}",M),Pe=yield fetch(re,X);if(200!==Pe.status&&304!==Pe.status){let ke="";try{const it=yield Pe.json();(null===(T=it.error)||void 0===T?void 0:T.message)&&(ke=it.error.message)}catch(it){}throw Rr.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:ke})}return Pe.json()})).apply(this,arguments)}function Fl(C){return js.apply(this,arguments)}function js(){return(js=(0,N.Z)(function*(C,T=fr,M){const{appId:B,apiKey:X,measurementId:re}=C.options;if(!B)throw Rr.create("no-app-id");if(!X){if(re)return{measurementId:re,appId:B};throw Rr.create("no-api-key")}const Pe=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ke=new ld;return setTimeout((0,N.Z)(function*(){ke.abort()}),void 0!==M?M:6e4),ra({appId:B,apiKey:X,measurementId:re},Pe,ke,T)})).apply(this,arguments)}function ra(C,T,M){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,N.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:M},B,X=fr){const{appId:re,measurementId:Pe}=C;try{yield Rt(B,T)}catch(ke){if(Pe)return ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${ke.message}]`),{appId:re,measurementId:Pe};throw ke}try{const ke=yield Kn(C);return X.deleteThrottleMetadata(re),ke}catch(ke){if(!Ul(ke)){if(X.deleteThrottleMetadata(re),Pe)return ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${ke.message}]`),{appId:re,measurementId:Pe};throw ke}const it=503===Number(ke.customData.httpStatus)?(0,ne.$s)(M,X.intervalMillis,30):(0,ne.$s)(M,X.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+it,backoffCount:M+1};return X.setThrottleMetadata(re,Tt),ir.debug(`Calling attemptFetch again in ${it} millis`),ra(C,Tt,B,X)}})).apply(this,arguments)}function Rt(C,T){return new Promise((M,B)=>{const X=Math.max(T-Date.now(),0),re=setTimeout(M,X);C.addEventListener(()=>{clearTimeout(re),B(Rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ul(C){if(!(C instanceof ne.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ld{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function ku(){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,N.Z)(function*(){if(!(0,ne.hl)())return ir.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(C){return ir.warn(Rr.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function $s(){return($s=(0,N.Z)(function*(C,T,M,B,X,re,Pe){var ke;const it=Fl(C);it.then(Yn=>{M[Yn.measurementId]=Yn.appId,C.options.measurementId&&Yn.measurementId!==C.options.measurementId&&ir.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yn=>ir.error(Yn)),T.push(it);const Tt=ku().then(Yn=>{if(Yn)return B.getId()}),[Ht,At]=yield Promise.all([it,Tt]);w_()||od(re,Ht.measurementId),X("js",new Date);const ar=null!==(ke=null==Pe?void 0:Pe.config)&&void 0!==ke?ke:{};return ar.origin="firebase",ar.update=!0,null!=At&&(ar[id]=At),X("config",Ht.measurementId,ar),Ht.measurementId})).apply(this,arguments)}class Vl{constructor(T){this.app=T}_delete(){return delete Zr[this.app.options.appId],Promise.resolve()}}let Zr={},fo=[];const ia={};let po,fs,Hs="dataLayer",Bl=!1;function sa(C,T,M){!function Gs(){const C=[];if((0,ne.ru)()&&C.push("This is a browser extension environment."),(0,ne.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((B,X)=>`(${X+1}) ${B}`).join(" "),M=Rr.create("invalid-analytics-context",{errorInfo:T});ir.warn(M.message)}}();const B=C.options.appId;if(!B)throw Rr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Rr.create("no-api-key");ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zr[B])throw Rr.create("already-exists",{id:B});if(!Bl){!function ds(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(Hs);const{wrappedGtag:re,gtagCore:Pe}=function Qh(C,T,M,B,X){let re=function(...Pe){window[B].push(arguments)};return window[X]&&"function"==typeof window[X]&&(re=window[X]),window[X]=function ad(C,T,M,B){function re(){return(re=(0,N.Z)(function*(Pe,ke,it){try{"event"===Pe?yield Yh(C,T,M,ke,it):"config"===Pe?yield Nu(C,T,M,B,ke,it):C("set",ke)}catch(Tt){ir.error(Tt)}})).apply(this,arguments)}return function X(Pe,ke,it){return re.apply(this,arguments)}}(re,C,T,M),{gtagCore:re,wrappedGtag:window[X]}}(Zr,fo,ia,Hs,"gtag");fs=re,po=Pe,Bl=!0}return Zr[B]=function In(C,T,M,B,X,re,Pe){return $s.apply(this,arguments)}(C,fo,ia,T,po,Hs,M),new Vl(C)}function Ga(){return(Ga=(0,N.Z)(function*(C,T,M,B,X){if(X&&X.global)C("event",M,B);else{const re=yield T;C("event",M,Object.assign(Object.assign({},B),{send_to:re}))}})).apply(this,arguments)}function xn(){return aa.apply(this,arguments)}function aa(){return(aa=(0,N.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(C){return!1}})).apply(this,arguments)}const go="@firebase/analytics";!function ag(){(0,ie._registerComponent)(new ye.wA(Ol,(T,{options:M})=>sa(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ie._registerComponent)(new ye.wA("analytics-internal",function C(T){try{const M=T.getProvider(Ol).getImmediate();return{logEvent:(B,X,re)=>function Jh(C,T,M,B){C=(0,ne.m9)(C),function oa(C,T,M,B,X){return Ga.apply(this,arguments)}(fs,Zr[C.app.options.appId],T,M,B).catch(X=>ir.error(X))}(M,B,X,re)}}catch(M){throw Rr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ie.registerVersion)(go,"0.7.8"),(0,ie.registerVersion)(go,"0.7.8","esm2017")}();var Xi=L(4408),ua=L(7565);const qa=new class Zn extends ua.v{}(class mo extends Xi.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,M,B):T.flush(this)}});var hd=L(4986),Fu=L(8505),Hr=L(5363),Ji=L(9468);const za=new _.GfV("7.3.0"),_o="__angularfire_symbol__analyticsIsSupportedValue",di="__angularfire_symbol__analyticsIsSupported",la="__angularfire_symbol__remoteConfigIsSupportedValue",jl="__angularfire_symbol__remoteConfigIsSupported",$l="__angularfire_symbol__messagingIsSupportedValue",Hl="__angularfire_symbol__messagingIsSupported";function es(C,T,M){if(T){if(1===T.length)return T[0];const re=T.filter(Pe=>Pe.app===M);if(1===re.length)return re[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[di]||(globalThis[di]=xn().then(C=>globalThis[_o]=C).catch(()=>globalThis[_o]=!1)),globalThis[Hl]||(globalThis[Hl]=rd().then(C=>globalThis[$l]=C).catch(()=>globalThis[$l]=!1)),globalThis[jl]||(globalThis[jl]=Xc().then(C=>globalThis[la]=C).catch(()=>globalThis[la]=!1));const ug=(C,T)=>{const M=T?[T]:(0,G.C6)(),B=[];return M.forEach(X=>{X.container.getProvider(C).instances.forEach(Pe=>{B.includes(Pe)||B.push(Pe)})}),B};function _s(){}class pd{constructor(T,M=qa){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,B){const X=this.zone;return this.delegate.schedule(function(Pe){X.runGuarded(()=>{T.apply(this,[Pe])})},M,B)}}class wi{constructor(T){this.zone=T,this.task=null}call(T,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_s,{},_s,_s)),M.pipe((0,Fu.b)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Uu=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new pd(Zone.current)),this.insideAngular=M.run(()=>new pd(Zone.current,hd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(_.LFG(_.R0b))},C.\u0275prov=_.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Ws(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function or(C){return C.pipe((0,Hr.Q)(Ws().outsideAngular))}function Wl(C){return Ws(),function vo(C){return function(M){return(M=M.lift(new wi(C.ngZone))).pipe((0,Ji.R)(C.outsideAngular),(0,Hr.Q)(C.insideAngular))}}(Ws())(C)}},573:(ct,Te,L)=>{L.d(Te,{$:()=>ed,A:()=>q,E:()=>$t,G:()=>jr,I:()=>os,K:()=>j,L:()=>Tu,M:()=>jh,N:()=>Go,P:()=>_o,Q:()=>Du,R:()=>ci,T:()=>yi,U:()=>Pi,V:()=>us,W:()=>rg,X:()=>xr,Y:()=>xu,Z:()=>zr,_:()=>Ni,a:()=>gt,a0:()=>td,a1:()=>Gh,a2:()=>De,a3:()=>Wh,a4:()=>Ru,a5:()=>ki,a6:()=>Al,a7:()=>ig,a8:()=>xl,a9:()=>Yi,aA:()=>ar,aB:()=>Vu,aC:()=>hn,aG:()=>fr,aJ:()=>ka,aa:()=>ea,ab:()=>qh,ae:()=>Rl,af:()=>zh,ag:()=>Ml,aj:()=>Os,ak:()=>kl,am:()=>Ll,an:()=>Nu,ao:()=>Cn,ap:()=>Qe,aq:()=>St,ar:()=>Ke,as:()=>$e,at:()=>Xa,au:()=>Bu,av:()=>Re,aw:()=>ee,ax:()=>oe,ay:()=>Y,az:()=>hi,b:()=>En,c:()=>Gl,d:()=>pd,e:()=>ug,f:()=>T,g:()=>ke,h:()=>X,i:()=>Gs,j:()=>Ht,k:()=>Co,l:()=>Zn,m:()=>S_,o:()=>ue,r:()=>Lu,s:()=>mo,u:()=>Ji,z:()=>Me});var _=L(5861),G=L(2090),N=L(9681),ie=L(655),ne=L(1877),ye=L(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new ne.Yd("@firebase/auth");function et(w,...p){Ie.logLevel<=ne.in.ERROR&&Ie.error(`Auth (${N.SDK_VERSION}): ${w}`,...p)}function $e(w,...p){throw Ze(w,...p)}function Re(w,...p){return Ze(w,...p)}function Ae(w,p,m){const I=Object.assign(Object.assign({},Le()),{[p]:m});return new G.LL("auth","Firebase",I).create(p,{appName:w.name})}function Ee(w,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&$e(w,"argument-error"),Ae(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...p){if("string"!=typeof w){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(m,...I)}return Ue.create(w,...p)}function ee(w,p,...m){if(!w)throw Ze(p,...m)}function Xe(w){const p="INTERNAL ASSERTION FAILED: "+w;throw et(p),new Error(p)}function Qe(w,p){w||Xe(p)}const se=new Map;function oe(w){Qe(w instanceof Function,"Expected a class definition");let p=se.get(w);return p?(Qe(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,se.set(w,p),p)}function pe(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Fe(){return"http:"===xt()||"https:"===xt()}function xt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class He{constructor(p,m){this.shortDelay=p,this.longDelay=m,Qe(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Yt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fe()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qt(w,p){Qe(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class lr{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xt=new He(3e4,6e4);function Kt(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Jt(w,p,m,I){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,_.Z)(function*(w,p,m,I,R={}){return _r(w,R,(0,_.Z)(function*(){let F={},J={};I&&("GET"===p?J=I:F={body:JSON.stringify(I)});const xe=(0,G.xO)(Object.assign({key:w.config.apiKey},J)).slice(1),at=yield w._getAdditionalHeaders();return at["Content-Type"]="application/json",w.languageCode&&(at["X-Firebase-Locale"]=w.languageCode),lr.fetch()(_i(w,w.config.apiHost,m,xe),Object.assign({method:p,headers:at,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function _r(w,p,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,_.Z)(function*(w,p,m){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},Mn),p);try{const R=new yr(w),F=yield Promise.race([m(),R.promise]);R.clearNetworkTimeout();const J=yield F.json();if("needConfirmation"in J)throw Sr(w,"account-exists-with-different-credential",J);if(F.ok&&!("errorMessage"in J))return J;{const xe=F.ok?J.errorMessage:J.error.message,[at,It]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===at)throw Sr(w,"credential-already-in-use",J);if("EMAIL_EXISTS"===at)throw Sr(w,"email-already-in-use",J);const Lt=I[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(It)throw Ae(w,Lt,It);$e(w,Lt)}}catch(R){if(R instanceof G.ZR)throw R;$e(w,"network-request-failed")}})).apply(this,arguments)}function Dr(w,p,m,I){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,_.Z)(function*(w,p,m,I,R={}){const F=yield Jt(w,p,m,I,R);return"mfaPendingCredential"in F&&$e(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function _i(w,p,m,I){const R=`${p}${m}?${I}`;return w.config.emulator?Qt(w.config,R):`${w.config.apiScheme}://${R}`}class yr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Re(this.auth,"network-request-failed")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sr(w,p,m){const I={appName:w.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const R=Re(w,p,I);return R.customData._tokenResponse=m,R}function dt(){return(dt=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Fr(w,p){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function an(w,p){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ii(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ur(){return(Ur=(0,_.Z)(function*(w,p=!1){const m=(0,G.m9)(w),I=yield m.getIdToken(p),R=Vt(I);ee(R&&R.exp&&R.auth_time&&R.iat,m.auth,"internal-error");const F="object"==typeof R.firebase?R.firebase:void 0,J=null==F?void 0:F.sign_in_provider;return{claims:R,token:I,authTime:ii(Ms(R.auth_time)),issuedAtTime:ii(Ms(R.iat)),expirationTime:ii(Ms(R.exp)),signInProvider:J||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function Ms(w){return 1e3*Number(w)}function Vt(w){const[p,m,I]=w.split(".");if(void 0===p||void 0===m||void 0===I)return et("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,G.tV)(m);return R?JSON.parse(R):(et("Failed to decode base64 JWT payload"),null)}catch(R){return et("Caught error parsing JWT payload as JSON",R),null}}function rt(w,p){return si.apply(this,arguments)}function si(){return(si=(0,_.Z)(function*(w,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof G.ZR&&Wi(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function Wi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Wt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const R=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,_.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,_.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class qi{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bn(w){return ln.apply(this,arguments)}function ln(){return(ln=(0,_.Z)(function*(w){var p;const m=w.auth,I=yield w.getIdToken(),R=yield rt(w,an(m,{idToken:I}));ee(null==R?void 0:R.users.length,m,"internal-error");const F=R.users[0];w._notifyReloadListener(F);const J=(null===(p=F.providerUserInfo)||void 0===p?void 0:p.length)?Ge(F.providerUserInfo):[],xe=qt(w.providerData,J),Lt=!!w.isAnonymous&&!(w.email&&F.passwordHash||(null==xe?void 0:xe.length)),dn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:xe,metadata:new qi(F.createdAt,F.lastLoginAt),isAnonymous:Lt};Object.assign(w,dn)})).apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(w){const p=(0,G.m9)(w);yield Bn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function qt(w,p){return[...w.filter(I=>!p.some(R=>R.providerId===I.providerId)),...p]}function Ge(w){return w.map(p=>{var{providerId:m}=p,I=(0,ie._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function tt(){return(tt=(0,_.Z)(function*(w,p){const m=yield _r(w,{},(0,_.Z)(function*(){const I=(0,G.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:R,apiKey:F}=w.config,J=_i(w,R,"/v1/token",`key=${F}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",lr.fetch()(J,{method:"POST",headers:xe,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ee(p.idToken,"internal-error"),ee(void 0!==p.idToken,"internal-error"),ee(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function lt(w){const p=Vt(w);return ee(p,"internal-error"),ee(void 0!==p.exp,"internal-error"),ee(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,_.Z)(function*(){return ee(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,_.Z)(function*(){const{accessToken:R,refreshToken:F,expiresIn:J}=yield function Ce(w,p){return tt.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(R,F,Number(J))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:R,expirationTime:F}=m,J=new ht;return I&&(ee("string"==typeof I,"internal-error",{appName:p}),J.refreshToken=I),R&&(ee("string"==typeof R,"internal-error",{appName:p}),J.accessToken=R),F&&(ee("number"==typeof F,"internal-error",{appName:p}),J.expirationTime=F),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new ht,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function Nt(w,p){ee("string"==typeof w||void 0===w,"internal-error",{appName:p})}class kt{constructor(p){var{uid:m,auth:I,stsTokenManager:R}=p,F=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new qi(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,_.Z)(function*(){const I=yield rt(m,m.stsTokenManager.getToken(m.auth,p));return ee(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function Nn(w){return Ur.apply(this,arguments)}(this,p)}reload(){return function _t(w){return jn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ee(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new kt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,_.Z)(function*(){let R=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),R=!0),m&&(yield Bn(I)),yield I.auth._persistUserIfCurrent(I),R&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,_.Z)(function*(){const m=yield p.getIdToken();return yield rt(p,function Gi(w,p){return dt.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,R,F,J,xe,at,It,Lt;const dn=null!==(I=m.displayName)&&void 0!==I?I:void 0,To=null!==(R=m.email)&&void 0!==R?R:void 0,Ui=null!==(F=m.phoneNumber)&&void 0!==F?F:void 0,Gu=null!==(J=m.photoURL)&&void 0!==J?J:void 0,vd=null!==(xe=m.tenantId)&&void 0!==xe?xe:void 0,Ql=null!==(at=m._redirectEventId)&&void 0!==at?at:void 0,R_=null!==(It=m.createdAt)&&void 0!==It?It:void 0,Xl=null!==(Lt=m.lastLoginAt)&&void 0!==Lt?Lt:void 0,{uid:da,emailVerified:pg,isAnonymous:Wu,providerData:Jl,stsTokenManager:gg}=m;ee(da&&gg,p,"internal-error");const df=ht.fromJSON(this.name,gg);ee("string"==typeof da,p,"internal-error"),Nt(dn,p.name),Nt(To,p.name),ee("boolean"==typeof pg,p,"internal-error"),ee("boolean"==typeof Wu,p,"internal-error"),Nt(Ui,p.name),Nt(Gu,p.name),Nt(vd,p.name),Nt(Ql,p.name),Nt(R_,p.name),Nt(Xl,p.name);const Ja=new kt({uid:da,auth:p,email:To,emailVerified:pg,displayName:dn,isAnonymous:Wu,photoURL:Gu,phoneNumber:Ui,tenantId:vd,stsTokenManager:df,createdAt:R_,lastLoginAt:Xl});return Jl&&Array.isArray(Jl)&&(Ja.providerData=Jl.map(M_=>Object.assign({},M_))),Ql&&(Ja._redirectEventId=Ql),Ja}static _fromIdTokenResponse(p,m,I=!1){return(0,_.Z)(function*(){const R=new ht;R.updateFromServerResponse(m);const F=new kt({uid:m.localId,auth:p,stsTokenManager:R,isAnonymous:I});return yield Bn(F),F})()}}const j=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(m,I){var R=this;return(0,_.Z)(function*(){R.storage[m]=I})()}_get(m){var I=this;return(0,_.Z)(function*(){const R=I.storage[m];return void 0===R?null:R})()}_remove(m){var I=this;return(0,_.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return w.type="NONE",w})();function Y(w,p,m){return`firebase:${w}:${p}:${m}`}class he{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:R,name:F}=this.auth;this.fullUserKey=Y(this.userKey,R.apiKey,F),this.fullPersistenceKey=Y("persistence",R.apiKey,F),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,_.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?kt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,_.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,_.Z)(function*(){if(!m.length)return new he(oe(j),p,I);const R=(yield Promise.all(m.map(function(){var It=(0,_.Z)(function*(Lt){if(yield Lt._isAvailable())return Lt});return function(Lt){return It.apply(this,arguments)}}()))).filter(It=>It);let F=R[0]||oe(j);const J=Y(I,p.config.apiKey,p.name);let xe=null;for(const It of m)try{const Lt=yield It._get(J);if(Lt){const dn=kt._fromJSON(p,Lt);It!==F&&(xe=dn),F=It;break}}catch(Lt){}const at=R.filter(It=>It._shouldAllowMigration);return F._shouldAllowMigration&&at.length?(F=at[0],xe&&(yield F._set(J,xe.toJSON())),yield Promise.all(m.map(function(){var It=(0,_.Z)(function*(Lt){if(Lt!==F)try{yield Lt._remove(J)}catch(dn){}});return function(Lt){return It.apply(this,arguments)}}())),new he(F,p,I)):new he(F,p,I)})()}}function O(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Be(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(V(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ct(p))return"Blackberry";if(nt(p))return"Webos";if($(p))return"Safari";if((p.includes("chrome/")||ae(p))&&!p.includes("edge/"))return"Chrome";if(Ke(p))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function V(w=(0,G.z$)()){return/firefox\//i.test(w)}function $(w=(0,G.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ae(w=(0,G.z$)()){return/crios\//i.test(w)}function Be(w=(0,G.z$)()){return/iemobile/i.test(w)}function Ke(w=(0,G.z$)()){return/android/i.test(w)}function Ct(w=(0,G.z$)()){return/blackberry/i.test(w)}function nt(w=(0,G.z$)()){return/webos/i.test(w)}function St(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)}function Cn(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Vr(w=(0,G.z$)()){return St(w)||Ke(w)||nt(w)||Ct(w)||/windows phone/i.test(w)||Be(w)}function nr(w,p=[]){let m;switch(w){case"Browser":m=O((0,G.z$)());break;case"Worker":m=`${O((0,G.z$)())}-${w}`;break;default:m=w}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${I}`}class Eu{constructor(p,m,I){this.app=p,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ye(this),this.idTokenSubscription=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,_.Z)(function*(){var R,F;if(!I._deleted&&(I.persistenceManager=yield he.create(I,p),!I._deleted)){if(null===(R=I._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(J){}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,_.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,_.Z)(function*(){var I;let R=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const F=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,J=null==R?void 0:R._redirectEventId,xe=yield m.tryRedirectSignIn(p);(!F||F===J)&&(null==xe?void 0:xe.user)&&(R=xe.user)}return R?R._redirectEventId?(ee(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)):m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,_.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(R){yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,_.Z)(function*(){try{yield Bn(p)}catch(I){if("auth/network-request-failed"!==I.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function on(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,_.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,_.Z)(function*(){const I=p?(0,G.m9)(p):null;return I&&ee(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,_.Z)(function*(){if(!m._deleted)return p&&ee(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,_.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,_.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,_.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new G.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,_.Z)(function*(){const R=yield I.getOrInitRedirectPersistenceManager(m);return null===p?R.removeCurrentUser():R.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,_.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&oe(p)||m._popupRedirectResolver;ee(I,m,"argument-error"),m.redirectPersistenceManager=yield he.create(m,[oe(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,_.Z)(function*(){var I,R;return m._isInitialized&&(yield m.queue((0,_.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(R=m.redirectUser)||void 0===R?void 0:R._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,_.Z)(function*(){if(p===m.currentUser)return m.queue((0,_.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,R){if(this._deleted)return()=>{};const F="function"==typeof m?m:m.next.bind(m),J=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(J,this,"internal-error"),J.then(()=>F(this.currentUser)),"function"==typeof m?p.addObserver(m,I,R):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,_.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=nr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,_.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const R=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return R&&(I["X-Firebase-Client"]=R),I})()}}function hn(w){return(0,G.m9)(w)}class Ye{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,G.ne)(m=>this.observer=m)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $t(w,p,m){const I=hn(w);ee(I._canInitEmulator,I,"emulator-config-failed"),ee(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const R=!!(null==m?void 0:m.disableWarnings),F=fn(p),{host:J,port:xe}=function Br(w){const p=fn(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(I);if(R){const F=R[1];return{host:F,port:is(I.substr(F.length+1))}}{const[F,J]=I.split(":");return{host:F,port:is(J)}}}(p);I.config.emulator={url:`${F}//${J}${null===xe?"":`:${xe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:J,port:xe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function dr(){function w(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function fn(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function is(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class jr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Xe("not implemented")}_getIdTokenResponse(p){return Xe("not implemented")}_linkToIdToken(p,m){return Xe("not implemented")}_getReauthenticationResolver(p){return Xe("not implemented")}}function Tn(w,p){return $n.apply(this,arguments)}function $n(){return($n=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:resetPassword",Kt(w,p))})).apply(this,arguments)}function no(w,p){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Iu(w,p){return ss.apply(this,arguments)}function ss(){return(ss=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",Kt(w,p))})).apply(this,arguments)}function zi(){return(zi=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signInWithPassword",Kt(w,p))})).apply(this,arguments)}function Ar(w,p){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:sendOobCode",Kt(w,p))})).apply(this,arguments)}function ro(w,p){return $r.apply(this,arguments)}function $r(){return($r=(0,_.Z)(function*(w,p){return Ar(w,p)})).apply(this,arguments)}function mn(w,p){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,_.Z)(function*(w,p){return Ar(w,p)})).apply(this,arguments)}function Kc(w,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.Z)(function*(w,p){return Ar(w,p)})).apply(this,arguments)}function Ki(w,p){return bu.apply(this,arguments)}function bu(){return(bu=(0,_.Z)(function*(w,p){return Ar(w,p)})).apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signInWithEmailLink",Kt(w,p))})).apply(this,arguments)}function Cl(){return(Cl=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signInWithEmailLink",Kt(w,p))})).apply(this,arguments)}class Cu extends jr{constructor(p,m,I,R=null){super("password",I),this._email=p,this._password=m,this._tenantId=R}static _fromEmailAndPassword(p,m){return new Cu(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Cu(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,_.Z)(function*(){switch(m.signInMethod){case"password":return function bl(w,p){return zi.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Bo(w,p){return jo.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:$e(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,_.Z)(function*(){switch(I.signInMethod){case"password":return no(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Mi(w,p){return Cl.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:$e(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ns(w,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signInWithIdp",Kt(w,p))})).apply(this,arguments)}class os extends jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new os(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):$e("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:R}=m,F=(0,ie._T)(m,["providerId","signInMethod"]);if(!I||!R)return null;const J=new os(I,R);return J.idToken=F.idToken||void 0,J.accessToken=F.accessToken||void 0,J.secret=F.secret,J.nonce=F.nonce,J.pendingToken=F.pendingToken||null,J}_getIdTokenResponse(p){return Ns(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Ns(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ns(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,G.xO)(m)}return p}}function Xp(w,p){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:sendVerificationCode",Kt(w,p))})).apply(this,arguments)}function Pa(){return(Pa=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,p))})).apply(this,arguments)}function Yc(){return(Yc=(0,_.Z)(function*(w,p){const m=yield Dr(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,p));if(m.temporaryProof)throw Sr(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const eg={USER_NOT_FOUND:"user-not-found"};function Qc(){return(Qc=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),eg)})).apply(this,arguments)}class Ho extends jr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Ho({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Ho({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Jp(w,p){return Pa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function $o(w,p){return Yc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function tg(w,p){return Qc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:R}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:R}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:R,temporaryProof:F}=p;return I||m||R||F?new Ho({verificationId:m,verificationCode:I,phoneNumber:R,temporaryProof:F}):null}}class ks{constructor(p){var m,I,R,F,J,xe;const at=(0,G.zd)((0,G.pd)(p)),It=null!==(m=at.apiKey)&&void 0!==m?m:null,Lt=null!==(I=at.oobCode)&&void 0!==I?I:null,dn=function ng(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=at.mode)&&void 0!==R?R:null);ee(It&&Lt&&dn,"argument-error"),this.apiKey=It,this.operation=dn,this.code=Lt,this.continueUrl=null!==(F=at.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(J=at.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(xe=at.tenantId)&&void 0!==xe?xe:null}static parseLink(p){const m=function v_(w){const p=(0,G.zd)((0,G.pd)(w)).link,m=p?(0,G.zd)((0,G.pd)(p)).deep_link_id:null,I=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(I?(0,G.zd)((0,G.pd)(I)).link:null)||I||m||p||w}(p);try{return new ks(m)}catch(I){return null}}}let Tu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,I){return Cu._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const R=ks.parseLink(I);return ee(R,"argument-error"),Cu._fromEmailAndCode(m,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class as{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Na extends as{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class yi extends Na{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ee("providerId"in m&&"signInMethod"in m,"argument-error"),os._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ee(p.idToken||p.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return yi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return yi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:R,pendingToken:F,nonce:J,providerId:xe}=p;if(!I&&!R&&!m&&!F||!xe)return null;try{return new yi(xe)._credential({idToken:m,accessToken:I,nonce:J,pendingToken:F})}catch(at){return null}}}let jh=(()=>{class w extends Na{constructor(){super("facebook.com")}static credential(m){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(I){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Go=(()=>{class w extends Na{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:R}=m;if(!I&&!R)return null;try{return w.credential(I,R)}catch(F){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Du=(()=>{class w extends Na{constructor(){super("github.com")}static credential(m){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(I){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ka extends jr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Ns(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Ns(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ns(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:R,pendingToken:F}=m;return I&&R&&F&&I===R?new ka(I,F):null}static _create(p,m){return new ka(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pi extends as{constructor(p){ee(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Pi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Pi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=ka.fromJSON(p);return ee(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return ka._create(I,m)}catch(R){return null}}}let us=(()=>{class w extends Na{constructor(){super("twitter.com")}static credential(m,I){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:R}=m;if(!I||!R)return null;try{return w.credential(I,R)}catch(F){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Su(w,p){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signUp",Kt(w,p))})).apply(this,arguments)}class kn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,R=!1){return(0,_.Z)(function*(){const F=yield kt._fromIdTokenResponse(p,I,R),J=Wo(I);return new kn({user:F,providerId:J,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,_.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const R=Wo(I);return new kn({user:p,providerId:R,_tokenResponse:I,operationType:m})})()}}function Wo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function rg(w){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.Z)(function*(w){var p;const m=hn(w);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new kn({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Su(m,{returnSecureToken:!0}),R=yield kn._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class Tl extends G.ZR{constructor(p,m,I,R){var F;super(m.code,m.message),this.operationType=I,this.user=R,Object.setPrototypeOf(this,Tl.prototype),this.customData={appName:p.name,tenantId:null!==(F=p.tenantId)&&void 0!==F?F:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,R){return new Tl(p,m,I,R)}}function Jc(w,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Tl._fromErrorAndOperation(w,F,p,I):F})}function Au(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function Os(w,p){return io.apply(this,arguments)}function io(){return(io=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w);yield so(!0,m,p);const{providerUserInfo:I}=yield Fr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),R=Au(I||[]);return m.providerData=m.providerData.filter(F=>R.has(F.providerId)),R.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Dl(w,p){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.Z)(function*(w,p,m=!1){const I=yield rt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),m);return kn._forOperation(w,"link",I)})).apply(this,arguments)}function so(w,p,m){return oo.apply(this,arguments)}function oo(){return(oo=(0,_.Z)(function*(w,p,m){yield Bn(p);const R=!1===w?"provider-already-linked":"no-such-provider";ee(Au(p.providerData).has(m)===w,p.auth,R)})).apply(this,arguments)}function pn(w,p){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,_.Z)(function*(w,p,m=!1){const{auth:I}=w,R="reauthenticate";try{const F=yield rt(w,Jc(I,R,p,w),m);ee(F.idToken,I,"internal-error");const J=Vt(F.idToken);ee(J,I,"internal-error");const{sub:xe}=J;return ee(w.uid===xe,I,"user-mismatch"),kn._forOperation(w,R,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&$e(I,"user-mismatch"),F}})).apply(this,arguments)}function zo(w,p){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,_.Z)(function*(w,p,m=!1){const I="signIn",R=yield Jc(w,I,p),F=yield kn._fromIdTokenResponse(w,I,R);return m||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function xr(w,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,_.Z)(function*(w,p){return zo(hn(w),p)})).apply(this,arguments)}function xu(w,p){return vi.apply(this,arguments)}function vi(){return(vi=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w);return yield so(!1,m,p.providerId),Dl(m,p)})).apply(this,arguments)}function zr(w,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,_.Z)(function*(w,p){return pn((0,G.m9)(w),p)})).apply(this,arguments)}function ao(w,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,_.Z)(function*(w,p){return Dr(w,"POST","/v1/accounts:signInWithCustomToken",Kt(w,p))})).apply(this,arguments)}function Ni(w,p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,_.Z)(function*(w,p){const m=hn(w),I=yield ao(m,{token:p,returnSecureToken:!0}),R=yield kn._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class cs{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?vt._fromServerResponse(p,m):$e(p,"internal-error")}}class vt extends cs{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new vt(m)}}function La(w,p,m){var I;ee((null===(I=m.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ee(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ee(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ee(m.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function ed(w,p,m){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),R={requestType:"PASSWORD_RESET",email:p};m&&La(I,R,m),yield mn(I,R)})).apply(this,arguments)}function td(w,p,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,_.Z)(function*(w,p,m){yield Tn((0,G.m9)(w),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Gh(w,p){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,_.Z)(function*(w,p){yield Iu((0,G.m9)(w),{oobCode:p})})).apply(this,arguments)}function De(w,p){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w),I=yield Tn(m,{oobCode:p}),R=I.requestType;switch(ee(R,m,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(I.mfaInfo,m,"internal-error");default:ee(I.email,m,"internal-error")}let F=null;return I.mfaInfo&&(F=cs._fromServerResponse(hn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:R}})).apply(this,arguments)}function Wh(w,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,_.Z)(function*(w,p){const{data:m}=yield De((0,G.m9)(w),p);return m.email})).apply(this,arguments)}function Ru(w,p,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,_.Z)(function*(w,p,m){const I=hn(w),R=yield Su(I,{returnSecureToken:!0,email:p,password:m}),F=yield kn._fromIdTokenResponse(I,"signIn",R);return yield I._updateCurrentUser(F.user),F})).apply(this,arguments)}function ki(w,p,m){return xr((0,G.m9)(w),Tu.credential(p,m))}function Al(w,p,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),R={requestType:"EMAIL_SIGNIN",email:p};ee(m.handleCodeInApp,I,"argument-error"),m&&La(I,R,m),yield Kc(I,R)})).apply(this,arguments)}function ig(w,p){const m=ks.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function xl(w,p,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),R=Tu.credentialWithLink(p,m||pe());return ee(R._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),xr(I,R)})).apply(this,arguments)}function Xo(w,p){return hr.apply(this,arguments)}function hr(){return(hr=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:createAuthUri",Kt(w,p))})).apply(this,arguments)}function Yi(w,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,_.Z)(function*(w,p){const I={identifier:p,continueUri:Fe()?pe():"http://localhost"},{signinMethods:R}=yield Xo((0,G.m9)(w),I);return R||[]})).apply(this,arguments)}function ea(w,p){return ui.apply(this,arguments)}function ui(){return(ui=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&La(m.auth,R,p);const{email:F}=yield ro(m.auth,R);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function qh(w,p,m){return ta.apply(this,arguments)}function ta(){return(ta=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};m&&La(I.auth,F,m);const{email:J}=yield Ki(I.auth,F);J!==w.email&&(yield w.reload())})).apply(this,arguments)}function nd(w,p){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Rl(w,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,_.Z)(function*(w,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,G.m9)(w),F={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},J=yield rt(I,nd(I.auth,F));I.displayName=J.displayName||null,I.photoURL=J.photoUrl||null;const xe=I.providerData.find(({providerId:at})=>"password"===at);xe&&(xe.displayName=I.displayName,xe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(J)})).apply(this,arguments)}function zh(w,p){return Pl((0,G.m9)(w),p,null)}function Ml(w,p){return Pl((0,G.m9)(w),null,p)}function Pl(w,p,m){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,_.Z)(function*(w,p,m){const{auth:I}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(F.email=p),m&&(F.password=m);const J=yield rt(w,no(I,F));yield w._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class lo{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class Nl extends lo{constructor(p,m,I,R){super(p,m,I),this.username=R}}class Kh extends lo{constructor(p,m){super(p,"facebook.com",m)}}class rd extends Nl{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class co extends lo{constructor(p,m){super(p,"google.com",m)}}class Us extends Nl{constructor(p,m,I){super(p,"twitter.com",m,I)}}function kl(w){const{user:p,_tokenResponse:m}=w;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ba(w){var p,m;if(!w)return null;const{providerId:I}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&(null==w?void 0:w.idToken)){const J=null===(m=null===(p=Vt(w.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(J)return new lo(F,"anonymous"!==J&&"custom"!==J?J:null)}if(!I)return null;switch(I){case"facebook.com":return new Kh(F,R);case"github.com":return new rd(F,R);case"google.com":return new co(F,R);case"twitter.com":return new Us(F,R,w.screenName||null);case"custom":case"anonymous":return new lo(F,null);default:return new lo(F,I,R)}}(m)}class ho{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new ho("enroll",p)}static _fromMfaPendingCredential(p){return new ho("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ho._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(I=p.multiFactorSession)||void 0===I?void 0:I.idToken)return ho._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ja{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=hn(p),R=m.customData._serverResponse,F=(R.mfaInfo||[]).map(xe=>cs._fromServerResponse(I,xe));ee(R.mfaPendingCredential,I,"internal-error");const J=ho._fromMfaPendingCredential(R.mfaPendingCredential);return new ja(J,F,function(){var xe=(0,_.Z)(function*(at){const It=yield at._process(I,J);delete R.mfaInfo,delete R.mfaPendingCredential;const Lt=Object.assign(Object.assign({},R),{idToken:It.idToken,refreshToken:It.refreshToken});switch(m.operationType){case"signIn":const dn=yield kn._fromIdTokenResponse(I,m.operationType,Lt);return yield I._updateCurrentUser(dn.user),dn;case"reauthenticate":return ee(m.user,I,"internal-error"),kn._forOperation(m.user,m.operationType,Lt);default:$e(I,"internal-error")}});return function(at){return xe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,_.Z)(function*(){return m.signInResolver(p)})()}}function Ll(w,p){var m;const I=(0,G.m9)(w),R=p;return ee(p.customData.operationType,I,"argument-error"),ee(null===(m=R.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),ja._fromError(I,R)}function Pu(w,p){return Jt(w,"POST","/v2/accounts/mfaEnrollment:start",Kt(w,p))}class od{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>cs._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new od(p)}getSession(){var p=this;return(0,_.Z)(function*(){return ho._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var I=this;return(0,_.Z)(function*(){const R=p,F=yield I.getSession(),J=yield rt(I.user,R._process(I.user.auth,F,m));return yield I.user._updateTokensIfNecessary(J),I.user.reload()})()}unenroll(p){var m=this;return(0,_.Z)(function*(){const I="string"==typeof p?p:p.uid,R=yield m.user.getIdToken(),F=yield rt(m.user,function sd(w,p){return Jt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(w,p))}(m.user.auth,{idToken:R,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:J})=>J!==I),yield m.user._updateTokensIfNecessary(F);try{yield m.user.reload()}catch(J){if("auth/user-token-expired"!==J.code)throw J}})()}}const ds=new WeakMap;function Nu(w){const p=(0,G.m9)(w);return ds.has(p)||ds.set(p,od._fromUser(p)),ds.get(p)}const $a="__sak";class Yh{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem($a,"1"),this.storage.removeItem($a),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const En=(()=>{class w extends Yh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function na(){const w=(0,G.z$)();return $(w)||St(w)}()&&function Ri(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Vr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const R=this.storage.getItem(I),F=this.localCache[I];R!==F&&m(I,F,R)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((xe,at,It)=>{this.notifyListeners(xe,It)});const R=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(R);if(m.newValue!==xe)null!==m.newValue?this.storage.setItem(R,m.newValue):this.storage.removeItem(R);else if(this.localCache[R]===m.newValue&&!I)return}const F=()=>{const xe=this.storage.getItem(R);!I&&this.localCache[R]===xe||this.notifyListeners(R,xe)},J=this.storage.getItem(R);!function Zt(){return(0,G.w1)()&&10===document.documentMode}()||J===m.newValue||m.newValue===m.oldValue?F():setTimeout(F,10)}notifyListeners(m,I){this.localCache[m]=I;const R=this.listeners[m];if(R)for(const F of Array.from(R))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var R=()=>super._set,F=this;return(0,_.Z)(function*(){yield R().call(F,m,I),F.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,R=this;return(0,_.Z)(function*(){const F=yield I().call(R,m);return R.localCache[m]=JSON.stringify(F),F})()}_remove(m){var I=()=>super._remove,R=this;return(0,_.Z)(function*(){yield I().call(R,m),delete R.localCache[m]})()}}return w.type="LOCAL",w})(),gt=(()=>{class w extends Yh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return w.type="SESSION",w})();let li=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(F=>F.isListeningto(m));if(I)return I;const R=new w(m);return this.receivers.push(R),R}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,_.Z)(function*(){const R=m,{eventId:F,eventType:J,data:xe}=R.data,at=I.handlersMap[J];if(!(null==at?void 0:at.size))return;R.ports[0].postMessage({status:"ack",eventId:F,eventType:J});const It=Array.from(at).map(function(){var dn=(0,_.Z)(function*(To){return To(R.origin,xe)});return function(To){return dn.apply(this,arguments)}}()),Lt=yield function hs(w){return Promise.all(w.map(function(){var p=(0,_.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(It);R.ports[0].postMessage({status:"done",eventId:F,eventType:J,response:Lt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function fr(w="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return w+m}class ud{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var R=this;return(0,_.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let J,xe;return new Promise((at,It)=>{const Lt=fr("",20);F.port1.start();const dn=setTimeout(()=>{It(new Error("unsupported_event"))},I);xe={messageChannel:F,onMessage(To){const Ui=To;if(Ui.data.eventId===Lt)switch(Ui.data.status){case"ack":clearTimeout(dn),J=setTimeout(()=>{It(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),at(Ui.data.response);break;default:clearTimeout(dn),clearTimeout(J),It(new Error("invalid_response"))}}},R.handlers.add(xe),F.port1.addEventListener("message",xe.onMessage),R.target.postMessage({eventType:p,eventId:Lt,data:m},[F.port2])}).finally(()=>{xe&&R.removeMessageHandler(xe)})})()}}function Kn(){return window}function Fl(){return void 0!==Kn().WorkerGlobalScope&&"function"==typeof Kn().importScripts}function ra(){return(ra=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Ul="firebaseLocalStorageDb",ku="firebaseLocalStorage",Ou="fbase_key";class In{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function $s(w,p){return w.transaction([ku],p?"readwrite":"readonly").objectStore(ku)}function Zr(){const w=indexedDB.open(Ul,1);return new Promise((p,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(ku,{keyPath:Ou})}catch(R){m(R)}}),w.addEventListener("success",(0,_.Z)(function*(){const I=w.result;I.objectStoreNames.contains(ku)?p(I):(I.close(),yield function Vl(){const w=indexedDB.deleteDatabase(Ul);return new In(w).toPromise()}(),p(yield Zr()))}))})}function fo(w,p,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,_.Z)(function*(w,p,m){const I=$s(w,!0).put({[Ou]:p,value:m});return new In(I).toPromise()})).apply(this,arguments)}function Ha(){return(Ha=(0,_.Z)(function*(w,p){const m=$s(w,!1).get(p),I=yield new In(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function po(w,p){const m=$s(w,!0).delete(p);return new In(m).toPromise()}const Gs=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,_.Z)(function*(){return m.db||(m.db=yield Zr()),m.db})()}_withRetries(m){var I=this;return(0,_.Z)(function*(){let R=0;for(;;)try{const F=yield I._openDb();return yield m(F)}catch(F){if(R++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,_.Z)(function*(){return Fl()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,_.Z)(function*(){m.receiver=li._getInstance(function Rt(){return Fl()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,_.Z)(function*(R,F){return{keyProcessed:(yield m._poll()).includes(F.key)}});return function(R,F){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,_.Z)(function*(R,F){return["keyChanged"]});return function(R,F){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,_.Z)(function*(){var I,R;if(m.activeServiceWorker=yield function js(){return ra.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ud(m.activeServiceWorker);const F=yield m.sender._send("ping",{},800);!F||(null===(I=F[0])||void 0===I?void 0:I.fulfilled)&&(null===(R=F[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,_.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Oi(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Zr();return yield fo(m,$a,"1"),yield po(m,$a),!0}catch(m){}return!1})()}_withPendingWrite(m){var I=this;return(0,_.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var R=this;return(0,_.Z)(function*(){return R._withPendingWrite((0,_.Z)(function*(){return yield R._withRetries(F=>fo(F,m,I)),R.localCache[m]=I,R.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,_.Z)(function*(){const R=yield I._withRetries(F=>function Hs(w,p){return Ha.apply(this,arguments)}(F,m));return I.localCache[m]=R,R})()}_remove(m){var I=this;return(0,_.Z)(function*(){return I._withPendingWrite((0,_.Z)(function*(){return yield I._withRetries(R=>po(R,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,_.Z)(function*(){const I=yield m._withRetries(J=>{const xe=$s(J,!1).getAll();return new In(xe).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const R=[],F=new Set;for(const{fbase_key:J,value:xe}of I)F.add(J),JSON.stringify(m.localCache[J])!==JSON.stringify(xe)&&(m.notifyListeners(J,xe),R.push(J));for(const J of Object.keys(m.localCache))m.localCache[J]&&!F.has(J)&&(m.notifyListeners(J,null),R.push(J));return R})()}notifyListeners(m,I){this.localCache[m]=I;const R=this.listeners[m];if(R)for(const F of Array.from(R))F(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function sa(w,p){return Jt(w,"POST","/v2/accounts/mfaSignIn:start",Kt(w,p))}function sr(){return(sr=(0,_.Z)(function*(w){return(yield Jt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function cd(w){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=p,I.onerror=R=>{const F=Re("internal-error");F.customData=R,m(F)},I.type="text/javascript",I.charset="UTF-8",function ps(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(I)})}function An(w){return`__${w}${Math.floor(1e6*Math.random())}`}const gs=1e12;class Yr{constructor(p){this.auth=p,this.counter=gs,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new ms(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||gs;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||gs))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,_.Z)(function*(){var I;return null===(I=m._widgets.get(p||gs))||void 0===I||I.execute(),""})()}}class ms{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof p?document.getElementById(p):p;ee(R,"argument-error",{appName:m}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qi(w){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xn=An("rcb"),aa=new He(3e4,6e4);class On{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Kn().grecaptcha}load(p,m=""){return ee(function sg(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Kn().grecaptcha):new Promise((I,R)=>{const F=Kn().setTimeout(()=>{R(Re(p,"network-request-failed"))},aa.get());Kn()[xn]=()=>{Kn().clearTimeout(F),delete Kn()[xn];const xe=Kn().grecaptcha;if(!xe)return void R(Re(p,"internal-error"));const at=xe.render;xe.render=(It,Lt)=>{const dn=at(It,Lt);return this.counter++,dn},this.hostLanguage=m,I(xe)},cd(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:xn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(F),R(Re(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Kn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class og{load(p){return(0,_.Z)(function*(){return new Yr(p)})()}clearedOneInstance(){}}const Jh="recaptcha",go={theme:"light",type:"image"};class ci{constructor(p,m=Object.assign({},go),I){this.parameters=m,this.type=Jh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(I),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof p?document.getElementById(p):p;ee(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new og:new On,this.validateStartingState()}verify(){var p=this;return(0,_.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(F=>{const J=xe=>{!xe||(p.tokenChangeListeners.delete(J),F(xe))};p.tokenChangeListeners.add(J),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Kn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,_.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,_.Z)(function*(){ee(Fe()&&!Fl(),p.auth,"internal-error"),yield function ag(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Ga(w){return sr.apply(this,arguments)}(p.auth);ee(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xi{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Ho._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function mo(w,p,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,_.Z)(function*(w,p,m){const I=hn(w),R=yield Fu(I,p,(0,G.m9)(m));return new Xi(R,F=>xr(I,F))})).apply(this,arguments)}function Zn(w,p,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);yield so(!1,I,"phone");const R=yield Fu(I.auth,p,(0,G.m9)(m));return new Xi(R,F=>xu(I,F))})).apply(this,arguments)}function Lu(w,p,m){return hd.apply(this,arguments)}function hd(){return(hd=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),R=yield Fu(I.auth,p,(0,G.m9)(m));return new Xi(R,F=>zr(I,F))})).apply(this,arguments)}function Fu(w,p,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,_.Z)(function*(w,p,m){var I;const R=yield m.verify();try{let F;if(ee("string"==typeof R,w,"argument-error"),ee(m.type===Jh,w,"argument-error"),F="string"==typeof p?{phoneNumber:p}:p,"session"in F){const J=F.session;if("phoneNumber"in F)return ee("enroll"===J.type,w,"internal-error"),(yield Pu(w,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ee("signin"===J.type,w,"internal-error");const xe=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return ee(xe,w,"missing-multi-factor-info"),(yield sa(w,{mfaPendingCredential:J.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Xp(w,{phoneNumber:F.phoneNumber,recaptchaToken:R});return J}}finally{m._reset()}})).apply(this,arguments)}function Ji(w,p){return za.apply(this,arguments)}function za(){return(za=(0,_.Z)(function*(w,p){yield Dl((0,G.m9)(w),p)})).apply(this,arguments)}let _o=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=hn(m)}verifyPhoneNumber(m,I){return Fu(this.auth,m,(0,G.m9)(I))}static credential(m,I){return Ho._fromVerification(m,I)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:R}=m;return I&&R?Ho._fromTokenResponse(I,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function di(w,p){return p?oe(p):(ee(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class la extends jr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ns(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Ns(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Ns(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function jl(w){return zo(w.auth,new la(w),w.bypassAuthState)}function $l(w){const{auth:p,user:m}=w;return ee(m,p,"internal-error"),pn(m,new la(w),w.bypassAuthState)}function Hl(w){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,_.Z)(function*(w){const{auth:p,user:m}=w;return ee(m,p,"internal-error"),Dl(m,new la(w),w.bypassAuthState)})).apply(this,arguments)}class fd{constructor(p,m,I,R,F=!1){this.auth=p,this.resolver=I,this.user=R,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,_.Z)(function*(I,R){p.pendingPromise={resolve:I,reject:R};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(F){p.reject(F)}});return function(I,R){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,_.Z)(function*(){const{urlResponse:I,sessionId:R,postBody:F,tenantId:J,error:xe,type:at}=p;if(xe)return void m.reject(xe);const It={auth:m.auth,requestUri:I,sessionId:R,tenantId:J||void 0,postBody:F||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(at)(It))}catch(Lt){m.reject(Lt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return jl;case"linkViaPopup":case"linkViaRedirect":return Hl;case"reauthViaPopup":case"reauthViaRedirect":return $l;default:$e(this.auth,"internal-error")}}resolve(p){Qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vr=new He(2e3,1e4);function Gl(w,p,m){return es.apply(this,arguments)}function es(){return(es=(0,_.Z)(function*(w,p,m){const I=hn(w);Ee(w,p,as);const R=di(I,m);return new Uu(I,"signInViaPopup",p,R).executeNotNull()})).apply(this,arguments)}function ug(w,p,m){return _s.apply(this,arguments)}function _s(){return(_s=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ee(I.auth,p,as);const R=di(I.auth,m);return new Uu(I.auth,"reauthViaPopup",p,R,I).executeNotNull()})).apply(this,arguments)}function pd(w,p,m){return wi.apply(this,arguments)}function wi(){return(wi=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ee(I.auth,p,as);const R=di(I.auth,m);return new Uu(I.auth,"linkViaPopup",p,R,I).executeNotNull()})).apply(this,arguments)}let Uu=(()=>{class w extends fd{constructor(m,I,R,F,J){super(m,I,F,J),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,_.Z)(function*(){const I=yield m.execute();return ee(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,_.Z)(function*(){Qe(1===m.filter.length,"Popup operations only handle one event");const I=fr();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(R=>{m.reject(R)}),m.resolver._isIframeWebStorageSupported(m.auth,R=>{R||m.reject(Re(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,R;this.pollId=(null===(R=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,vr.get())};m()}}return w.currentPopupAction=null,w})();const Ka=new Map;class yo extends fd{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,_.Z)(function*(){let I=Ka.get(m.auth._key());if(!I){try{const F=(yield function or(w,p){return Qr.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(F)}catch(R){I=()=>Promise.reject(R)}Ka.set(m.auth._key(),I)}return m.bypassAuthState||Ka.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,_.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const R=yield I.auth._redirectUserForId(p.eventId);if(R)return I.user=R,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Qr(){return(Qr=(0,_.Z)(function*(w,p){const m=C(p),I=Za(w);if(!(yield I._isAvailable()))return!1;const R="true"===(yield I._get(m));return yield I._remove(m),R})).apply(this,arguments)}function Wl(w,p){return vo.apply(this,arguments)}function vo(){return(vo=(0,_.Z)(function*(w,p){return Za(w)._set(C(p),"true")})).apply(this,arguments)}function Vu(){Ka.clear()}function Za(w){return oe(w._redirectPersistence)}function C(w){return Y("pendingRedirect",w.config.apiKey,w.name)}function T(w,p,m){return function M(w,p,m){return B.apply(this,arguments)}(w,p,m)}function B(){return(B=(0,_.Z)(function*(w,p,m){const I=hn(w);Ee(w,p,as);const R=di(I,m);return yield Wl(R,I),R._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function X(w,p,m){return function re(w,p,m){return Pe.apply(this,arguments)}(w,p,m)}function Pe(){return(Pe=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ee(I.auth,p,as);const R=di(I.auth,m);yield Wl(R,I.auth);const F=yield Ya(I);return R._openRedirect(I.auth,p,"reauthViaRedirect",F)})).apply(this,arguments)}function ke(w,p,m){return function it(w,p,m){return Tt.apply(this,arguments)}(w,p,m)}function Tt(){return(Tt=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ee(I.auth,p,as);const R=di(I.auth,m);yield so(!1,I,p.providerId),yield Wl(R,I.auth);const F=yield Ya(I);return R._openRedirect(I.auth,p,"linkViaRedirect",F)})).apply(this,arguments)}function Ht(w,p){return At.apply(this,arguments)}function At(){return(At=(0,_.Z)(function*(w,p){return yield hn(w)._initializationPromise,ar(w,p,!1)})).apply(this,arguments)}function ar(w,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,_.Z)(function*(w,p,m=!1){const I=hn(w),R=di(I,p),J=yield new yo(I,R,m).execute();return J&&!m&&(delete J.user._redirectEventId,yield I._persistUserIfCurrent(J.user),yield I._setRedirectUser(null,p)),J})).apply(this,arguments)}function Ya(w){return qs.apply(this,arguments)}function qs(){return(qs=(0,_.Z)(function*(w){const p=fr(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class hi{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ef(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wo(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!wo(p)){const R=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Re(this.auth,R))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fi(p))}saveEventToCache(p){this.cachedEventUids.add(Fi(p)),this.lastProcessedEventTime=Date.now()}}function Fi(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function wo({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Bu(w){return ju.apply(this,arguments)}function ju(){return(ju=(0,_.Z)(function*(w,p={}){return Jt(w,"GET","/v1/projects",p)})).apply(this,arguments)}const ql=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lg=/^https?/;function tf(){return(tf=(0,_.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Bu(w);for(const m of p)try{if(Eo(m))return}catch(I){}$e(w,"unauthorized-domain")})).apply(this,arguments)}function Eo(w){const p=pe(),{protocol:m,hostname:I}=new URL(p);if(w.startsWith("chrome-extension://")){const J=new URL(w);return""===J.hostname&&""===I?"chrome-extension:"===m&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&J.hostname===I}if(!lg.test(m))return!1;if(ql.test(w))return I===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(I)}const zl=new He(3e4,6e4);function cg(){const w=Kn().___jsl;if(null==w?void 0:w.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let Kl=null;function I_(w){return Kl=Kl||function ww(w){return new Promise((p,m)=>{var I,R,F;function J(){cg(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{cg(),m(Re(w,"network-request-failed"))},timeout:zl.get()})}if(null===(R=null===(I=Kn().gapi)||void 0===I?void 0:I.iframes)||void 0===R?void 0:R.Iframe)p(gapi.iframes.getContext());else{if(!(null===(F=Kn().gapi)||void 0===F?void 0:F.load)){const xe=An("iframefcb");return Kn()[xe]=()=>{gapi.load?J():m(Re(w,"network-request-failed"))},cd(`https://apis.google.com/js/api.js?onload=${xe}`).catch(at=>m(at))}J()}}).catch(p=>{throw Kl=null,p})}(w),Kl}const b_=new He(5e3,15e3),Io={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gd(w){const p=w.config;ee(p.authDomain,w,"auth-domain-config-required");const m=p.emulator?Qt(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:w.name,v:N.SDK_VERSION},R=bo.get(w.config.apiHost);R&&(I.eid=R);const F=w._getFrameworks();return F.length&&(I.fw=F.join(",")),`${m}?${(0,G.xO)(I).slice(1)}`}function sf(){return sf=(0,_.Z)(function*(w){const p=yield I_(w),m=Kn().gapi;return ee(m,w,"internal-error"),p.open({where:document.body,url:gd(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Io,dontclear:!0},I=>new Promise(function(){var R=(0,_.Z)(function*(F,J){yield I.restyle({setHideOnLeave:!1});const xe=Re(w,"network-request-failed"),at=Kn().setTimeout(()=>{J(xe)},b_.get());function It(){Kn().clearTimeout(at),F(I)}I.ping(It).then(It,()=>{J(xe)})});return function(F,J){return R.apply(this,arguments)}}()))}),sf.apply(this,arguments)}const $u={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Xa(w,p,m,I,R,F){ee(w.config.authDomain,w,"auth-domain-config-required"),ee(w.config.apiKey,w,"invalid-api-key");const J={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:I,v:N.SDK_VERSION,eventId:R};if(p instanceof as){p.setDefaultLanguage(w.languageCode),J.providerId=p.providerId||"",(0,G.xb)(p.getCustomParameters())||(J.customParameters=JSON.stringify(p.getCustomParameters()));for(const[at,It]of Object.entries(F||{}))J[at]=It}if(p instanceof Na){const at=p.getScopes().filter(It=>""!==It);at.length>0&&(J.scopes=at.join(","))}w.tenantId&&(J.tid=w.tenantId);const xe=J;for(const at of Object.keys(xe))void 0===xe[at]&&delete xe[at];return`${function D_({config:w}){return w.emulator?Qt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(xe).slice(1)}`}const cf="webStorageSupport",Co=class ca{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gt,this._completeRedirectFn=ar}_openPopup(p,m,I,R){var F=this;return(0,_.Z)(function*(){var J;Qe(null===(J=F.eventManagers[p._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const xe=Xa(p,m,I,pe(),R);return function uf(w,p,m,I=500,R=600){const F=Math.max((window.screen.availHeight-R)/2,0).toString(),J=Math.max((window.screen.availWidth-I)/2,0).toString();let xe="";const at=Object.assign(Object.assign({},$u),{width:I.toString(),height:R.toString(),top:F,left:J}),It=(0,G.z$)().toLowerCase();m&&(xe=ae(It)?"_blank":m),V(It)&&(p=p||"http://localhost",at.scrollbars="yes");const Lt=Object.entries(at).reduce((To,[Ui,Gu])=>`${To}${Ui}=${Gu},`,"");if(function cr(w=(0,G.z$)()){var p;return St(w)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(It)&&"_self"!==xe)return function _d(w,p){const m=document.createElement("a");m.href=w,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",xe),new Zl(null);const dn=window.open(p||"",xe,Lt);ee(dn,w,"popup-blocked");try{dn.focus()}catch(To){}return new Zl(dn)}(p,xe,fr())})()}_openRedirect(p,m,I,R){var F=this;return(0,_.Z)(function*(){return yield F._originValidation(p),function Bs(w){Kn().location.href=w}(Xa(p,m,I,pe(),R)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:R,promise:F}=this.eventManagers[m];return R?Promise.resolve(R):(Qe(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,_.Z)(function*(){const I=yield function Qa(w){return sf.apply(this,arguments)}(p),R=new hi(p);return I.register("authEvent",F=>(ee(null==F?void 0:F.authEvent,p,"invalid-auth-event"),{status:R.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:R},m.iframes[p._key()]=I,R})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(cf,{type:cf},R=>{var F;const J=null===(F=null==R?void 0:R[0])||void 0===F?void 0:F[cf];void 0!==J&&m(!!J),$e(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function E_(w){return tf.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Vr()||$()||St()}};class yd extends class Yl{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return Xe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new yd(p)}_finalizeEnroll(p,m,I){return function ir(w,p){return Jt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(w,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function oa(w,p){return Jt(w,"POST","/v2/accounts/mfaSignIn:finalize",Kt(w,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let S_=(()=>{class w{constructor(){}static assertion(m){return yd._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var dg="@firebase/auth",A_="0.19.12";class hg{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,_.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{var R;p((null===(R=I)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function x_(w){(0,N._registerComponent)(new ye.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),R=p.getProvider("heartbeat"),{apiKey:F,authDomain:J}=I.options;return((xe,at)=>{ee(F&&!F.includes(":"),"invalid-api-key",{appName:xe.name}),ee(!(null==J?void 0:J.includes(":")),"argument-error",{appName:xe.name});const It={apiKey:F,authDomain:J,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nr(w)},Lt=new Eu(xe,at,It);return function be(w,p){const m=(null==p?void 0:p.persistence)||[],I=(Array.isArray(m)?m:[m]).map(oe);(null==p?void 0:p.errorMap)&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(I,null==p?void 0:p.popupRedirectResolver)}(Lt,m),Lt})(I,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",p=>{const m=hn(p.getProvider("auth").getImmediate());return new hg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(dg,A_,function fg(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(dg,A_,"esm2017")}("Browser")},2090:(ct,Te,L)=>{L.d(Te,{$s:()=>qi,BH:()=>Me,DV:()=>Sn,Dv:()=>ii,G6:()=>Xe,GJ:()=>Kt,L:()=>ge,LL:()=>Fe,Lj:()=>Nt,Mn:()=>Ze,Pz:()=>He,Sg:()=>Le,UG:()=>Ie,UI:()=>Tr,US:()=>ce,Wj:()=>Ur,X3:()=>ht,Yr:()=>ee,ZB:()=>te,ZR:()=>pe,b$:()=>Re,cI:()=>on,d:()=>Ae,dS:()=>Vt,eu:()=>se,g5:()=>ie,gK:()=>Pn,gQ:()=>Gi,h$:()=>ue,hl:()=>Qe,hu:()=>N,jU:()=>et,lb:()=>Ms,m9:()=>_t,ne:()=>dt,p$:()=>q,pd:()=>Sr,r3:()=>Jt,ru:()=>$e,tV:()=>z,uI:()=>me,ug:()=>lt,vZ:()=>Dr,w1:()=>Ee,w9:()=>Xt,xO:()=>_i,xb:()=>_r,z$:()=>Ue,zI:()=>oe,zd:()=>yr});var _=L(5861);const N=function(K,j){if(!K)throw ie(j)},ie=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},ne=function(K){const j=[];let Y=0;for(let he=0;he<K.length;he++){let O=K.charCodeAt(he);O<128?j[Y++]=O:O<2048?(j[Y++]=O>>6|192,j[Y++]=63&O|128):55296==(64512&O)&&he+1<K.length&&56320==(64512&K.charCodeAt(he+1))?(O=65536+((1023&O)<<10)+(1023&K.charCodeAt(++he)),j[Y++]=O>>18|240,j[Y++]=O>>12&63|128,j[Y++]=O>>6&63|128,j[Y++]=63&O|128):(j[Y++]=O>>12|224,j[Y++]=O>>6&63|128,j[Y++]=63&O|128)}return j},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,j){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let O=0;O<K.length;O+=3){const V=K[O],$=O+1<K.length,ae=$?K[O+1]:0,Be=O+2<K.length,Ke=Be?K[O+2]:0;let St=(15&ae)<<2|Ke>>6,Cn=63&Ke;Be||(Cn=64,$||(St=64)),he.push(Y[V>>2],Y[(3&V)<<4|ae>>4],Y[St],Y[Cn])}return he.join("")},encodeString(K,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(K):this.encodeByteArray(ne(K),j)},decodeString(K,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(K):function(K){const j=[];let Y=0,he=0;for(;Y<K.length;){const O=K[Y++];if(O<128)j[he++]=String.fromCharCode(O);else if(O>191&&O<224){const V=K[Y++];j[he++]=String.fromCharCode((31&O)<<6|63&V)}else if(O>239&&O<365){const Be=((7&O)<<18|(63&K[Y++])<<12|(63&K[Y++])<<6|63&K[Y++])-65536;j[he++]=String.fromCharCode(55296+(Be>>10)),j[he++]=String.fromCharCode(56320+(1023&Be))}else{const V=K[Y++],$=K[Y++];j[he++]=String.fromCharCode((15&O)<<12|(63&V)<<6|63&$)}}return j.join("")}(this.decodeStringToByteArray(K,j))},decodeStringToByteArray(K,j){this.init_();const Y=j?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let O=0;O<K.length;){const V=Y[K.charAt(O++)],ae=O<K.length?Y[K.charAt(O)]:0;++O;const Ke=O<K.length?Y[K.charAt(O)]:64;++O;const nt=O<K.length?Y[K.charAt(O)]:64;if(++O,null==V||null==ae||null==Ke||null==nt)throw Error();he.push(V<<2|ae>>4),64!==Ke&&(he.push(ae<<4&240|Ke>>2),64!==nt&&he.push(Ke<<6&192|nt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},ue=function(K){const j=ne(K);return ce.encodeByteArray(j,!0)},ge=function(K){return ue(K).replace(/\./g,"")},z=function(K){try{return ce.decodeString(K,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function q(K){return te(void 0,K)}function te(K,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return j}for(const Y in j)!j.hasOwnProperty(Y)||!qe(Y)||(K[Y]=te(K[Y],j[Y]));return K}function qe(K){return"__proto__"!==K}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Y)=>{this.resolve=j,this.reject=Y})}wrapCallback(j){return(Y,he)=>{Y?this.reject(Y):this.resolve(he),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Y):j(Y,he))}}}function Le(K,j){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=j||"demo-project",O=K.iat||0,V=K.sub||K.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:O,exp:O+3600,auth_time:O,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},K);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify($)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function et(){return"object"==typeof self&&self.self===self}function $e(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Ue().indexOf("Electron/")>=0}function Ee(){const K=Ue();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Ze(){return Ue().indexOf("MSAppHost/")>=0}function ee(){return!1}function Xe(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){return"object"==typeof indexedDB}function se(){return new Promise((K,j)=>{try{let Y=!0;const he="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(he);O.onsuccess=()=>{O.result.close(),Y||self.indexedDB.deleteDatabase(he),K(!0)},O.onupgradeneeded=()=>{Y=!1},O.onerror=()=>{var V;j((null===(V=O.error)||void 0===V?void 0:V.message)||"")}}catch(Y){j(Y)}})}function oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(j,Y,he){super(Y),this.code=j,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(j,Y,he){this.service=j,this.serviceName=Y,this.errors=he}create(j,...Y){const he=Y[0]||{},O=`${this.service}/${j}`,V=this.errors[j],$=V?function xt(K,j){return K.replace(Yt,(Y,he)=>{const O=j[he];return null!=O?String(O):`<${he}?>`})}(V,he):"Error";return new pe(O,`${this.serviceName}: ${$} (${O}).`,he)}}const Yt=/\{\$([^}]+)}/g;function on(K){return JSON.parse(K)}function He(K){return JSON.stringify(K)}const Qt=function(K){let j={},Y={},he={},O="";try{const V=K.split(".");j=on(z(V[0])||""),Y=on(z(V[1])||""),O=V[2],he=Y.d||{},delete Y.d}catch(V){}return{header:j,claims:Y,data:he,signature:O}},Xt=function(K){const Y=Qt(K).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Kt=function(K){const j=Qt(K).claims;return"object"==typeof j&&!0===j.admin};function Jt(K,j){return Object.prototype.hasOwnProperty.call(K,j)}function Sn(K,j){if(Object.prototype.hasOwnProperty.call(K,j))return K[j]}function _r(K){for(const j in K)if(Object.prototype.hasOwnProperty.call(K,j))return!1;return!0}function Tr(K,j,Y){const he={};for(const O in K)Object.prototype.hasOwnProperty.call(K,O)&&(he[O]=j.call(Y,K[O],O,K));return he}function Dr(K,j){if(K===j)return!0;const Y=Object.keys(K),he=Object.keys(j);for(const O of Y){if(!he.includes(O))return!1;const V=K[O],$=j[O];if(Hi(V)&&Hi($)){if(!Dr(V,$))return!1}else if(V!==$)return!1}for(const O of he)if(!Y.includes(O))return!1;return!0}function Hi(K){return null!==K&&"object"==typeof K}function _i(K){const j=[];for(const[Y,he]of Object.entries(K))Array.isArray(he)?he.forEach(O=>{j.push(encodeURIComponent(Y)+"="+encodeURIComponent(O))}):j.push(encodeURIComponent(Y)+"="+encodeURIComponent(he));return j.length?"&"+j.join("&"):""}function yr(K){const j={};return K.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[O,V]=he.split("=");j[decodeURIComponent(O)]=decodeURIComponent(V)}}),j}function Sr(K){const j=K.indexOf("?");if(!j)return"";const Y=K.indexOf("#",j);return K.substring(j,Y>0?Y:void 0)}class Gi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,Y){Y||(Y=0);const he=this.W_;if("string"==typeof j)for(let nt=0;nt<16;nt++)he[nt]=j.charCodeAt(Y)<<24|j.charCodeAt(Y+1)<<16|j.charCodeAt(Y+2)<<8|j.charCodeAt(Y+3),Y+=4;else for(let nt=0;nt<16;nt++)he[nt]=j[Y]<<24|j[Y+1]<<16|j[Y+2]<<8|j[Y+3],Y+=4;for(let nt=16;nt<80;nt++){const St=he[nt-3]^he[nt-8]^he[nt-14]^he[nt-16];he[nt]=4294967295&(St<<1|St>>>31)}let Ke,Ct,O=this.chain_[0],V=this.chain_[1],$=this.chain_[2],ae=this.chain_[3],Be=this.chain_[4];for(let nt=0;nt<80;nt++){nt<40?nt<20?(Ke=ae^V&($^ae),Ct=1518500249):(Ke=V^$^ae,Ct=1859775393):nt<60?(Ke=V&$|ae&(V|$),Ct=2400959708):(Ke=V^$^ae,Ct=3395469782);const St=(O<<5|O>>>27)+Ke+Be+Ct+he[nt]&4294967295;Be=ae,ae=$,$=4294967295&(V<<30|V>>>2),V=O,O=St}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+V&4294967295,this.chain_[2]=this.chain_[2]+$&4294967295,this.chain_[3]=this.chain_[3]+ae&4294967295,this.chain_[4]=this.chain_[4]+Be&4294967295}update(j,Y){if(null==j)return;void 0===Y&&(Y=j.length);const he=Y-this.blockSize;let O=0;const V=this.buf_;let $=this.inbuf_;for(;O<Y;){if(0===$)for(;O<=he;)this.compress_(j,O),O+=this.blockSize;if("string"==typeof j){for(;O<Y;)if(V[$]=j.charCodeAt(O),++$,++O,$===this.blockSize){this.compress_(V),$=0;break}}else for(;O<Y;)if(V[$]=j[O],++$,++O,$===this.blockSize){this.compress_(V),$=0;break}}this.inbuf_=$,this.total_+=Y}digest(){const j=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&Y,Y/=256;this.compress_(this.buf_);let he=0;for(let O=0;O<5;O++)for(let V=24;V>=0;V-=8)j[he]=this.chain_[O]>>V&255,++he;return j}}function dt(K,j){const Y=new Fr(K,j);return Y.subscribe.bind(Y)}class Fr{constructor(j,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{j(this)}).catch(he=>{this.error(he)})}next(j){this.forEachObserver(Y=>{Y.next(j)})}error(j){this.forEachObserver(Y=>{Y.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Y,he){let O;if(void 0===j&&void 0===Y&&void 0===he)throw new Error("Missing Observer.");O=function an(K,j){if("object"!=typeof K||null===K)return!1;for(const Y of j)if(Y in K&&"function"==typeof K[Y])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:Y,complete:he},void 0===O.next&&(O.next=zn),void 0===O.error&&(O.error=zn),void 0===O.complete&&(O.complete=zn);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch($){}}),this.observers.push(O),V}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,j)}sendOne(j,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Y(this.observers[j])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}const ii=function(K,j,Y,he){let O;if(he<j?O="at least "+j:he>Y&&(O=0===Y?"none":"no more than "+Y),O)throw new Error(K+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+O+".")};function Pn(K,j){return`${K} failed: ${j} argument `}function Ur(K,j,Y,he){if((!he||Y)&&"function"!=typeof Y)throw new Error(Pn(K,j)+"must be a valid function.")}function Ms(K,j,Y,he){if((!he||Y)&&("object"!=typeof Y||null===Y))throw new Error(Pn(K,j)+"must be a valid context object.")}const Vt=function(K){const j=[];let Y=0;for(let he=0;he<K.length;he++){let O=K.charCodeAt(he);if(O>=55296&&O<=56319){const V=O-55296;he++,N(he<K.length,"Surrogate pair missing trail surrogate."),O=65536+(V<<10)+(K.charCodeAt(he)-56320)}O<128?j[Y++]=O:O<2048?(j[Y++]=O>>6|192,j[Y++]=63&O|128):O<65536?(j[Y++]=O>>12|224,j[Y++]=O>>6&63|128,j[Y++]=63&O|128):(j[Y++]=O>>18|240,j[Y++]=O>>12&63|128,j[Y++]=O>>6&63|128,j[Y++]=63&O|128)}return j},lt=function(K){let j=0;for(let Y=0;Y<K.length;Y++){const he=K.charCodeAt(Y);he<128?j++:he<2048?j+=2:he>=55296&&he<=56319?(j+=4,Y++):j+=3}return j};function qi(K,j=1e3,Y=2){const he=j*Math.pow(Y,K),O=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+O)}function _t(K){return K&&K._delegate?K._delegate:K}function jn(K,j){return new Promise((Y,he)=>{K.onsuccess=O=>{Y(O.target.result)},K.onerror=O=>{var V;he(`${j}: ${null===(V=O.target.error)||void 0===V?void 0:V.message}`)}})}class qt{constructor(j){this._db=j,this.objectStoreNames=this._db.objectStoreNames}transaction(j,Y="readonly"){return new Ge(this._db.transaction.call(this._db,j,Y))}createObjectStore(j,Y){return new Ce(this._db.createObjectStore(j,Y))}close(){this._db.close()}}class Ge{constructor(j){this._transaction=j,this.complete=new Promise((Y,he)=>{this._transaction.oncomplete=function(){Y()},this._transaction.onerror=()=>{he(this._transaction.error)},this._transaction.onabort=()=>{he(this._transaction.error)}})}objectStore(j){return new Ce(this._transaction.objectStore(j))}}class Ce{constructor(j){this._store=j}index(j){return new tt(this._store.index(j))}createIndex(j,Y,he){return new tt(this._store.createIndex(j,Y,he))}get(j){return jn(this._store.get(j),"Error reading from IndexedDB")}put(j,Y){return jn(this._store.put(j,Y),"Error writing to IndexedDB")}delete(j){return jn(this._store.delete(j),"Error deleting from IndexedDB")}clear(){return jn(this._store.clear(),"Error clearing IndexedDB object store")}}class tt{constructor(j){this._index=j}get(j){return jn(this._index.get(j),"Error reading from IndexedDB")}}function ht(K,j,Y){return new Promise((he,O)=>{try{const V=indexedDB.open(K,j);V.onsuccess=$=>{he(new qt($.target.result))},V.onerror=$=>{var ae;O(`Error opening indexedDB: ${null===(ae=$.target.error)||void 0===ae?void 0:ae.message}`)},V.onupgradeneeded=$=>{Y(new qt(V.result),$.oldVersion,$.newVersion,new Ge(V.transaction))}}catch(V){O(`Error opening indexedDB: ${V.message}`)}})}function Nt(K){return kt.apply(this,arguments)}function kt(){return(kt=(0,_.Z)(function*(K){return new Promise((j,Y)=>{try{const he=indexedDB.deleteDatabase(K);he.onsuccess=()=>{j()},he.onerror=O=>{var V;Y(`Error deleting indexedDB database "${K}": ${null===(V=O.target.error)||void 0===V?void 0:V.message}`)}}catch(he){Y(`Error deleting indexedDB database "${K}": ${he.message}`)}})})).apply(this,arguments)}},5811:(ct,Te,L)=>{var _=L(5e3);let G=null;function N(){return G}const ce=new _.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ge(){return(0,_.LFG)(q)}()},providedIn:"platform"}),n})();const z=new _.OlP("Location Initialized");let q=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function qe(){return new q((0,_.LFG)(ce))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,_.LFG)(ce).location;return new $e((0,_.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const et=new _.OlP("appBaseHref");let $e=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(et,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(et,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le(ee(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ee(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(_.LFG(me),_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Ee(){return new Ae((0,_.LFG)(me),(0,_.LFG)(ue))}()},providedIn:"root"}),n})();function ee(n){return n.replace(/\/index.html$/,"")}let $r=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Vo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Vo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mn{constructor(){this.$implicit=null,this.ngIf=null}}function Vo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,_.AaK)(e)}'.`)}let Hh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function Wo(n){return"server"===n}let Jc=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new Au((0,_.LFG)(ce),window)}),n})();class Au{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function io(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Os(this.window.history)||Os(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Os(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class oo extends class so extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){G||(G=n)}(new oo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Sl(){return pn=pn||document.querySelector("base"),pn?pn.getAttribute("href"):null}();return null==t?null:function Ls(n){zo=zo||document.createElement("a"),zo.setAttribute("href",n);const e=zo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Iu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let zo,pn=null;const xr=new _.OlP("TRANSITION_ID"),xu=[{provide:_.ip1,useFactory:function rr(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[xr,ce,_.zs3],multi:!0}];class vi{static init(){(0,_.VLi)(new vi)}addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let zr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const ls=new _.OlP("EventManagerPlugins");let ao=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ls),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Ko{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ni=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Zi=(()=>{class n extends Ni{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(cs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(cs))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function cs(n){N().remove(n)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},La=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(La,n),t.push(i))}return t}function Bt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ru(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Al(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case _.ifc.ShadowDom:return new Ua(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ao),_.LFG(Zi),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Ru{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=vt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=vt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Bt(r)):this.eventManager.addEventListener(e,t,Bt(r))}}class Al extends Ru{constructor(e,t,r,i){super(e),this.component=r;const a=De(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Gh(n){return"_ngcontent-%COMP%".replace(La,n)}(i+"-"+r.id),this.hostAttr=function Fa(n){return"_nghost-%COMP%".replace(La,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ua extends Ru{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=De(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ig=(()=>{class n extends Ko{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const xl=["alt","control","meta","shift"],Xo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Jo=(()=>{class n extends Ko{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(xl.forEach(g=>{const v=r.indexOf(g);v>-1&&(r.splice(v,1),l+=g+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function ea(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&hr.hasOwnProperty(e)&&(e=hr[e]))}return Xo[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),xl.forEach(a=>{a!=i&&Yi[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Va=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function ui(){oo.makeCurrent(),vi.init()},multi:!0},{provide:ce,useFactory:function ta(){return(0,_.RDi)(document),document},deps:[]}]),Rl=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function qh(){return new _.qLn},deps:[]},{provide:ls,useClass:ig,multi:!0,deps:[ce,_.R0b,_.Lbi]},{provide:ls,useClass:Jo,multi:!0,deps:[ce]},{provide:wn,useClass:wn,deps:[ao,Zi,_.AFp]},{provide:_.FYo,useExisting:wn},{provide:Ni,useExisting:Zi},{provide:Zi,useClass:Zi,deps:[ce]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:ao,useClass:ao,deps:[ls,_.R0b]},{provide:class vn{},useClass:zr,deps:[]}];let uo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:xr,useExisting:_.AFp},xu]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:Rl,imports:[Hh,_.hGG]}),n})();"undefined"!=typeof window&&window;var En=L(8996),Rr=L(7669);function gt(...n){const e=(0,Rr.yG)(n);return(0,En.D)(n,e)}var hs=L(7579);class li extends hs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var fr=L(8306);const{isArray:ud}=Array,{getPrototypeOf:Kn,prototype:Bs,keys:Fl}=Object;var Oi=L(4671),Rt=L(4004);const{isArray:Ul}=Array;var In=L(5403),$s=L(9672);function Vl(...n){const e=(0,Rr.yG)(n),t=(0,Rr.jO)(n),{args:r,keys:i}=function js(n){if(1===n.length){const e=n[0];if(ud(e))return{args:e,keys:null};if(function ra(n){return n&&"object"==typeof n&&Kn(n)===Bs}(e)){const t=Fl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,En.D)([],e);const a=new fr.y(function Zr(n,e,t=Oi.y){return r=>{fo(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let g=0;g<i;g++)fo(e,()=>{const v=(0,En.D)(n[g],e);let D=!1;v.subscribe((0,In.x)(r,S=>{a[g]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function Ou(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):Oi.y));return t?a.pipe(function ku(n){return(0,Rt.U)(e=>function ld(n,e){return Ul(e)?n(...e):n(e)}(n,e))}(t)):a}function fo(n,e,t){n?(0,$s.f)(t,n,e):e()}var ia=L(576);function Hs(n,e){const t=(0,ia.m)(n)?n:()=>n,r=i=>i.error(t());return new fr.y(e?i=>e.schedule(r,0,i):r)}const po=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var fs=L(8189);function Xh(...n){return function Bl(){return(0,fs.J)(1)}()((0,En.D)(n,(0,Rr.yG)(n)))}var Gs=L(8421);function sa(n){return new fr.y(e=>{(0,Gs.Xf)(n()).subscribe(e)})}var oa=L(515),Ga=L(727),sr=L(4482);function ps(){return(0,sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,In.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cd extends fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ga.w0;const t=this.getSubject();e.add(this.source.subscribe((0,In.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ga.w0.EMPTY)}return e}refCount(){return ps()(this)}}function An(n,e){return(0,sr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,In.x)(r,g=>{null==i||i.unsubscribe();let v=0;const D=a++;(0,Gs.Xf)(n(g,D)).subscribe(i=(0,In.x)(r,S=>r.next(e?e(g,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var Wa=L(5698);function Li(...n){const e=(0,Rr.yG)(n);return(0,sr.e)((t,r)=>{(e?Xh(n,t,e):Xh(n,t)).subscribe(r)})}function gs(n,e,t,r,i){return(a,l)=>{let h=t,g=e,v=0;a.subscribe((0,In.x)(l,D=>{const S=v++;g=h?n(g,D,S):(h=!0,D),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}function Yr(n,e){return(0,sr.e)(gs(n,e,arguments.length>=2,!0))}function ms(n,e){return(0,sr.e)((t,r)=>{let i=0;t.subscribe((0,In.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Qi(n){return(0,sr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,In.x)(t,void 0,void 0,l=>{a=(0,Gs.Xf)(n(l,Qi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var xn=L(5577);function aa(n,e){return(0,ia.m)(e)?(0,xn.z)(n,e,1):(0,xn.z)(n,1)}function dd(n){return n<=0?()=>oa.E:(0,sr.e)((e,t)=>{let r=[];e.subscribe((0,In.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function On(n=sg){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sg(){return new po}function og(n){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,In.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function go(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((i,a)=>n(i,a,r)):Oi.y,(0,Wa.q)(1),t?og(e):On(()=>new po))}var ci=L(8505);class Xi{constructor(e,t){this.id=e,this.url=t}}class mo extends Xi{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ua extends Xi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zn extends Xi{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qa extends Xi{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lu extends Xi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hd extends Xi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fu extends Xi{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hr extends Xi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ji extends Xi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class za{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _o{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class di{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jl{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $l{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class fd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vr(n){return new fd(n)}const Gl="ngNavigationCancelingError";function es(n){const e=Error("NavigationCancelingError: "+n);return e[Gl]=!0,e}function _s(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Uu(n[i],e[i]))return!1;return!0}function Uu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Ws(n){return Array.prototype.concat.apply([],n)}function Ka(n){return n.length>0?n[n.length-1]:null}function or(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Qr(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,En.D)(Promise.resolve(n)):gt(n)}const vo={exact:function T(n,e,t){if(!Ht(n.segments,e.segments)||!re(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!T(n.children[r],e.children[r],t))return!1;return!0},subset:B},Vu={exact:function C(n,e){return wi(n,e)},subset:function M(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Uu(n[t],e[t]))},ignored:()=>!0};function Za(n,e,t){return vo[t.paths](n.root,e.root,t.matrixParams)&&Vu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function B(n,e,t){return X(n,e,e.segments,t)}function X(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ht(i,t)||e.hasChildren()||!re(i,t,r))}if(n.segments.length===t.length){if(!Ht(n.segments,t)||!re(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!B(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ht(n.segments,i)&&re(n.segments,i,r)&&n.children[Ot])&&X(n.children[Ot],e,a,r)}}function re(n,e,t){return e.every((r,i)=>Vu[t](n[i].parameters,r.parameters))}class Pe{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vr(this.queryParams)),this._queryParamMap}toString(){return Ya.serialize(this)}}class ke{constructor(e,t){this.segments=e,this.children=t,this.parent=null,or(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qs(this)}}class it{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vr(this.parameters)),this._parameterMap}toString(){return ql(this)}}function Ht(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ar{}class Yn{parse(e){const t=new I_(e);return new Pe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ei(e.root,!0)}`,r=function E_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Fi(t)}=${Fi(i)}`).join("&"):`${Fi(t)}=${Fi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ya=new Yn;function qs(n){return n.segments.map(e=>ql(e)).join("/")}function Ei(n,e){if(!n.hasChildren())return qs(n);if(e){const t=n.children[Ot]?Ei(n.children[Ot],!1):"",r=[];return or(n.children,(i,a)=>{a!==Ot&&r.push(`${a}:${Ei(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function At(n,e){let t=[];return or(n.children,(r,i)=>{i===Ot&&(t=t.concat(e(r,i)))}),or(n.children,(r,i)=>{i!==Ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ot?[Ei(n.children[Ot],!1)]:[`${i}:${Ei(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${qs(n)}/${t[0]}`:`${qs(n)}/(${t.join("//")})`}}function hi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fi(n){return hi(n).replace(/%3B/gi,";")}function ef(n){return hi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(n){return decodeURIComponent(n)}function ju(n){return Bu(n.replace(/\+/g,"%20"))}function ql(n){return`${ef(n.path)}${function lg(n){return Object.keys(n).map(e=>`;${ef(e)}=${ef(n[e])}`).join("")}(n.parameters)}`}const tf=/^[^\/()?;=#]+/;function Eo(n){const e=n.match(tf);return e?e[0]:""}const zl=/^[^=?&#]+/,ww=/^[^&#]+/;class I_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new ke(e,t)),r}parseSegment(){const e=Eo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new it(Bu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Eo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Eo(this.remaining);i&&(r=i,this.capture(r))}e[Bu(t)]=Bu(r)}parseQueryParam(e){const t=function cg(n){const e=n.match(zl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Kl(n){const e=n.match(ww);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ju(t),a=ju(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Eo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ot);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Ot]:new ke([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class b_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rf(e,this._root).map(t=>t.value)}}function nf(n,e){if(n===e.value)return e;for(const t of e.children){const r=nf(n,t);if(r)return r}return null}function rf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rf(n,t);if(r.length)return r.unshift(e),r}return[]}class Io{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function bo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gd extends b_{constructor(e,t){super(e),this.snapshot=t,Zl(this,e)}toString(){return this.snapshot.toString()}}function Qa(n,e){const t=function sf(n,e){const l=new Hu([],{},{},"",{},Ot,e,null,n.root,-1,{});return new af("",new Io(l,[]))}(n,e),r=new li([new it("",{})]),i=new li({}),a=new li({}),l=new li({}),h=new li(""),g=new $u(r,i,l,h,a,Ot,e,t.root);return g.snapshot=t.root,new gd(new Io(g,[]),t)}class $u{constructor(e,t,r,i,a,l,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(e=>vr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(e=>vr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function C_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function md(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Hu{constructor(e,t,r,i,a,l,h,g,v,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class af extends b_{constructor(e,t){super(t),this.url=e,Zl(this,t)}toString(){return uf(this._root)}}function Zl(n,e){e.value._routerState=n,e.children.forEach(t=>Zl(n,t))}function uf(n){const e=n.children.length>0?` { ${n.children.map(uf).join(", ")} } `:"";return`${n.value}${e}`}function _d(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wi(e.params,t.params)||n.params.next(t.params),function pd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function lf(n,e){const t=wi(n.params,e.params)&&function Tt(n,e){return Ht(n,e)&&n.every((t,r)=>wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||lf(n.parent,e.parent))}function Xa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function D_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xa(n,r,i);return Xa(n,r)})}(n,e,t);return new Io(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Xa(n,h)),l}}const r=function cf(n){return new $u(new li(n.url),new li(n.params),new li(n.queryParams),new li(n.fragment),new li(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Xa(n,a));return new Io(r,i)}}function Co(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yl(n){return"object"==typeof n&&null!=n&&n.outlets}function yd(n,e,t,r,i){let a={};if(r&&or(r,(h,g)=>{a[g]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),n===e)return new Pe(t,a,i);const l=S_(n,e,t);return new Pe(l,a,i)}function S_(n,e,t){const r={};return or(n.children,(i,a)=>{r[a]=i===e?t:S_(i,e,t)}),new ke(n.segments,r)}class dg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Co(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Yl);if(i&&i!==Ka(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function w(n,e,t){if(n||(n=new ke([],{})),0===n.segments.length&&n.hasChildren())return p(n,e,t);const r=function m(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Yl(h))break;const g=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!J(g,v,l))return a;r+=2}else{if(!J(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new ke(n.segments.slice(0,r.pathIndex),{});return a.children[Ot]=new ke(n.segments.slice(r.pathIndex),n.children),p(a,0,i)}return r.match&&0===i.length?new ke(n.segments,{}):r.match&&!n.hasChildren()?I(n,e,t):r.match?p(n,0,i):I(n,e,t)}function p(n,e,t){if(0===t.length)return new ke(n.segments,{});{const r=function Ew(n){return Yl(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};return or(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=w(n.children[l],e,a))}),or(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new ke(n.segments,i)}}function I(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Yl(a)){const g=R(a.outlets);return new ke(r,g)}if(0===i&&Co(t[0])){r.push(new it(n.segments[e].path,F(t[0]))),i++;continue}const l=Yl(a)?a.outlets[Ot]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Co(h)?(r.push(new it(l,F(h))),i+=2):(r.push(new it(l,{})),i++)}return new ke(r,{})}function R(n){const e={};return or(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=I(new ke([],{}),0,t))}),e}function F(n){const e={};return or(n,(t,r)=>e[r]=`${t}`),e}function J(n,e,t){return n==t.path&&wi(e,t.parameters)}class at{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_d(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=bo(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),or(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=bo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=bo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=bo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new $l(a.value.snapshot))}),e.children.length&&this.forwardEvent(new la(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(_d(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),_d(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function It(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=g,l.outlet&&l.outlet.activateWith(i,g),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Lt{constructor(e,t){this.routes=e,this.module=t}}function dn(n){return"function"==typeof n}function Ui(n){return n instanceof Pe}const Xl=Symbol("INITIAL_VALUE");function da(){return An(n=>Vl(n.map(e=>e.pipe((0,Wa.q)(1),Li(Xl)))).pipe(Yr((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==Xl?i:(a===Xl&&(r=!0),r||!1!==a&&l!==t.length-1&&!Ui(a)?i:a),e)},Xl),ms(e=>e!==Xl),(0,Rt.U)(e=>Ui(e)?e:!0===e),(0,Wa.q)(1)))}class pg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wu,this.attachRef=null}}class Wu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new pg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Jl=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=a||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,g=new gg(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Wu),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class gg{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$u?this.route:e===Wu?this.childContexts:this.parent.get(e,t)}}let df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[Jl],encapsulation:2}),n})();function Ja(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];M_(r,P_(e,r))}}function M_(n,e){n.children&&Ja(n.children,e)}function P_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function N_(n){const e=n.children&&n.children.map(N_),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=df),t}function gn(n){return n.outlet||Ot}function Iw(n,e){const t=n.filter(r=>gn(r)===e);return t.push(...n.filter(r=>gn(r)!==e)),t}const bw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},bw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||_s)(t,n,e);if(!a)return Object.assign({},bw);const l={};or(a.posParams,(g,v)=>{l[v]=g.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function hf(n,e,t,r,i="corrected"){if(t.length>0&&function cT(n,e,t){return t.some(r=>mg(n,e,r)&&gn(r)!==Ot)}(n,t,r)){const l=new ke(e,function lT(n,e,t,r){const i={};i[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&gn(a)!==Ot){const l=new ke([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[gn(a)]=l}return i}(n,e,r,new ke(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function dT(n,e,t){return t.some(r=>mg(n,e,r))}(n,t,r)){const l=new ke(n.segments,function uT(n,e,t,r,i,a){const l={};for(const h of r)if(mg(n,t,h)&&!i[gn(h)]){const g=new ke([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[gn(h)]=g}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new ke(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function mg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function hT(n,e,t,r){return!!(gn(n)===r||r!==Ot&&mg(e,t,n))&&("**"===n.path||wd(e,n,t).matched)}function fT(n,e,t){return 0===e.length&&!n.children[t]}class qu{constructor(e){this.segmentGroup=e||null}}class Ii{constructor(e){this.urlTree=e}}function ec(n){return Hs(new qu(n))}function k_(n){return Hs(new Ii(n))}class O_{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=hf(this.urlTree.root,[],[],this.config).segmentGroup,t=new ke(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ot).pipe((0,Rt.U)(a=>this.createUrlTree(L_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qi(a=>{if(a instanceof Ii)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof qu?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ot).pipe((0,Rt.U)(i=>this.createUrlTree(L_(i),e.queryParams,e.fragment))).pipe(Qi(i=>{throw i instanceof qu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new ke([],{[Ot]:e}):e;return new Pe(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Rt.U)(a=>new ke([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,En.D)(i).pipe(aa(a=>{const l=r.children[a],h=Iw(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,Rt.U)(g=>({segment:g,outlet:a})))}),Yr((a,l)=>(a[l.outlet]=l.segment,a),{}),function Jh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((i,a)=>n(i,a,r)):Oi.y,dd(1),t?og(e):On(()=>new po))}())}expandSegment(e,t,r,i,a,l){return(0,En.D)(r).pipe(aa(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Qi(v=>{if(v instanceof qu)return gt(null);throw v}))),go(h=>!!h),Qi((h,g)=>{if(h instanceof po||"EmptyError"===h.name)return fT(t,i,a)?gt(new ke([],{})):ec(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return hT(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):ec(t):ec(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?k_(a):this.lineralizeSegments(r,a).pipe((0,xn.z)(l=>{const h=new ke(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:g,remainingSegments:v,positionalParamSegments:D}=wd(t,i,a);if(!h)return ec(t);const S=this.applyRedirectCommands(g,i.redirectTo,D);return i.redirectTo.startsWith("/")?k_(S):this.lineralizeSegments(i,S).pipe((0,xn.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Rt.U)(S=>(r._loadedConfig=S,new ke(i,{})))):gt(new ke(i,{}));const{matched:l,consumedSegments:h,remainingSegments:g}=wd(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,xn.z)(D=>{const S=D.module,P=D.routes,{segmentGroup:H,slicedSegments:Z}=hf(t,h,g,P),ve=new ke(H.segments,H.children);if(0===Z.length&&ve.hasChildren())return this.expandChildren(S,P,ve).pipe((0,Rt.U)(mt=>new ke(h,mt)));if(0===P.length&&0===Z.length)return gt(new ke(h,{}));const Oe=gn(r)===a;return this.expandSegment(S,ve,P,Z,Oe?Ot:a,!0).pipe((0,Rt.U)(yt=>new ke(h.concat(yt.segments),yt.children)))})):ec(t)}getChildConfig(e,t,r){return t.children?gt(new Lt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,xn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Rt.U)(a=>(t._loadedConfig=a,a))):function bi(n){return Hs(es(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new Lt([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?gt(i.map(l=>{const h=e.get(l);let g;if(function Gu(n){return n&&dn(n.canLoad)}(h))g=h.canLoad(t,r);else{if(!dn(h))throw new Error("Invalid CanLoad guard");g=h(t,r)}return Qr(g)})).pipe(da(),(0,ci.b)(l=>{if(!Ui(l))return;const h=es(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,Rt.U)(l=>!0===l)):gt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[Ot])return Hs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Pe(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return or(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return or(t.children,(h,g)=>{l[g]=this.createSegmentGroup(e,h,r,i)}),new ke(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function L_(n){const e={};for(const r of Object.keys(n.children)){const a=L_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function pT(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new ke(n.segments.concat(e.segments),e.children)}return n}(new ke(n.segments,e))}class Dw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pf{constructor(e,t){this.component=e,this.route=t}}function gT(n,e,t){const r=n._root;return tc(r,e?e._root:null,t,[r.value])}function _g(n,e,t){const r=function mT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function tc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=bo(e);return n.children.forEach(l=>{(function _T(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function yT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ht(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ht(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lf(n,e)||!wi(n.queryParams,e.queryParams);default:return!lf(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Dw(r)):(a.data=l.data,a._resolvedData=l._resolvedData),tc(n,e,a.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new pf(h.outlet.component,l))}else l&&nc(e,h,i),i.canActivateChecks.push(new Dw(r)),tc(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),or(a,(l,h)=>nc(l,t.getContext(h),i)),i}function nc(n,e,t){const r=bo(n),i=n.value;or(r,(a,l)=>{nc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new pf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Aw{}function xw(n){return new fr.y(e=>e.error(n))}class ST{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=hf(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ot);if(null===t)return null;const r=new Hu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Io(r,t),a=new af(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=C_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=Iw(e,a),g=this.processSegmentGroup(h,l,a);if(null===g)return null;r.push(...g)}const i=Rw(r);return function AT(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return fT(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!hT(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const H=r.length>0?Ka(r).parameters:{};a=new Hu(r,H,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,MT(e),gn(e),e.component,e,rc(t),Do(t)+r.length,PT(e))}else{const H=wd(t,e,r);if(!H.matched)return null;l=H.consumedSegments,h=H.remainingSegments,a=new Hu(l,H.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,MT(e),gn(e),e.component,e,rc(t),Do(t)+l.length,PT(e))}const g=function xT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:D}=hf(t,l,h,g.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);if(0===D.length&&v.hasChildren()){const H=this.processChildren(g,v);return null===H?null:[new Io(a,H)]}if(0===g.length&&0===D.length)return[new Io(a,[])];const S=gn(e)===i,P=this.processSegment(g,v,D,S?Ot:i);return null===P?null:[new Io(a,P)]}}function RT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rw(n){const e=[],t=new Set;for(const r of n){if(!RT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rw(r.children);e.push(new Io(r.value,i))}return e.filter(r=>!t.has(r))}function rc(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Do(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function MT(n){return n.data||{}}function PT(n){return n.resolve||{}}function vg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wg(n){return An(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,Rt.U)(()=>e)):gt(e)})}class Nw extends class Pw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const mf=new _.OlP("ROUTES");class Eg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Rt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new Lt(Ws(l.injector.get(mf,void 0,_.XFs.Self|_.XFs.Optional)).map(N_),l)}),Qi(a=>{throw t._loader$=void 0,a}));return t._loader$=new cd(i,()=>new hs.x).pipe(ps()),t._loader$}loadModuleFactory(e){return Qr(e()).pipe((0,xn.z)(t=>t instanceof _.YKP?gt(t):(0,En.D)(this.compiler.compileModuleAsync(t))))}}class rR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ed(n){throw n}function U_(n,e,t){return e.parse("/")}function V_(n,e){return gt(null)}const kT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},B_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vi=(()=>{class n{constructor(t,r,i,a,l,h,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new hs.x,this.errorHandler=Ed,this.malformedUriErrorHandler=U_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:V_,afterPreactivation:V_},this.urlHandlingStrategy=new rR,this.routeReuseStrategy=new Nw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(_.h0i),this.console=l.get(_.c2e);const S=l.get(_.R0b);this.isNgZoneEnabled=S instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Wl(){return new Pe(new ke([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Eg(l,h,P=>this.triggerEvent(new za(P)),P=>this.triggerEvent(new _o(P))),this.routerState=Qa(this.currentUrlTree,this.rootComponentType),this.transitions=new li({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ms(i=>0!==i.id),(0,Rt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),An(i=>{let a=!1,l=!1;return gt(i).pipe((0,ci.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),An(h=>{const g=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Ow(h.source)&&(this.browserUrlTree=h.extractedUrl),gt(h).pipe(An(S=>{const P=this.transitions.getValue();return r.next(new mo(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?oa.E:Promise.resolve(S)}),function Tw(n,e,t,r){return An(i=>function ff(n,e,t,r,i){return new O_(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Rt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ci.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function Mw(n,e,t,r,i){return(0,xn.z)(a=>function DT(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new ST(n,e,t,r,i,a).recognize();return null===l?xw(new Aw):gt(l)}catch(l){return xw(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Rt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ci.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(H,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new Lu(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:H,source:Z,restoredState:ve,extras:Oe}=h,bt=new mo(P,this.serializeUrl(H),Z,ve);r.next(bt);const yt=Qa(H,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},h),{targetSnapshot:yt,urlAfterRedirects:H,extras:Object.assign(Object.assign({},Oe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),oa.E}),wg(h=>{const{targetSnapshot:g,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:H}}=h;return this.hooks.beforePreactivation(g,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!H})}),(0,ci.b)(h=>{const g=new hd(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,Rt.U)(h=>Object.assign(Object.assign({},h),{guards:gT(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function vT(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function wT(n,e,t,r){return(0,En.D)(n).pipe((0,xn.z)(i=>function TT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?gt(a.map(h=>{const g=_g(h,e,i);let v;if(function R_(n){return n&&dn(n.canDeactivate)}(g))v=Qr(g.canDeactivate(n,e,t,r));else{if(!dn(g))throw new Error("Invalid CanDeactivate guard");v=Qr(g(n,e,t,r))}return v.pipe(go())})).pipe(da()):gt(!0)}(i.component,i.route,t,e,r)),go(i=>!0!==i,!0))}(l,r,i,n).pipe((0,xn.z)(h=>h&&function To(n){return"boolean"==typeof n}(h)?function yg(n,e,t,r){return(0,En.D)(e).pipe(aa(i=>Xh(function IT(n,e){return null!==n&&e&&e(new di(n)),gt(!0)}(i.route.parent,r),function ET(n,e){return null!==n&&e&&e(new jl(n)),gt(!0)}(i.route,r),function CT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Sw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>sa(()=>gt(l.guards.map(g=>{const v=_g(g,l.node,t);let D;if(function Ql(n){return n&&dn(n.canActivateChild)}(v))D=Qr(v.canActivateChild(r,n));else{if(!dn(v))throw new Error("Invalid CanActivateChild guard");D=Qr(v(r,n))}return D.pipe(go())})).pipe(da())));return gt(a).pipe(da())}(n,i.path,t),function bT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(a=>sa(()=>{const l=_g(a,e,t);let h;if(function vd(n){return n&&dn(n.canActivate)}(l))h=Qr(l.canActivate(e,n));else{if(!dn(l))throw new Error("Invalid CanActivate guard");h=Qr(l(e,n))}return h.pipe(go())}));return gt(i).pipe(da())}(n,i.route,t))),go(i=>!0!==i,!0))}(r,a,n,e):gt(h)),(0,Rt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,ci.b)(h=>{if(Ui(h.guardsResult)){const v=es(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const g=new Fu(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),ms(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),wg(h=>{if(h.guards.canActivateChecks.length)return gt(h).pipe((0,ci.b)(g=>{const v=new Hr(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),An(g=>{let v=!1;return gt(g).pipe(function nR(n,e){return(0,xn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let a=0;return(0,En.D)(i).pipe(aa(l=>function ha(n,e,t,r){return function F_(n,e,t,r){const i=vg(n);if(0===i.length)return gt({});const a={};return(0,En.D)(i).pipe((0,xn.z)(l=>function NT(n,e,t,r){const i=_g(n,e,r);return Qr(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,ci.b)(h=>{a[l]=h}))),dd(1),(0,xn.z)(()=>vg(a).length===i.length?gt(a):oa.E))}(n._resolve,n,e,r).pipe((0,Rt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),C_(n,t).resolve),null)))}(l.route,r,n,e)),(0,ci.b)(()=>a++),dd(1),(0,xn.z)(l=>a===i.length?gt(t):oa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ci.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,ci.b)(g=>{const v=new Ji(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),wg(h=>{const{targetSnapshot:g,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:H}}=h;return this.hooks.afterPreactivation(g,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!H})}),(0,Rt.U)(h=>{const g=function T_(n,e,t){const r=Xa(n,e._root,t?t._root:void 0);return new gd(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:g})}),(0,ci.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Rt.U)(r=>(new at(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,ci.b)({next(){a=!0},complete(){a=!0}}),function ag(n){return(0,sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Qi(h=>{if(l=!0,function ug(n){return n&&n[Gl]}(h)){const g=Ui(h.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const v=new Zn(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),g?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ow(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new qa(i.id,this.serializeUrl(i.extractedUrl),h);r.next(g);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return oa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ja(t),this.config=t.map(N_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,v=i||this.routerState.root,D=g?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function ca(n,e,t,r,i){if(0===t.length)return yd(e.root,e.root,e.root,r,i);const a=function A_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return or(a.outlets,(g,v)=>{h[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new dg(t,e,r)}(t);if(a.toRoot())return yd(e.root,e.root,new ke([],{}),r,i);const l=function fg(n,e,t){if(n.isAbsolute)return new hg(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new hg(a,a===e.root,0)}const r=Co(n.commands[0])?0:1;return function x_(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new hg(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?p(l.segmentGroup,l.index,a.commands):w(l.segmentGroup,l.index,a.commands);return yd(e.root,l.segmentGroup,h,r,i)}(v,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ui(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function OT(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},kT):!1===r?Object.assign({},B_):r,Ui(t))return Za(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Za(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ua(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,g;if(this.disposed)return Promise.resolve(!1);let v,D,S;l?(v=l.resolve,D=l.reject,S=l.promise):S=new Promise((Z,ve)=>{v=Z,D=ve});const P=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),H=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):H=0,this.setTransition({id:P,targetPageId:H,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:v,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(Z=>Promise.reject(Z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Zn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Ow(n){return"imperative"!==n}let ic=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new hs.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Id(this.skipLocationChange),replaceUrl:Id(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Id(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Vi),_.Y36($u),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},n.\u0275dir=_.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&_.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),n})();function Id(n){return""===n||!!n}class H_{}class Fw{preload(e,t){return gt(null)}}let Uw=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Eg(i,r,g=>t.triggerEvent(new za(g)),g=>t.triggerEvent(new _o(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(ms(t=>t instanceof ua),aa(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,En.D)(i).pipe((0,fs.J)(),(0,Rt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,xn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Vi),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(H_))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ig=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ua&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Hl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const ys=new _.OlP("ROUTER_CONFIGURATION"),W_=new _.OlP("ROUTER_FORROOT_GUARD"),Vw=[Ae,{provide:ar,useClass:Yn},{provide:Vi,useFactory:function z_(n,e,t,r,i,a,l={},h,g){const v=new Vi(null,n,e,t,r,i,Ws(a));return h&&(v.urlHandlingStrategy=h),g&&(v.routeReuseStrategy=g),function $w(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),v},deps:[ar,Wu,Ae,_.zs3,_.Sil,mf,ys,[class kw{},new _.FiY],[class gf{},new _.FiY]]},Wu,{provide:$u,useFactory:function bg(n){return n.routerState.root},deps:[Vi]},Uw,Fw,class G_{preload(e,t){return t().pipe(Qi(()=>gt(null)))}},{provide:ys,useValue:{enableTracing:!1}}];function FT(){return new _.PXZ("Router",Vi)}let _f=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Vw,q_(t),{provide:W_,useFactory:jw,deps:[[Vi,new _.FiY,new _.tp0]]},{provide:ys,useValue:r||{}},{provide:me,useFactory:Bw,deps:[ue,[new _.tBr(et),new _.FiY],ys]},{provide:Ig,useFactory:UT,deps:[Vi,Jc,ys]},{provide:H_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Fw},{provide:_.PXZ,multi:!0,useFactory:FT},[bd,{provide:_.ip1,multi:!0,useFactory:Hw,deps:[bd]},{provide:Z_,useFactory:K_,deps:[bd]},{provide:_.tb,multi:!0,useExisting:Z_}]]}}static forChild(t){return{ngModule:n,providers:[q_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(W_,8),_.LFG(Vi,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function UT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ig(n,e,t)}function Bw(n,e,t={}){return t.useHash?new Re(n,e):new $e(n,e)}function jw(n){return"guarded"}function q_(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:mf,multi:!0,useValue:n}]}let bd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new hs.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(Vi),l=this.injector.get(ys);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ys),i=this.injector.get(Uw),a=this.injector.get(Ig),l=this.injector.get(Vi),h=this.injector.get(_.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Hw(n){return n.appInitializer.bind(n)}function K_(n){return n.bootstrapListener.bind(n)}const Z_=new _.OlP("Router Initializer");var VT=L(573),k=L(2090),Bi=L(9681),So=L(1877),zs=L(4859),yf=L(4986),cn=L(5813);function Gw(){return(0,sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,In.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Q_(n,e=Oi.y){return n=null!=n?n:BT,(0,sr.e)((t,r)=>{let i,a=!0;t.subscribe((0,In.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function BT(n,e){return n===e}var ot,Mr=L(2011),X_=(L(5881),L(3942)),fe=L(5861),jT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fa={},J_=J_||{},Ft=jT||self;function Tg(){}function Dg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ey="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function Ww(n,e,t){return n.call.apply(n.bind,arguments)}function qw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Xr(n,e,t){return(Xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ww:qw).apply(null,arguments)}function sc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Rn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function eu(){this.s=this.s,this.o=this.o}var ty={};eu.prototype.s=!1,eu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $T(n){return Object.prototype.hasOwnProperty.call(n,ey)&&n[ey]||(n[ey]=++Ut)}(this);delete ty[n]}},eu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pa=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Sg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Ag(n){return Array.prototype.concat.apply([],arguments)}function Kw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wf(n){return/^[\s\xa0]*$/.test(n)}var fi,GT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Jr(n,e){return-1!=n.indexOf(e)}function Cd(n,e){return n<e?-1:n>e?1:0}e:{var xg=Ft.navigator;if(xg){var Rg=xg.userAgent;if(Rg){fi=Rg;break e}}fi=""}function Zw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Yw(n){const e={};for(const t in n)e[t]=n[t];return e}var Qw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Qw.length;a++)t=Qw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ny(n){return ny[" "](n),n}ny[" "]=Tg;var iy,n,sR=Jr(fi,"Opera"),Td=Jr(fi,"Trident")||Jr(fi,"MSIE"),WT=Jr(fi,"Edge"),Mg=WT||Td,ry=Jr(fi,"Gecko")&&!(Jr(fi.toLowerCase(),"webkit")&&!Jr(fi,"Edge"))&&!(Jr(fi,"Trident")||Jr(fi,"MSIE"))&&!Jr(fi,"Edge"),qT=Jr(fi.toLowerCase(),"webkit")&&!Jr(fi,"Edge");function Pg(){var n=Ft.document;return n?n.documentMode:void 0}e:{var eE="",tE=(n=fi,ry?/rv:([^\);]+)(\)|;)/.exec(n):WT?/Edge\/([\d\.]+)/.exec(n):Td?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qT?/WebKit\/(\S+)/.exec(n):sR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(tE&&(eE=tE?tE[1]:""),Td){var nE=Pg();if(null!=nE&&nE>parseFloat(eE)){iy=String(nE);break e}}iy=eE}var oR={};var uR=Ft.document&&Td&&(Pg()||parseInt(iy,10))||void 0,lR=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",Tg,e),Ft.removeEventListener("test",Tg,e)}catch(t){}return n}();function ur(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function oc(n,e){if(ur.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ry){e:{try{ny(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:KT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&oc.Z.h.call(this)}}ur.prototype.h=function(){this.defaultPrevented=!0},Rn(oc,ur);var KT={2:"touch",3:"pen",4:"mouse"};oc.prototype.h=function(){oc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dd="closure_listenable_"+(1e6*Math.random()|0),sy=0;function iE(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++sy,this.ca=this.fa=!1}function Sd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ng(n){this.src=n,this.g={},this.h=0}function ga(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=pa(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Sd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kg(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Ng.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=kg(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new iE(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var oy="closure_lm_"+(1e6*Math.random()|0),Ef={};function sE(n,e,t,r,i){if(r&&r.once)return oE(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)sE(n,e[a],t,r,i);return null}return t=uy(t),n&&n[Dd]?n.N(e,t,vf(r)?!!r.capture:!!r,i):ay(n,e,t,!1,r,i)}function ay(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=vf(i)?!!i.capture:!!i,h=ac(n);if(h||(n[oy]=h=new Ng(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function ZT(){var e=xd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)lR||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Og(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function oE(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)oE(n,e[a],t,r,i);return null}return t=uy(t),n&&n[Dd]?n.O(e,t,vf(r)?!!r.capture:!!r,i):ay(n,e,t,!0,r,i)}function Ad(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Ad(n,e[a],t,r,i);else r=vf(r)?!!r.capture:!!r,t=uy(t),n&&n[Dd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kg(a=n.g[e],t,r,i))&&(Sd(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=ac(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kg(e,t,r,i)),(t=-1<n?e[n]:null)&&zu(t))}function zu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Dd])ga(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Og(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ac(e))?(ga(t,n),0==t.h&&(t.src=null,e[oy]=null)):Sd(n)}}}function Og(n){return n in Ef?Ef[n]:Ef[n]="on"+n}function xd(n,e){if(n.ca)n=!0;else{e=new oc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&zu(n),n=t.call(r,e)}return n}function ac(n){return(n=n[oy])instanceof Ng?n:null}var Ku="__closure_events_fn_"+(1e9*Math.random()>>>0);function uy(n){return"function"==typeof n?n:(n[Ku]||(n[Ku]=function(e){return n.handleEvent(e)}),n[Ku])}function Gr(){eu.call(this),this.i=new Ng(this),this.P=this,this.I=null}function ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ur(e,n);else if(e instanceof ur)e.target=e.target||n;else{var i=e;Xw(e=new ur(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Rd(l,r,!0,e)&&i}if(i=Rd(l=e.g=n,r,!0,e)&&i,i=Rd(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Rd(l=e.g=t[a],r,!1,e)&&i}function Rd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,g=l.ia||l.src;l.fa&&ga(n.i,l),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}Rn(Gr,eu),Gr.prototype[Dd]=!0,Gr.prototype.removeEventListener=function(n,e,t,r){Ad(this,n,e,t,r)},Gr.prototype.M=function(){if(Gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Sd(t[r]);delete n.g[e],n.h--}}this.I=null},Gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var If=Ft.JSON.stringify;function aE(){var n=cE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ug,uE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lE,n=>n.reset());class lE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cR(n){Ft.setTimeout(()=>{throw n},0)}function Fg(n,e){Ug||function YT(){var n=Ft.Promise.resolve(void 0);Ug=function(){n.then(QT)}}(),Vg||(Ug(),Vg=!0),cE.add(n,e)}var Vg=!1,cE=new class Lg{constructor(){this.h=this.g=null}add(e,t){const r=uE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function QT(){for(var n;n=aE();){try{n.h.call(n.g)}catch(t){cR(t)}var e=uE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Vg=!1}function Ci(n,e){Gr.call(this),this.h=n||1,this.g=e||Ft,this.j=Xr(this.kb,this),this.l=Date.now()}function ly(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function cy(n,e,t){if("function"==typeof n)t&&(n=Xr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function XT(n){n.g=cy(()=>{n.g=null,n.i&&(n.i=!1,XT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Rn(Ci,Gr),(ot=Ci.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ei(this,"tick"),this.da&&(ly(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){Ci.Z.M.call(this),ly(this),delete this.g};class dR extends eu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XT(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Md(n){eu.call(this),this.h=n,this.g={}}Rn(Md,eu);var JT=[];function dE(n,e,t,r){Array.isArray(t)||(t&&(JT[0]=t.toString()),t=JT);for(var i=0;i<t.length;i++){var a=sE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Bg(n){Zw(n.g,function(e,t){this.g.hasOwnProperty(t)&&zu(e)},n),n.g={}}function bf(){this.g=!0}function Pd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return If(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Md.prototype.M=function(){Md.Z.M.call(this),Bg(this)},Md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bf.prototype.Aa=function(){this.g=!1},bf.prototype.info=function(){};var Zu={},fE=null;function jg(){return fE=fE||new Gr}function dy(n){ur.call(this,Zu.Ma,n)}function Nd(n){const e=jg();ei(e,new dy(e,n))}function pE(n,e){ur.call(this,Zu.STAT_EVENT,n),this.stat=e}function Qn(n){const e=jg();ei(e,new pE(e,n))}function $g(n,e){ur.call(this,Zu.Na,n),this.size=e}function Cf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Zu.Ma="serverreachability",Rn(dy,ur),Zu.STAT_EVENT="statevent",Rn(pE,ur),Zu.Na="timingevent",Rn($g,ur);var Hg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},rD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gg(){}function mE(){}Gg.prototype.h=null;var fy,Tf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Df(){ur.call(this,"d")}function hy(){ur.call(this,"c")}function uc(){}function lc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Md(this),this.P=py,this.W=new Ci(n=Mg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _E}function _E(){this.i=null,this.g="",this.h=!1}Rn(Df,ur),Rn(hy,ur),Rn(uc,Gg),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},fy=new uc;var py=45e3,Sf={},Af={};function gy(n,e,t){n.K=1,n.v=Ud(nu(e)),n.s=t,n.U=!0,yE(n,null)}function yE(n,e){n.F=Date.now(),kd(n),n.A=nu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ey(t.h,"t",r),n.C=0,t=n.l.H,n.h=new _E,n.g=_c(n.l,t?e:null,!n.s),0<n.O&&(n.L=new dR(Xr(n.Ia,n,n.g),n.O)),dE(n.V,n.g,"readystatechange",n.gb),e=n.H?Yw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Nd(1),function eD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),g=0;g<h.length;g++){var v=h[g].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Wg(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function iD(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=sD(n,t),i==Af){4==e&&(n.o=4,Qn(14),r=!1),Pd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Sf){n.o=4,Qn(15),Pd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Pd(n.j,n.m,i,null),Ao(n,i)}Wg(n)&&i!=Af&&i!=Sf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xu(e),e.L=!0,Qn(11))):(Pd(n.j,n.m,t,"[Invalid Chunked Response]"),Yu(n),Od(n))}function sD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Af:(t=Number(e.substring(t,r)),isNaN(t)?Sf:(r+=1)+t>e.length?Af:(e=e.substr(r,t),n.C=r+t,e))}function kd(n){n.Y=Date.now()+n.P,my(n,n.P)}function my(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cf(Xr(n.eb,n),e)}function xf(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Od(n){0==n.l.G||n.I||fc(n.l,n)}function Yu(n){xf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ly(n.W),Bg(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ao(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Kg(t.i,n)))if(t.I=n.N,!n.J&&Kg(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Cf(Xr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;iu(t),em(t)}Ff(t),Qn(18)}if(1>=DE(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else Zs(t,11)}else if((n.J||t.g==n)&&iu(t),!wf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const D=v[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const Z=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(Jr(Z,"spdy")||Jr(Z,"quic")||Jr(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(SE(a,a.h),a.h=null))}if(r.D){const ve=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(r.sa=ve,Xn(r.F,r.D,ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=mc(r,r.H?r.la:null,r.W),l.J){Iy(r.i,l);var h=l,g=r.K;g&&h.setTimeout(g),h.B&&(xf(h),kd(h)),r.g=l}else ws(r);0<t.l.length&&vs(t)}else"stop"!=v[0]&&"close"!=v[0]||Zs(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Zs(t,7):dc(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}Nd(4)}catch(v){}}function _y(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Dg(n)||"string"==typeof n)Sg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Dg(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function qg(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Dg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Ld(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ld)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vE(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];tu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)tu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function tu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=lc.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==ru(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const D=ru(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||Mg||this.g&&(this.h.h||this.g.ga()||LE(this.g)))){this.I||4!=D||7==e||Nd(8==e||0>=S?3:2),xf(this);var t=this.g.ba();this.N=t;t:if(Wg(this)){var r=LE(this.g);n="";var i=r.length,a=4==ru(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yu(this),Od(this);var l="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function tD(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wf(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Qn(12),Yu(this),Od(this);break e}Pd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ao(this,t)}this.U?(iD(this,D,l),Mg&&this.i&&3==D&&(dE(this.V,this.W,"tick",this.fb),this.W.start())):(Pd(this.j,this.m,l,null),Ao(this,l)),4==D&&Yu(this),this.i&&!this.I&&(4==D?fc(this.l,this):(this.i=!1,kd(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Qn(12)):(this.o=0,Qn(13)),Yu(this),Od(this)}}}catch(D){}},ot.fb=function(){if(this.g){var n=ru(this.g),e=this.g.ga();this.C<e.length&&(xf(this),iD(this,n,e),this.i&&4!=n&&kd(this))}},ot.cancel=function(){this.I=!0,Yu(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function hE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Nd(3),Qn(17)),Yu(this),this.o=2,Od(this)):my(this,this.Y-n)},(ot=Ld.prototype).R=function(){vE(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return vE(this),this.g.concat()},ot.get=function(n,e){return tu(this.h,n)?this.h[n]:e},ot.set=function(n,e){tu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var yy=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof xo){this.g=void 0!==e?e:n.g,Fd(this,n.j),this.s=n.s,Rf(this,n.i),Mf(this,n.m),this.l=n.l,e=n.h;var t=new Pf;t.i=e.i,e.g&&(t.g=new Ld(e.g),t.h=e.h),wy(this,t),this.o=n.o}else n&&(t=String(n).match(yy))?(this.g=!!e,Fd(this,t[1]||"",!0),this.s=Vd(t[2]||""),Rf(this,t[3]||"",!0),Mf(this,t[4]),this.l=Vd(t[5]||"",!0),wy(this,t[6]||"",!0),this.o=Vd(t[7]||"")):(this.g=!!e,this.h=new Pf(null,this.g))}function nu(n){return new xo(n)}function Fd(n,e,t){n.j=t?Vd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Rf(n,e,t){n.i=t?Vd(e,!0):e}function Mf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function wy(n,e,t){e instanceof Pf?(n.h=e,function IE(n,e){e&&!n.j&&(Qu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Ro(this,r),Ey(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ma(e,lD)),n.h=new Pf(e,n.g))}function Xn(n,e,t){n.h.set(e,t)}function Ud(n){return Xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Vd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ma(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,wE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function wE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}xo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ma(e,EE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ma(e,EE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ma(t,"/"==t.charAt(0)?Bd:uD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ma(t,cD)),n.join("")};var EE=/[#\/\?@]/g,uD=/[#\?:]/g,Bd=/[#\?]/g,lD=/[#\?@]/g,cD=/#/g;function Pf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qu(n){n.g||(n.g=new Ld,n.h=0,n.i&&function vy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ro(n,e){Qu(n),e=cc(n,e),tu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,tu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vE(n)))}function zg(n,e){return Qu(n),e=cc(n,e),tu(n.g.h,e)}function Ey(n,e,t){Ro(n,e),0<t.length&&(n.i=null,n.g.set(cc(n,e),Kw(t)),n.h+=t.length)}function cc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CE(n){this.l=n||dD,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ea&&Ft.g.Ea()&&Ft.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Pf.prototype).add=function(n,e){Qu(this),this.i=null,n=cc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Qu(this),this.g.forEach(function(t,r){Sg(t,function(i){n.call(e,i,r,this)},this)},this)},ot.T=function(){Qu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ot.R=function(n){Qu(this);var e=[];if("string"==typeof n)zg(this,n)&&(e=Ag(e,this.g.get(cc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ag(e,n[t])}return e},ot.set=function(n,e){return Qu(this),this.i=null,zg(this,n=cc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var dD=10;function TE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DE(n){return n.h?1:n.g?n.g.size:0}function Kg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function SE(n,e){n.g?n.g.add(e):n.h=e}function Iy(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function AE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Kw(n.i)}function by(){}function hR(){this.g=new by}function fR(n,e,t){const r=t||"";try{_y(n,function(i,a){let l=i;vf(i)&&(l=If(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function jd(n){this.l=n.$b||null,this.j=n.ib||!1}function Nf(n,e){Gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=xE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}CE.prototype.cancel=function(){if(this.i=AE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},by.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},by.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},Rn(jd,Gg),jd.prototype.g=function(){return new Nf(this.l,this.j)},jd.prototype.i=function(n){return function(){return n}}({}),Rn(Nf,Gr);var xE=0;function Ks(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Yg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qg(n)}function Qg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=Nf.prototype).open=function(n,e){if(this.readyState!=xE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Qg(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yg(this)),this.readyState=xE},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qg(this)),this.g&&(this.readyState=3,Qg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ks(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yg(this):Qg(this),3==this.readyState&&Ks(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,Yg(this))},ot.Ta=function(n){this.g&&(this.response=n,Yg(this))},ot.ha=function(){this.g&&Yg(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var RE=Ft.JSON.parse;function wr(n){Gr.call(this),this.headers=new Ld,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ty,this.K=this.L=!1}Rn(wr,Gr);var Ty="",hD=/^https?$/i,pR=["POST","PUT"];function PE(n){return"content-type"==n.toLowerCase()}function NE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Xg(n),Jg(n)}function Xg(n){n.D||(n.D=!0,ei(n,"complete"),ei(n,"error"))}function kE(n){if(n.h&&void 0!==J_&&(!n.C[1]||4!=ru(n)||2!=n.ba()))if(n.v&&4==ru(n))cy(n.Fa,0,n);else if(ei(n,"readystatechange"),4==ru(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(yy)[1]||null;if(!i&&Ft.self&&Ft.self.location){var a=Ft.self.location.protocol;i=a.substr(0,a.length-1)}r=!hD.test(i?i.toLowerCase():"")}t=r}if(t)ei(n,"complete"),ei(n,"success");else{n.m=6;try{var l=2<ru(n)?n.g.statusText:""}catch(g){l=""}n.j=l+" ["+n.ba()+"]",Xg(n)}}finally{Jg(n)}}}function Jg(n,e){if(n.g){OE(n);const t=n.g,r=n.C[0]?Tg:null;n.g=null,n.C=null,e||ei(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function OE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function ru(n){return n.g?n.g.readyState:0}function LE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ty:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function $d(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function fD(n){let e="";return Zw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xn(n,e,t))}function _a(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function FE(n){this.za=0,this.l=[],this.h=new bf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_a("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_a("baseRetryDelayMs",5e3,n),this.$a=_a("retryDelaySeedMs",1e4,n),this.Ya=_a("forwardChannelMaxRetries",2,n),this.ra=_a("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new CE(n&&n.concurrentRequestLimit),this.Ca=new hR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function dc(n){if(UE(n),3==n.G){var e=n.V++,t=nu(n.F);Xn(t,"SID",n.J),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),Mo(n,t),(e=new lc(n,n.h,e,void 0)).K=2,e.v=Ud(nu(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=_c(e.l,null),e.g.ea(e.v)),e.F=Date.now(),kd(e)}gc(n)}function em(n){n.g&&(Xu(n),n.g.cancel(),n.g=null)}function UE(n){em(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),iu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function kf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&vs(n)}function vs(n){TE(n.i)||n.m||(n.m=!0,Fg(n.Ha,n),n.C=0)}function pi(n,e){var t;t=e?e.m:n.V++;const r=nu(n.F);Xn(r,"SID",n.J),Xn(r,"RID",t),Xn(r,"AID",n.U),Mo(n,r),n.o&&n.s&&$d(r,n.o,n.s),t=new lc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Lf(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),SE(n.i,t),gy(t,r,e)}function Mo(n,e){n.j&&_y({},function(t,r){Xn(e,r,t)})}function Lf(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Xr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let v=i[g].h;const D=i[g].g;if(v-=a,0>v)a=Math.max(0,i[g].h-100),h=!1;else try{fR(D,l,"req"+v+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function ws(n){n.g||n.u||(n.Y=1,Fg(n.Ga,n),n.A=0)}function Ff(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Cf(Xr(n.Ga,n),pc(n,n.A)),n.A++,0))}function Xu(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function hc(n){n.g=new lc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=nu(n.oa);Xn(e,"RID","rpc"),Xn(e,"SID",n.J),Xn(e,"CI",n.N?"0":"1"),Xn(e,"AID",n.U),Mo(n,e),Xn(e,"TYPE","xmlhttp"),n.o&&n.s&&$d(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ud(nu(e)),t.s=null,t.U=!0,yE(t,n)}function iu(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function fc(n,e){var t=null;if(n.g==e){iu(n),Xu(n),n.g=null;var r=2}else{if(!Kg(n.i,e))return;t=e.D,Iy(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ei(r=jg(),new $g(r,t,e,i)),vs(n)}else ws(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Of(n,e){return!(DE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Cf(Xr(n.Ha,n,e),pc(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ff(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Zs(n,5);break;case 4:Zs(n,10);break;case 3:Zs(n,6);break;default:Zs(n,2)}}function pc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Zs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Xr(n.jb,n);t||(t=new xo("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||Fd(t,"https"),Ud(t)),function Cy(n,e){const t=new bf;if(Ft.Image){const r=new Image;r.onload=sc(Zg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=sc(Zg,t,r,"TestLoadImage: error",!1,e),r.onabort=sc(Zg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=sc(Zg,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qn(2);n.G=0,n.j&&n.j.va(e),gc(n),UE(n)}function gc(n){n.G=0,n.I=-1,n.j&&((0!=AE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Kw(n.l),n.l.length=0),n.j.ua())}function mc(n,e,t){let r=function oD(n){return n instanceof xo?nu(n):new xo(n,void 0)}(t);if(""!=r.i)e&&Rf(r,e+"."+r.i),Mf(r,r.m);else{const i=Ft.location;r=function aD(n,e,t,r){var i=new xo(null,void 0);return n&&Fd(i,n),e&&Rf(i,e),t&&Mf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Zw(n.aa,function(i,a){Xn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Xn(r,e,t),Xn(r,"VER",n.ma),Mo(n,r),r}function _c(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wr(t&&n.Ba&&!n.qa?new jd({ib:!0}):n.qa)).L=n.H,e}function Dy(){}function Uf(){if(Td&&!(10<=Number(uR)))throw Error("Environmental error: no available transport.")}function ts(n,e){Gr.call(this),this.g=new FE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!wf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new yc(this)}function Sy(n){Df.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ay(){hy.call(this),this.status=1}function yc(n){this.g=n}(ot=wr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fy.g(),this.C=function gE(n){return n.h||(n.h=n.i())}(this.u?this.u:fy),this.g.onreadystatechange=Xr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void NE(this,a)}n=t||"";const i=new Ld(this.headers);r&&_y(r,function(a,l){i.set(l,a)}),r=function zw(n){e:{var e=PE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ft.FormData&&n instanceof Ft.FormData,!(0<=pa(pR,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{OE(this),0<this.B&&((this.K=function ME(n){return Td&&function aR(){return function Jw(n){var e=oR;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=GT(String(iy)).split("."),t=GT("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Cd(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Cd(0==i[2].length,0==a[2].length)||Cd(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xr(this.pa,this)):this.A=cy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){NE(this,a)}},ot.pa=function(){void 0!==J_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ei(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ei(this,"complete"),ei(this,"abort"),Jg(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jg(this,!0)),wr.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?kE(this):this.cb())},ot.cb=function(){kE(this)},ot.ba=function(){try{return 2<ru(this)?this.g.status:-1}catch(n){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),RE(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=FE.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new lc(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Yw(a),Xw(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Lf(this,i,e),Xn(t=nu(this.F),"RID",n),Xn(t,"CVER",22),this.D&&Xn(t,"X-HTTP-Session-Id",this.D),Mo(this,t),this.o&&a&&$d(t,this.o,a),SE(this.i,i),this.Ra&&Xn(t,"TYPE","init"),this.ja?(Xn(t,"$req",e),Xn(t,"SID","null"),i.$=!0,gy(i,t,null)):gy(i,t,e),this.G=2}}else 3==this.G&&(n?pi(this,n):0==this.l.length||TE(this.i)||pi(this))},ot.Ga=function(){if(this.u=null,hc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Cf(Xr(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qn(10),em(this),hc(this))},ot.ab=function(){null!=this.v&&(this.v=null,em(this),Ff(this),Qn(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Qn(2)):(this.h.info("Failed to ping google.com"),Qn(1))},(ot=Dy.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},Uf.prototype.g=function(n,e){return new ts(n,e)},Rn(ts,Gr),ts.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Fg(Xr(n.hb,n,e))),Qn(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=mc(n,null,n.W),vs(n)},ts.prototype.close=function(){dc(this.g)},ts.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,kf(this.g,e)}else this.v?((e={}).__data__=If(n),kf(this.g,e)):kf(this.g,n)},ts.prototype.M=function(){this.g.j=null,delete this.j,dc(this.g),delete this.g,ts.Z.M.call(this)},Rn(Sy,Df),Rn(Ay,hy),Rn(yc,Dy),yc.prototype.xa=function(){ei(this.g,"a")},yc.prototype.wa=function(n){ei(this.g,new Sy(n))},yc.prototype.va=function(n){ei(this.g,new Ay(n))},yc.prototype.ua=function(){ei(this.g,"b")},Uf.prototype.createWebChannel=Uf.prototype.g,ts.prototype.send=ts.prototype.u,ts.prototype.open=ts.prototype.m,ts.prototype.close=ts.prototype.close,Hg.NO_ERROR=0,Hg.TIMEOUT=8,Hg.HTTP_ERROR=6,rD.COMPLETE="complete",mE.EventType=Tf,Tf.OPEN="a",Tf.CLOSE="b",Tf.ERROR="c",Tf.MESSAGE="d",Gr.prototype.listen=Gr.prototype.N,wr.prototype.listenOnce=wr.prototype.O,wr.prototype.getLastError=wr.prototype.La,wr.prototype.getLastErrorCode=wr.prototype.Da,wr.prototype.getStatus=wr.prototype.ba,wr.prototype.getResponseJson=wr.prototype.Qa,wr.prototype.getResponseText=wr.prototype.ga,wr.prototype.send=wr.prototype.ea;var VE=fa.createWebChannelTransport=function(){return new Uf},BE=fa.getStatEventTarget=function(){return jg()},tm=fa.ErrorCode=Hg,pD=fa.EventType=rD,jE=fa.Event=Zu,$E=fa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},HE=fa.FetchXmlHttpFactory=jd,Vf=fa.WebChannel=mE,gD=fa.XhrIo=wr;const GE="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Hd="9.6.11";const su=new So.Yd("@firebase/firestore");function xy(){return su.logLevel}function je(n,...e){if(su.logLevel<=So.in.DEBUG){const t=e.map(Bf);su.debug(`Firestore (${Hd}): ${n}`,...t)}}function Pr(n,...e){if(su.logLevel<=So.in.ERROR){const t=e.map(Bf);su.error(`Firestore (${Hd}): ${n}`,...t)}}function vc(n,...e){if(su.logLevel<=So.in.WARN){const t=e.map(Bf);su.warn(`Firestore (${Hd}): ${n}`,...t)}}function Bf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function Pt(n,e){n||ut()}function Je(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class WE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class _D{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qE{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new gi,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,fe.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new gi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new WE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new ti(e)}}class yD{constructor(e,t,r){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new yD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.p=t.token,new jf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ED(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Es.A=-1;class KE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ED(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Wd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ry(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Er(0,0))}static max(){return new Dt(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function My(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ou(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ID(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wc{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends wc{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const mR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends wc{construct(e,t,r){return new pr(e,t,r)}static isValidIdentifier(e){return mR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(t)}static emptyPath(){return new pr([])}}class Ec{constructor(e){this.fields=e,e.sort(pr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const bD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=bD.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function au(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function ZE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function YE(n){const e=n.mapValue.fields.__previous_value__;return ZE(e)?YE(e):e}function Ic(n){const e=Po(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class Ny{constructor(e,t,r,i,a,l,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class ya{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ya("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}function Ju(n){return null==n}function bc(n){return 0===n&&1/n==-1/0}function ky(n){return"number"==typeof n&&Number.isInteger(n)&&!bc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class We{constructor(e){this.path=e}static fromPath(e){return new We(un.fromString(e))}static fromName(e){return new We(un.fromString(e).popFirst(5))}static empty(){return new We(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new un(e.slice()))}}const nm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oy={nullValue:"NULL_VALUE"};function Cc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ZE(n)?4:Vy(n)?9:10:ut()}function No(n,e){if(n===e)return!0;const t=Cc(n);if(t!==Cc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ic(n).isEqual(Ic(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Po(r.timestampValue),l=Po(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,au(n.bytesValue).isEqual(au(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Gn(r.geoPointValue.latitude)===Gn(i.geoPointValue.latitude)&&Gn(r.geoPointValue.longitude)===Gn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Gn(r.integerValue)===Gn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Gn(r.doubleValue),l=Gn(i.doubleValue);return a===l?bc(a)===bc(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Wd(n.arrayValue.values||[],e.arrayValue.values||[],No);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(My(a)!==My(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!No(a[h],l[h])))return!1;return!0}(n,e);default:return ut()}var i}function qd(n,e){return void 0!==(n.values||[]).find(t=>No(t,e))}function va(n,e){if(n===e)return 0;const t=Cc(n),r=Cc(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Gn(i.integerValue||i.doubleValue),h=Gn(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return QE(n.timestampValue,e.timestampValue);case 4:return QE(Ic(n),Ic(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=au(i),h=au(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let g=0;g<l.length&&g<h.length;g++){const v=Gt(l[g],h[g]);if(0!==v)return v}return Gt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Gt(Gn(i.latitude),Gn(a.latitude));return 0!==l?l:Gt(Gn(i.longitude),Gn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let g=0;g<l.length&&g<h.length;++g){const v=va(l[g],h[g]);if(v)return v}return Gt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},h=Object.keys(l),g=a.fields||{},v=Object.keys(g);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=Gt(h[D],v[D]);if(0!==S)return S;const P=va(l[h[D]],g[v[D]]);if(0!==P)return P}return Gt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ut()}}function QE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Po(n),r=Po(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function zd(n){return Ly(n)}function Ly(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Po(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?au(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Ly(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Ly(r.fields[h])}`;return a+"}"}(n.mapValue):ut();var e}function Tc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $f(n){return!!n&&"integerValue"in n}function Dc(n){return!!n&&"arrayValue"in n}function Fy(n){return!!n&&"nullValue"in n}function Uy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hf(n){return!!n&&"mapValue"in n}function Kd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ou(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Vy(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XE(n){return"nullValue"in n?Oy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tc(ya.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function JE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tc(ya.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?nm:ut()}function By(n,e){return void 0===n?e:void 0===e||va(n,e)>0?n:e}function CD(n,e){return void 0===n?e:void 0===e||va(n,e)<0?n:e}class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kd(t)}setAll(e){let t=pr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Kd(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return No(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ou(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ti(Kd(this.value))}}function eI(n){const e=[];return ou(n.fields,(t,r)=>{const i=new pr([t]);if(Hf(r)){const a=eI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ec(e)}class Ln{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ln(e,0,Dt.min(),Dt.min(),Ti.empty(),0)}static newFoundDocument(e,t,r){return new Ln(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new Ln(e,2,t,Dt.min(),Ti.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Dt.min(),Ti.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function br(n){return n.fields.find(e=>2===e.kind)}function el(n){return n.fields.filter(e=>2!==e.kind)}rm.UNKNOWN_ID=-1;class im{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gf(0,wa.min())}}function jy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Er(t+1,0):new Er(t,r));return new wa(i,We.empty(),e)}function TD(n){return new wa(n.readTime,n.key,-1)}class wa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wa(Dt.min(),We.empty(),-1)}static max(){return new wa(Dt.max(),We.empty(),-1)}}function tI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}class Zd{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function nI(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Zd(n,e,t,r,i,a,l)}function Sc(n){const e=Je(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+zd(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),e.P=t}return e.P}function Wf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xD(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!No(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qd(n.startAt,e.startAt)&&Qd(n.endAt,e.endAt)}function qf(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $y(n,e){return n.filters.filter(t=>t instanceof Fn&&t.field.isEqual(e))}function Hy(n,e,t){let r,i=!0;for(const a of $y(n,e)){let l,h=!0;switch(a.op){case"<":case"<=":l=XE(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Oy}By(r,l)===l&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];By(r,l)===l&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Gy(n,e,t){let r,i=!0;for(const a of $y(n,e)){let l,h=!0;switch(a.op){case">=":case">":l=JE(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=nm}CD(r,l)===l&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];CD(r,l)===l&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Fn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new DD(e,t,r):"array-contains"===t?new ko(e,r):"in"===t?new iI(e,r):"not-in"===t?new sI(e,r):"array-contains-any"===t?new AD(e,r):new Fn(e,t,r)}static V(e,t,r){return"in"===t?new SD(e,r):new Ea(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(va(t,this.value)):null!==t&&Cc(this.value)===Cc(t)&&this.v(va(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class DD extends Fn{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.v(t)}}class SD extends Fn{constructor(e,t){super(e,"in",t),this.keys=Ys(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ea extends Fn{constructor(e,t){super(e,"not-in",t),this.keys=Ys(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ys(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class ko extends Fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dc(t)&&qd(t.arrayValue,this.value)}}class iI extends Fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qd(this.value.arrayValue,t)}}class sI extends Fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(qd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qd(this.value.arrayValue,t)}}class AD extends Fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qd(this.value.arrayValue,r))}}class tl{constructor(e,t){this.position=e,this.inclusive=t}}class Yd{constructor(e,t="asc"){this.field=e,this.dir=t}}function xD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function sm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):va(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Qd(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!No(n.position[t],e.position[t]))return!1;return!0}class uu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=g,this.D=null,this.C=null}}function Wy(n,e,t,r,i,a,l,h){return new uu(n,e,t,r,i,a,l,h)}function Xd(n){return new uu(n)}function zf(n){return!Ju(n.limit)&&"F"===n.limitType}function Kf(n){return!Ju(n.limit)&&"L"===n.limitType}function Jd(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qy(n){for(const e of n.filters)if(e.S())return e.field;return null}function om(n){return null!==n.collectionGroup}function Ac(n){const e=Je(n);if(null===e.D){e.D=[];const t=qy(e),r=Jd(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Yd(t)),e.D.push(new Yd(pr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Yd(pr.keyField(),a))}}}return e.D}function ns(n){const e=Je(n);if(!e.C)if("F"===e.limitType)e.C=nI(e.path,e.collectionGroup,Ac(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Ac(e))t.push(new Yd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new tl(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new tl(e.startAt.position,!e.startAt.inclusive):null;e.C=nI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function am(n,e,t){return new uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eh(n,e){return Wf(ns(n),ns(e))&&n.limitType===e.limitType}function zy(n){return`${Sc(ns(n))}|lt:${n.limitType}`}function um(n){return`Query(target=${function rI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${zd(r.value)}`;var r}).join(", ")}]`),Ju(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>zd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>zd(t)).join(",")),`Target(${e})`}(ns(n))}; limitType=${n.limitType})`}function lm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=sm(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Ac(t),r)||t.endAt&&!function(i,a,l){const h=sm(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Ac(t),r)));var t,r}function Ky(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zy(n){return(e,t)=>{let r=!1;for(const i of Ac(n)){const a=oI(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function oI(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),g=l.data.field(i);return null!==h&&null!==g?va(h,g):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function Yy(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bc(e)?"-0":e}}function aI(n){return{integerValue:""+n}}function uI(n,e){return ky(e)?aI(e):Yy(n,e)}class cm{constructor(){this._=void 0}}function RD(n,e,t){return n instanceof th?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof xc?cI(n,e):n instanceof Rc?dI(n,e):function(r,i){const a=lI(r,i),l=hI(a)+hI(r.k);return $f(a)&&$f(r.k)?aI(l):Yy(r.M,l)}(n,e)}function MD(n,e,t){return n instanceof xc?cI(n,e):n instanceof Rc?dI(n,e):t}function lI(n,e){return n instanceof nh?$f(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class th extends cm{}class xc extends cm{constructor(e){super(),this.elements=e}}function cI(n,e){const t=fI(e);for(const r of n.elements)t.some(i=>No(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rc extends cm{constructor(e){super(),this.elements=e}}function dI(n,e){let t=fI(e);for(const r of n.elements)t=t.filter(i=>!No(i,r));return{arrayValue:{values:t}}}class nh extends cm{constructor(e,t){super(),this.M=e,this.k=t}}function hI(n){return Gn(n.integerValue||n.doubleValue)}function fI(n){return Dc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zf{constructor(e,t){this.field=e,this.transform=t}}class ND{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qf{}function pI(n,e,t){n instanceof rh?function(r,i,a){const l=r.value.clone(),h=ev(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof nl?function(r,i,a){if(!Yf(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ev(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Jy(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dm(n,e,t){var i;n instanceof rh?function(r,i,a){if(!Yf(r.precondition,i))return;const l=r.value.clone(),h=rl(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(Xy(i),l).setHasLocalMutations()}(n,e,t):n instanceof nl?function(r,i,a){if(!Yf(r.precondition,i))return;const l=rl(r.fieldTransforms,a,i),h=i.data;h.setAll(Jy(r)),h.setAll(l),i.convertToFoundDocument(Xy(i),h).setHasLocalMutations()}(n,e,t):Yf(n.precondition,i=e)&&i.convertToNoDocument(Dt.min())}function gI(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=lI(r.transform,i||null);null!=a&&(null==t&&(t=Ti.empty()),t.set(r.field,a))}return t||null}function Qy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Wd(t,r,(i,a)=>function PD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof xc&&r instanceof xc||t instanceof Rc&&r instanceof Rc?Wd(t.elements,r.elements,No):t instanceof nh&&r instanceof nh?No(t.k,r.k):t instanceof th&&r instanceof th);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Xy(n){return n.isFoundDocument()?n.version:Dt.min()}class rh extends Qf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class nl extends Qf{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Jy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ev(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,MD(l,h,t[i]))}return r}function rl(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,RD(a,l,e))}return r}class Xf extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class tv extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ih{constructor(e){this.count=e}}var Wr,nn;function kD(n){switch(n){default:return ut();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function nv(n){if(void 0===n)return Pr("GRPC error has no .code"),de.UNKNOWN;switch(n){case Wr.OK:return de.OK;case Wr.CANCELLED:return de.CANCELLED;case Wr.UNKNOWN:return de.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return de.INTERNAL;case Wr.UNAVAILABLE:return de.UNAVAILABLE;case Wr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Wr.NOT_FOUND:return de.NOT_FOUND;case Wr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Wr.ABORTED:return de.ABORTED;case Wr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Wr.DATA_LOSS:return de.DATA_LOSS;default:return ut()}}(nn=Wr||(Wr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class lu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ou(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return ID(this.inner)}size(){return this.innerSize}}class kr{constructor(e,t){this.comparator=e,this.root=t||mi.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wt(this.root,e,this.comparator,!1)}getReverseIterator(){return new wt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wt(this.root,e,this.comparator,!0)}}class wt{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:mi.RED,this.left=null!=i?i:mi.EMPTY,this.right=null!=a?a:mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new mi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return mi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1,mi.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new mi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mI(this.data.getIterator())}getIteratorFrom(e){return new mI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wn(this.comparator);return t.data=e,t}}class mI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cu(n){return n.hasNext()?n.getNext():void 0}const OD=new kr(We.comparator);function ji(){return OD}const hm=new kr(We.comparator);function Jn(){return hm}function fm(){return new lu(n=>n.toString(),(n,e)=>n.isEqual(e))}const _I=new kr(We.comparator),LD=new Wn(We.comparator);function _n(...n){let e=LD;for(const t of n)e=e.add(t);return e}const yI=new Wn(Gt);function Jf(){return yI}class sh{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,t)),new sh(Dt.min(),r,Jf(),ji(),_n())}}class oh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new oh(Ir.EMPTY_BYTE_STRING,t,_n(),_n(),_n())}}class pm{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class vI{constructor(e,t){this.targetId=e,this.$=t}}class wI{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ah{constructor(){this.B=0,this.L=II(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=_n(),t=_n(),r=_n();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new oh(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=II()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class FD{constructor(e){this.nt=e,this.st=new Map,this.it=ji(),this.rt=EI(),this.ot=new Wn(Gt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(qf(a))if(0===r){const l=new We(a.path);this.ct(t,l,Ln.newNoDocument(l,Dt.min()))}else Pt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&qf(h.target)){const g=new We(h.target.path);null!==this.it.get(g)||this.It(l,g)||this.ct(l,g,Ln.newNoDocument(g,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=_n();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(g=>{const v=this.wt(g);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new sh(e,t,this.ot,this.it,r);return this.it=ji(),this.rt=EI(),this.ot=new Wn(Gt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new ah,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Wn(Gt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new ah),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function EI(){return new kr(We.comparator)}function II(){return new kr(We.comparator)}const gm={asc:"ASCENDING",desc:"DESCENDING"},bI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class CI{constructor(e,t){this.databaseId=e,this.N=t}}function uh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TI(n,e){return n.N?e.toBase64():e.toUint8Array()}function ep(n,e){return uh(n,e.toTimestamp())}function gr(n){return Pt(!!n),Dt.fromTimestamp(function(e){const t=Po(e);return new Er(t.seconds,t.nanos)}(n))}function rv(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function DI(n){const e=un.fromString(n);return Pt(OI(e)),e}function tp(n,e){return rv(n.databaseId,e.path)}function Oo(n,e){const t=DI(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(sv(t))}function mm(n,e){return rv(n.databaseId,e)}function iv(n){const e=DI(n);return 4===e.length?un.emptyPath():sv(e)}function np(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sv(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function SI(n,e,t){return{name:tp(n,e),fields:t.value.mapValue.fields}}function AI(n,e,t){const r=Oo(n,e.name),i=gr(e.updateTime),a=new Ti({mapValue:{fields:e.fields}}),l=Ln.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function _m(n,e){let t;if(e instanceof rh)t={update:SI(n,e.key,e.value)};else if(e instanceof Xf)t={delete:tp(n,e.key)};else if(e instanceof nl)t={update:SI(n,e.key,e.data),updateMask:jD(e.fieldMask)};else{if(!(e instanceof tv))return ut();t={verify:tp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof th)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof nh)return{fieldPath:a.field.canonicalString(),increment:l.k};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ep(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function xI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Nr.updateTime(gr(i.updateTime)):void 0!==i.exists?Nr.exists(i.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Pt("REQUEST_TIME"===l.setToServerValue),h=new th):"appendMissingElements"in l?h=new xc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Rc(l.removeAllFromArray.values||[]):"increment"in l?h=new nh(a,l.increment):ut();const g=pr.fromServerFormat(l.fieldPath);return new Zf(g,h)}(n,i)):[];var i;if(e.update){const i=Oo(n,e.update.name),a=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ec((e.updateMask.fieldPaths||[]).map(v=>pr.fromServerFormat(v)));return new nl(i,a,l,t,r)}return new rh(i,a,t,r)}if(e.delete){const i=Oo(n,e.delete);return new Xf(i,t)}if(e.verify){const i=Oo(n,e.verify);return new tv(i,t)}return ut()}function rp(n,e){return{documents:[mm(n,e.path)]}}function MI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=mm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=mm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(D=>function(S){if("=="===S.op){if(Uy(S.value))return{unaryFilter:{field:ch(S.field),op:"IS_NAN"}};if(Fy(S.value))return{unaryFilter:{field:ch(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Uy(S.value))return{unaryFilter:{field:ch(S.field),op:"IS_NOT_NAN"}};if(Fy(S.value))return{unaryFilter:{field:ch(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ch(S.field),op:VD(S.op),value:S.value}}}(D));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:ch((D=v).field),direction:UD(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.N||Ju(v)?v:{value:v});var v,h,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function PI(n){let e=iv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=lh(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Yd(dh((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Ju(S)?null:S}(t.limit));let g=null;var D;t.startAt&&(g=new tl((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new tl(D.values||[],!D.before)}(t.endAt)),Wy(e,i,l,a,h,"F",g,v)}function lh(n){return n?void 0!==n.unaryFilter?[kI(n)]:void 0!==n.fieldFilter?[BD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>lh(e)).reduce((e,t)=>e.concat(t)):ut():[]}function UD(n){return gm[n]}function VD(n){return bI[n]}function ch(n){return{fieldPath:n.canonicalString()}}function dh(n){return pr.fromServerFormat(n.fieldPath)}function BD(n){return Fn.create(dh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function kI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=dh(n.unaryFilter.field);return Fn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=dh(n.unaryFilter.field);return Fn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dh(n.unaryFilter.field);return Fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=dh(n.unaryFilter.field);return Fn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function jD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Or(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ov(e)),e=$D(n.get(t),e);return ov(e)}function $D(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function ov(n){return n+"\x01\x01"}function Ia(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ut()}a=l+2}return new un(r)}const av=["userId","batchId"];function ym(n,e){return[n,Or(e)]}function uv(n,e,t){return[n,Or(e),t]}const HD={},lv=["prefixPath","collectionGroup","readTime","documentId"],GD=["prefixPath","collectionGroup","documentId"],LI=["collectionGroup","readTime","prefixPath","documentId"],FI=["canonicalId","targetId"],WD=["targetId","path"],qD=["path","targetId"],zD=["collectionId","parent"],cv=["indexId","uid"],KD=["uid","sequenceNumber"],UI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZD=["indexId","uid","orderedDocumentKey"],YD=["userId","collectionPath","documentId"],QD=["userId","collectionPath","largestBatchId"],XD=["userId","collectionGroup","largestBatchId"],VI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JD=[...VI,"documentOverlays"],BI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eS=[...BI,"indexConfiguration","indexState","indexEntries"],dv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _e((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _e?t:_e.resolve(t)}catch(t){return _e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.reject(t)}static resolve(e){return new _e((t,r)=>{t(e)})}static reject(e){return new _e((t,r)=>{r(e)})}static waitFor(e){return new _e((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=_e.resolve(!1);for(const r of e)t=t.next(i=>i?_e.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class vm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new gi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new ip(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=sp(r.target.error);this.At.reject(new ip(e,i))}}static open(e,t,r,i){try{return new vm(t,e.transaction(i,r))}catch(a){throw new ip(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fv(t)}}class Qs{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Qs.Vt((0,k.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),du(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Qs.St())return!0;const e=(0,k.z$)(),t=Qs.Vt(e),r=0<t&&t<10,i=Qs.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,fe.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new ip(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ne(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new ip(e,h))},a.onupgradeneeded=l=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.bt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,fe.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const g=vm.open(a.db,e,l?"readonly":"readwrite",r),v=i(g).next(D=>(g.Pt(),D)).catch(D=>(g.abort(D),_e.reject(D))).toPromise();return v.catch(()=>{}),yield g.Rt,v}catch(g){const v="FirebaseError"!==g.name&&h<3;if(je("SimpleDb","Transaction failed with error:",g.message,"Retrying:",v),a.close(),!v)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tS{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return du(this.Ft.delete())}}class ip extends Ne{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mc(n){return"IndexedDbTransactionError"===n.name}class fv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),du(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),du(this.store.add(e))}get(e){return du(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),du(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),du(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new _e((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new _e((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new _e((r,i)=>{t.onerror=a=>{const l=sp(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new _e((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const g=new tS(h),v=t(h.primaryKey,h.value,g);if(v instanceof _e){const D=v.catch(S=>(g.done(),_e.reject(S)));r.push(D)}g.isDone?i():null===g.Lt?h.continue():h.continue(g.Lt)}}).next(()=>_e.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function du(n){return new _e((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=sp(r.target.error);t(i)}})}let pv=!1;function sp(n){const e=Qs.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pv||(pv=!0,setTimeout(()=>{throw r},0)),r}}return n}class jI extends hv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ni(n,e){const t=Je(n);return Qs.xt(t.Ht,e)}class op{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&pI(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&dm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&dm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&Wd(this.mutations,e.mutations,(t,r)=>Qy(t,r))&&Wd(this.baseMutations,e.baseMutations,(t,r)=>Qy(t,r))}}class gv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=_I;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new gv(e,t,r,i)}}class mv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class il{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),h=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class _v{constructor(e){this.Jt=e}}function yv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:tp(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:uh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Pc(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:Pc(e.version)}}var i,a;return r}function vv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Pc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ba(n){const e=new Er(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function hh(n,e){const t=(e.baseMutations||[]).map(a=>xI(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>xI(n.Jt,a)),i=Er.fromMillis(e.localWriteTimeMs);return new op(e.batchId,i,t,r)}function Ca(n){const e=ba(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ba(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=ns(Xd(iv(i.documents[0])))):r=ns(PI(n.query)),new il(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function fh(n,e){const t=Pc(e.snapshotVersion),r=Pc(e.lastLimboFreeSnapshotVersion);let i;i=qf(e.target)?rp(n.Jt,e.target):MI(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function wv(n){const e=PI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?am(e,e.limit,"L"):e}function $I(n,e){return new mv(e.largestBatchId,xI(n.Jt,e.overlayMutation))}function Ev(n,e){const t=e.path.lastSegment();return[n,Or(e.path.popLast()),t]}class rS{getBundleMetadata(e,t){return HI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ba(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return HI(e).put({bundleId:(r=t).id,createTime:Pc(gr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return GI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:wv(i.bundledQuery),readTime:ba(i.readTime)};var i})}saveNamedQuery(e,t){return GI(e).put({name:(r=t).name,readTime:Pc(gr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function HI(n){return ni(n,"bundles")}function GI(n){return ni(n,"namedQueries")}class Iv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Iv(e,t.uid||"")}getOverlay(e,t){return ph(e).get(Ev(this.userId,t)).next(r=>r?$I(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new mv(t,l);i.push(this.Xt(e,h))}),_e.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Or(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(ph(e).Qt("collectionPathOverlayIndex",h))}),_e.waitFor(a)}getOverlaysForCollection(e,t,r){const i=fm(),a=Or(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ph(e).qt("collectionPathOverlayIndex",l).next(h=>{for(const g of h){const v=$I(this.M,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=fm();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ph(e).Wt({index:"collectionGroupOverlayIndex",range:h},(g,v,D)=>{const S=$I(this.M,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return ph(e).put(function(r,i,a){const[l,h,g]=Ev(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:_m(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function ph(n){return ni(n,"documentOverlays")}class sl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Gn(e.integerValue));else if("doubleValue"in e){const r=Gn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),bc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(au(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Vy(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ut()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),We.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function bv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ap(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=bv(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}sl.fe=new sl;class up{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=ap(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=ap(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class iS{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class WI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class gh{constructor(){this.De=new up,this.Ce=new iS(this.De),this.xe=new WI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ol{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ol(this.indexId,this.documentKey,this.arrayValue,r)}}function Nc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=wm(n.arrayValue,e.arrayValue),0!==t?t:(t=wm(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function wm(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class sS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=br(e);if(void 0!==t&&!this.Be(t))return!1;const r=el(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class vR{constructor(){this.qe=new Cv}addToCollectionParentIndex(e,t){return this.qe.add(t),_e.resolve()}getCollectionParents(e,t){return _e.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return _e.resolve()}deleteFieldIndex(e,t){return _e.resolve()}getDocumentsMatchingTarget(e,t){return _e.resolve(null)}getFieldIndex(e,t){return _e.resolve(null)}getFieldIndexes(e,t){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}updateCollectionGroup(e,t,r){return _e.resolve()}updateIndexEntries(e,t){return _e.resolve()}}class Cv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wn(un.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wn(un.comparator)).toArray()}}const mh=new Uint8Array(0);class _h{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Cv,this.Ge=new lu(r=>Sc(r),(r,i)=>Wf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Or(i)};return Tv(e).put(a)}return _e.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ry(t),""],!1,!0);return Tv(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Ia(l.parent))}return r})}addFieldIndex(e,t){const r=Dv(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Dv(e),i=lp(e),a=Ta(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ta(e);let i=!0;const a=new Map;return _e.forEach(this.Qe(t),l=>this.getFieldIndex(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=_n();const h=[];return _e.forEach(a,(g,v)=>{var D;je("IndexedDbIndexManager",`Using index ${D=g,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(mt=>`${mt.fieldPath}:${mt.kind}`).join(",")}`} to execute ${Sc(t)}`);const S=function(mt,ft){const jt=br(ft);if(void 0===jt)return null;for(const sn of $y(mt,jt.fieldPath))switch(sn.op){case"array-contains-any":return sn.value.arrayValue.values||[];case"array-contains":return[sn.value]}return null}(v,g),P=function(mt,ft){const jt=new Map;for(const sn of el(ft))for(const ri of $y(mt,sn.fieldPath))switch(ri.op){case"==":case"in":jt.set(sn.fieldPath.canonicalString(),ri.value);break;case"not-in":case"!=":return jt.set(sn.fieldPath.canonicalString(),ri.value),Array.from(jt.values())}return null}(v,g),H=function(mt,ft){const jt=[];let sn=!0;for(const ri of el(ft)){const Uo=0===ri.kind?Hy(mt,ri.fieldPath,mt.startAt):Gy(mt,ri.fieldPath,mt.startAt);if(!Uo.value)return null;jt.push(Uo.value),sn&&(sn=Uo.inclusive)}return new tl(jt,sn)}(v,g),Z=function(mt,ft){const jt=[];let sn=!0;for(const ri of el(ft)){const Uo=0===ri.kind?Gy(mt,ri.fieldPath,mt.endAt):Hy(mt,ri.fieldPath,mt.endAt);if(!Uo.value)return null;jt.push(Uo.value),sn&&(sn=Uo.inclusive)}return new tl(jt,sn)}(v,g),ve=this.je(g,v,H),Oe=this.je(g,v,Z),bt=this.We(g,v,P),yt=this.ze(g.indexId,S,ve,!!H&&H.inclusive,Oe,!!Z&&Z.inclusive,bt);return _e.forEach(yt,mt=>r.Gt(mt,t.limit).next(ft=>{ft.forEach(jt=>{const sn=We.fromSegments(jt.documentKey);l.has(sn)||(l=l.add(sn),h.push(sn))})}))}).next(()=>h)}return _e.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,a,l,h){const g=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),v=g/(null!=t?t.length:1),D=[];for(let S=0;S<g;++S){const P=t?this.He(t[S/v]):mh,H=r?this.Je(e,P,r[S%v],i):this.Ye(e),Z=a?this.Xe(e,P,a[S%v],l):this.Ye(e+1);D.push(...this.createRange(H,Z,h.map(ve=>this.Je(e,P,ve,!0))))}return D}Je(e,t,r,i){const a=new ol(e,We.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new ol(e,We.empty(),t,r);return i?a.ke():a}Ye(e){return new ol(e,We.empty(),mh,mh)}getFieldIndex(e,t){const r=new sS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const l=a.filter(h=>r.$e(h));return l.sort((h,g)=>g.fields.length-h.fields.length),l.length>0?l[0]:null})}Ze(e,t){const r=new gh;for(const i of el(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);sl.fe.Zt(a,l)}return r.Se()}He(e){const t=new gh;return sl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new gh;return sl.fe.Zt(Tc(this.databaseId,t),r.Ne(function(i){const a=el(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new gh);let a=0;for(const l of el(e)){const h=r[a++];for(const g of i)if(this.en(t,l.fieldPath)&&Dc(h))i=this.nn(i,l,h);else{const v=g.Ne(l.kind);sl.fe.Zt(h,v)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const g=new gh;g.seed(h.Se()),sl.fe.Zt(l,g.Ne(t.kind)),a.push(g)}return a}en(e,t){return!!e.filters.find(r=>r instanceof Fn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Dv(e),i=lp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return _e.forEach(a,h=>i.get([h.indexId,this.uid]).next(g=>{l.push(function(v,D){const S=D?new Gf(D.sequenceNumber,new wa(ba(D.readTime),new We(Ia(D.documentKey)),D.largestBatchId)):Gf.empty(),P=v.fields.map(([H,Z])=>new im(pr.fromServerFormat(H),Z));return new rm(v.indexId,v.collectionGroup,P,S)}(h,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Dv(e),a=lp(e);return this.rn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>_e.forEach(h,g=>{return a.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:Pc((P=r).readTime),documentKey:Or(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return _e.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?_e.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),_e.forEach(h,g=>this.on(e,i,g).next(v=>{const D=this.un(a,g);return v.isEqual(D)?_e.resolve():this.an(e,a,g,v,D)}))))})}cn(e,t,r,i){return Ta(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Ta(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Ta(e);let a=new Wn(Nc);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(l,h)=>{a=a.add(new ol(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}un(e,t){let r=new Wn(Nc);const i=this.Ze(t,e);if(null==i)return r;const a=br(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Dc(l))for(const h of l.arrayValue.values||[])r=r.add(new ol(t.indexId,e.key,this.He(h),i))}else r=r.add(new ol(t.indexId,e.key,mh,i));return r}an(e,t,r,i,a){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,g,v,D,S){const P=h.getIterator(),H=g.getIterator();let Z=cu(P),ve=cu(H);for(;Z||ve;){let Oe=!1,bt=!1;if(Z&&ve){const yt=v(Z,ve);yt<0?bt=!0:yt>0&&(Oe=!0)}else null!=Z?bt=!0:Oe=!0;Oe?(D(ve),ve=cu(H)):bt?(S(Z),Z=cu(P)):(Z=cu(P),ve=cu(H))}}(i,a,Nc,h=>{l.push(this.cn(e,t,r,h))},h=>{l.push(this.hn(e,t,r,h))}),_e.waitFor(l)}rn(e){let t=1;return lp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Nc(l,h)).filter((l,h,g)=>!h||0!==Nc(l,g[h-1]));const i=[];i.push(e);for(const l of r){const h=Nc(l,e),g=Nc(l,t);if(0===h)i[0]=e.ke();else if(h>0&&g<0)i.push(l),i.push(l.ke());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,mh,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,mh,[]]));return a}}function Tv(n){return ni(n,"collectionParents")}function Ta(n){return ni(n,"indexEntries")}function Dv(n){return ni(n,"indexConfiguration")}function lp(n){return ni(n,"indexState")}const qI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Is(e,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sv(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const g=r.Wt({range:l},(D,S,P)=>(h++,P.delete()));a.push(g.next(()=>{Pt(1===h)}));const v=[];for(const D of t.mutations){const S=uv(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return _e.waitFor(a).next(()=>v)}function Av(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Is.DEFAULT_COLLECTION_PERCENTILE=10,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Is.DEFAULT=new Is(41943040,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Is.DISABLED=new Is(-1,0,0);class Em{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Pt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Em(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return al(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=yh(e),l=al(e);return l.add({}).next(h=>{Pt("number"==typeof h);const g=new op(h,t,r,i),v=function(P,H,Z){const ve=Z.baseMutations.map(bt=>_m(P.Jt,bt)),Oe=Z.mutations.map(bt=>_m(P.Jt,bt));return{userId:H,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ve,mutations:Oe}}(this.M,this.userId,g),D=[];let S=new Wn((P,H)=>Gt(P.canonicalString(),H.canonicalString()));for(const P of i){const H=uv(this.userId,P.key.path,h);S=S.add(P.key.path.popLast()),D.push(l.put(v)),D.push(a.put(H,HD))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[h]=g.keys()}),_e.waitFor(D).next(()=>g)})}lookupMutationBatch(e,t){return al(e).get(t).next(r=>r?(Pt(r.userId===this.userId),hh(this.M,r)):null)}fn(e,t){return this.ln[t]?_e.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return al(e).Wt({index:"userMutationsIndex",range:i},(l,h,g)=>{h.userId===this.userId&&(Pt(h.batchId>=r),a=hh(this.M,h)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return al(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return al(e).qt("userMutationsIndex",t).next(r=>r.map(i=>hh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ym(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return yh(e).Wt({range:i},(l,h,g)=>{const[v,D,S]=l,P=Ia(D);if(v===this.userId&&t.path.isEqual(P))return al(e).get(S).next(H=>{if(!H)throw ut();Pt(H.userId===this.userId),a.push(hh(this.M,H))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Gt);const i=[];return t.forEach(a=>{const l=ym(this.userId,a.path),h=IDBKeyRange.lowerBound(l),g=yh(e).Wt({range:h},(v,D,S)=>{const[P,H,Z]=v,ve=Ia(H);P===this.userId&&a.path.isEqual(ve)?r=r.add(Z):S.done()});i.push(g)}),_e.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ym(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Wn(Gt);return yh(e).Wt({range:l},(g,v,D)=>{const[S,P,H]=g,Z=Ia(P);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add(H)):D.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(al(e).get(a).next(l=>{if(null===l)throw ut();Pt(l.userId===this.userId),r.push(hh(this.M,l))}))}),_e.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sv(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),_e.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _e.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return yh(e).Wt({range:r},(a,l,h)=>{if(a[0]===this.userId){const g=Ia(a[1]);i.push(g)}else h.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return Im(e,this.userId,t)}wn(e){return zI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Im(n,e,t){const r=ym(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return yh(n).Wt({range:a,jt:!0},(h,g,v)=>{const[D,S,P]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function al(n){return ni(n,"mutations")}function yh(n){return ni(n,"documentMutations")}function zI(n){return ni(n,"mutationQueues")}class kc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new kc(0)}static yn(){return new kc(-1)}}class oS{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new kc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Dt.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vh(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return vh(e).Wt((l,h)=>{const g=Ca(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>_e.waitFor(a)).next(()=>i)}forEachTarget(e,t){return vh(e).Wt((r,i)=>{const a=Ca(i);t(a)})}pn(e){return KI(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}In(e,t){return KI(e).put("targetGlobalKey",t)}Tn(e,t){return vh(e).put(fh(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Sc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return vh(e).Wt({range:i,index:"queryTargetsIndex"},(l,h,g)=>{const v=Ca(h);Wf(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ul(e);return t.forEach(l=>{const h=Or(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),_e.waitFor(i)}removeMatchingKeys(e,t,r){const i=ul(e);return _e.forEach(t,a=>{const l=Or(a.path);return _e.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ul(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ul(e);let a=_n();return i.Wt({range:r,jt:!0},(l,h,g)=>{const v=Ia(l[1]),D=new We(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Or(t.path),i=IDBKeyRange.bound([r],[Ry(r)],!1,!0);let a=0;return ul(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,h],g,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}Et(e,t){return vh(e).get(t).next(r=>r?Ca(r):null)}}function vh(n){return ni(n,"targets")}function KI(n){return ni(n,"targetGlobal")}function ul(n){return ni(n,"targetDocuments")}function Oc(n){return xv.apply(this,arguments)}function xv(){return xv=(0,fe.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==dv)throw n;je("LocalStore","Unexpectedly lost primary lease")}),xv.apply(this,arguments)}function wh([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class ZI{constructor(e){this.An=e,this.buffer=new Wn(wh),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wh(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,fe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Mc(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Oc(i)}yield t.Sn(e)}))}}class QI{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return _e.resolve(Es.A);const r=new ZI(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(qI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qI):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,l,h,g,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),xy()<=So.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(v-g)+`ms\nTotal Duration: ${v-D}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class XI{constructor(e,t){this.db=e,this.garbageCollector=new QI(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return cp(e,r)}removeReference(e,t,r){return cp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cp(e,t)}On(e,t){return function(r,i){let a=!1;return zI(r).zt(l=>Im(r,l,i).next(h=>(h&&(a=!0),_e.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(l,h)=>{if(h<=t){const g=this.On(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),ul(e).delete([0,Or(l.path)])))});i.push(g)}}).next(()=>_e.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cp(e,t)}Mn(e,t){const r=ul(e);let i,a=Es.A;return r.Wt({index:"documentTargetsIndex"},([l,h],{path:g,sequenceNumber:v})=>{0===l?(a!==Es.A&&t(new We(Ia(i)),a),a=v,i=g):a=Es.A}).next(()=>{a!==Es.A&&t(new We(Ia(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cp(n,e){return ul(n).put((r=n.currentSequenceNumber,{targetId:0,path:Or(e.path),sequenceNumber:r}));var r}class JI{constructor(){this.changes=new lu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?_e.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aS{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Lc(e).put(r)}removeEntry(e,t,r){return Lc(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],vv(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Ln.newInvalidDocument(t);return Lc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dp(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:Ln.newInvalidDocument(t)};return Lc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(dp(t))},(i,a)=>{r={document:this.$n(t,a),size:Av(a)}}).next(()=>r)}getEntries(e,t){let r=ji();return this.Ln(e,t,(i,a)=>{const l=this.$n(i,a);r=r.insert(i,l)}).next(()=>r)}Un(e,t){let r=ji(),i=new kr(We.comparator);return this.Ln(e,t,(a,l)=>{const h=this.$n(a,l);r=r.insert(a,h),i=i.insert(a,Av(l))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return _e.resolve();let i=new Wn(Eh);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(dp(i.first()),dp(i.last())),l=i.getIterator();let h=l.getNext();return Lc(e).Wt({index:"documentKeyIndex",range:a},(g,v,D)=>{const S=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&Eh(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.Ut(dp(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),vv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lc(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=ji();for(const g of l){const v=this.$n(We.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=ji();const l=tb(t,r),h=tb(t,wa.max());return Lc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(g,v,D)=>{const S=this.$n(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new uS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eb(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}Fn(e,t){return eb(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function nS(n,e){let t;if(e.document)t=AI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=ba(e.noDocument.readTime);t=Ln.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=We.fromSegments(e.unknownDocument.path),i=ba(e.unknownDocument.version);t=Ln.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Er(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Ln.newInvalidDocument(e)}}class uS extends JI{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new lu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Wn((a,l)=>Gt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const g=yv(this.Kn.M,l);i=i.add(a.path.popLast()),r+=Av(g)-h.size,t.push(this.Kn.addEntry(e,a,g))}else if(r-=h.size,this.trackRemovals){const g=yv(this.Kn.M,l.convertToNoDocument(Dt.min()));t.push(this.Kn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),_e.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function eb(n){return ni(n,"remoteDocumentGlobal")}function Lc(n){return ni(n,"remoteDocumentsV14")}function dp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tb(n,e){const t=e.documentKey.path.toArray();return[n,vv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Eh(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class lS{constructor(e){this.M=e}kt(e,t,r,i){const a=new vm("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",av,{unique:!0}),h.createObjectStore("documentMutations"),bm(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=_e.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),bm(e)),l=l.next(()=>function(h){const g=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,g){return g.store("mutations").qt().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",av,{unique:!0});const D=g.store("mutations"),S=v.map(P=>D.put(P));return _e.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Qn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(l=l.next(()=>this.Wn(a))),r<8&&i>=8&&(l=l.next(()=>this.zn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Hn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:YD});g.createIndex("collectionPathOverlayIndex",QD,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",XD,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:lv});g.createIndex("documentKeyIndex",GD),g.createIndex("collectionGroupIndex",LI)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:cv}).createIndex("sequenceNumberIndex",KD,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:UI}).createIndex("documentKeyIndex",ZD,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Av(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>_e.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(h=>_e.forEach(h,g=>{Pt(g.userId===a.userId);const v=hh(this.M,g);return Sv(e,a.userId,v).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,h)=>{const g=new un(l),v=[0,Or(g)];a.push(t.get(v).next(D=>D?_e.resolve():t.put({targetId:0,path:Or(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>_e.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:zD});const r=t.store("collectionParents"),i=new Cv,a=l=>{if(i.add(l)){const h=l.lastSegment(),g=l.popLast();return r.put({collectionId:h,parent:Or(g)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,h)=>{const g=new un(l);return a(g.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,h,g],v)=>{const D=Ia(h);return a(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=Ca(i),l=fh(this.M,a);return t.put(l)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const h=t.store("remoteDocumentsV14"),g=(v=l,v.document?new We(un.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):ut()).path.toArray();var v;const D={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>_e.waitFor(i))}}function bm(n){n.createObjectStore("targetDocuments",{keyPath:WD}).createIndex("documentTargetsIndex",qD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FI,{unique:!0}),n.createObjectStore("targetGlobal")}const Xs="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rv{constructor(e,t,r,i,a,l,h,g,v,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=l,this.document=h,this.Xn=v,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!Rv.vt())throw new Ne(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XI(this,i),this.hs=t+"main",this.M=new _v(g),this.ls=new Qs(this.hs,this.ts,new lS(this.M)),this.fs=new oS(this.referenceDelegate,this.M),this.ds=new aS(this.M),this._s=new rS,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,Xs);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Es(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ll(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Mc(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Fc(e).get("owner").next(t=>_e.resolve(this.bs(t)))}Vs(e){return ll(e).delete(this.clientId)}vs(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ni(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ds(a,18e5),h=a.filter(g=>-1===l.indexOf(g));return _e.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?_e.resolve(!0):Fc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,Xs);return!1}}return!(!this.networkEnabled||!this.inForeground)||ll(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new jI(t,Es.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>ll(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Em.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new _h(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Iv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.ts)?eS:13===l?BI:12===l?JD:11===l?VI:void ut();var l;let h;return this.ls.runTransaction(e,i,a,g=>(h=new jI(g,this.es?this.es.next():Es.A),"readwrite-primary"===t?this.Es(h).next(v=>!!v||this.As(h)).next(v=>{if(!v)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ne(de.FAILED_PRECONDITION,dv);return r(h)}).next(v=>this.Ps(h).next(()=>v)):this.$s(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}$s(e){return Fc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(de.FAILED_PRECONDITION,Xs)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fc(e).put("owner",t)}static vt(){return Qs.vt()}Rs(e){const t=Fc(e);return t.get("owner").next(r=>this.bs(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_e.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fc(n){return ni(n,"owner")}function ll(n){return ni(n,"clientMetadata")}function Mv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cS{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):om(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new We(t)).next(r=>{let i=Jn();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=Jn();return this.indexManager.getCollectionParents(e,i).next(l=>_e.forEach(l,h=>{const g=(v=t,D=h.child(i),new uu(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.zs(e,g,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const g=h.key;let v=i.get(g);null==v&&(v=Ln.newInvalidDocument(g),i=i.insert(g,v)),dm(h,v,l.localWriteTime),v.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((a,l)=>{lm(t,l)||(i=i.remove(a))}),i))}}class Pv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=_n(),i=_n();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Pv(e,t.fromCache,r,i)}}class hp{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Dt.min())?this.ti(e,t):this.Zs.Ks(e,i).next(a=>{const l=this.ei(t,a);return(zf(t)||Kf(t))&&this.ni(t.limitType,l,i,r)?this.ti(e,t):(xy()<=So.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),um(t)),this.Zs.Qs(e,t,jy(r,-1)).next(h=>(l.forEach(g=>{h=h.insert(g.key,g)}),h)))});var a}ei(e,t){let r=new Wn(Zy(e));return t.forEach((i,a)=>{lm(e,a)&&(r=r.add(a))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ti(e,t){return xy()<=So.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",um(t)),this.Zs.Qs(e,t,wa.min())}}class Cm{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new kr(Gt),this.ri=new lu(a=>Sc(a),Wf),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new cS(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function nb(n,e,t,r){return new Cm(n,e,t,r)}function rb(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,fe.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.ai(e),t.Bs.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let g=_n();for(const v of i){l.push(v.batchId);for(const D of v.mutations)g=g.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)g=g.add(D.key)}return t.ci.Ks(r,g).next(v=>({hi:v,removedBatchIds:l,addedBatchIds:h}))})})}),Tm.apply(this,arguments)}function ib(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ui.newChangeBuffer({trackRemovals:!0});return function(l,h,g,v){const D=g.batch,S=D.keys();let P=_e.resolve();return S.forEach(H=>{P=P.next(()=>v.getEntry(h,H)).next(Z=>{const ve=g.docVersions.get(H);Pt(null!==ve),Z.version.compareTo(ve)<0&&(D.applyToRemoteDocument(Z,g),Z.isValidDocument()&&(Z.setReadTime(g.commitVersion),v.addEntry(Z)))})}),P.next(()=>l.Bs.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function Dm(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function sb(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const h=[];e.targetChanges.forEach((v,D)=>{const S=i.get(D);if(!S)return;h.push(t.fs.removeMatchingKeys(a,v.removedDocuments,D).next(()=>t.fs.addMatchingKeys(a,v.addedDocuments,D)));let P=S.withSequenceNumber(a.currentSequenceNumber);var H,Z,ve;e.targetMismatches.has(D)?P=P.withResumeToken(Ir.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,r)),i=i.insert(D,P),Z=P,ve=v,(0===(H=S).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(a,P))});let g=ji();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(ob(a,l,e.documentUpdates).next(v=>{g=v})),!r.isEqual(Dt.min())){const v=t.fs.getLastRemoteSnapshotVersion(a).next(D=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return _e.waitFor(h).next(()=>l.apply(a)).next(()=>t.ci.Gs(a,g)).next(()=>g)}).then(a=>(t.ii=i,a))}function ob(n,e,t){let r=_n();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=ji();return t.forEach((l,h)=>{const g=i.get(l);h.isNoDocument()&&h.version.isEqual(Dt.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):je("LocalStore","Ignoring outdated watch update for ",l,". Current version:",g.version," Watch version:",h.version)}),a})}function dS(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function fp(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,_e.resolve(i)):t.fs.allocateTargetId(r).next(l=>(i=new il(e,l,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function cl(n,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,fe.Z)(function*(n,e,t){const r=Je(n),i=r.ii.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Mc(l))throw l;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),pp.apply(this,arguments)}function gp(n,e,t){const r=Je(n);let i=Dt.min(),a=_n();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,g,v){const D=Je(h),S=D.ri.get(v);return void 0!==S?_e.resolve(D.ii.get(S)):D.fs.getTargetData(g,v)}(r,l,ns(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(l,h.targetId).next(g=>{a=g})}).next(()=>r.si.Qs(l,e,t?i:Dt.min(),t?a:_n())).next(h=>(ab(r,Ky(e),h),{documents:h,li:a})))}function Sm(n,e){const t=Je(n),r=Je(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function Am(n,e){const t=Je(n),r=t.oi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,jy(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ab(t,e,i),i))}function ab(n,e,t){let r=Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.oi.set(e,r)}function Nv(){return Nv=(0,fe.Z)(function*(n,e,t,r){const i=Je(n);let a=_n(),l=ji();for(const v of t){const D=e.fi(v.metadata.name);v.document&&(a=a.add(D));const S=e.di(v);S.setReadTime(e._i(v.metadata.readTime)),l=l.insert(D,S)}const h=i.ui.newChangeBuffer({trackRemovals:!0}),g=yield fp(i,(v=r,ns(Xd(un.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>ob(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.fs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.fs.addMatchingKeys(v,a,g.targetId)).next(()=>i.ci.Gs(v,D)).next(()=>D)))}),Nv.apply(this,arguments)}function fS(n,e){return xm.apply(this,arguments)}function xm(){return xm=(0,fe.Z)(function*(n,e,t=_n()){const r=yield fp(n,ns(wv(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=gr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i._s.saveNamedQuery(a,e);const h=r.withResumeToken(Ir.EMPTY_BYTE_STRING,l);return i.ii=i.ii.insert(h.targetId,h),i.fs.updateTargetData(a,h).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),xm.apply(this,arguments)}class kv{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return _e.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:gr(r.createTime)}),_e.resolve()}getNamedQuery(e,t){return _e.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:wv(r.bundledQuery),readTime:gr(r.readTime)}),_e.resolve();var r}}class ub{constructor(){this.overlays=new kr(We.comparator),this.gi=new Map}getOverlay(e,t){return _e.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),_e.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(r)),_e.resolve()}getOverlaysForCollection(e,t,r){const i=fm(),a=t.length+1,l=new We(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new kr((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=fm(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=fm(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return _e.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new mv(t,r));let a=this.gi.get(t);void 0===a&&(a=_n(),this.gi.set(t,a)),this.gi.set(t,a.add(r.key))}}class Ov{constructor(){this.yi=new Wn(qr.pi),this.Ii=new Wn(qr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new qr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new qr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new We(new un([])),r=new qr(t,e),i=new qr(t,e+1),a=[];return this.Ii.forEachInRange([r,i],l=>{this.Ai(l),a.push(l.key)}),a}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new We(new un([])),r=new qr(t,e),i=new qr(t,e+1);let a=_n();return this.Ii.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new qr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class qr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return We.comparator(e.key,t.key)||Gt(e.vi,t.vi)}static Ti(e,t){return Gt(e.vi,t.vi)||We.comparator(e.key,t.key)}}class lb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Wn(qr.pi)}checkEmpty(e){return _e.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.Si;this.Si++;const l=new op(a,t,r,i);this.Bs.push(l);for(const h of i)this.Di=this.Di.add(new qr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return _e.resolve(l)}lookupMutationBatch(e,t){return _e.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),a=i<0?0:i;return _e.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return _e.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qr(t,0),i=new qr(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],l=>{const h=this.Ci(l.vi);a.push(h)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Gt);return t.forEach(i=>{const a=new qr(i,0),l=new qr(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,l],h=>{r=r.add(h.vi)})}),_e.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const l=new qr(new We(a),0);let h=new Wn(Gt);return this.Di.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(g.vi)),!0)},l),_e.resolve(this.Ni(h))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return _e.forEach(t.mutations,i=>{const a=new qr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new qr(t,0),i=this.Di.firstAfterOrEqual(r);return _e.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return _e.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class pS{constructor(e){this.Mi=e,this.docs=new kr(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return _e.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=ji();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ln.newInvalidDocument(i))}),_e.resolve(r)}getAllFromCollection(e,t,r){let i=ji();const a=new We(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:g}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||tI(TD(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return _e.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ut()}Oi(e,t){return _e.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cb(this)}getSize(e){return _e.resolve(this.size)}}class cb extends JI{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),_e.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class db{constructor(e){this.persistence=e,this.Fi=new lu(t=>Sc(t),Wf),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Ov,this.targetCount=0,this.Li=kc.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),_e.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new kc(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,_e.resolve()}updateTargetData(e,t){return this.Tn(t),_e.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Fi.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Fi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),_e.waitFor(a).next(()=>i)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return _e.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),_e.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),_e.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return _e.resolve(r)}containsKey(e,t){return _e.resolve(this.Bi.containsKey(t))}}class gS{constructor(e,t){this.Ui={},this.overlays={},this.es=new Es(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new db(this),this.indexManager=new vR,this.ds=new pS(r=>this.referenceDelegate.qi(r)),this.M=new _v(t),this._s=new kv(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ub,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new lb(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new hb(this.es.next());return this.referenceDelegate.Ki(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Qi(e,t){return _e.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class hb extends hv{constructor(e){super(),this.currentSequenceNumber=e}}class Lv{constructor(e){this.persistence=e,this.ji=new Ov,this.Wi=null}static zi(e){return new Lv(e)}get Hi(){if(this.Wi)return this.Wi;throw ut()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),_e.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),_e.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Hi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.Hi,r=>{const i=We.fromPath(r);return this.Ji(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return _e.or([()=>_e.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Di(n,e){return`firestore_clients_${n}_${e}`}function Uc(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fv(n,e){return`firestore_targets_${n}_${e}`}class Rm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new Rm(e,t,i.state,a):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new Mm(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Jf();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=ky(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new dl(e,a):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Uv{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Uv(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mp{constructor(){this.activeTargetIds=Jf()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vv{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new kr(Gt),this.started=!1,this.rr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=Di(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new mp),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const a=e.getItem(Di(e.persistenceKey,i));if(a){const l=dl.Yi(i,a);l&&(e.ir=e.ir.insert(l.clientId,l))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Fv(this.persistenceKey,e));if(r){const i=Mm.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(a){let l=Es.A;if(null!=a)try{const h=JSON.parse(a);Pt("number"==typeof h),l=h}catch(h){Pr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Es.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.kr(a)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new Rm(this.currentUser,e,t,r),a=Uc(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Ir(e){const t=Uc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=Fv(this.persistenceKey,e),a=new Mm(e,t,r);this.setItem(i,a.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return dl.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Rm.Yi(new ti(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return Mm.Yi(i,t)}mr(e){return Uv.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),l=[],h=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||h.push(g)}),this.syncEngine.Fr(l,h).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Jf();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Bv{constructor(){this.$r=new mp,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new mp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mS{Lr(e){}shutdown(){}}class fb{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class pb{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class gb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,a){const l=this.uo(e,t);je("RestConnection","Sending: ",l,r);const h={};return this.ao(h,i,a),this.co(e,l,h,r).then(g=>(je("RestConnection","Received: ",g),g),g=>{throw vc("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}ho(e,t,r,i,a){return this.oo(e,t,r,i,a)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}uo(e,t){return`${this.io}/v1/${t}:${jv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,l)=>{const h=new gD;h.listenOnce(pD.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case tm.NO_ERROR:const v=h.getResponseJson();je("Connection","XHR received:",JSON.stringify(v)),a(v);break;case tm.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),l(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case tm.HTTP_ERROR:const D=h.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const P=function(H){const Z=H.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Z)>=0?Z:de.UNKNOWN}(S.status);l(new Ne(P,S.message))}else l(new Ne(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=VE(),l=BE(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new HE({})),this.ao(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");je("Connection","Creating WebChannel: "+g,h);const v=a.createWebChannel(g,h);let D=!1,S=!1;const P=new pb({Wr:Z=>{S?je("Connection","Not sending because WebChannel is closed:",Z):(D||(je("Connection","Opening WebChannel transport."),v.open(),D=!0),je("Connection","WebChannel sending:",Z),v.send(Z))},zr:()=>v.close()}),H=(Z,ve,Oe)=>{Z.listen(ve,bt=>{try{Oe(bt)}catch(yt){setTimeout(()=>{throw yt},0)}})};return H(v,Vf.EventType.OPEN,()=>{S||je("Connection","WebChannel transport opened.")}),H(v,Vf.EventType.CLOSE,()=>{S||(S=!0,je("Connection","WebChannel transport closed"),P.no())}),H(v,Vf.EventType.ERROR,Z=>{S||(S=!0,vc("Connection","WebChannel transport errored:",Z),P.no(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),H(v,Vf.EventType.MESSAGE,Z=>{var ve;if(!S){const Oe=Z.data[0];Pt(!!Oe);const bt=Oe,yt=bt.error||(null===(ve=bt[0])||void 0===ve?void 0:ve.error);if(yt){je("Connection","WebChannel received error:",yt);const mt=yt.status;let ft=function(sn){const ri=Wr[sn];if(void 0!==ri)return nv(ri)}(mt),jt=yt.message;void 0===ft&&(ft=de.INTERNAL,jt="Unknown error status: "+mt+" with message "+yt.message),S=!0,P.no(new Ne(ft,jt)),v.close()}else je("Connection","WebChannel received:",Oe),P.so(Oe)}}),H(l,jE.STAT_EVENT,Z=>{Z.stat===$E.PROXY?je("Connection","Detected buffering proxy"):Z.stat===$E.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.eo()},0),P}}function _p(){return"undefined"!=typeof window?window:null}function Ih(){return"undefined"!=typeof document?document:null}function Pm(n){return new CI(n,!0)}class Nm{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class mb{constructor(e,t,r,i,a,l,h,g){this.Yn=e,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Nm(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,fe.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,fe.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new Ne(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,fe.Z)(function*(){e.state=0,e.start()}))}Ko(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _b extends mb{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function yR(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ut(),i=e.targetChange.targetIds||[],a=function(g,v){return g.N?(Pt(void 0===v||"string"==typeof v),Ir.fromBase64String(v||"")):(Pt(void 0===v||v instanceof Uint8Array),Ir.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const v=void 0===g.code?de.UNKNOWN:nv(g.code);return new Ne(v,g.message||"")}(l);t=new wI(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Oo(n,r.document.name),a=gr(r.document.updateTime),l=new Ti({mapValue:{fields:r.document.fields}}),h=Ln.newFoundDocument(i,a,l);t=new pm(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Oo(n,r.document),a=r.readTime?gr(r.readTime):Dt.min(),l=Ln.newNoDocument(i,a);t=new pm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Oo(n,r.document);t=new pm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,a=new ih(r.count||0);t=new vI(r.targetId,a)}}var g;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?gr(a.readTime):Dt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=np(this.M),t.addTarget=function(i,a){let l;const h=a.target;return l=qf(h)?{documents:rp(i,h)}:{query:MI(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=TI(i,a.resumeToken):a.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=uh(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function NI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=np(this.M),t.removeTarget=e,this.Fo(t)}}class km extends mb{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function RI(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let a=gr(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=gr(i)),new ND(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.Yo(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=np(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_m(this.M,r))};this.Fo(t)}}class yb extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.oo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(de.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ho(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(de.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class _S{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Pr(t),this.iu=!1):je("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class $v{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(h=>{r.enqueueAndForget((0,fe.Z)(function*(){var g;hl(l)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,fe.Z)(function*(v){const D=Je(v);D.fu.add(4),yield bh(D),D.wu.set("Unknown"),D.fu.delete(4),yield Vc(D)}),function(v){return g.apply(this,arguments)})(l))}))}),this.wu=new _S(r,i)}}function Vc(n){return vb.apply(this,arguments)}function vb(){return vb=(0,fe.Z)(function*(n){if(hl(n))for(const e of n.du)yield e(!0)}),vb.apply(this,arguments)}function bh(n){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,fe.Z)(function*(n){for(const e of n.du)yield e(!1)}),Hv.apply(this,arguments)}function yp(n,e){const t=Je(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),qv(t)?Om(t):Bc(t).xo()&&Gv(t,e))}function Ch(n,e){const t=Je(n),r=Bc(t);t.lu.delete(e),r.xo()&&Wv(t,e),0===t.lu.size&&(r.xo()?r.Mo():hl(t)&&t.wu.set("Unknown"))}function Gv(n,e){n.mu.Z(e.targetId),Bc(n).jo(e)}function Wv(n,e){n.mu.Z(e),Bc(n).Wo(e)}function Om(n){n.mu=new FD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Bc(n).start(),n.wu.ru()}function qv(n){return hl(n)&&!Bc(n).Co()&&n.lu.size>0}function hl(n){return 0===Je(n).fu.size}function zv(n){n.mu=void 0}function yS(n){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,fe.Z)(function*(n){n.lu.forEach((e,t)=>{Gv(n,e)})}),Lm.apply(this,arguments)}function wb(n,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,fe.Z)(function*(n,e){zv(n),qv(n)?(n.wu.au(e),Om(n)):n.wu.set("Unknown")}),Fm.apply(this,arguments)}function Eb(n,e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,fe.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof wI&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.lu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.lu.delete(h),i.mu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Um(n,r)}else if(e instanceof pm?n.mu.ut(e):e instanceof vI?n.mu._t(e):n.mu.ht(e),!t.isEqual(Dt.min()))try{const r=yield Dm(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.mu.yt(a);return l.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.lu.get(g);v&&i.lu.set(g,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const g=i.lu.get(h);if(!g)return;i.lu.set(h,g.withResumeToken(Ir.EMPTY_BYTE_STRING,g.snapshotVersion)),Wv(i,h);const v=new il(g.target,h,1,g.sequenceNumber);Gv(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield Um(n,r)}var r}),Kv.apply(this,arguments)}function Um(n,e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,fe.Z)(function*(n,e,t){if(!Mc(e))throw e;n.fu.add(1),yield bh(n),n.wu.set("Offline"),t||(t=()=>Dm(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Vc(n)}))}),Ib.apply(this,arguments)}function Zv(n,e){return e().catch(t=>Um(n,t,e))}function vp(n){return bb.apply(this,arguments)}function bb(){return bb=(0,fe.Z)(function*(n){const e=Je(n),t=jc(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;wR(e);)try{const i=yield dS(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,ER(e,i)}catch(i){yield Um(e,i)}vS(e)&&wS(e)}),bb.apply(this,arguments)}function wR(n){return hl(n)&&n.hu.length<10}function ER(n,e){n.hu.push(e);const t=jc(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function vS(n){return hl(n)&&!jc(n).Co()&&n.hu.length>0}function wS(n){jc(n).start()}function IR(n){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,fe.Z)(function*(n){jc(n).Zo()}),Cb.apply(this,arguments)}function Vm(n){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,fe.Z)(function*(n){const e=jc(n);for(const t of n.hu)e.Jo(t.mutations)}),Tb.apply(this,arguments)}function Db(n,e,t){return wp.apply(this,arguments)}function wp(){return wp=(0,fe.Z)(function*(n,e,t){const r=n.hu.shift(),i=gv.from(r,e,t);yield Zv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vp(n)}),wp.apply(this,arguments)}function Sb(n,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,fe.Z)(function*(n,e){var t;e&&jc(n).Ho&&(yield(t=(0,fe.Z)(function*(r,i){if(kD(a=i.code)&&a!==de.ABORTED){const l=r.hu.shift();jc(r).ko(),yield Zv(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield vp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),vS(n)&&wS(n)}),Bm.apply(this,arguments)}function ES(n,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,fe.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=hl(t);t.fu.add(3),yield bh(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Vc(t)}),Ep.apply(this,arguments)}function jm(n,e){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,fe.Z)(function*(n,e){const t=Je(n);e?(t.fu.delete(2),yield Vc(t)):e||(t.fu.add(2),yield bh(t),t.wu.set("Unknown"))}),Yv.apply(this,arguments)}function Bc(n){return n.gu||(n.gu=function(e,t,r){const i=Je(e);return i.eu(),new _b(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:yS.bind(null,n),Yr:wb.bind(null,n),Qo:Eb.bind(null,n)}),n.du.push(function(){var e=(0,fe.Z)(function*(t){t?(n.gu.ko(),qv(n)?Om(n):n.wu.set("Unknown")):(yield n.gu.stop(),zv(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function jc(n){return n.yu||(n.yu=function(e,t,r){const i=Je(e);return i.eu(),new km(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:IR.bind(null,n),Yr:Sb.bind(null,n),Xo:Vm.bind(null,n),Yo:Db.bind(null,n)}),n.du.push(function(){var e=(0,fe.Z)(function*(t){t?(n.yu.ko(),yield vp(n)):(yield n.yu.stop(),n.hu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class Qv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new Qv(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),Mc(n))return new Ne(de.UNAVAILABLE,`${e}: ${n}`);throw n}class fl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=Jn(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new fl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ab{constructor(){this.pu=new kr(We.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):ut():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ip{constructor(e,t,r,i,a,l,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new Ip(e,t,fl.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class bR{constructor(){this.Tu=void 0,this.listeners=[]}}class CR{constructor(){this.queries=new lu(e=>zy(e),eh),this.onlineState="Unknown",this.Eu=new Set}}function Xv(n,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,fe.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new bR),i)try{a.Tu=yield t.onListen(r)}catch(l){const h=Th(l,`Initialization of query '${um(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Au(t.onlineState),a.Tu&&e.Ru(a.Tu)&&n0(t)}),Jv.apply(this,arguments)}function e0(n,e){return xb.apply(this,arguments)}function xb(){return xb=(0,fe.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),xb.apply(this,arguments)}function IS(n,e){const t=Je(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Ru(i)&&(r=!0);l.Tu=i}}r&&n0(t)}function t0(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function n0(n){n.Eu.forEach(e=>{e.next()})}class bs{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ip(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Ip.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class bS{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class $m{constructor(e){this.M=e}fi(e){return Oo(this.M,e)}di(e){return e.metadata.exists?AI(this.M,e.document,!1):Ln.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return gr(e)}}class CS{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Rb(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=un.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new $m(this.M);for(const i of e)if(i.metadata.queries){const a=r.fi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||_n()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function hS(n,e,t,r){return Nv.apply(this,arguments)}(e.localStore,new $m(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield fS(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function Rb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Hm{constructor(e){this.key=e}}class r0{constructor(e){this.key=e}}class s0{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=_n(),this.mutatedKeys=_n(),this.Uu=Zy(e),this.qu=new fl(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new Ab,i=t?t.qu:this.qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const g=zf(this.query)&&i.size===this.query.limit?i.last():null,v=Kf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),H=lm(this.query,S)?S:null,Z=!!P&&this.mutatedKeys.has(P.key),ve=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Oe=!1;P&&H?P.data.isEqual(H.data)?Z!==ve&&(r.track({type:3,doc:H}),Oe=!0):this.ju(P,H)||(r.track({type:2,doc:H}),Oe=!0,(g&&this.Uu(H,g)>0||v&&this.Uu(H,v)<0)&&(h=!0)):!P&&H?(r.track({type:0,doc:H}),Oe=!0):P&&!H&&(r.track({type:1,doc:P}),Oe=!0,(g||v)&&(h=!0)),Oe&&(H?(l=l.add(H),a=ve?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),zf(this.query)||Kf(this.query))for(;l.size>this.query.limit;){const D=zf(this.query)?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{qu:l,Qu:r,ni:h,mutatedKeys:a}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const a=e.Qu.Iu();a.sort((v,D)=>function(S,P){const H=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return H(S)-H(P)}(v.type,D.type)||this.Uu(v.doc,D.doc)),this.Wu(r);const l=t?this.zu():[],h=0===this.Lu.size&&this.current?1:0,g=h!==this.Bu;return this.Bu=h,0!==a.length||g?{snapshot:new Ip(this.query,e.qu,i,a,e.mutatedKeys,0===h,g,!1),Hu:l}:{Hu:l}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Ab,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=_n(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new r0(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new Hm(r))}),t}Yu(e){this.$u=e.li,this.Lu=_n();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Ip.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class TS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Mb{constructor(e){this.key=e,this.Zu=!1}}class DS{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.ta={},this.ea=new lu(h=>zy(h),eh),this.na=new Map,this.sa=new Set,this.ia=new kr(We.comparator),this.ra=new Map,this.oa=new Ov,this.ua={},this.aa=new Map,this.ca=kc.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function SS(n,e){return o0.apply(this,arguments)}function o0(){return o0=(0,fe.Z)(function*(n,e){const t=Dp(n);let r,i;const a=t.ea.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Xu();else{const l=yield fp(t.localStore,ns(e));t.isPrimaryClient&&yp(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield bp(t,e,r,"current"===h)}return i}),o0.apply(this,arguments)}function bp(n,e,t,r){return hu.apply(this,arguments)}function hu(){return hu=(0,fe.Z)(function*(n,e,t,r){n.la=(D,S,P)=>{return(H=(0,fe.Z)(function*(Z,ve,Oe,bt){let yt=ve.view.Gu(Oe);yt.ni&&(yt=yield gp(Z.localStore,ve.query,!1).then(({documents:jt})=>ve.view.Gu(jt,yt)));const mt=bt&&bt.targetChanges.get(ve.targetId),ft=ve.view.applyChanges(yt,Z.isPrimaryClient,mt);return h0(Z,ve.targetId,ft.Hu),ft.snapshot}),function(Z,ve,Oe,bt){return H.apply(this,arguments)})(n,D,S,P);var H};const i=yield gp(n.localStore,e,!0),a=new s0(e,i.li),l=a.Gu(i.documents),h=oh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(l,n.isPrimaryClient,h);h0(n,t,g.Hu);const v=new TS(e,t,a);return n.ea.set(e,v),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),g.snapshot}),hu.apply(this,arguments)}function Pb(n,e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,fe.Z)(function*(n,e){const t=Je(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(a=>!eh(a,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ch(t.remoteStore,r.targetId),pl(t,r.targetId)}).catch(Oc))):(pl(t,r.targetId),yield cl(t.localStore,r.targetId,!0))}),Gm.apply(this,arguments)}function Nb(){return Nb=(0,fe.Z)(function*(n,e,t){const r=g0(n);try{const i=yield function(a,l){const h=Je(a),g=Er.now(),v=l.reduce((S,P)=>S.add(P.key),_n());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.ci.Ks(S,v).next(P=>{D=P;const H=[];for(const Z of l){const ve=gI(Z,D.get(Z.key));null!=ve&&H.push(new nl(Z.key,ve,eI(ve.value.mapValue),Nr.exists(!0)))}return h.Bs.addMutationBatch(S,g,H,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let g=a.ua[a.currentUser.toKey()];g||(g=new kr(Gt)),g=g.insert(l,h),a.ua[a.currentUser.toKey()]=g}(r,i.batchId,t),yield fu(r,i.changes),yield vp(r.remoteStore)}catch(i){const a=Th(i,"Failed to persist write");t.reject(a)}}),Nb.apply(this,arguments)}function kb(n,e){return a0.apply(this,arguments)}function a0(){return a0=(0,fe.Z)(function*(n,e){const t=Je(n);try{const r=yield sb(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ra.get(a);l&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Zu=!0:i.modifiedDocuments.size>0?Pt(l.Zu):i.removedDocuments.size>0&&(Pt(l.Zu),l.Zu=!1))}),yield fu(t,r,e)}catch(r){yield Oc(r)}}),a0.apply(this,arguments)}function Ob(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((a,l)=>{const h=l.view.Au(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Je(a);h.onlineState=l;let g=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.Au(l)&&(g=!0)}),g&&n0(h)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lb(n,e,t){return u0.apply(this,arguments)}function u0(){return u0=(0,fe.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),a=i&&i.key;if(a){let l=new kr(We.comparator);l=l.insert(a,Ln.newNoDocument(a,Dt.min()));const h=_n().add(a),g=new sh(Dt.min(),new Map,new Wn(Gt),l,h);yield kb(r,g),r.ia=r.ia.remove(a),r.ra.delete(e),zm(r)}else yield cl(r.localStore,e,!1).then(()=>pl(r,e,t)).catch(Oc)}),u0.apply(this,arguments)}function xS(n,e){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,fe.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield ib(t.localStore,e);Cp(t,r,null),qm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fu(t,i)}catch(i){yield Oc(i)}}),Fb.apply(this,arguments)}function l0(n,e,t){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,fe.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(a,l){const h=Je(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return h.Bs.lookupMutationBatch(g,l).next(D=>(Pt(null!==D),v=D.keys(),h.Bs.removeMutationBatch(g,D))).next(()=>h.Bs.performConsistencyCheck(g)).next(()=>h.ci.Ks(g,v))})}(r.localStore,e);Cp(r,e,t),qm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fu(r,i)}catch(i){yield Oc(i)}}),Wm.apply(this,arguments)}function c0(){return c0=(0,fe.Z)(function*(n,e){const t=Je(n);hl(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Je(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=Th(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),c0.apply(this,arguments)}function qm(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function Cp(n,e,t){const r=Je(n);let i=r.ua[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function pl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||d0(n,r)})}function d0(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Ch(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),zm(n))}function h0(n,e,t){for(const r of t)r instanceof Hm?(n.oa.addReference(r.key,e),Ub(n,r)):r instanceof r0?(je("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||d0(n,r.key)):ut()}function Ub(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(je("SyncEngine","New document in limbo: "+t),n.sa.add(r),zm(n))}function zm(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new We(un.fromString(e)),r=n.ca.next();n.ra.set(r,new Mb(t)),n.ia=n.ia.insert(t,r),yp(n.remoteStore,new il(ns(Xd(t.path)),r,2,Es.A))}}function fu(n,e,t){return f0.apply(this,arguments)}function f0(){return f0=(0,fe.Z)(function*(n,e,t){const r=Je(n),i=[],a=[],l=[];var h;r.ea.isEmpty()||(r.ea.forEach((h,g)=>{l.push(r.la(g,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v.fromCache?"not-current":"current"),i.push(v);const D=Pv.Ys(g.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.ta.Qo(i),yield(h=(0,fe.Z)(function*(g,v){const D=Je(g);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>_e.forEach(v,P=>_e.forEach(P.Hs,H=>D.persistence.referenceDelegate.addReference(S,P.targetId,H)).next(()=>_e.forEach(P.Js,H=>D.persistence.referenceDelegate.removeReference(S,P.targetId,H)))))}catch(S){if(!Mc(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const H=D.ii.get(P),ve=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);D.ii=D.ii.insert(P,ve)}}}),function(g,v){return h.apply(this,arguments)})(r.localStore,a))}),f0.apply(this,arguments)}function TR(n,e){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,fe.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield rb(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(l=>{l.forEach(h=>{h.reject(new Ne(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fu(t,r.hi)}var i}),Vb.apply(this,arguments)}function Bb(n,e){const t=Je(n),r=t.ra.get(e);if(r&&r.Zu)return _n().add(r.key);{let i=_n();const a=t.na.get(e);if(!a)return i;for(const l of a){const h=t.ea.get(l);i=i.unionWith(h.view.Ku)}return i}}function MS(n,e){return p0.apply(this,arguments)}function p0(){return p0=(0,fe.Z)(function*(n,e){const t=Je(n),r=yield gp(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&h0(t,e.targetId,i.Hu),i}),p0.apply(this,arguments)}function PS(n,e){return jb.apply(this,arguments)}function jb(){return jb=(0,fe.Z)(function*(n,e){const t=Je(n);return Am(t.localStore,e).then(r=>fu(t,r))}),jb.apply(this,arguments)}function DR(n,e,t,r){return $b.apply(this,arguments)}function $b(){return $b=(0,fe.Z)(function*(n,e,t,r){const i=Je(n),a=yield function(l,h){const g=Je(l),v=Je(g.Bs);return g.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.fn(D,h).next(S=>S?g.ci.Ks(D,S):_e.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield vp(i.remoteStore):"acknowledged"===t||"rejected"===t?(Cp(i,e,r||null),qm(i,e),h=e,Je(Je(i.localStore).Bs)._n(h)):ut(),yield fu(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),$b.apply(this,arguments)}function Hb(){return Hb=(0,fe.Z)(function*(n,e){const t=Je(n);if(Dp(t),g0(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Gb(t,r.toArray());t.ha=!0,yield jm(t.remoteStore,!0);for(const a of i)yp(t.remoteStore,a)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(pl(t,l),cl(t.localStore,l,!0))),Ch(t.remoteStore,l)}),yield i,yield Gb(t,r),function(a){const l=Je(a);l.ra.forEach((h,g)=>{Ch(l.remoteStore,g)}),l.oa.bi(),l.ra=new Map,l.ia=new kr(We.comparator)}(t),t.ha=!1,yield jm(t.remoteStore,!1)}}),Hb.apply(this,arguments)}function Gb(n,e,t){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,fe.Z)(function*(n,e,t){const r=Je(n),i=[],a=[];for(const l of e){let h;const g=r.na.get(l);if(g&&0!==g.length){h=yield fp(r.localStore,ns(g[0]));for(const v of g){const D=r.ea.get(v),S=yield MS(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield Sm(r.localStore,l);h=yield fp(r.localStore,v),yield bp(r,Wb(v),l,!1)}i.push(h)}return r.ta.Qo(a),i}),Dh.apply(this,arguments)}function Wb(n){return Wy(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function NS(n){const e=Je(n);return Je(Je(e.localStore).persistence).Fs()}function qb(n,e,t,r){return pu.apply(this,arguments)}function pu(){return pu=(0,fe.Z)(function*(n,e,t,r){const i=Je(n);if(i.ha)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.na.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield Am(i.localStore,Ky(a[0])),h=sh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield fu(i,l,h);break}case"rejected":yield cl(i.localStore,e,!0),pl(i,e,r);break;default:ut()}}),pu.apply(this,arguments)}function zb(n,e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,fe.Z)(function*(n,e,t){const r=Dp(n);if(r.ha){for(const i of e){if(r.na.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield Sm(r.localStore,i),l=yield fp(r.localStore,a);yield bp(r,Wb(a),l.targetId,!1),yp(r.remoteStore,l)}for(const i of t)r.na.has(i)&&(yield cl(r.localStore,i,!1).then(()=>{Ch(r.remoteStore,i),pl(r,i)}).catch(Oc))}}),Tp.apply(this,arguments)}function Dp(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lb.bind(null,e),e.ta.Qo=IS.bind(null,e.eventManager),e.ta.fa=t0.bind(null,e.eventManager),e}function g0(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l0.bind(null,e),e}class Km{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.M=Pm(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return nb(this.persistence,new hp,e.initialUser,this.M)}wa(e){return new gS(Lv.zi,this.M)}_a(e){return new Bv}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Sp extends Km{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield g0(r.ya.syncEngine),yield vp(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return nb(this.persistence,new hp,e.initialUser,this.M)}ma(e){return new YI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Mv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Is.withCacheSize(this.cacheSizeBytes):Is.DEFAULT;return new Rv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_p(),Ih(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Bv}}class AR extends Sp{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof Vv&&(r.sharedClientState.syncEngine={Mr:DR.bind(null,i),Or:qb.bind(null,i),Fr:zb.bind(null,i),Fs:NS.bind(null,i),kr:PS.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,fe.Z)(function*(l){yield function SR(n,e){return Hb.apply(this,arguments)}(r.ya.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}_a(e){const t=_p();if(!Vv.vt(t))throw new Ne(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Mv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Kb{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Ob(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=TR.bind(null,r.syncEngine),yield jm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CR}createDatastore(e){const t=Pm(e.databaseInfo.databaseId),r=new gb(e.databaseInfo);return new yb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>Ob(this.syncEngine,h,0),l=fb.vt()?new fb:new mS,new $v(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,g,v){const D=new DS(r,i,a,l,h,g);return v&&(D.ha=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=Je(t);je("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield bh(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function kS(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Zb{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new gi,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new bS(JSON.parse(a),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,fe.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class OS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,fe.Z)(function*(a,l){const h=Je(a),g=np(h.M)+"/documents",v={documents:l.map(H=>tp(h.M,H))},D=yield h.ho("BatchGetDocuments",g,v),S=new Map;D.forEach(H=>{const Z=function _R(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=Oo(t,r.found.name),a=gr(r.found.updateTime),l=new Ti({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=Oo(t,r.missing),a=gr(r.readTime);return Ln.newNoDocument(i,a)}(n,e):ut()}(h.M,H);S.set(Z.key.toString(),Z)});const P=[];return l.forEach(H=>{const Z=S.get(H.toString());Pt(!!Z),P.push(Z)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new tv(a,e.precondition(a)))}),yield(r=(0,fe.Z)(function*(i,a){const l=Je(i),h=np(l.M)+"/documents",g={writes:a.map(v=>_m(l.M,v))};yield l.oo("Commit",h,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Ne(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class LS{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Nm(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,fe.Z)(function*(){const t=new OS(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.xa(a)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!Ju(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!kD(t)}return!1}}class FS{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=KE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,fe.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Th(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Yb(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,fe.Z)(function*(a){r.isEqual(a)||(yield rb(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Zm.apply(this,arguments)}function y0(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield v0(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ES(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>ES(e.remoteStore,a)),n.onlineComponents=e}),Ym.apply(this,arguments)}function v0(n){return w0.apply(this,arguments)}function w0(){return w0=(0,fe.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield Yb(n,new Km)),n.offlineComponents}),w0.apply(this,arguments)}function Ap(n){return xp.apply(this,arguments)}function xp(){return xp=(0,fe.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield y0(n,new Kb)),n.onlineComponents}),xp.apply(this,arguments)}function US(n){return v0(n).then(e=>e.persistence)}function Qm(n){return v0(n).then(e=>e.localStore)}function Xm(n){return Ap(n).then(e=>e.remoteStore)}function E0(n){return Ap(n).then(e=>e.syncEngine)}function Sh(n){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,fe.Z)(function*(n){const e=yield Ap(n),t=e.eventManager;return t.onListen=SS.bind(null,e.syncEngine),t.onUnlisten=Pb.bind(null,e.syncEngine),t}),Qb.apply(this,arguments)}function jS(n,e,t={}){const r=new gi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,l,h,g){const v=new _0({next:S=>{a.enqueueAndForget(()=>e0(i,D));const P=S.docs.has(l);!P&&S.fromCache?g.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&h&&"server"===h.source?g.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new bs(Xd(l.path),v,{includeMetadataChanges:!0,Cu:!0});return Xv(i,D)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}function $S(n,e,t={}){const r=new gi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,l,h,g){const v=new _0({next:S=>{a.enqueueAndForget(()=>e0(i,D)),S.fromCache&&"server"===h.source?g.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new bs(l,v,{includeMetadataChanges:!0,Cu:!0});return Xv(i,D)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}const GS=new Map;function Xb(n,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WS(n,e,t,r){if(!0===e&&!0===r)throw new Ne(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function s(n){if(!We.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o(n){if(We.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function u(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function c(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=u(n);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function d(n,e){if(e<=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class f{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,WS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class y{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f({}),this._settingsFrozen=!1,e instanceof ya?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Gd;switch(t.type){case"gapi":const r=t.client;return Pt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GS.get(e);t&&(je("ComponentProvider","Removing Datastore"),GS.delete(e),t.terminate())}(this),Promise.resolve()}}class b{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new x(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new b(this.firestore,e,this._key)}}class A{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new A(this.firestore,e,this._query)}}class x extends A{constructor(e,t,r){super(e,t,Xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new b(this.firestore,null,new We(e))}withConverter(e){return new x(this.firestore,e,this._path)}}function U(n,e,...t){if(n=(0,k.m9)(n),Xb("collection","path",e),n instanceof y){const r=un.fromString(e,...t);return o(r),new x(n,null,r)}{if(!(n instanceof b||n instanceof x))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return o(r),new x(n.firestore,null,r)}}function Q(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=KE.R()),Xb("doc","path",e),n instanceof y){const r=un.fromString(e,...t);return s(r),new b(n,null,new We(r))}{if(!(n instanceof b||n instanceof x))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return s(r),new b(n.firestore,n instanceof x?n.converter:null,new We(r))}}function we(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof b||n instanceof x)&&(e instanceof b||e instanceof x)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ve(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof A&&e instanceof A&&n.firestore===e.firestore&&eh(n._query,e._query)&&n.converter===e.converter}class ze{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Nm(this,"async_queue_retry"),this.qa=()=>{const t=Ih();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Ih();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Ih();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new gi;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Mc(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=Qv.createAndSchedule(this,e,t,r,a=>this.ja(a));return this.Fa.push(i),i}Ka(){this.$a&&ut()}verifyOperationInProgress(){}Wa(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function st(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Se{constructor(){this._progressObserver={},this._taskCompletionResolver=new gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pt extends y{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ze,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Jm(this),this._firestoreClient.terminate()}}function Un(n){return n._firestoreClient||Jm(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Jm(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ny(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new FS(n._authCredentials,n._appCheckCredentials,n._queue,r)}function e_(n,e,t){const r=new gi;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield Yb(n,t),yield y0(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function kR(n){if(n._initialized||n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $c{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(Ir.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gl(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rp{constructor(e){this._methodName=e}}class eC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const zk=/^__.*__$/;class Kk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new rh(e,this.data,t,this.fieldTransforms)}}class OR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class tC{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new tC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return iC(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(LR(this.Xa)&&zk.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Zk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Pm(e)}ac(e,t,r,i=!1){return new tC({Xa:e,methodName:t,uc:r,path:pr.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=Pm(n._databaseId);return new Zk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nC(n,e,t,r,i,a={}){const l=n.ac(a.merge||a.mergeFields?2:0,e,t,i);ZS("Data must be an object, but it was:",l,r);const h=VR(r,l);let g,v;if(a.merge)g=new Ec(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const P=YS(e,S,t);if(!l.contains(P))throw new Ne(de.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);jR(D,P)||D.push(P)}g=new Ec(D),v=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,v=l.fieldTransforms;return new Kk(new Ti(h),g,v)}class A0 extends Rp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof A0}}function FR(n,e,t){return new tC({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class qS extends Rp{_toFieldTransform(e){return new Zf(e.path,new th)}isEqual(e){return e instanceof qS}}class Yk extends Rp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=FR(this,e,!0),r=this.cc.map(a=>Pp(a,t)),i=new xc(r);return new Zf(e.path,i)}isEqual(e){return this===e}}class Qk extends Rp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=FR(this,e,!0),r=this.cc.map(a=>Pp(a,t)),i=new Rc(r);return new Zf(e.path,i)}isEqual(e){return this===e}}class Xk extends Rp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new nh(e.M,uI(e.M,this.hc));return new Zf(e.path,t)}isEqual(e){return this===e}}function zS(n,e,t,r){const i=n.ac(1,e,t);ZS("Data must be an object, but it was:",i,r);const a=[],l=Ti.empty();ou(r,(g,v)=>{const D=rC(e,g,t);v=(0,k.m9)(v);const S=i.sc(D);if(v instanceof A0)a.push(D);else{const P=Pp(v,S);null!=P&&(a.push(D),l.set(D,P))}});const h=new Ec(a);return new OR(l,h,i.fieldTransforms)}function KS(n,e,t,r,i,a){const l=n.ac(1,e,t),h=[YS(e,r,t)],g=[i];if(a.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)h.push(YS(e,a[P])),g.push(a[P+1]);const v=[],D=Ti.empty();for(let P=h.length-1;P>=0;--P)if(!jR(v,h[P])){const H=h[P];let Z=g[P];Z=(0,k.m9)(Z);const ve=l.sc(H);if(Z instanceof A0)v.push(H);else{const Oe=Pp(Z,ve);null!=Oe&&(v.push(H),D.set(H,Oe))}}const S=new Ec(v);return new OR(D,S,l.fieldTransforms)}function UR(n,e,t,r=!1){return Pp(t,n.ac(r?4:3,e))}function Pp(n,e){if(BR(n=(0,k.m9)(n)))return ZS("Unsupported field value:",e,n),VR(n,e);if(n instanceof Rp)return function(t,r){if(!LR(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Pp(l,r.ic(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return uI(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Er.fromDate(t);return{timestampValue:uh(r.M,i)}}if(t instanceof Er){const i=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:uh(r.M,i)}}if(t instanceof eC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gl)return{bytesValue:TI(r.M,t._byteString)};if(t instanceof b){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${u(t)}`)}(n,e)}function VR(n,e){const t={};return ID(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ou(n,(r,i)=>{const a=Pp(i,e.tc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function BR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof eC||n instanceof gl||n instanceof b||n instanceof Rp)}function ZS(n,e,t){if(!BR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=u(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function YS(n,e,t){if((e=(0,k.m9)(e))instanceof $c)return e._internalPath;if("string"==typeof e)return rC(n,e);throw iC("Field path arguments must be of type string or ",n,!1,void 0,t)}const Jk=new RegExp("[~\\*/\\[\\]]");function rC(n,e,t){if(e.search(Jk)>=0)throw iC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $c(...e.split("."))._internalPath}catch(r){throw iC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iC(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Ne(de.INVALID_ARGUMENT,h+n+g)}function jR(n,e){return n.some(t=>t.isEqual(e))}class x0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new b(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eO extends x0{data(){return super.data()}}function sC(n,e){return"string"==typeof e?rC(n,e):e instanceof $c?e._internalPath:e._delegate._internalPath}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hc extends x0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new R0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class R0 extends Hc{data(e={}){return super.data(e)}}class Ah{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Np(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new R0(this._firestore,this._userDataWriter,r.key,r,new Np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new R0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new R0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:tO(l.type),doc:h,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function $R(n,e){return n instanceof Hc&&e instanceof Hc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ah&&e instanceof Ah&&n._firestore===e._firestore&&Ve(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function HR(n){if(Kf(n)&&0===n.explicitOrderBy.length)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M0{}function xh(n,...e){for(const t of e)n=t._apply(n);return n}class nO extends M0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Mp(e.firestore),r=function(i,a,l,h,g,v,D){let S;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){ZR(D,v);const H=[];for(const Z of D)H.push(KR(h,i,Z));S={arrayValue:{values:H}}}else S=KR(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||ZR(D,v),S=UR(l,"where",D,"in"===v||"not-in"===v);const P=Fn.create(g,v,S);return function(H,Z){if(Z.S()){const Oe=qy(H);if(null!==Oe&&!Oe.isEqual(Z.field))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${Z.field.toString()}'`);const bt=Jd(H);null!==bt&&YR(0,Z.field,bt)}const ve=function(Oe,bt){for(const yt of Oe.filters)if(bt.indexOf(yt.op)>=0)return yt.op;return null}(H,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ve)throw new Ne(de.INVALID_ARGUMENT,ve===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ve.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new A(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new uu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class iO extends M0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Yd(i,a);return function(h,g){if(null===Jd(h)){const v=qy(h);null!==v&&YR(0,v,g.field)}}(r,l),l}(e._query,this.lc,this._c);return new A(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new uu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class GR extends M0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new A(e.firestore,e.converter,am(e._query,this.wc,this.mc))}}class WR extends M0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=zR(e,this.type,this.gc,this.yc);return new A(e.firestore,e.converter,(i=t,new uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class qR extends M0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=zR(e,this.type,this.gc,this.yc);return new A(e.firestore,e.converter,(i=t,new uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function zR(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof x0)return function(i,a,l,h,g){if(!h)throw new Ne(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Ac(i))if(D.field.isKeyField())v.push(Tc(a,h.key));else{const S=h.data.field(D.field);if(ZE(S))throw new Ne(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new tl(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Mp(n.firestore);return function(a,l,h,g,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Ne(de.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let H=0;H<v.length;H++){const Z=v[H];if(S[H].field.isKeyField()){if("string"!=typeof Z)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Z}`);if(!om(a)&&-1!==Z.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Z}' contains a slash.`);const ve=a.path.child(un.fromString(Z));if(!We.isDocumentKey(ve))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ve}' is not because it contains an odd number of segments.`);const Oe=new We(ve);P.push(Tc(l,Oe))}else{const ve=UR(h,g,Z);P.push(ve)}}return new tl(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function KR(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!om(e)&&-1!==t.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!We.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tc(n,new We(r))}if(t instanceof b)return Tc(n,t._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u(t)}.`)}function ZR(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function YR(n,e,t){if(!t.isEqual(e))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QS{convertValue(e,t="none"){switch(Cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(au(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return ou(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new eC(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=YE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){const t=Po(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);Pt(OI(r));const i=new ya(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function oC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hO extends QS{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new b(this.firestore,null,t)}}class QR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mp(e)}set(e,t,r){this._verifyNotCommitted();const i=Rh(e,this._firestore),a=oC(i.converter,t,r),l=nC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Rh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof $c?KS(this._dataReader,"WriteBatch.update",a._key,t,r,i):zS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rh(e,this._firestore);return this._mutations=this._mutations.concat(new Xf(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ne(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class kp extends QS{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new b(this.firestore,null,t)}}function XR(n,e,t){n=c(n,b);const r=c(n.firestore,pt),i=oC(n.converter,e,t);return t_(r,[nC(Mp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Nr.none())])}function JR(n,e,t,...r){n=c(n,b);const i=c(n.firestore,pt),a=Mp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof $c?KS(a,"updateDoc",n._key,e,t,r):zS(a,"updateDoc",n._key,e),t_(i,[l.toMutation(n._key,Nr.exists(!0))])}function eM(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||st(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(st(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,v,D;if(n instanceof b)v=c(n.firestore,pt),D=Xd(n._key.path),g={next:S=>{e[l]&&e[l](XS(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=c(n,A);v=c(S.firestore,pt),D=S._query;const P=new kp(v);g={next:H=>{e[l]&&e[l](new Ah(v,P,S,H))},error:e[l+1],complete:e[l+2]},HR(n._query)}return function(S,P,H,Z){const ve=new _0(Z),Oe=new bs(P,ve,H);return S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Xv(yield Sh(S),Oe)})),()=>{ve.Ia(),S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return e0(yield Sh(S),Oe)}))}}(Un(v),D,h,g)}function t_(n,e){return function(t,r){const i=new gi;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function AS(n,e,t){return Nb.apply(this,arguments)}(yield E0(t),r,i)})),i.promise}(Un(n),e)}function XS(n,e,t){const r=t.docs.get(e._key),i=new kp(n);return new Hc(n,i,e._key,r,new Np(t.hasPendingWrites,t.fromCache),e.converter)}class IO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mp(e)}get(e){const t=Rh(e,this._firestore),r=new hO(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new x0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new x0(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=Rh(e,this._firestore),a=oC(i.converter,t,r),l=nC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Rh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof $c?KS(this._dataReader,"Transaction.update",a._key,t,r,i):zS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Rh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rh(e,this._firestore),r=new kp(this._firestore);return super.get(e).then(i=>new Hc(this._firestore,r,t._key,i._document,new Np(!1,!1),t.converter))}}function JS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function nM(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function rM(){if(!function Py(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hd=Bi.SDK_VERSION,(0,Bi._registerComponent)(new zs.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new pt(i,new qE(t.getProvider("auth-internal")),new vD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Bi.registerVersion)(GE,"3.4.8",n),(0,Bi.registerVersion)(GE,"3.4.8","esm2017")}();class P0{constructor(e){this._delegate=e}static fromBase64String(e){return rM(),new P0(gl.fromBase64String(e))}static fromUint8Array(e){return nM(),new P0(gl.fromUint8Array(e))}toBase64(){return rM(),this._delegate.toBase64()}toUint8Array(){return nM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eA(n){return function MO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class PO{enableIndexedDbPersistence(e,t){return function I0(n,e){kR(n=c(n,pt));const t=Un(n),r=n._freezeSettings(),i=new Kb;return e_(t,i,new Sp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function b0(n){kR(n=c(n,pt));const e=Un(n),t=n._freezeSettings(),r=new Kb;return e_(e,r,new AR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function C0(n){if(n._initialized&&!n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!Qs.vt())return Promise.resolve();const i=r+"main";yield Qs.delete(i)}),function(r){return t.apply(this,arguments)})(Mv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class iM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function E(n,e,t,r={}){var i;const a=(n=c(n,y))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&vc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=ti.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ti(g)}n._authCredentials=new _D(new WE(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function D0(n){return function xR(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield US(n),t=yield Xm(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i.fu.delete(0),Vc(i)}(t)}))}(Un(n=c(n,pt)))}(this._delegate)}disableNetwork(){return function S0(n){return function VS(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield US(n),t=yield Xm(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(i){const a=Je(i);a.fu.add(0),yield bh(a),a.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Un(n=c(n,pt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function T0(n){return function(e){const t=new gi;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function RS(n,e){return c0.apply(this,arguments)}(yield E0(e),t)})),t.promise}(Un(n=c(n,pt)))}(this._delegate)}onSnapshotsInSync(e){return function EO(n,e){return function MR(n,e){const t=new _0(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Sh(n),i=t,Je(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Sh(n),i=t,void Je(r).Eu.delete(i);var r,i}))}}(Un(n=c(n,pt)),st(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new n_(this,U(this._delegate,e))}catch(t){throw Cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Da(this,Q(this._delegate,e))}catch(t){throw Cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ts(this,function W(n,e){if(n=c(n,y),Xb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new A(n,null,(t=e,new uu(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bO(n,e){return function PR(n,e){const t=new gi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const r=yield(i=n,Ap(i).then(a=>a.datastore));var i;new LS(n.asyncQueue,r,e,t).run()})),t.promise}(Un(n=c(n,pt)),t=>e(new IO(n,t)))}(this._delegate,t=>e(new sM(this,t)))}batch(){return Un(this._delegate),new oM(new QR(this._delegate,e=>t_(this._delegate,e)))}loadBundle(e){return function Wk(n,e){const t=Un(n=c(n,pt)),r=new Se;return function HS(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return kS(g,v);if(g instanceof ArrayBuffer)return kS(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new Zb(g,l);var g}(t,Pm(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function m0(n,e,t){const r=Je(n);var i;(i=(0,fe.Z)(function*(a,l,h){try{const g=yield l.getMetadata();if(yield function(P,H){const Z=Je(P),ve=gr(H.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Oe=>Z._s.getBundleMetadata(Oe,H.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(ve)>=0)}(a.localStore,g))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=g).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(Rb(g));const v=new CS(g,a.localStore,l.M);let D=yield l.da();for(;D;){const P=yield v.ku(D);P&&h._updateProgress(P),D=yield l.da()}const S=yield v.complete();return yield fu(a,S.Fu,void 0),yield function(P,H){const Z=Je(P);return Z.persistence.runTransaction("Save bundle","readwrite",ve=>Z._s.saveBundleMetadata(ve,H))}(a.localStore,g),h._completeWith(S.progress),Promise.resolve(S.Ou)}catch(g){return vc("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var P}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield E0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qk(n,e){return function NR(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield Qm(n),e)}))}(Un(n=c(n,pt)),e).then(t=>t?new A(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ts(this,t):null)}}class aC extends QS{constructor(e){super(),this.firestore=e}convertBytes(e){return new P0(new gl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Da.forKey(t,this.firestore,null)}}class sM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aC(e)}get(e){const t=Lp(e);return this._delegate.get(t).then(r=>new N0(this._firestore,new Hc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Lp(e);return r?(JS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}}class oM{constructor(e){this._delegate=e}set(e,t,r){const i=Lp(e);return r?(JS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Op{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new R0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new k0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Op.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Op(e,new aC(e),t),i.set(t,a)),a}}Op.INSTANCES=new WeakMap;class Da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Da(t,new b(t._delegate,r,new We(e)))}static forKey(e,t,r){return new Da(t,new b(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new n_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new n_(this.firestore,U(this._delegate,e))}catch(t){throw Cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof b&&we(this._delegate,e)}set(e,t){t=JS("DocumentReference.set",t);try{return t?XR(this._delegate,e,t):XR(this._delegate,e)}catch(r){throw Cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?JR(this._delegate,e):JR(this._delegate,e,t,...r)}catch(i){throw Cs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function vO(n){return t_(c(n.firestore,pt),[new Xf(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=aM(e),r=uM(e,i=>new N0(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return eM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function pO(n){n=c(n,b);const e=c(n.firestore,pt),t=Un(e),r=new kp(e);return function BS(n,e){const t=new gi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,l){try{const h=yield function(g,v){const D=Je(g);return D.persistence.runTransaction("read document","readonly",S=>D.ci.Ls(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Th(h,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield Qm(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Hc(e,r,n._key,i,new Np(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function gO(n){n=c(n,b);const e=c(n.firestore,pt);return jS(Un(e),n._key,{source:"server"}).then(t=>XS(e,n,t))}(this._delegate):function fO(n){n=c(n,b);const e=c(n.firestore,pt);return jS(Un(e),n._key).then(t=>XS(e,n,t))}(this._delegate),t.then(r=>new N0(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Da(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function Cs(n,e,t){return n.message=n.message.replace(e,t),n}function aM(n){for(const e of n)if("object"==typeof e&&!eA(e))return e;return{}}function uM(n,e){var t,r;let i;return i=eA(n[0])?n[0]:eA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class N0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $R(this._delegate,e._delegate)}}class k0 extends N0{data(e){const t=this._delegate.data(e);return function gR(n,e){n||ut()}(void 0!==t),t}}class Ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aC(e)}where(e,t,r){try{return new Ts(this.firestore,xh(this._delegate,function rO(n,e,t){const r=e,i=sC("where",n);return new nO(i,r,t)}(e,t,r)))}catch(i){throw Cs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ts(this.firestore,xh(this._delegate,function sO(n,e="asc"){const t=e,r=sC("orderBy",n);return new iO(r,t)}(e,t)))}catch(r){throw Cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ts(this.firestore,xh(this._delegate,function oO(n){return d("limit",n),new GR("limit",n,"F")}(e)))}catch(t){throw Cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ts(this.firestore,xh(this._delegate,function aO(n){return d("limitToLast",n),new GR("limitToLast",n,"L")}(e)))}catch(t){throw Cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ts(this.firestore,xh(this._delegate,function uO(...n){return new WR("startAt",n,!0)}(...e)))}catch(t){throw Cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ts(this.firestore,xh(this._delegate,function lO(...n){return new WR("startAfter",n,!1)}(...e)))}catch(t){throw Cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ts(this.firestore,xh(this._delegate,function cO(...n){return new qR("endBefore",n,!1)}(...e)))}catch(t){throw Cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ts(this.firestore,xh(this._delegate,function dO(...n){return new qR("endAt",n,!0)}(...e)))}catch(t){throw Cs(t,"endAt()","Query.endAt()")}}isEqual(e){return Ve(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _O(n){n=c(n,A);const e=c(n.firestore,pt),t=Un(e),r=new kp(e);return function RR(n,e){const t=new gi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,l){try{const h=yield gp(i,a,!0),g=new s0(a,h.li),v=g.Gu(h.documents),D=g.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const g=Th(h,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield Qm(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ah(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function yO(n){n=c(n,A);const e=c(n.firestore,pt),t=Un(e),r=new kp(e);return $S(t,n._query,{source:"server"}).then(i=>new Ah(e,r,n,i))}(this._delegate):function mO(n){n=c(n,A);const e=c(n.firestore,pt),t=Un(e),r=new kp(e);return HR(n._query),$S(t,n._query).then(i=>new Ah(e,r,n,i))}(this._delegate),t.then(r=>new tA(this.firestore,new Ah(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aM(e),r=uM(e,i=>new tA(this.firestore,new Ah(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return eM(this._delegate,t,r)}withConverter(e){return new Ts(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}class kO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new k0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new k0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new k0(this._firestore,r))})}isEqual(e){return $R(this._delegate,e._delegate)}}class n_ extends Ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Da(this.firestore,e):null}doc(e){try{return new Da(this.firestore,void 0===e?Q(this._delegate):Q(this._delegate,e))}catch(t){throw Cs(t,"doc()","CollectionReference.doc()")}}add(e){return function wO(n,e){const t=c(n.firestore,pt),r=Q(n),i=oC(n.converter,e);return t_(t,[nC(Mp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Da(this.firestore,t))}isEqual(e){return we(this._delegate,e._delegate)}withConverter(e){return new n_(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function Lp(n){return c(n,b)}class nA{constructor(...e){this._delegate=new $c(...e)}static documentId(){return new nA(pr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof $c&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function TO(){return new qS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fp(e)}static delete(){const e=function CO(){return new A0("deleteField")}();return e._methodName="FieldValue.delete",new Fp(e)}static arrayUnion(...e){const t=function DO(...n){return new Yk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fp(t)}static arrayRemove(...e){const t=function SO(...n){return new Qk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fp(t)}static increment(e){const t=function AO(n){return new Xk("increment",n)}(e);return t._methodName="FieldValue.increment",new Fp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OO={Firestore:iM,GeoPoint:eC,Timestamp:Er,Blob:P0,Transaction:sM,WriteBatch:oM,DocumentReference:Da,DocumentSnapshot:N0,Query:Ts,QueryDocumentSnapshot:k0,QuerySnapshot:tA,CollectionReference:n_,FieldPath:nA,FieldValue:Fp,setLogLevel:function NO(n){!function mD(n){su.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function FO(n){(function LO(n,e){n.INTERNAL.registerComponent(new zs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OO)))})(n,(e,t)=>new iM(e,t,new PO)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(X_.Z);var rA=L(6451),uC=L(5363),UO=L(6063);class VO extends hs.x{constructor(e=1/0,t=1/0,r=UO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)h=g;h&&r.splice(0,h+1)}}}var lM=L(3099);function cM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,lM.B)({connector:()=>new VO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function dM(n,e){return(0,ia.m)(e)?An(()=>n,e):An(()=>n)}var iA=L(9468);L(5867);const fM=new Map,GO={activated:!1,tokenObservers:[]},WO={initialized:!1,enabled:!1};function Si(n){return fM.get(n)||GO}function gu(n,e){fM.set(n,e)}function cC(){return WO}class YO{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function QO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ds=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gM(n){if(!Si(n).activated)throw Ds.create("use-before-activation",{appName:n.name})}function uA(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Ds.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw Ds.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Ds.create("fetch-parse-error",{originalErrorMessage:S.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(g[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+v,issuedAtTimeMillis:D}}),lA.apply(this,arguments)}function n1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const O0="firebase-app-check-store";let fC=null;function _M(){return fC||(fC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ds.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(O0,{keyPath:"compositeKey"})}}catch(t){e(Ds.create("storage-open",{originalErrorMessage:t.message}))}}),fC)}function cA(){return cA=(0,fe.Z)(function*(n,e){const r=(yield _M()).transaction(O0,"readwrite"),a=r.objectStore(O0).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var v;h(Ds.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),cA.apply(this,arguments)}const L0=new So.Yd("@firebase/app-check");function EM(n,e){return(0,k.hl)()?function o1(n,e){return function yM(n,e){return cA.apply(this,arguments)}(function wM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{L0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IM(){return cC().enabled}function bM(){return pA.apply(this,arguments)}function pA(){return pA=(0,fe.Z)(function*(){const n=cC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),pA.apply(this,arguments)}const h1={error:"UNKNOWN_ERROR"};function f1(n){return k.US.encodeString(JSON.stringify(n),!1)}function pC(n){return gA.apply(this,arguments)}function gA(){return gA=(0,fe.Z)(function*(n,e=!1){const t=n.app;gM(t);const r=Si(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&gC(g)&&(i=g)}if(!e&&i&&gC(i))return{token:i.token};let h,l=!1;if(IM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uA(n1(t,yield bM()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const g=yield r.exchangeTokenPromise;return yield EM(t,g),gu(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),l=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?L0.warn(g.message):L0.error(g),a=g}return i?(h={token:i.token},gu(t,Object.assign(Object.assign({},r),{token:i})),yield EM(t,i)):h=g1(a),l&&TM(t,h),h}),gA.apply(this,arguments)}function _A(n,e){const t=Si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),gu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function CM(n){const{app:e}=n,t=Si(e);let r=t.tokenRefresher;r||(r=function p1(n){const{app:e}=n;return new YO((0,fe.Z)(function*(){let r;if(r=Si(e).token?yield pC(n,!0):yield pC(n),r.error)throw r.error}),()=>!0,()=>{const t=Si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),gu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function TM(n,e){const t=Si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function gC(n){return n.expireTimeMillis-Date.now()>0}function g1(n){return{token:f1(h1),error:n}}class m1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Si(this.app);for(const t of e)_A(this.app,t.next);return Promise.resolve()}}const NM="app-check-internal";!function R1(){(0,Bi._registerComponent)(new zs.wA("app-check",n=>function _1(n,e){return new m1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(NM).initialize()})),(0,Bi._registerComponent)(new zs.wA(NM,n=>function y1(n){return{getToken:e=>pC(n,e),addTokenListener:e=>function mA(n,e,t,r){const{app:i}=n,a=Si(i),l={next:t,error:r,type:e};if(gu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&gC(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),CM(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>CM(n))}(n,"INTERNAL",e),removeTokenListener:e=>_A(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bi.registerVersion)("@firebase/app-check","0.5.7")}();class F0{constructor(){return(0,cn.vb)("app-check")}}"undefined"!=typeof window&&window;var _C=L(127);const IA=new _.OlP("angularfire2.auth.use-emulator"),bA=new _.OlP("angularfire2.auth.settings"),CA=new _.OlP("angularfire2.auth.tenant-id"),TA=new _.OlP("angularfire2.auth.langugage-code"),DA=new _.OlP("angularfire2.auth.use-device-language"),SA=new _.OlP("angularfire.auth.persistence"),AA=(n,e,t,r,i,a,l,h)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))g.settings[v]=D;return h&&g.setPersistence(h),g},[t,r,i,a,l,h]);let U0=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,P,H){const Z=new hs.x,ve=gt(void 0).pipe((0,uC.Q)(l.outsideAngular),An(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,Rt.U)(()=>(0,Mr.on)(t,a,r)),(0,Rt.U)(Oe=>AA(Oe,a,h,v,D,S,g,P)),cM({bufferSize:1,refCount:!1}));if(Wo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{ve.pipe(go()).subscribe();const bt=ve.pipe(An(ft=>ft.getRedirectResult().then(jt=>jt,()=>null)),cn.iC,cM({bufferSize:1,refCount:!1})),yt=ve.pipe(An(ft=>new fr.y(jt=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(sn=>jt.next(sn),sn=>jt.error(sn),()=>jt.complete()))})))),mt=ve.pipe(An(ft=>new fr.y(jt=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(sn=>jt.next(sn),sn=>jt.error(sn),()=>jt.complete()))}))));this.authState=bt.pipe(dM(yt),(0,iA.R)(l.outsideAngular),(0,uC.Q)(l.insideAngular)),this.user=bt.pipe(dM(mt),(0,iA.R)(l.outsideAngular),(0,uC.Q)(l.insideAngular)),this.idToken=this.user.pipe(An(ft=>ft?(0,En.D)(ft.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(An(ft=>ft?(0,En.D)(ft.getIdTokenResult()):gt(null))),this.credential=(0,rA.T)(bt,Z,this.authState.pipe(ms(ft=>!ft))).pipe((0,Rt.U)(ft=>(null==ft?void 0:ft.user)?ft:null),(0,iA.R)(l.outsideAngular),(0,uC.Q)(l.insideAngular))}return(0,Mr.pX)(this,ve,a,{spy:{apply:(Oe,bt,yt)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&yt.then(mt=>Z.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Mr.Dh),_.LFG(Mr.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(cn.HU),_.LFG(IA,8),_.LFG(bA,8),_.LFG(CA,8),_.LFG(TA,8),_.LFG(DA,8),_.LFG(SA,8),_.LFG(F0,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),L1=(()=>{class n{constructor(){_C.Z.registerVersion("angularfire",cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[U0]}),n})();function OM(n,e){return function F1(n,e=yf.z){return new fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function xA(n,e){return OM(n,e).pipe((0,Rt.U)(t=>({payload:t,type:"query"})))}function yC(n,e){return xA(n,e).pipe(Li(void 0),Gw(),(0,Rt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const g=i.find(D=>D.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function LM(n,e,t){return yC(n,t).pipe(Yr((r,i)=>function V1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function B1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return RA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return RA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return RA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Q_(),(0,Rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function RA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function FM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class UM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=yC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Li(void 0),Gw(),ms(([r,i])=>i.length>0||!r),(0,Rt.U)(([r,i])=>i),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=FM(e);return LM(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return xA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new VM(this.ref.doc(e),this.afs)}}class VM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=$M(r,t);return new UM(i,a,this.afs)}snapshotChanges(){return function U1(n,e){return OM(n,e).pipe(Li(void 0),Gw(),(0,Rt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(cn.iC)}}class j1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?yC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ms(t=>t.length>0),cn.iC):yC(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=FM(e);return LM(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return xA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),cn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(cn.iC)}}const BM=new _.OlP("angularfire2.enableFirestorePersistence"),jM=new _.OlP("angularfire2.firestore.persistenceSettings"),$1=new _.OlP("angularfire2.firestore.settings"),H1=new _.OlP("angularfire2.firestore.use-emulator");function $M(n,e=(t=>t)){return{query:e(n),ref:n}}let HM=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,P,H,Z,ve,Oe,bt,yt){this.schedulers=g;const mt=(0,Mr.on)(t,h,r),ft=D;S&&AA(mt,h,P,Z,ve,Oe,H,bt),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const jt=h.runOutsideAngular(()=>mt.firestore());if(a&&jt.settings(a),ft&&jt.useEmulator(...ft),i&&!Wo(l)){const sn=()=>{try{return(0,En.D)(jt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(ri){return"undefined"!=typeof console&&console.warn(ri),gt(!1)}};return[jt,h.runOutsideAngular(sn)]}return[jt,gt(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=$M(i,r),h=this.schedulers.ngZone.run(()=>a);return new UM(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new j1(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new VM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Mr.Dh),_.LFG(Mr.xv,8),_.LFG(BM,8),_.LFG($1,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(cn.HU),_.LFG(jM,8),_.LFG(H1,8),_.LFG(U0,8),_.LFG(IA,8),_.LFG(bA,8),_.LFG(CA,8),_.LFG(TA,8),_.LFG(DA,8),_.LFG(SA,8),_.LFG(F0,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),G1=(()=>{class n{constructor(){_C.Z.registerVersion("angularfire",cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:BM,useValue:!0},{provide:jM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[HM]}),n})(),Up=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new VT.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(HM),_.LFG(U0),_.LFG(Vi),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W1=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Up))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign In"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(7),h=_.MAs(10);return r.authService.SignIn(l.value,h.value)}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",3)(18,"button",11),_.NdJ("click",function(){return r.authService.GoogleAuth()}),_._UZ(19,"i",12),_._uU(20," Log in with Google "),_.qZA()(),_.TgZ(21,"div",13)(22,"span",14),_._uU(23,"Forgot Password?"),_.qZA()()(),_.TgZ(24,"div",15)(25,"span"),_._uU(26,"Don't have an account?"),_.TgZ(27,"span",16),_._uU(28," Sign Up"),_.qZA()()()()()}},directives:[ic],styles:[""]}),n})(),q1=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Up))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign Up"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(7),h=_.MAs(10);return r.authService.SignUp(l.value,h.value)}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",3)(18,"button",11),_.NdJ("click",function(){return r.authService.GoogleAuth()}),_._UZ(19,"i",12),_._uU(20," Continue with Google "),_.qZA()()(),_.TgZ(21,"div",13)(22,"span"),_._uU(23,"Already have an account? "),_.TgZ(24,"span",14),_._uU(25,"Log In"),_.qZA()()()()()}},directives:[ic],styles:[""]}),n})();function z1(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"div",18)(2,"div",19),_._UZ(3,"img",20),_.TgZ(4,"div",21)(5,"h1"),_._uU(6,"Hello: "),_.TgZ(7,"strong"),_._uU(8),_.qZA()(),_.TgZ(9,"p"),_._uU(10,"User ID: "),_.TgZ(11,"strong"),_._uU(12),_.qZA()(),_.TgZ(13,"p"),_._uU(14,"Email: "),_.TgZ(15,"strong"),_._uU(16),_.qZA()(),_.TgZ(17,"p"),_._uU(18,"Email Verified: "),_.TgZ(19,"strong"),_._uU(20),_.qZA()()()()()()),2&n){const t=e.ngIf;_.xp6(3),_.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",_.LSH),_.s9C("alt",t.displayName),_.xp6(5),_.Oqu(t.displayName?t.displayName:"User"),_.xp6(4),_.Oqu(t.uid),_.xp6(4),_.Oqu(t.email),_.xp6(4),_.Oqu(t.emailVerified)}}let K1=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Up))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(_.TgZ(0,"nav",0)(1,"a",1),_._UZ(2,"img",2),_.qZA()(),_.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),_._UZ(10,"i",10),_._uU(11,"User Profile "),_.qZA()(),_.TgZ(12,"li",8)(13,"a",11),_.NdJ("click",function(){return r.authService.SignOut()}),_._UZ(14,"i",12),_._uU(15,"Log out "),_.qZA()()()()(),_.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),_._uU(20,"User Profile"),_.qZA()(),_.YNc(21,z1,21,6,"div",17),_.qZA()()()()),2&t&&(_.xp6(21),_.Q6J("ngIf",r.authService.userData))},directives:[$r],styles:[""]}),n})(),Z1=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Up))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Reset Password"),_.qZA(),_.TgZ(5,"p",3),_._uU(6,"Please enter your email address to request a password reset."),_.qZA(),_.TgZ(7,"div",4),_._UZ(8,"input",5,6),_.qZA(),_.TgZ(10,"div",4)(11,"input",7),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(9);return r.authService.ForgotPassword(l.value)}),_.qZA()()(),_.TgZ(12,"div",8)(13,"span"),_._uU(14,"Go back to ? "),_.TgZ(15,"span",9),_._uU(16,"Log In"),_.qZA()()()()()}},directives:[ic],styles:[""]}),n})();function Y1(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"p",9),_._uU(2,"We have sent a confirmation email to "),_.TgZ(3,"strong"),_._uU(4),_.qZA(),_._uU(5,"."),_.qZA(),_.TgZ(6,"p",9),_._uU(7,"Please check your email and click on the link to verfiy your email address."),_.qZA()()),2&n){const t=e.ngIf;_.xp6(4),_.Oqu(t.email)}}const Q1=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:W1},{path:"register-user",component:q1},{path:"dashboard",component:K1,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Up),_.LFG(Vi))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:Z1},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Up))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Thank You for Registering"),_.qZA(),_.YNc(5,Y1,8,1,"div",3),_.TgZ(6,"div",4)(7,"button",5),_.NdJ("click",function(){return r.authService.SendVerificationMail()}),_._UZ(8,"i",6),_._uU(9," Resend Verification Email "),_.qZA()()(),_.TgZ(10,"div",7)(11,"span"),_._uU(12,"Go back to?"),_.TgZ(13,"span",8),_._uU(14," Sign in"),_.qZA()()()()()),2&t&&(_.xp6(5),_.Q6J("ngIf",r.authService.userData))},directives:[$r,ic],styles:[""]}),n})()}];let X1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[_f.forRoot(Q1)],_f]}),n})(),J1=(()=>{class n{constructor(){this.title="angularfiebase-authentication"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[Jl],styles:[""]}),n})();const GM="firebasestorage.googleapis.com",WM="storageBucket";class Lr extends k.ZR{constructor(e,t){super(MA(e),`Firebase Storage: ${t} (${MA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lr.prototype)}_codeEquals(e){return MA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function MA(n){return"storage/"+n}function PA(){return new Lr("unknown","An unknown error occurred, please check the error payload for server response.")}function qM(){return new Lr("canceled","User canceled the upload/download.")}function zM(){return new Lr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function r_(n){return new Lr("invalid-argument",n)}function KM(){return new Lr("app-deleted","The Firebase app was deleted.")}function ZM(n){return new Lr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function V0(n,e){return new Lr("invalid-format","String does not match format '"+n+"': "+e)}function B0(n){throw new Lr("internal-error","Internal error: "+n)}class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch(i){return new rs(e,"")}if(""===r.path)return r;throw function cL(n){return new Lr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ft){ft.path_=decodeURIComponent(ft.path)}const S=t.replace(/[.]/g,"\\."),mt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===GM?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ft=0;ft<mt.length;ft++){const jt=mt[ft],sn=jt.regex.exec(e);if(sn){let Uo=sn[jt.indices.path];Uo||(Uo=""),r=new rs(sn[jt.indices.bucket],Uo),jt.postModify(r);break}}if(null==r)throw function lL(n){return new Lr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class pL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vC(n){return"string"==typeof n||n instanceof String}function YM(n){return NA()&&n instanceof Blob}function NA(){return"undefined"!=typeof Blob}function kA(n,e,t,r){if(r<e)throw r_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw r_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Gc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function QM(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Mh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Mh||(Mh={})),Mh))();class wL{constructor(e,t,r,i,a,l,h,g,v,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,H)=>{this.resolve_=P,this.reject_=H,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function _L(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==h){const g=PA();g.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,g):g)}else l(i.canceled?this.appDelete_?KM():qM():function uL(){return new Lr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new wC(!1,null,!0)):this.backoffId_=function gL(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function g(){return 2===h}let v=!1;function D(...Oe){v||(v=!0,e.apply(null,Oe))}function S(Oe){i=setTimeout(()=>{i=null,n(H,g())},Oe)}function P(){a&&clearTimeout(a)}function H(Oe,...bt){if(v)return void P();if(Oe)return P(),void D.call(null,Oe,...bt);if(g()||l)return P(),void D.call(null,Oe,...bt);let mt;r<64&&(r*=2),1===h?(h=2,mt=0):mt=1e3*(r+Math.random()),S(mt)}let Z=!1;function ve(Oe){Z||(Z=!0,P(),!v&&(null!==i?(Oe||(h=2),clearTimeout(i),S(0)):Oe||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,ve(!0)},t),ve}((r,i)=>{if(i)return void r(!1,new wC(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Mh.NO_ERROR,g=a.getStatus();if(!h||this.isRetryStatusCode_(g)){const D=a.getErrorCode()===Mh.ABORT;return void r(!1,new wC(!1,null,D))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new wC(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mL(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class wC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function SL(...n){const e=function DL(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(NA())return new Blob(n);throw new Lr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Lo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class OA{constructor(e,t){this.data=e,this.contentType=t||null}}function LA(n,e){switch(n){case Lo.RAW:return new OA(XM(e));case Lo.BASE64:case Lo.BASE64URL:return new OA(JM(n,e));case Lo.DATA_URL:return new OA(function ML(n){const e=new eP(n);return e.base64?JM(Lo.BASE64,e.rest):function RL(n){let e;try{e=decodeURIComponent(n)}catch(t){throw V0(Lo.DATA_URL,"Malformed data URL.")}return XM(e)}(e.rest)}(e),function PL(n){return new eP(n).contentType}(e))}throw PA()}function XM(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function JM(n,e){switch(n){case Lo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw V0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Lo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw V0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function xL(n){return atob(n)}(e)}catch(i){throw V0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class eP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw V0(Lo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function NL(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ml{constructor(e,t){let r=0,i="";YM(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(YM(this.data_)){const i=function AL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ml(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ml(r,!0)}}static getBlob(...e){if(NA()){const t=e.map(r=>r instanceof ml?r.data_:r);return new ml(SL.apply(null,t))}{const t=e.map(l=>vC(l)?LA(Lo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new ml(i,!0)}}uploadData(){return this.data_}}function FA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function vL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function tP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function LL(n,e){return e}class Ss{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||LL}}let EC=null;function j0(){if(EC)return EC;const n=[];n.push(new Ss("bucket")),n.push(new Ss("generation")),n.push(new Ss("metageneration")),n.push(new Ss("name","fullPath",!0));const t=new Ss("name");t.xform=function e(a,l){return function FL(n){return!vC(n)||n.length<2?n:tP(n)}(l)},n.push(t);const i=new Ss("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ss("timeCreated")),n.push(new Ss("updated")),n.push(new Ss("md5Hash",null,!0)),n.push(new Ss("cacheControl",null,!0)),n.push(new Ss("contentDisposition",null,!0)),n.push(new Ss("contentEncoding",null,!0)),n.push(new Ss("contentLanguage",null,!0)),n.push(new Ss("contentType",null,!0)),n.push(new Ss("metadata","customMetadata",!0)),EC=n,EC}function nP(n,e,t){const r=FA(e);return null===r?null:function VL(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function UL(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new rs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function UA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const rP="prefixes";class _l{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yl(n){if(!n)throw PA()}function IC(n,e){return function t(r,i){const a=nP(n,i,e);return yl(null!==a),a}}function i_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oL(){return new Lr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function sL(){return new Lr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function iL(n){return new Lr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function aL(n){return new Lr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function $0(n){const e=i_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function rL(n){return new Lr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function sP(n,e,t){const i=Gc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new _l(i,"GET",IC(n,t),l);return h.errorHandler=$0(e),h}function WL(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Gc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new _l(h,"GET",function HL(n,e){return function t(r,i){const a=function $L(n,e,t){const r=FA(t);return null===r?null:function jL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[rP])for(const i of t[rP]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new rs(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new rs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return yl(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=i_(e),D}function aP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function ZL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class bC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function VA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){yl(!1)}return yl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const JL={STATE_CHANGED:"state_changed"},As={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BA(n){switch(n){case"running":case"pausing":case"canceling":return As.RUNNING;case"paused":return As.PAUSED;case"success":return As.SUCCESS;case"canceled":return As.CANCELED;default:return As.ERROR}}class eF{constructor(e,t,r){if(function yL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function s_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class nF extends class tF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw B0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw B0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw B0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw B0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw B0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function mu(){return new nF}class dP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=j0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function YL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=aP(e,r,i),h={name:l.fullPath},g=Gc(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=UA(l,t),Z=new _l(g,"POST",function H(ve){let Oe;VA(ve);try{Oe=ve.getResponseHeader("X-Goog-Upload-URL")}catch(bt){yl(!1)}return yl(vC(Oe)),Oe},n.maxUploadRetryTime);return Z.urlParams=h,Z.headers=D,Z.body=S,Z.errorHandler=i_(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function QL(n,e,t,r){const g=new _l(t,"POST",function a(v){const D=VA(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(H){yl(!1)}S||yl(!1);const P=Number(S);return yl(!isNaN(P)),new bC(P,r.size(),"final"===D)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=i_(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,mu,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new bC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function XL(n,e,t,r,i,a,l,h){const g=new bC(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function hL(){return new Lr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let D=v;i>0&&(D=Math.min(D,i));const S=g.current,Z={"X-Goog-Upload-Command":D===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},ve=r.slice(S,S+D);if(null===ve)throw zM();const mt=new _l(t,"POST",function Oe(ft,jt){const sn=VA(ft,["active","final"]),ri=g.current+D,Uo=r.size();let eR;return eR="final"===sn?IC(e,a)(ft,jt):null,new bC(ri,Uo,"final"===sn,eR)},e.maxUploadRetryTime);return mt.headers=Z,mt.body=ve.uploadData(),mt.progressCallback=h||null,mt.errorHandler=i_(n),mt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(l,mu,i,a);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=sP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function uP(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let mt="";for(let ft=0;ft<2;ft++)mt+=Math.random().toString().slice(2);return mt}();l["Content-Type"]="multipart/related; boundary="+g;const v=aP(e,r,i),D=UA(v,t),H=ml.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===H)throw zM();const Z={name:v.fullPath},ve=Gc(a,n.host,n._protocol),bt=n.maxUploadRetryTime,yt=new _l(ve,"POST",IC(n,t),bt);return yt.urlParams=Z,yt.headers=l,yt.body=H.uploadData(),yt.errorHandler=i_(e),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=qM(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=BA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new eF(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(BA(this._state)){case As.SUCCESS:s_(this._resolve.bind(null,this.snapshot))();break;case As.CANCELED:case As.ERROR:s_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(BA(this._state)){case As.RUNNING:case As.PAUSED:e.next&&s_(e.next.bind(e,this.snapshot))();break;case As.SUCCESS:e.complete&&s_(e.complete.bind(e))();break;default:e.error&&s_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Vp{constructor(e,t){this._service=e,this._location=t instanceof rs?t:rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vp(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tP(this._location.path)}get storage(){return this._service}get parent(){const e=function kL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new rs(this._location.bucket,e);return new Vp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw ZM(e)}}function fP(n,e,t){return jA.apply(this,arguments)}function jA(){return jA=(0,fe.Z)(function*(n,e,t){const i=yield pP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield fP(n,e,i.nextPageToken))}),jA.apply(this,arguments)}function pP(n,e){null!=e&&"number"==typeof e.maxResults&&kA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=WL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,mu)}function pF(n){n._throwIfRoot("getDownloadURL");const e=function qL(n,e,t){const i=Gc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new _l(i,"GET",function GL(n,e){return function t(r,i){const a=nP(n,i,e);return yl(null!==a),function BL(n,e,t,r){const i=FA(e);if(null===i||!vC(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return Gc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+QM({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=$0(e),h}(n.storage,n._location,j0());return n.storage.makeRequestWithTokens(e,mu).then(t=>{if(null===t)throw function fL(){return new Lr("no-download-url","The given file does not have any download URLs.")}();return t})}function gP(n,e){const t=function OL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new rs(n._location.bucket,t);return new Vp(n.storage,r)}function mP(n,e){if(n instanceof $A){const t=n;if(null==t._bucket)throw function dL(){return new Lr("no-default-bucket","No default bucket found. Did you set the '"+WM+"' property when initializing the app?")}();const r=new Vp(t,t._bucket);return null!=e?mP(r,e):r}return void 0!==e?gP(n,e):n}function yF(n,e){if(e&&function mF(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof $A)return function _F(n,e){return new Vp(n,e)}(n,e);throw r_("To use ref(service, url), the first argument must be a Storage instance.")}return mP(n,e)}function _P(n,e){const t=null==e?void 0:e[WM];return null==t?null:rs.makeFromBucketSpec(t,n)}class $A{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=GM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?rs.makeFromBucketSpec(i,this._host):_P(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?rs.makeFromBucketSpec(this._url,e):_P(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new pL(KM());{const a=function TL(n,e,t,r,i,a){const l=QM(n.urlParams),h=n.url+l,g=Object.assign({},n.headers);return function bL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function EL(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function IL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function CL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new wL(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,fe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const yP="@firebase/storage";function EP(n,e){return yF(n=(0,k.m9)(n),e)}function xF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new $A(t,r,i,e,Bi.SDK_VERSION)}!function RF(){(0,Bi._registerComponent)(new zs.wA("storage",xF,"PUBLIC").setMultipleInstances(!0)),(0,Bi.registerVersion)(yP,"0.9.5",""),(0,Bi.registerVersion)(yP,"0.9.5","esm2017")}();class CC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class IP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new CC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new CC(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new CC(l,this,this._ref)):{next:t.next?l=>t.next(new CC(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class bP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Wc(e,this._service))}get items(){return this._delegate.items.map(e=>new Wc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function SF(n,e){return gP(n,e)}(this._delegate,e);return new Wc(t,this.storage)}get root(){return new Wc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Wc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new IP(function wF(n,e,t){return function lF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new dP(n,new ml(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Lo.RAW,r){this._throwIfRoot("putString");const i=LA(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new IP(new dP(this._delegate,new ml(i.data,!0),a),this)}listAll(){return function CF(n){return function dF(n){const e={prefixes:[],items:[]};return fP(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new bP(e,this.storage))}list(e){return function bF(n,e){return pP(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new bP(t,this.storage))}getMetadata(){return function EF(n){return function hF(n){n._throwIfRoot("getMetadata");const e=sP(n.storage,n._location,j0());return n.storage.makeRequestWithTokens(e,mu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function IF(n,e){return function fF(n,e){n._throwIfRoot("updateMetadata");const t=function zL(n,e,t,r){const a=Gc(e.fullServerUrl(),n.host,n._protocol),h=UA(t,r),v=n.maxOperationRetryTime,D=new _l(a,"PATCH",IC(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=$0(e),D}(n.storage,n._location,e,j0());return n.storage.makeRequestWithTokens(t,mu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function TF(n){return pF(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function DF(n){return function gF(n){n._throwIfRoot("deleteObject");const e=function KL(n,e){const r=Gc(e.fullServerUrl(),n.host,n._protocol),h=new _l(r,"DELETE",function l(g,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=$0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,mu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw ZM(e)}}class CP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(TP(e))throw r_("ref() expected a child path but got a URL, use refFromURL instead.");return new Wc(EP(this._delegate,e),this)}refFromURL(e){if(!TP(e))throw r_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rs.makeFromUrl(e,this._delegate.host)}catch(t){throw r_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wc(EP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function AF(n,e,t,r={}){!function vF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function TP(n){return/^[A-Za-z]+:\/\//.test(n)}function kF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new CP(t,r)}function DP(n){const e=function LF(n){return new fr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function eL(n,e=yf.z){return(0,sr.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function g(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,In.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Rt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function TC(n){return{getDownloadURL:()=>gt(void 0).pipe(cn.fc,An(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>gt(void 0).pipe(cn.fc,An(()=>n.getMetadata()),cn.iC),delete:()=>(0,En.D)(n.delete()),child:e=>TC(n.child(e)),updateMetadata:e=>(0,En.D)(n.updateMetadata(e)),put:(e,t)=>DP(n.put(e,t)),putString:(e,t,r)=>DP(n.putString(e,t,r)),list:e=>(0,En.D)(n.list(e)),listAll:()=>(0,En.D)(n.listAll())}}!function OF(n){const e={TaskState:As,TaskEvent:JL,StringFormat:Lo,Storage:CP,Reference:Wc};n.INTERNAL.registerComponent(new zs.wA("storage-compat",kF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(X_.Z);const FF=new _.OlP("angularfire2.storageBucket"),UF=new _.OlP("angularfire2.storage.maxUploadRetryTime"),VF=new _.OlP("angularfire2.storage.maxOperationRetryTime"),BF=new _.OlP("angularfire2.storage.use-emulator");let jF=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S){const P=(0,Mr.on)(t,l,r);this.storage=(0,Mr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const H=l.runOutsideAngular(()=>P.storage(i||void 0)),Z=D;return Z&&H.useEmulator(...Z),g&&H.setMaxUploadRetryTime(g),v&&H.setMaxOperationRetryTime(v),H},[g,v])}ref(t){return TC(this.storage.ref(t))}refFromURL(t){return TC(this.storage.refFromURL(t))}upload(t,r,i){return TC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Mr.Dh),_.LFG(Mr.xv,8),_.LFG(FF,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(cn.HU),_.LFG(UF,8),_.LFG(VF,8),_.LFG(BF,8),_.LFG(F0,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})(),HF=(()=>{class n{constructor(){_C.Z.registerVersion("angularfire",cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[jF],imports:[$F]}),n})();var GF=L(5032);const SP="@firebase/database";let HA="";function xP(n){HA=n}class zF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class KF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const RP=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zF(e)}}catch(e){}return new KF},Bp=RP("localStorage"),GA=RP("sessionStorage"),o_=new So.Yd("@firebase/database"),MP=function(){let n=1;return function(){return n++}}(),PP=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},H0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=H0.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let jp=null,NP=!0;const kP=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(o_.logLevel=So.in.VERBOSE,jp=o_.log.bind(o_),e&&GA.set("logging_enabled",!0)):"function"==typeof n?jp=n:(jp=null,GA.remove("logging_enabled"))},Ai=function(...n){if(!0===NP&&(NP=!1,null===jp&&!0===GA.get("logging_enabled")&&kP(!0)),jp){const e=H0.apply(null,n);jp(e)}},G0=function(n){return function(...e){Ai(n,...e)}},WA=function(...n){const e="FIREBASE INTERNAL ERROR: "+H0(...n);o_.error(e)},vl=function(...n){const e=`FIREBASE FATAL ERROR: ${H0(...n)}`;throw o_.error(e),new Error(e)},xs=function(...n){const e="FIREBASE WARNING: "+H0(...n);o_.warn(e)},DC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},qc="[MIN_NAME]",wl="[MAX_NAME]",$p=function(n,e){if(n===e)return 0;if(n===qc||e===wl)return-1;if(e===qc||n===wl)return 1;{const t=SC(n),r=SC(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},QF=function(n,e){return n===e?0:n<e?-1:1},W0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},qA=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=qA(n[e[r]]);return t+="}",t},OP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const LP=function(n){(0,k.hu)(!DC(n),"Invalid JSON number");const r=1023;let i,a,l,h,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(g=0;g<64;g+=8){let P=parseInt(D.substr(g,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},tU=new RegExp("^-?(0*)\\d{1,10}$"),FP=-2147483648,zA=2147483647,SC=function(n){if(tU.test(n)){const e=Number(n);if(e>=FP&&e<=zA)return e}return null},a_=function(n){try{n()}catch(e){setTimeout(()=>{throw xs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},q0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class rU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class iU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xs(e)}}let z0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const $P=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,GP="websocket",WP="long_polling";class ZA{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qP(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===GP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==WP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function oU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return xi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class aU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const YA={},QA={};function XA(n){const e=n.toString();return YA[e]||(YA[e]=new aU),YA[e]}class lU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&a_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class u_{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=G0(e),this.stats_=XA(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),qP(t,WP,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JA((...a)=>{const[l,h,g,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&$P.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){u_.forceAllow_=!0}static forceDisallow(){u_.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!u_.forceAllow_&&(u_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=OP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class JA{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=MP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=JA.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ai("frame writing exception"),h.stack&&Ai(h.stack),Ai(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ai("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let K0=null;"undefined"!=typeof MozWebSocket?K0=MozWebSocket:"undefined"!=typeof WebSocket&&(K0=WebSocket);let Z0=(()=>{class n{constructor(t,r,i,a,l,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=G0(this.connId),this.stats_=XA(r),this.connURL=n.connectionURL_(r,h,g,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&$P.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),qP(t,GP,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bp.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${HA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new K0(this.connURL,[],a)}else this.mySock=new K0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==K0&&!n.forceDisallow_}static previouslyFailed(){return Bp.isInMemoryStorage||!0===Bp.get("previous_websocket_failure")}markConnectionHealthy(){Bp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=OP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class ex{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[u_,Z0]}initTransports_(e){const t=Z0&&Z0.isAvailable();let r=t&&!Z0.previouslyFailed();if(e.webSocketOnly&&(t||xs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Z0];else{const i=this.transports_=[];for(const a of ex.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class sN{constructor(e,t,r,i,a,l,h,g,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=G0("c:"+this.id+":"),this.transportManager_=new ex(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=q0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=W0("t",e),r=W0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=W0("t",e),r=W0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=W0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?WA("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&xs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),q0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class oN{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class aN{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class xC extends aN{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xC}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new Dn("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ph(n){return n.pieces_.length-n.pieceNum_}function qn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function nx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Y0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function cN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Dn(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function Rs(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return Rs(qn(n),qn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function MU(n,e){const t=Y0(n,0),r=Y0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=$p(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function rx(n,e){if(Ph(n)!==Ph(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Sa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ph(n)>Ph(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class PU{constructor(e,t){this.errorPrefix_=t,this.parts_=Y0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);dN(this)}}function dN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hp(n))}function Hp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ix extends aN{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ix}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Q0=1e3;let MC,Gp=(()=>{class n extends oN{constructor(t,r,i,a,l,h,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=G0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Q0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ix.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&xC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const v=g.d,D=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();xs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):WA("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Q0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Q0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Q0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,fe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,v=null;const D=function(){v?v.close():(g=!0,a())};t.realtime_={close:D,sendRequest:function(H){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(H)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[H,Z]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);g?Ai("getToken() completed but was canceled"):(Ai("getToken() completed. Creating connection."),t.authToken_=H&&H.accessToken,t.appCheckToken_=Z&&Z.token,v=new sN(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ve=>{xs(ve+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(H){t.log_("Failed to get token: "+H),g||(t.repoInfo_.nodeAdmin&&xs(H),D())}}})()}interrupt(t){Ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Q0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>qA(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Dn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+HA.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=xC.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rn(e,t)}}class RC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rn(qc,e),i=new rn(qc,t);return 0!==this.compare(r,i)}minPost(){return rn.MIN}}class pN extends RC{static get __EMPTY_NODE(){return MC}static set __EMPTY_NODE(e){MC=e}compare(e,t){return $p(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rn.MIN}maxPost(){return new rn(wl,MC)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rn(e,MC)}toString(){return".key"}}const El=new pN;class PC{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let ox,_u=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:eo.EMPTY_NODE,this.right=null!=l?l:eo.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return eo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return eo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class eo{constructor(e,t=eo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new eo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_u.BLACK,null,null))}remove(e){return new eo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_u.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new PC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new PC(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new PC(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new PC(this.root_,null,this.comparator_,!0,e)}}function jU(n,e){return $p(n.name,e.name)}function sx(n,e){return $p(n,e)}eo.EMPTY_NODE=new class BU{copy(e,t,r,i,a){return this}insert(e,t,r){return new _u(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const gN=function(n){return"number"==typeof n?"number:"+LP(n):"string:"+n},mN=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===ox||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===ox||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let _N,yN,vN,l_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),mN(this.priorityNode_)}static set __childrenNodeConstructor(t){_N=t}static get __childrenNodeConstructor(){return _N}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Ph(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(qn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+gN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?LP(this.value_):this.value_,this.lazyHash_=PP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const er=new class WU extends RC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?$p(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rn.MIN}maxPost(){return new rn(wl,new l_("[PRIORITY-POST]",vN))}makePost(e,t){const r=yN(e);return new rn(t,new l_("[PRIORITY-POST]",r))}toString(){return".priority"}},qU=Math.log(2);class zU{constructor(e){this.count=parseInt(Math.log(e+1)/qU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const NC=function(n,e,t,r){n.sort(e);const i=function(g,v){const D=v-g;let S,P;if(0===D)return null;if(1===D)return S=n[g],P=t?t(S):S,new _u(P,S.node,_u.BLACK,null,null);{const H=parseInt(D/2,10)+g,Z=i(g,H),ve=i(H+1,v);return S=n[H],P=t?t(S):S,new _u(P,S.node,_u.BLACK,Z,ve)}},h=function(g){let v=null,D=null,S=n.length;const P=function(Z,ve){const Oe=S-Z,bt=S;S-=Z;const yt=i(Oe+1,bt),mt=n[Oe],ft=t?t(mt):mt;H(new _u(ft,mt.node,ve,null,yt))},H=function(Z){v?(v.left=Z,v=Z):(D=Z,v=Z)};for(let Z=0;Z<g.count;++Z){const ve=g.nextBitIsOne(),Oe=Math.pow(2,g.count-(Z+1));ve?P(Oe,_u.BLACK):(P(Oe,_u.BLACK),P(Oe,_u.RED))}return D}(new zU(n.length));return new eo(r||e,h)};let ax;const c_={};class zc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(c_&&er,"ChildrenNode.ts has not been loaded"),ax=ax||new zc({".priority":c_},{".priority":er}),ax}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof eo?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==El,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(rn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?NC(r,e.getCompare()):c_;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const D=Object.assign({},this.indexes_);return D[g]=h,new zc(D,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===c_){if(l.isDefinedOn(e.node)){const h=[],g=t.getIterator(rn.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&h.push(v),v=g.getNext();return h.push(e),NC(h,l.getCompare())}return c_}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new rn(e.name,h))),g.insert(e,e.node)}});return new zc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===c_)return i;{const a=t.get(e.name);return a?i.remove(new rn(e.name,a)):i}});return new zc(r,this.indexSet_)}}let X0,zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&mN(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return X0||(X0=new n(new eo(sx),null,zc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||X0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?X0:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(qn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new rn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?X0:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,k.hu)(".priority"!==en(t)||1===Ph(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(qn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(er,(h,g)=>{r[h]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+gN(this.getPriority().val())+":"),this.forEachChild(er,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":PP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new rn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new rn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new rn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,rn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,rn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===J0?-1:0}withIndex(t){if(t===El||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===El||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(er),a=r.getIterator(er);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===El?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const J0=new class KU extends zt{constructor(){super(new eo(sx),zt.EMPTY_NODE,zc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zt.EMPTY_NODE}isEmpty(){return!1}};function Cr(n,e=null){if(null===n)return zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new l_(n,Cr(e));if(n instanceof Array){let t=zt.EMPTY_NODE;return xi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Cr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Cr(e))}{const t=[];let r=!1;if(xi(n,(l,h)=>{if("."!==l.substring(0,1)){const g=Cr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new rn(l,g)))}}),0===t.length)return zt.EMPTY_NODE;const a=NC(t,jU,l=>l.name,sx);if(r){const l=NC(t,er.getCompare());return new zt(a,Cr(e),new zc({".priority":l},{".priority":er}))}return new zt(a,Cr(e),zc.Default)}}Object.defineProperties(rn,{MIN:{value:new rn(qc,zt.EMPTY_NODE)},MAX:{value:new rn(wl,J0)}}),pN.__EMPTY_NODE=zt.EMPTY_NODE,l_.__childrenNodeConstructor=zt,function $U(n){ox=n}(J0),function GU(n){vN=n}(J0),function HU(n){yN=n}(Cr);class ux extends RC{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?$p(e.name,t.name):a}makePost(e,t){const r=Cr(e),i=zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new rn(t,i)}maxPost(){const e=zt.EMPTY_NODE.updateChild(this.indexPath_,J0);return new rn(wl,e)}toString(){return Y0(this.indexPath_,0).join("/")}}const lx=new class YU extends RC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?$p(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rn.MIN}maxPost(){return rn.MAX}makePost(e,t){const r=Cr(e);return new rn(t,r)}toString(){return".value"}},d_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",QU=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=d_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=d_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),IN=function(n){if(n===""+zA)return"-";const e=SC(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return wl;const a=d_.charAt(d_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},bN=function(n){if(n===""+FP)return qc;const e=SC(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+zA:(delete t[t.length-1],t.join("")):(t[t.length-1]=d_.charAt(d_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function CN(n){return{type:"value",snapshotNode:n}}function h_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ew(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function tw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class dx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(ew(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(h_(t,r)):l.trackChildChange(tw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(er,(i,a)=>{t.hasChild(i)||r.trackChildChange(ew(i,a))}),t.isLeafNode()||t.forEachChild(er,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(tw(i,a,l))}else r.trackChildChange(h_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class nw{constructor(e){this.indexedFilter_=new dx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=nw.getStartPost_(e),this.endPost_=nw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new rn(t,r))||(r=zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);const a=this;return t.forEachChild(er,(l,h)=>{a.matches(new rn(l,h))||(i=i.updateImmediateChild(l,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class JU{constructor(e){this.rangedFilter_=new nw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new rn(t,r))||(r=zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,g;if(i=t.withIndex(this.index_),i=i.updatePriority(zt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(P,H)=>S(H,P)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,D=!1;for(;g.hasNext();){const S=g.getNext();!D&&h(a,S)<=0&&(D=!0),D&&v<this.limit_&&h(S,l)<=0?v++:i=i.updateImmediateChild(S.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,H)=>S(H,P)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const g=new rn(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||h.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const H=null==P?1:l(P,g);if(D&&!r.isEmpty()&&H>=0)return null!=a&&a.trackChildChange(tw(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(ew(t,S));const ve=h.updateImmediateChild(t,zt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(h_(P.name,P.node)),ve.updateImmediateChild(P.name,P.node)):ve}}return r.isEmpty()?e:D&&l(v,g)>=0?(null!=a&&(a.trackChildChange(ew(v.name,v.node)),a.trackChildChange(h_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,zt.EMPTY_NODE)):e}}class kC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=er}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===er}copy(){const e=new kC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function hx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function fx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function OC(n,e){const t=n.copy();return t.index_=e,t}function TN(n){const e={};if(n.isDefault())return e;let t;return n.index_===er?t="$priority":n.index_===lx?t="$value":n.index_===El?t="$key":((0,k.hu)(n.index_ instanceof ux,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function DN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==er&&(e.i=n.index_.toString()),e}class LC extends oN{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=G0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=LC.getListenId_(e,r),h={};this.listens_[l]=h;const g=TN(e._queryParams);this.restRequest_(a+".json",g,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=LC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=TN(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,k.cI)(h.responseText)}catch(v){xs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&xs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class sV{constructor(){this.rootNode_=zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function FC(){return{value:null,children:new Map}}function f_(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,FC()),f_(n.children.get(r),e=qn(e),t)}}function px(n,e){if(tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(er,(r,i)=>{f_(n,new Dn(r),i)}),px(n,e)}}if(n.children.size>0){const t=en(e);return e=qn(e),n.children.has(t)&&px(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function gx(n,e,t){null!==n.value?t(e,n.value):function oV(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{gx(i,new Dn(e.toString()+"/"+r),t)})}class aV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class cV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aV(e);const r=1e4+2e4*Math.random();q0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),q0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Aa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Aa||(Aa={})),Aa))();function yx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class UC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Aa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new UC(yn(),t,this.revert)}}return(0,k.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new UC(qn(this.path),this.affectedTree,this.revert)}}class rw{constructor(e,t){this.source=e,this.path=t,this.type=Aa.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new rw(this.source,yn()):new rw(this.source,qn(this.path))}}class Wp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Aa.OVERWRITE}operationForChild(e){return tn(this.path)?new Wp(this.source,yn(),this.snap.getImmediateChild(e)):new Wp(this.source,qn(this.path),this.snap)}}class p_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Aa.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new Wp(this.source,yn(),t.value):new p_(this.source,yn(),t)}return(0,k.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new p_(this.source,qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class dV{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function iw(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,g)=>function pV(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new rn(e.childName,e.snapshotNode),i=new rn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),l.forEach(h=>{const g=function fV(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(g,n.query_))})})}function VC(n,e){return{eventCache:n,serverCache:e}}function sw(n,e,t,r){return VC(new Nh(e,t,r),n.serverCache)}function AN(n,e,t,r){return VC(n.eventCache,new Nh(e,t,r))}function BC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let vx;class tr{constructor(e,t=(()=>(vx||(vx=new eo(QF)),vx))()){this.value=e,this.children=t}static fromObject(e){let t=new tr(null);return xi(e,(r,i)=>{t=t.set(new Dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(qn(e),t);return null!=a?{path:mr(new Dn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(qn(e)):new tr(null)}}set(e,t){if(tn(e))return new tr(t,this.children);{const r=en(e),a=(this.children.get(r)||new tr(null)).set(qn(e),t),l=this.children.insert(r,a);return new tr(this.value,l)}}remove(e){if(tn(e))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(qn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new tr(null):new tr(this.value,a)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(qn(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),a=(this.children.get(r)||new tr(null)).setTree(qn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new tr(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const a=en(e),l=this.children.get(a);return l?l.findOnPath_(qn(e),mr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_(qn(e),mr(t,i),r):new tr(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class yu{constructor(e){this.writeTree_=e}static empty(){return new yu(new tr(null))}}function ow(n,e,t){if(tn(e))return new yu(new tr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Rs(i,e);return a=a.updateChild(l,t),new yu(n.writeTree_.set(i,a))}{const i=new tr(t),a=n.writeTree_.setTree(e,i);return new yu(a)}}}function wx(n,e,t){let r=n;return xi(t,(i,a)=>{r=ow(r,mr(e,i),a)}),r}function xN(n,e){if(tn(e))return yu.empty();{const t=n.writeTree_.setTree(e,new tr(null));return new yu(t)}}function Ex(n,e){return null!=zp(n,e)}function zp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Rs(t.path,e)):null}function RN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(er,(r,i)=>{e.push(new rn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new rn(r,i.value))}),e}function kh(n,e){if(tn(e))return n;{const t=zp(n,e);return new yu(null!=t?new tr(t):n.writeTree_.subtree(e))}}function Ix(n){return n.writeTree_.isEmpty()}function g_(n,e){return MN(yn(),n.writeTree_,e)}function MN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=MN(mr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function jC(n,e){return LN(e,n)}function wV(n,e){if(n.snap)return Sa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Sa(mr(n.path,t),e))return!0;return!1}function IV(n){return n.visible}function PN(n,e,t){let r=yu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Sa(t,l)?(h=Rs(t,l),r=ow(r,h,a.snap)):Sa(l,t)&&(h=Rs(l,t),r=ow(r,yn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Sa(t,l))h=Rs(t,l),r=wx(r,h,a.children);else if(Sa(l,t))if(h=Rs(l,t),tn(h))r=wx(r,yn(),a.children);else{const g=(0,k.DV)(a.children,en(h));if(g){const v=g.getChild(qn(h));r=ow(r,yn(),v)}}}}}return r}function NN(n,e,t,r,i){if(r||i){const a=kh(n.visibleWrites,e);return!i&&Ix(a)?t:i||null!=t||Ex(a,yn())?g_(PN(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Sa(v.path,e)||Sa(e,v.path))},e),t||zt.EMPTY_NODE):null}{const a=zp(n.visibleWrites,e);if(null!=a)return a;{const l=kh(n.visibleWrites,e);return Ix(l)?t:null!=t||Ex(l,yn())?g_(l,t||zt.EMPTY_NODE):null}}}function $C(n,e,t,r){return NN(n.writeTree,n.treePath,e,t,r)}function bx(n,e){return function bV(n,e,t){let r=zt.EMPTY_NODE;const i=zp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(er,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=kh(n.visibleWrites,e);return t.forEachChild(er,(l,h)=>{const g=g_(kh(a,new Dn(l)),h);r=r.updateImmediateChild(l,g)}),RN(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return RN(kh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function kN(n,e,t,r){return function CV(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=mr(e,t);if(Ex(n.visibleWrites,a))return null;{const l=kh(n.visibleWrites,a);return Ix(l)?i.getChild(t):g_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function HC(n,e){return function DV(n,e){return zp(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function Cx(n,e,t){return function TV(n,e,t,r){const i=mr(e,t),a=zp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?g_(kh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function ON(n,e){return LN(mr(n.treePath,e),n.writeTree)}function LN(n,e){return{treePath:n,writeTree:e}}class RV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,tw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,ew(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,h_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,tw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const FN=new class MV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Tx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Nh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Cx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qp(this.viewCache_),a=function xV(n,e,t,r,i,a){return function SV(n,e,t,r,i,a,l){let h;const g=kh(n.visibleWrites,e),v=zp(g,yn());if(null!=v)h=v;else{if(null==t)return[];h=g_(g,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),P=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let H=P.getNext();for(;H&&D.length<i;)0!==S(H,r)&&D.push(H),H=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function UN(n,e,t,r,i,a){const l=e.eventCache;if(null!=HC(r,t))return e;{let h,g;if(tn(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=qp(e),S=bx(r,v instanceof zt?v:zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=$C(r,qp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=en(t);if(".priority"===v){(0,k.hu)(1===Ph(t),"Can't have a priority with additional path components");const D=l.getNode();g=e.serverCache.getNode();const S=kN(r,t,D,g);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=qn(t);let S;if(l.isCompleteForChild(v)){g=e.serverCache.getNode();const P=kN(r,t,l.getNode(),g);S=null!=P?l.getNode().getImmediateChild(v).updateChild(D,P):l.getNode().getImmediateChild(v)}else S=Cx(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return sw(e,h,l.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function GC(n,e,t,r,i,a,l,h){const g=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(tn(t))v=D.updateFullNode(g.getNode(),r,null);else if(D.filtersNodes()&&!g.isFiltered()){const H=g.getNode().updateChild(t,r);v=D.updateFullNode(g.getNode(),H,null)}else{const H=en(t);if(!g.isCompleteForPath(t)&&Ph(t)>1)return e;const Z=qn(t),Oe=g.getNode().getImmediateChild(H).updateChild(Z,r);v=".priority"===H?D.updatePriority(g.getNode(),Oe):D.updateChild(g.getNode(),H,Oe,Z,FN,null)}const S=AN(e,v,g.isFullyInitialized()||tn(t),D.filtersNodes());return UN(n,S,t,i,new Tx(i,S,a),h)}function Dx(n,e,t,r,i,a,l){const h=e.eventCache;let g,v;const D=new Tx(i,e,a);if(tn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=sw(e,v,!0,n.filter.filtersNodes());else{const S=en(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=sw(e,v,h.isFullyInitialized(),h.isFiltered());else{const P=qn(t),H=h.getNode().getImmediateChild(S);let Z;if(tn(P))Z=r;else{const ve=D.getCompleteChild(S);Z=null!=ve?".priority"===nx(P)&&ve.getChild(cN(P)).isEmpty()?ve:ve.updateChild(P,r):zt.EMPTY_NODE}g=H.equals(Z)?e:sw(e,n.filter.updateChild(h.getNode(),S,Z,P,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function VN(n,e){return n.eventCache.isCompleteForChild(e)}function BN(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Sx(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=tn(t)?r:new tr(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const Z=BN(0,e.serverCache.getNode().getImmediateChild(S),P);g=GC(n,g,new Dn(S),Z,i,a,l,h)}}),v.children.inorderTraversal((S,P)=>{const H=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!H){const ve=BN(0,e.serverCache.getNode().getImmediateChild(S),P);g=GC(n,g,new Dn(S),ve,i,a,l,h)}}),g}class BV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new dx(r.getIndex()),a=function eV(n){return n.loadsAllData()?new dx(n.getIndex()):n.hasLimit()?new JU(n):new nw(n)}(r);this.processor_=function PV(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,g=i.updateFullNode(zt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(zt.EMPTY_NODE,h.getNode(),null),D=new Nh(g,l.isFullyInitialized(),i.filtersNodes()),S=new Nh(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=VC(S,D),this.eventGenerator_=new dV(this.query_)}get query(){return this.query_}}function HV(n,e){const t=qp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function jN(n){return 0===n.eventRegistrations_.length}function $N(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function HN(n,e,t,r){e.type===Aa.MERGE&&null!==e.source.queryId&&((0,k.hu)(qp(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(BC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function kV(n,e,t,r,i){const a=new RV;let l,h;if(t.type===Aa.OVERWRITE){const v=t;v.source.fromUser?l=Dx(n,e,v.path,v.snap,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!tn(v.path),l=GC(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Aa.MERGE){const v=t;v.source.fromUser?l=function LV(n,e,t,r,i,a,l){let h=e;return r.foreach((g,v)=>{const D=mr(t,g);VN(e,en(D))&&(h=Dx(n,h,D,v,i,a,l))}),r.foreach((g,v)=>{const D=mr(t,g);VN(e,en(D))||(h=Dx(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=Sx(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Aa.ACK_USER_WRITE){const v=t;l=v.revert?function VV(n,e,t,r,i,a){let l;if(null!=HC(r,t))return e;{const h=new Tx(r,e,i),g=e.eventCache.getNode();let v;if(tn(t)||".priority"===en(t)){let D;if(e.serverCache.isFullyInitialized())D=$C(r,qp(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof zt,"serverChildren would be complete if leaf node"),D=bx(r,S)}D=D,v=n.filter.updateFullNode(g,D,a)}else{const D=en(t);let S=Cx(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=g.getImmediateChild(D)),v=null!=S?n.filter.updateChild(g,D,S,qn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(g,D,zt.EMPTY_NODE,qn(t),h,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=$C(r,qp(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=HC(r,yn()),sw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function FV(n,e,t,r,i,a,l){if(null!=HC(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(tn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return GC(n,e,t,g.getNode().getChild(t),i,a,h,l);if(tn(t)){let v=new tr(null);return g.getNode().forEachChild(El,(D,S)=>{v=v.set(new Dn(D),S)}),Sx(n,e,t,v,i,a,h,l)}return e}{let v=new tr(null);return r.foreach((D,S)=>{const P=mr(t,D);g.isCompleteForPath(P)&&(v=v.set(D,g.getNode().getChild(P)))}),Sx(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Aa.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function UV(n,e,t,r,i){const a=e.serverCache;return UN(n,AN(e,a.getNode(),a.isFullyInitialized()||tn(t),a.isFiltered()),t,r,FN,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function OV(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=BC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(CN(BC(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function NV(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,GN(n,a.changes,a.viewCache.eventCache.getNode(),null)}function GN(n,e,t,r){return function hV(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function XU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),iw(n,i,"child_removed",e,r,t),iw(n,i,"child_added",e,r,t),iw(n,i,"child_moved",a,r,t),iw(n,i,"child_changed",e,r,t),iw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let WC,zC;class WN{constructor(){this.views=new Map}}function Ax(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),HN(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(HN(l,e,t,r));return a}}function qN(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=$C(t,i?r:null),g=!1;h?g=!0:r instanceof zt?(h=bx(t,r),g=!1):(h=zt.EMPTY_NODE,g=!1);const v=VC(new Nh(h,g,!1),new Nh(r,i,!1));return new BV(e,v)}return l}function zN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Oh(n,e){let t=null;for(const r of n.views.values())t=t||HV(r,e);return t}function KN(n,e){return e._queryParams.loadsAllData()?qC(n):n.views.get(e._queryIdentifier)}function ZN(n,e){return null!=KN(n,e)}function Lh(n){return null!=qC(n)}function qC(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let JV=1;class YN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tr(null),this.pendingWriteTree_=function AV(){return{visibleWrites:yu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xx(n,e,t,r,i){return function mV(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=ow(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?m_(n,new Wp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Fh(n,e,t=!1){const r=function yV(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function vV(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&wV(h,r.path)?i=!1:Sa(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function EV(n){n.visibleWrites=PN(n.allWrites,IV,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=xN(n.visibleWrites,r.path):xi(r.children,g=>{n.visibleWrites=xN(n.visibleWrites,mr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new tr(null);return null!=r.snap?a=a.set(yn(),!0):xi(r.children,l=>{a=a.set(new Dn(l),!0)}),m_(n,new UC(r.path,a,t))}return[]}function aw(n,e,t){return m_(n,new Wp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Rx(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||ZN(a,e))){const h=function YV(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Lh(n);if("default"===i)for(const[g,v]of n.views.entries())l=l.concat($N(v,t,r)),jN(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||a.push(v.query));else{const g=n.views.get(i);g&&(l=l.concat($N(g,t,r)),jN(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!Lh(n)&&a.push(new(function zV(){return(0,k.hu)(WC,"Reference.ts has not been loaded"),WC}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function KV(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=h.removed;l=h.events;const v=-1!==g.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,P)=>Lh(P));if(v&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const P=function aB(n){return n.fold((e,t,r)=>{if(t&&Lh(t))return[qC(t)];{let i=[];return t&&(i=zN(t)),xi(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let H=0;H<P.length;++H){const Z=P[H],ve=Z.query,Oe=ek(n,Z);n.listenProvider_.startListening(uw(ve),ZC(n,ve),Oe.hashFn,Oe.onComplete)}}}!D&&g.length>0&&!r&&(v?n.listenProvider_.stopListening(uw(e),null):g.forEach(S=>{const P=n.queryToTagMap.get(YC(S));n.listenProvider_.stopListening(uw(S),P)})),function uB(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=YC(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,g)}return l}function QN(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const H=Rs(S,r);i=i||Oh(P,H),a=a||Lh(P)});let h,l=n.syncPointTree_.get(r);l?(a=a||Lh(l),i=i||Oh(l,yn())):(l=new WN,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=zt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,H)=>{const Z=Oh(H,yn());Z&&(i=i.updateImmediateChild(P,Z))}));const g=ZN(l,e);if(!g&&!e._queryParams.loadsAllData()){const S=YC(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=function lB(){return JV++}();n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function ZV(n,e,t,r,i,a){const l=qN(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function GV(n,e){n.eventRegistrations_.push(e)}(l,t),function WV(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(er,(a,l)=>{r.push(h_(a,l))}),t.isFullyInitialized()&&r.push(CN(t.getNode())),GN(n,r,t.getNode(),e)}(l,t)}(l,e,t,jC(n.pendingWriteTree_,r),i,h);if(!g&&!a){const S=KN(l,e);D=D.concat(function cB(n,e,t){const r=e._path,i=ZC(n,e),a=ek(n,t),l=n.listenProvider_.startListening(uw(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Lh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((v,D,S)=>{if(!tn(v)&&D&&Lh(D))return[qC(D).query];{let P=[];return D&&(P=P.concat(zN(D).map(H=>H.query))),xi(S,(H,Z)=>{P=P.concat(Z)}),P}});for(let v=0;v<g.length;++v){const D=g[v];n.listenProvider_.stopListening(uw(D),ZC(n,D))}}return l}(n,e,S))}return D}function KC(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=Oh(h,Rs(l,e));if(v)return v});return NN(i,e,a,t,!0)}function m_(n,e){return XN(e,n.syncPointTree_,null,jC(n.pendingWriteTree_,yn()))}function XN(n,e,t,r){if(tn(n.path))return JN(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=Oh(i,yn()));let a=[];const l=en(n.path),h=n.operationForChild(l),g=e.children.get(l);if(g&&h){const v=t?t.getImmediateChild(l):null,D=ON(r,l);a=a.concat(XN(h,g,v,D))}return i&&(a=a.concat(Ax(i,n,r,t))),a}}function JN(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=Oh(i,yn()));let a=[];return e.children.inorderTraversal((l,h)=>{const g=t?t.getImmediateChild(l):null,v=ON(r,l),D=n.operationForChild(l);D&&(a=a.concat(JN(D,h,g,v)))}),i&&(a=a.concat(Ax(i,n,r,t))),a}function ek(n,e){const t=e.query,r=ZC(n,t);return{hashFn:()=>(function jV(n){return n.viewCache_.serverCache.getNode()}(e)||zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function rB(n,e,t){const r=Mx(n,t);if(r){const i=Px(r),a=i.path,l=i.queryId,h=Rs(a,e);return Nx(n,a,new rw(yx(l),h))}return[]}(n,t._path,r):function nB(n,e){return m_(n,new rw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function eU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Rx(n,t,null,a)}}}}function ZC(n,e){const t=YC(e);return n.queryToTagMap.get(t)}function YC(n){return n._path.toString()+"$"+n._queryIdentifier}function Mx(n,e){return n.tagToQueryMap.get(e)}function Px(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function Nx(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),Ax(r,t,jC(n.pendingWriteTree_,e),null)}function uw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function XV(){return(0,k.hu)(zC,"Reference.ts has not been loaded"),zC}())(n._repo,n._path):n}class kx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new kx(t)}node(){return this.node_}}class Ox{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new Ox(this.syncTree_,t)}node(){return KC(this.syncTree_,this.path_)}}const tk=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?hB(n[".sv"],e,t):"object"==typeof n[".sv"]?fB(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},hB=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},fB=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},nk=function(n,e,t,r){return Fx(e,new Ox(t,n),r)},Lx=function(n,e,t){return Fx(n,new kx(e),t)};function Fx(n,e,t){const r=n.getPriority().val(),i=tk(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=tk(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new l_(h,Cr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new l_(i))),l.forEachChild(er,(h,g)=>{const v=Fx(g,e.getImmediateChild(h),t);v!==g&&(a=a.updateImmediateChild(h,v))}),a}}class Ux{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function QC(n,e){let t=e instanceof Dn?e:new Dn(e),r=n,i=en(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new Ux(i,r,a),t=qn(t),i=en(t)}return r}function Kp(n){return n.node.value}function Vx(n,e){n.node.value=e,Bx(n)}function rk(n){return n.node.childCount>0}function XC(n,e){xi(n.node.children,(t,r)=>{e(new Ux(t,n,r))})}function ik(n,e,t,r){t&&!r&&e(n),XC(n,i=>{ik(i,e,!0,r)}),t&&r&&e(n)}function lw(n){return new Dn(null===n.parent?n.name:lw(n.parent)+"/"+n.name)}function Bx(n){null!==n.parent&&function mB(n,e,t){const r=function pB(n){return void 0===Kp(n)&&!rk(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Bx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Bx(n))}(n.parent,n.name,n)}const _B=/[\[\].#$\/\u0000-\u001F\u007F]/,yB=/[\[\].#$\u0000-\u001F\u007F]/,jx=10485760,JC=function(n){return"string"==typeof n&&0!==n.length&&!_B.test(n)},sk=function(n){return"string"==typeof n&&0!==n.length&&!yB.test(n)},cw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!DC(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Il=function(n,e,t,r){r&&void 0===e||dw((0,k.gK)(n,"value"),e,t)},dw=function(n,e,t){const r=t instanceof Dn?new PU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Hp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Hp(r)+" with contents = "+e.toString());if(DC(e))throw new Error(n+"contains "+e.toString()+" "+Hp(r));if("string"==typeof e&&e.length>jx/3&&(0,k.ug)(e)>jx)throw new Error(n+"contains a string greater than "+jx+" utf8 bytes "+Hp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(xi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!JC(l)))throw new Error(n+" contains an invalid key ("+l+") "+Hp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function NU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),dN(n)})(r,l),dw(n,h,r),function kU(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Hp(r)+" in addition to actual children.")}},ok=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];xi(e,(l,h)=>{const g=new Dn(l);if(dw(i,h,mr(t,g)),".priority"===nx(g)&&!cw(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Y0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!JC(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(MU);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Sa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},$x=function(n,e,t){if(!t||void 0!==e){if(DC(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cw(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},hw=function(n,e,t,r){if(!(r&&void 0===t||JC(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},fw=function(n,e,t,r){if(!(r&&void 0===t||sk(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xa=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},ak=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!JC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sk(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class IB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!rx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Hx(n,e,t){eT(n,t),uk(n,r=>rx(r,e))}function Ra(n,e,t){eT(n,t),uk(n,r=>Sa(r,e)||Sa(e,r))}function uk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(bB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function bB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();jp&&Ai("event: "+t.toString()),a_(r)}}}const lk="repo_interrupt";class TB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new IB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=FC(),this.transactionQueueTree_=new Ux,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ck(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function pw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:ck(n)})}function dk(n,e,t,r,i){n.dataUpdateCount++;const a=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,k.UI)(t,v=>Cr(v));l=function sB(n,e,t,r){const i=Mx(n,r);if(i){const a=Px(i),l=a.path,h=a.queryId,g=Rs(l,e),v=tr.fromObject(t);return Nx(n,l,new p_(yx(h),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Cr(t);l=function iB(n,e,t,r){const i=Mx(n,r);if(null!=i){const a=Px(i),l=a.path,h=a.queryId,g=Rs(l,e);return Nx(n,l,new Wp(yx(h),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,k.UI)(t,v=>Cr(v));l=function tB(n,e,t){const r=tr.fromObject(t);return m_(n,new p_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Cr(t);l=aw(n.serverSyncTree_,a,g)}let h=a;l.length>0&&(h=y_(n,a)),Ra(n.eventQueue_,h,l)}function hk(n,e){Gx(n,"connected",e),!1===e&&function RB(n){__(n,"onDisconnectEvents");const e=pw(n),t=FC();gx(n.onDisconnect_,yn(),(i,a)=>{const l=nk(i,a,n.serverSyncTree_,e);f_(t,i,l)});let r=[];gx(t,yn(),(i,a)=>{r=r.concat(aw(n.serverSyncTree_,i,a));const l=Kx(n,i);y_(n,l)}),n.onDisconnect_=FC(),Ra(n.eventQueue_,yn(),r)}(n)}function Gx(n,e,t){const r=new Dn("/.info/"+e),i=Cr(t);n.infoData_.updateSnapshot(r,i);const a=aw(n.infoSyncTree_,r,i);Ra(n.eventQueue_,r,a)}function tT(n){return n.nextWriteId_++}function Wx(n,e,t,r,i){__(n,"set",{path:e.toString(),value:t,priority:r});const a=pw(n),l=Cr(t,r),h=KC(n.serverSyncTree_,e),g=Lx(l,h,a),v=tT(n),D=xx(n.serverSyncTree_,e,g,v,!0);eT(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,H)=>{const Z="ok"===P;Z||xs("set at "+e+" failed: "+P);const ve=Fh(n.serverSyncTree_,v,!Z);Ra(n.eventQueue_,e,ve),Uh(0,i,P,H)});const S=Kx(n,e);y_(n,S),Ra(n.eventQueue_,S,[])}function MB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&px(n.onDisconnect_,e),Uh(0,t,r,i)})}function fk(n,e,t,r){const i=Cr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&f_(n.onDisconnect_,e,i),Uh(0,r,a,l)})}function qx(n,e,t){let r;r=".info"===en(e._path)?Rx(n.infoSyncTree_,e,t):Rx(n.serverSyncTree_,e,t),Hx(n.eventQueue_,e._path,r)}function pk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(lk)}function __(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ai(t,...e)}function Uh(n,e,t,r){e&&a_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function zx(n,e,t){return KC(n.serverSyncTree_,e,t)||zt.EMPTY_NODE}function nT(n,e=n.transactionQueueTree_){if(e||rT(n,e),Kp(e)){const t=mk(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function FB(n,e,t){const r=t.map(v=>v.currentWriteId),i=zx(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Rs(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;n.server_.put(g.toString(),h,v=>{__(n,"transaction put response",{path:g.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(Fh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();rT(n,QC(n.transactionQueueTree_,e)),nT(n,n.transactionQueueTree_),Ra(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)a_(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{xs("transaction at "+g.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}y_(n,e)}},l)}(n,lw(e),t)}else rk(e)&&XC(e,t=>{nT(n,t)})}function y_(n,e){const t=gk(n,e),r=lw(t);return function UB(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],v=Rs(t,g.path);let S,D=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)D=!0,S=g.abortReason,i=i.concat(Fh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)D=!0,S="maxretry",i=i.concat(Fh(n.serverSyncTree_,g.currentWriteId,!0));else{const P=zx(n,g.path,l);g.currentInputSnapshot=P;const H=e[h].update(P.val());if(void 0!==H){dw("transaction failed: Data returned ",H,g.path);let Z=Cr(H);"object"==typeof H&&null!=H&&(0,k.r3)(H,".priority")||(Z=Z.updatePriority(P.getPriority()));const Oe=g.currentWriteId,bt=pw(n),yt=Lx(Z,P,bt);g.currentOutputSnapshotRaw=Z,g.currentOutputSnapshotResolved=yt,g.currentWriteId=tT(n),l.splice(l.indexOf(Oe),1),i=i.concat(xx(n.serverSyncTree_,g.path,yt,g.currentWriteId,g.applyLocally)),i=i.concat(Fh(n.serverSyncTree_,Oe,!0))}else D=!0,S="nodata",i=i.concat(Fh(n.serverSyncTree_,g.currentWriteId,!0))}Ra(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}rT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)a_(r[h]);nT(n,n.transactionQueueTree_)}(n,mk(n,t),r),r}function gk(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===Kp(r);)r=QC(r,t),t=en(e=qn(e));return r}function mk(n,e){const t=[];return _k(n,e,t),t.sort((r,i)=>r.order-i.order),t}function _k(n,e,t){const r=Kp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);XC(e,i=>{_k(n,i,t)})}function rT(n,e){const t=Kp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Vx(e,t.length>0?t:void 0)}XC(e,r=>{rT(n,r)})}function Kx(n,e){const t=lw(gk(n,e)),r=QC(n.transactionQueueTree_,e);return function gB(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Zx(n,i)}),Zx(n,r),ik(r,i=>{Zx(n,i)}),t}function Zx(n,e){const t=Kp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Fh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Vx(e,void 0):t.length=a+1,Ra(n.eventQueue_,lw(e),i);for(let l=0;l<r.length;l++)a_(r[l])}}const Yx=function(n,e){const t=jB(n),r=t.namespace;return"firebase.com"===t.domain&&vl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&vl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ZA(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Dn(t.pathString)}},jB=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function VB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const P=function BB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,g=parseInt(e.substring(v+1),10)):v=e.length;const H=e.slice(0,v);if("localhost"===H.toLowerCase())t="localhost";else if(H.split(".").length<=2)t=H;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class yk{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class vk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Ek{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return MB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){xa("OnDisconnect.remove",this._path);const e=new k.BH;return fk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){xa("OnDisconnect.set",this._path),Il("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return fk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){xa("OnDisconnect.setWithPriority",this._path),Il("OnDisconnect.setWithPriority",e,this._path,!1),$x("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function PB(n,e,t,r,i){const a=Cr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&f_(n.onDisconnect_,e,a),Uh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){xa("OnDisconnect.update",this._path),ok("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function NB(n,e,t,r){if((0,k.xb)(t))return Ai("onDisconnect().update() called with empty data.  Don't do anything."),void Uh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&xi(t,(l,h)=>{const g=Cr(h);f_(n.onDisconnect_,mr(e,l),g)}),Uh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class to{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:nx(this._path)}get ref(){return new Ma(this._repo,this._path)}get _queryIdentifier(){const e=DN(this._queryParams),t=qA(e);return"{}"===t?"default":t}get _queryObject(){return DN(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof to))return!1;const t=this._repo===e._repo,r=rx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function RU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function iT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Vh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===El){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==qc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==wl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===er){if(null!=e&&!cw(e)||null!=t&&!cw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof ux||n.getIndex()===lx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ma extends to{constructor(e,t){super(e,t,new kC,!1)}get parent(){const e=cN(this._path);return null===e?null:new Ma(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Zp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dn(e),r=Yp(this.ref,e);return new Zp(this._node.getChild(t),r,er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Zp(i,Yp(this.ref,r),er)))}hasChild(e){const t=new Dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ik(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Yp(n._root,e):n._root}function bk(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=Yx(e,n._repo.repoInfo_.nodeAdmin);ak("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&vl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Ik(n,t.path.toString())}function Yp(n,e){return null===en((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fw("child","path",t,!1)):fw("child","path",e,!1),new Ma(n._repo,mr(n._path,e));var t}function Qx(n,e){n=(0,k.m9)(n),xa("set",n._path),Il("set",e,n._path,!1);const t=new k.BH;return Wx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qB(n,e){ok("update",e,n._path,!1);const t=new k.BH;return function xB(n,e,t,r){__(n,"update",{path:e.toString(),value:t});let i=!0;const a=pw(n),l={};if(xi(t,(h,g)=>{i=!1,l[h]=nk(mr(e,h),Cr(g),n.serverSyncTree_,a)}),i)Ai("update() called with empty data.  Don't do anything."),Uh(0,r,"ok",void 0);else{const h=tT(n),g=function eB(n,e,t,r){!function _V(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=wx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=tr.fromObject(t);return m_(n,new p_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);eT(n.eventQueue_,g),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||xs("update at "+e+" failed: "+v);const P=Fh(n.serverSyncTree_,h,!S),H=P.length>0?y_(n,e):e;Ra(n.eventQueue_,H,P),Uh(0,r,v,D)}),xi(t,v=>{const D=Kx(n,mr(e,v));y_(n,D)}),Ra(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function zB(n){return function AB(n,e){const t=function oB(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=Rs(v,t);r=r||Oh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Oh(i,yn()):(i=new WN,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Nh(r,!0,!1):null;return function $V(n){return BC(n.viewCache_)}(qN(i,e,jC(n.pendingWriteTree_,e._path),a?l.getNode():zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Cr(r).withIndex(e._queryParams.getIndex()),a=aw(n.serverSyncTree_,e._path,i);return Hx(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(__(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Zp(e,new Ma(n._repo,n._path),n._queryParams.getIndex()))}class oT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new yk("value",this,new Zp(e.snapshotNode,new Ma(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new vk(this,e,t):null}matches(e){return e instanceof oT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class aT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new vk(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Yp(new Ma(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new yk(e.type,this,new Zp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof aT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function gw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,v=(D,S)=>{qx(n._repo,n,h),g(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new wk(t,a||void 0),h="value"===e?new oT(l):new aT(e,l);return function kB(n,e,t){let r;r=".info"===en(e._path)?QN(n.infoSyncTree_,e,t):QN(n.serverSyncTree_,e,t),Hx(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>qx(n._repo,n,h)}function Xx(n,e,t,r){return gw(n,"value",e,t,r)}function Ck(n,e,t,r){return gw(n,"child_added",e,t,r)}function Tk(n,e,t,r){return gw(n,"child_changed",e,t,r)}function Dk(n,e,t,r){return gw(n,"child_moved",e,t,r)}function Sk(n,e,t,r){return gw(n,"child_removed",e,t,r)}function Ak(n,e,t){let r=null;const i=t?new wk(t):null;"value"===e?r=new oT(i):e&&(r=new aT(e,i)),qx(n._repo,n,r)}class vu{}class xk extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("endAt",this._value,e._path,!0);const t=fx(e._queryParams,this._value,this._key);if(sT(t),Vh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class ZB extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("endBefore",this._value,e._path,!1);const t=function iV(n,e,t){let r,i;return n.index_===El?("string"==typeof e&&(e=bN(e)),i=fx(n,e,t)):(r=null==t?qc:bN(t),i=fx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(sT(t),Vh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class Rk extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("startAt",this._value,e._path,!0);const t=hx(e._queryParams,this._value,this._key);if(sT(t),Vh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class XB extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Il("startAfter",this._value,e._path,!1);const t=function rV(n,e,t){let r;if(n.index_===El)"string"==typeof e&&(e=IN(e)),r=hx(n,e,t);else{let i;i=null==t?wl:IN(t),r=hx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(sT(t),Vh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new to(e._repo,e._path,t,e._orderByCalled)}}class e2 extends vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new to(e._repo,e._path,function tV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class n2 extends vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new to(e._repo,e._path,function nV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class i2 extends vu{constructor(e){super(),this._path=e}_apply(e){iT(e,"orderByChild");const t=new Dn(this._path);if(tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ux(t),i=OC(e._queryParams,r);return Vh(i),new to(e._repo,e._path,i,!0)}}class o2 extends vu{_apply(e){iT(e,"orderByKey");const t=OC(e._queryParams,El);return Vh(t),new to(e._repo,e._path,t,!0)}}class u2 extends vu{_apply(e){iT(e,"orderByPriority");const t=OC(e._queryParams,er);return Vh(t),new to(e._repo,e._path,t,!0)}}class c2 extends vu{_apply(e){iT(e,"orderByValue");const t=OC(e._queryParams,lx);return Vh(t),new to(e._repo,e._path,t,!0)}}class h2 extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Il("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xk(this._value,this._key)._apply(new Rk(this._value,this._key)._apply(e))}}function wu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function qV(n){(0,k.hu)(!WC,"__referenceConstructor has already been defined"),WC=n})(Ma),function QV(n){(0,k.hu)(!zC,"__referenceConstructor has already been defined"),zC=n}(Ma);const Jx={};function Pk(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||vl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ai("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,l=Yx(a,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${h.namespace}`,l=Yx(a,i),h=l.repoInfo):g=!l.repoInfo.secure;const D=i&&g?new z0(z0.OWNER):new iU(n.name,n.options,e);ak("Invalid Firebase Database URL",l),tn(l.path)||vl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function _2(n,e,t,r){let i=Jx[e.name];i||(i={},Jx[e.name]=i);let a=i[n.toURLString()];return a&&vl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new TB(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new rU(n.name,t));return new v2(S,n)}class v2{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function DB(n,e,t){if(n.stats_=XA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new LC(n.repoInfo_,(r,i,a,l)=>{dk(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>hk(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Gp(n.repoInfo_,e,(r,i,a,l)=>{dk(n,r,i,a,l)},r=>{hk(n,r)},r=>{!function SB(n,e){xi(e,(t,r)=>{Gx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function uU(n,e){const t=n.toString();return QA[t]||(QA[t]=e()),QA[t]}(n.repoInfo_,()=>new cV(n.stats_,n.server_)),n.infoData_=new sV,n.infoSyncTree_=new YN({startListening:(r,i,a,l)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=aw(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),Gx(n,"connected",!1),n.serverSyncTree_=new YN({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,g)=>{const v=l(h,g);Ra(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ma(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function m2(n,e){const t=Jx[e];(!t||t[n.key]!==n)&&vl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),pk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&vl("Cannot call "+e+" on a deleted database.")}}function b2(n,e){kP(n,e)}const T2={".sv":"timestamp"};class A2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Gp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Gp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function C2(n){xP(Bi.SDK_VERSION),(0,Bi._registerComponent)(new zs.wA("database",(e,{instanceIdentifier:t})=>Pk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Bi.registerVersion)(SP,"0.12.8",n),(0,Bi.registerVersion)(SP,"0.12.8","esm2017")}();const P2=new So.Yd("@firebase/database-compat"),Nk=function(n){P2.warn("FIREBASE WARNING: "+n)};class O2{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Nk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class L2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Bh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),fw("DataSnapshot.child","path",e,!1),new Bh(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),fw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Bh(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Fo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $i{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=$i.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new Bh(this.database,v),D)};h.userCallback=t,h.context=l.context;const g=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Xx(this._delegate,h,g),t;case"child_added":return Ck(this._delegate,h,g),t;case"child_removed":return Sk(this._delegate,h,g),t;case"child_changed":return Tk(this._delegate,h,g),t;case"child_moved":return Dk(this._delegate,h,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Ak(this._delegate,e,i)}else Ak(this._delegate,e)}get(){return zB(this._delegate).then(e=>new Bh(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=$i.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(v,D)=>{const S=new Bh(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const g=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":Xx(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":Ck(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":Sk(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":Tk(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":Dk(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new $i(this.database,wu(this._delegate,function t2(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new e2(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new $i(this.database,wu(this._delegate,function r2(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new n2(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new $i(this.database,wu(this._delegate,function s2(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return fw("orderByChild","path",n,!1),new i2(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new $i(this.database,wu(this._delegate,function a2(){return new o2}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new $i(this.database,wu(this._delegate,function l2(){return new u2}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new $i(this.database,wu(this._delegate,function d2(){return new c2}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new $i(this.database,wu(this._delegate,function QB(n=null,e){return hw("startAt","key",e,!0),new Rk(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new $i(this.database,wu(this._delegate,function JB(n,e){return hw("startAfter","key",e,!0),new XB(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new $i(this.database,wu(this._delegate,function KB(n,e){return hw("endAt","key",e,!0),new xk(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new $i(this.database,wu(this._delegate,function YB(n,e){return hw("endBefore","key",e,!0),new ZB(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new $i(this.database,wu(this._delegate,function f2(n,e){return hw("equalTo","key",e,!0),new h2(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof $i))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Fo(this.database,new Ma(this._delegate._repo,this._delegate._path))}}class Fo extends $i{constructor(e,t){super(e,new to(t._repo,t._path,new kC,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Fo(this.database,Yp(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Fo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Fo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=Qx(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Nk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=qB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function WB(n,e,t){if(xa("setWithPriority",n._path),Il("setWithPriority",e,n._path,!1),$x("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return Wx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function HB(n){return xa("remove",n._path),Qx(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function x2(n,e,t){var r;if(n=(0,k.m9)(n),xa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=Xx(n,()=>{});return function LB(n,e,t,r,i,a){__(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:MP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=zx(n,e,void 0);l.currentInputSnapshot=h;const g=l.update(h.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{dw("transaction failed: Data returned ",g,l.path),l.status=0;const v=QC(n.transactionQueueTree_,e),D=Kp(v)||[];let S;D.push(l),Vx(v,D),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(S=(0,k.DV)(g,".priority"),(0,k.hu)(cw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(KC(n.serverSyncTree_,e)||zt.EMPTY_NODE).getPriority().val();const P=pw(n),H=Cr(g,S),Z=Lx(H,h,P);l.currentOutputSnapshotRaw=H,l.currentOutputSnapshotResolved=Z,l.currentWriteId=tT(n);const ve=xx(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);Ra(n.eventQueue_,e,ve),nT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,v,D)=>{let S=null;g?a.reject(g):(S=new Zp(D,new Ma(n._repo,n._path),er),a.resolve(new A2(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new L2(a.committed,new Bh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function GB(n,e){n=(0,k.m9)(n),xa("setPriority",n._path),$x("setPriority",e,!1);const t=new k.BH;return Wx(n._repo,mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function $B(n,e){n=(0,k.m9)(n),xa("push",n._path),Il("push",e,n._path,!0);const t=ck(n._repo),r=QU(t),i=Yp(n,r),a=Yp(n,r);let l;return l=null!=e?Qx(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Fo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Fo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return xa("Reference.onDisconnect",this._delegate._path),new O2(new Ek(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class mw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function w2(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&vl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new z0(z0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new z0(l)}!function g2(n,e,t,r){n.repoInfo_=new ZA(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Fo){const t=bk(this._delegate,e.toString());return new Fo(this,t)}{const t=Ik(this._delegate,e);return new Fo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=bk(this._delegate,e);return new Fo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function E2(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),pk(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function I2(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function OB(n){n.persistentConnection_&&n.persistentConnection_.resume(lk)}(n._repo)}(this._delegate)}}mw.ServerValue={TIMESTAMP:function D2(){return T2}(),increment:n=>function S2(n){return{".sv":{increment:n}}}(n)};var U2=Object.freeze({__proto__:null,initStandalone:function F2({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){xP(t);const l=new zs.zt("auth-internal",new zs.H0("database-standalone"));return l.setComponent(new zs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new mw(Pk(n,l,void 0,e,a),n),namespace:i}}});const V2=mw.ServerValue;function kk(n){return null==n}function Ok(n){return"function"==typeof n.set}function Lk(n,e){return Ok(e)?e:n.ref(e)}function Fk(n,e){if(function j2(n){return"string"==typeof n}(n))return e.stringCase();if(Ok(n))return e.firebaseCase();if(function $2(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function _w(n,e,t="on",r=yf.z){return new fr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Rt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,lM.B)())}function Uk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function W2(n,e){const{payload:t,prevKey:r,key:i}=e,a=Uk(n,i),l=function G2(n,e){if(kk(e))return 0;{const t=Uk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function Vk(n){return(kk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Bk(n,e,t){return function H2(n,e,t){return _w(n,"value","once",t).pipe(An(r=>{const i=[gt(r)];return e.forEach(a=>i.push(_w(n,a,"on",t))),(0,rA.T)(...i).pipe(Yr(W2,[]))}),Q_())}(n,e=Vk(e),t)}function jk(n,e,t){const r=(e=Vk(e)).map(i=>_w(n,i,"on",t));return(0,rA.T)(...r)}function $k(n,e){return function(r,i){return Fk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Z2(n){return function(t){return t?Fk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Hk(n,e){return function(){return _w(n,"value","on",e)}}!function B2(n){n.INTERNAL.registerComponent(new zs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new mw(i,r)},"PUBLIC").setServiceProps({Reference:Fo,Query:$i,Database:mw,DataSnapshot:Bh,enableLogging:b2,INTERNAL:U2,ServerValue:V2}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(X_.Z);const X2=new _.OlP("angularfire2.realtimeDatabaseURL"),J2=new _.OlP("angularfire2.database.use-emulator");let ej=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,P,H,Z,ve,Oe){this.schedulers=h;const bt=g,yt=(0,Mr.on)(t,l,r);v&&AA(yt,l,D,P,H,Z,S,ve),this.database=(0,Mr.cc)(`${yt.name}.database.${i}`,"AngularFireDatabase",yt.name,()=>{const mt=l.runOutsideAngular(()=>yt.database(i||void 0));return bt&&mt.useEmulator(...bt),mt},[bt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Lk(this.database,t));let a=i;return r&&(a=r(i)),function Y2(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:$k(r,"update"),set:$k(r,"set"),push:i=>r.push(i),remove:Z2(r),snapshotChanges:i=>Bk(n,i,t).pipe(cn.iC),stateChanges:i=>jk(n,i,t).pipe(cn.iC),auditTrail:i=>function q2(n,e,t){return function K2(n,e,t){return function z2(n,e){return _w(n,"value","on",e).pipe((0,Rt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function WF(...n){const e=(0,Rr.jO)(n);return(0,sr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,Gs.Xf)(n[g]).subscribe((0,In.x)(r,v=>{a[g]=v,!h&&!l[g]&&(l[g]=!0,(h=l.every(Oi.y))&&(l=null))},GF.Z));t.subscribe((0,In.x)(r,g=>{if(h){const v=[g,...a];r.next(e?e(...v):v)}}))})}(e),(0,Rt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(g=>g.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function qF(n){return(0,sr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,In.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Rt.U)(i=>i.actions))}(n,jk(n,e).pipe(Yr((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(cn.iC),valueChanges:(i,a)=>Bk(n,i,t).pipe((0,Rt.U)(h=>h.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),cn.iC)}}(a,this)}object(t){return function Q2(n,e){return{query:n,snapshotChanges:()=>Hk(n,e.schedulers.outsideAngular)().pipe(cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Hk(n,e.schedulers.outsideAngular)().pipe(cn.iC,(0,Rt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Lk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Mr.Dh),_.LFG(Mr.xv,8),_.LFG(X2,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(cn.HU),_.LFG(J2,8),_.LFG(U0,8),_.LFG(IA,8),_.LFG(bA,8),_.LFG(CA,8),_.LFG(TA,8),_.LFG(DA,8),_.LFG(SA,8),_.LFG(F0,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tj=(()=>{class n{constructor(){_C.Z.registerVersion("angularfire",cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[ej]}),n})();const Gk_firebase={apiKey:"AIzaSyBimAReq_Vyf35vA3f8YCQ9RTeGm7wEk_U",authDomain:"sanjit-majumdar.firebaseapp.com",databaseURL:"https://sanjit-majumdar-default-rtdb.firebaseio.com",projectId:"sanjit-majumdar",storageBucket:"sanjit-majumdar.appspot.com",messagingSenderId:"555328498816",appId:"1:555328498816:web:80fbc114d0c43960ae4a65",measurementId:"G-5XQLMFS1NN"};let nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[J1]}),n.\u0275inj=_.cJS({providers:[Up],imports:[[Mr.hO.initializeApp(Gk_firebase),L1,G1,HF,tj,uo,X1]]}),n})();(0,_.G48)(),Va().bootstrapModule(nj).catch(n=>console.error(n))},5867:(ct,Te,L)=>{L.d(Te,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=L(9681);(0,_.registerVersion)("firebase","9.7.0","app")},127:(ct,Te,L)=>{L.d(Te,{Z:()=>_.Z});var _=L(3942);_.Z.registerVersion("firebase","9.7.0","app-compat")},5881:(ct,Te,L)=>{L.r(Te);var _=L(5861),G=L(3942),N=L(573),ie=L(2090),ce=(L(9681),L(1877),L(4859));function ue(){return window}function q(){return(q=(0,_.Z)(function*(O,V,$){var ae;const{BuildInfo:Be}=ue();(0,N.ap)(V.sessionId,"AuthEvent did not contain a session ID");const Ke=yield Ie(V.sessionId),Ct={};return(0,N.aq)()?Ct.ibi=Be.packageName:(0,N.ar)()?Ct.apn=Be.packageName:(0,N.as)(O,"operation-not-supported-in-this-environment"),Be.displayName&&(Ct.appDisplayName=Be.displayName),Ct.sessionId=Ke,(0,N.at)(O,$,V.type,void 0,null!==(ae=V.eventId)&&void 0!==ae?ae:void 0,Ct)})).apply(this,arguments)}function qe(){return(qe=(0,_.Z)(function*(O){const{BuildInfo:V}=ue(),$={};(0,N.aq)()?$.iosBundleId=V.packageName:(0,N.ar)()?$.androidPackageName=V.packageName:(0,N.as)(O,"operation-not-supported-in-this-environment"),yield(0,N.au)(O,$)})).apply(this,arguments)}function Ue(){return(Ue=(0,_.Z)(function*(O,V,$){const{cordova:ae}=ue();let Be=()=>{};try{yield new Promise((Ke,Ct)=>{let nt=null;function St(){var Zt;Ke();const Vr=null===(Zt=ae.plugins.browsertab)||void 0===Zt?void 0:Zt.close;"function"==typeof Vr&&Vr(),"function"==typeof(null==$?void 0:$.close)&&$.close()}function Cn(){nt||(nt=window.setTimeout(()=>{Ct((0,N.av)(O,"redirect-cancelled-by-user"))},2e3))}function cr(){"visible"===(null==document?void 0:document.visibilityState)&&Cn()}V.addPassiveListener(St),document.addEventListener("resume",Cn,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",cr,!1),Be=()=>{V.removePassiveListener(St),document.removeEventListener("resume",Cn,!1),document.removeEventListener("visibilitychange",cr,!1),nt&&window.clearTimeout(nt)}})}finally{Be()}})).apply(this,arguments)}function Ie(O){return et.apply(this,arguments)}function et(){return(et=(0,_.Z)(function*(O){const V=$e(O),$=yield crypto.subtle.digest("SHA-256",V);return Array.from(new Uint8Array($)).map(Be=>Be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $e(O){if((0,N.ap)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(O);const V=new ArrayBuffer(O.length),$=new Uint8Array(V);for(let ae=0;ae<O.length;ae++)$[ae]=O.charCodeAt(ae);return $}class Ae extends N.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(V=>{this.resolveInialized=V})}addPassiveListener(V){this.passiveListeners.add(V)}removePassiveListener(V){this.passiveListeners.delete(V)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(V){return this.resolveInialized(),this.passiveListeners.forEach($=>$(V)),super.onEvent(V)}initialized(){var V=this;return(0,_.Z)(function*(){yield V.initPromise})()}}function ee(O){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,_.Z)(function*(O){const V=yield oe()._get(le(O));return V&&(yield oe()._remove(le(O))),V})).apply(this,arguments)}function se(){const O=[],V="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<20;$++){const ae=Math.floor(Math.random()*V.length);O.push(V.charAt(ae))}return O.join("")}function oe(){return(0,N.ax)(N.b)}function le(O){return(0,N.ay)("authEvent",O.config.apiKey,O.name)}function Fe(O){if(!(null==O?void 0:O.includes("?")))return{};const[V,...$]=O.split("?");return(0,ie.zd)($.join("?"))}function He(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.av)("no-auth-event")}}function Kt(){var O;return(null===(O=null==self?void 0:self.location)||void 0===O?void 0:O.protocol)||null}function Sn(O=(0,ie.z$)()){return!("file:"!==Kt()&&"ionic:"!==Kt()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function _i(){try{const O=self.localStorage,V=N.aG();if(O)return O.setItem(V,"1"),O.removeItem(V),!function Hi(O=(0,ie.z$)()){return function Tr(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Dr(O=(0,ie.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ie.hl)()}catch(O){return yr()&&(0,ie.hl)()}return!1}function yr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sr(){return(function Jt(){return"http:"===Kt()||"https:"===Kt()}()||(0,ie.ru)()||Sn())&&!function _r(){return(0,ie.b$)()||(0,ie.UG)()}()&&_i()&&!yr()}function Gi(){return Sn()&&"undefined"!=typeof document}function Fr(){return(Fr=(0,_.Z)(function*(){return!!Gi()&&new Promise(O=>{const V=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(V),O(!0)})})})).apply(this,arguments)}const an={LOCAL:"local",NONE:"none",SESSION:"session"},zn=N.aw,ii="persistence";function Nn(O){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,_.Z)(function*(O){yield O._initializationPromise;const V=Vt(),$=N.ay(ii,O.config.apiKey,O.name);V&&V.setItem($,O._getPersistence())})).apply(this,arguments)}function Vt(){var O;try{return(null===(O=function Vn(){return"undefined"!=typeof window?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch(V){return null}}const lt=N.aw;class rt{constructor(){this.browserResolver=N.ax(N.k),this.cordovaResolver=N.ax(class Yt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aA}_initialize(V){var $=this;return(0,_.Z)(function*(){const ae=V._key();let Be=$.eventManagers.get(ae);return Be||(Be=new Ae(V),$.eventManagers.set(ae,Be),$.attachCallbackListeners(V,Be)),Be})()}_openPopup(V){(0,N.as)(V,"operation-not-supported-in-this-environment")}_openRedirect(V,$,ae,Be){var Ke=this;return(0,_.Z)(function*(){!function me(O){var V,$,ae,Be,Ke,Ct,nt,St,Cn,cr;const Zt=ue();(0,N.aw)("function"==typeof(null===(V=null==Zt?void 0:Zt.universalLinks)||void 0===V?void 0:V.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aw)(void 0!==(null===($=null==Zt?void 0:Zt.BuildInfo)||void 0===$?void 0:$.packageName),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aw)("function"==typeof(null===(Ke=null===(Be=null===(ae=null==Zt?void 0:Zt.cordova)||void 0===ae?void 0:ae.plugins)||void 0===Be?void 0:Be.browsertab)||void 0===Ke?void 0:Ke.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(St=null===(nt=null===(Ct=null==Zt?void 0:Zt.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===St?void 0:St.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(cr=null===(Cn=null==Zt?void 0:Zt.cordova)||void 0===Cn?void 0:Cn.InAppBrowser)||void 0===cr?void 0:cr.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(V);const Ct=yield Ke._initialize(V);yield Ct.initialized(),Ct.resetRedirect(),(0,N.aB)(),yield Ke._originValidation(V);const nt=function Ee(O,V,$=null){return{type:V,eventId:$,urlResponse:null,sessionId:se(),postBody:null,tenantId:O.tenantId,error:(0,N.av)(O,"no-auth-event")}}(V,ae,Be);yield function Ze(O,V){return oe()._set(le(O),V)}(V,nt);const St=yield function z(O,V,$){return q.apply(this,arguments)}(V,nt,$),Cn=yield function Me(O){const{cordova:V}=ue();return new Promise($=>{V.plugins.browsertab.isAvailable(ae=>{let Be=null;ae?V.plugins.browsertab.openUrl(O):Be=V.InAppBrowser.open(O,(0,N.ao)()?"_blank":"_system","location=yes"),$(Be)})})}(St);return function Le(O,V,$){return Ue.apply(this,arguments)}(V,Ct,Cn)})()}_isIframeWebStorageSupported(V,$){throw new Error("Method not implemented.")}_originValidation(V){const $=V._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function te(O){return qe.apply(this,arguments)}(V)),this.originValidationPromises[$]}attachCallbackListeners(V,$){const{universalLinks:ae,handleOpenURL:Be,BuildInfo:Ke}=ue(),Ct=setTimeout((0,_.Z)(function*(){yield ee(V),$.onEvent(He())}),500),nt=function(){var cr=(0,_.Z)(function*(Zt){clearTimeout(Ct);const Vr=yield ee(V);let Ri=null;Vr&&(null==Zt?void 0:Zt.url)&&(Ri=function Qe(O,V){var $,ae;const Be=function pe(O){const V=Fe(O),$=V.link?decodeURIComponent(V.link):void 0,ae=Fe($).link,Be=V.deep_link_id?decodeURIComponent(V.deep_link_id):void 0;return Fe(Be).link||Be||ae||$||O}(V);if(Be.includes("/__/auth/callback")){const Ke=Fe(Be),Ct=Ke.firebaseError?function be(O){try{return JSON.parse(O)}catch(V){return null}}(decodeURIComponent(Ke.firebaseError)):null,nt=null===(ae=null===($=null==Ct?void 0:Ct.code)||void 0===$?void 0:$.split("auth/"))||void 0===ae?void 0:ae[1],St=nt?(0,N.av)(nt):null;return St?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:St,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:Be,postBody:null}}return null}(Vr,Zt.url)),$.onEvent(Ri||He())});return function(Vr){return cr.apply(this,arguments)}}();void 0!==ae&&"function"==typeof ae.subscribe&&ae.subscribe(null,nt);const St=Be,Cn=`${Ke.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var cr=(0,_.Z)(function*(Zt){if(Zt.toLowerCase().startsWith(Cn)&&nt({url:Zt}),"function"==typeof St)try{St(Zt)}catch(Vr){console.error(Vr)}});return function(Zt){return cr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aA}_initialize(V){var $=this;return(0,_.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(V)})()}_openPopup(V,$,ae,Be){var Ke=this;return(0,_.Z)(function*(){return yield Ke.selectUnderlyingResolver(),Ke.assertedUnderlyingResolver._openPopup(V,$,ae,Be)})()}_openRedirect(V,$,ae,Be){var Ke=this;return(0,_.Z)(function*(){return yield Ke.selectUnderlyingResolver(),Ke.assertedUnderlyingResolver._openRedirect(V,$,ae,Be)})()}_isIframeWebStorageSupported(V,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(V,$)}_originValidation(V){return this.assertedUnderlyingResolver._originValidation(V)}get _shouldInitProactively(){return Gi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var V=this;return(0,_.Z)(function*(){if(V.underlyingResolver)return;const $=yield function dt(){return Fr.apply(this,arguments)}();V.underlyingResolver=$?V.cordovaResolver:V.browserResolver})()}}function si(O){return O.unwrap()}function Wt(O){return Bn(O)}function Bn(O){const{_tokenResponse:V}=O instanceof ie.ZR?O.customData:O;if(!V)return null;if(!(O instanceof ie.ZR)&&"temporaryProof"in V&&"phoneNumber"in V)return N.P.credentialFromResult(O);const $=V.providerId;if(!$||$===N.o.PASSWORD)return null;let ae;switch($){case N.o.GOOGLE:ae=N.N;break;case N.o.FACEBOOK:ae=N.M;break;case N.o.GITHUB:ae=N.Q;break;case N.o.TWITTER:ae=N.V;break;default:const{oauthIdToken:Be,oauthAccessToken:Ke,oauthTokenSecret:Ct,pendingToken:nt,nonce:St}=V;return Ke||Ct||Be||nt?nt?$.startsWith("saml.")?N.aJ._create($,nt):N.I._fromParams({providerId:$,signInMethod:$,pendingToken:nt,idToken:Be,accessToken:Ke}):new N.T($).credential({idToken:Be,accessToken:Ke,rawNonce:St}):null}return O instanceof ie.ZR?ae.credentialFromError(O):ae.credentialFromResult(O)}function ln(O,V){return V.catch($=>{throw $ instanceof ie.ZR&&function qi(O,V){var $;const ae=null===($=V.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===V.code)V.resolver=new qt(O,N.am(O,V));else if(ae){const Be=Bn(V),Ke=V;Be&&(Ke.credential=Be,Ke.tenantId=ae.tenantId||void 0,Ke.email=ae.email||void 0,Ke.phoneNumber=ae.phoneNumber||void 0)}}(O,$),$}).then($=>{const Be=$.user;return{operationType:$.operationType,credential:Wt($),additionalUserInfo:N.ak($),user:Ge.getOrCreate(Be)}})}function _t(O,V){return jn.apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(O,V){const $=yield V;return{verificationId:$.verificationId,confirm:ae=>ln(O,$.confirm(ae))}})).apply(this,arguments)}class qt{constructor(V,$){this.resolver=$,this.auth=function Wi(O){return O.wrapped()}(V)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(V){return ln(si(this.auth),this.resolver.resolveSignIn(V))}}class Ge{constructor(V){this._delegate=V,this.multiFactor=N.an(V)}static getOrCreate(V){return Ge.USER_MAP.has(V)||Ge.USER_MAP.set(V,new Ge(V)),Ge.USER_MAP.get(V)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(V){return this._delegate.getIdTokenResult(V)}getIdToken(V){return this._delegate.getIdToken(V)}linkAndRetrieveDataWithCredential(V){return this.linkWithCredential(V)}linkWithCredential(V){var $=this;return(0,_.Z)(function*(){return ln($.auth,N.Y($._delegate,V))})()}linkWithPhoneNumber(V,$){var ae=this;return(0,_.Z)(function*(){return _t(ae.auth,N.l(ae._delegate,V,$))})()}linkWithPopup(V){var $=this;return(0,_.Z)(function*(){return ln($.auth,N.d($._delegate,V,rt))})()}linkWithRedirect(V){var $=this;return(0,_.Z)(function*(){return yield Nn(N.aC($.auth)),N.g($._delegate,V,rt)})()}reauthenticateAndRetrieveDataWithCredential(V){return this.reauthenticateWithCredential(V)}reauthenticateWithCredential(V){var $=this;return(0,_.Z)(function*(){return ln($.auth,N.Z($._delegate,V))})()}reauthenticateWithPhoneNumber(V,$){return _t(this.auth,N.r(this._delegate,V,$))}reauthenticateWithPopup(V){return ln(this.auth,N.e(this._delegate,V,rt))}reauthenticateWithRedirect(V){var $=this;return(0,_.Z)(function*(){return yield Nn(N.aC($.auth)),N.h($._delegate,V,rt)})()}sendEmailVerification(V){return N.aa(this._delegate,V)}unlink(V){var $=this;return(0,_.Z)(function*(){return yield N.aj($._delegate,V),$})()}updateEmail(V){return N.af(this._delegate,V)}updatePassword(V){return N.ag(this._delegate,V)}updatePhoneNumber(V){return N.u(this._delegate,V)}updateProfile(V){return N.ae(this._delegate,V)}verifyBeforeUpdateEmail(V,$){return N.ab(this._delegate,V,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ge.USER_MAP=new WeakMap;const Ce=N.aw;let tt=(()=>{class O{constructor($,ae){if(this.app=$,ae.isInitialized())return this._delegate=ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Be}=$.options;Ce(Be,"invalid-api-key",{appName:$.name}),Ce(Be,"invalid-api-key",{appName:$.name});const Ke="undefined"!=typeof window?rt:void 0;this._delegate=ae.initialize({options:{persistence:Nt(Be,$.name),popupRedirectResolver:Ke}}),this._delegate._updateErrorMap(N.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ge.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,ae){N.E(this._delegate,$,ae)}applyActionCode($){return N.a1(this._delegate,$)}checkActionCode($){return N.a2(this._delegate,$)}confirmPasswordReset($,ae){return N.a0(this._delegate,$,ae)}createUserWithEmailAndPassword($,ae){var Be=this;return(0,_.Z)(function*(){return ln(Be._delegate,N.a4(Be._delegate,$,ae))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return N.a9(this._delegate,$)}isSignInWithEmailLink($){return N.a7(this._delegate,$)}getRedirectResult(){var $=this;return(0,_.Z)(function*(){Ce(Sr(),$._delegate,"operation-not-supported-in-this-environment");const ae=yield N.j($._delegate,rt);return ae?ln($._delegate,Promise.resolve(ae)):{credential:null,user:null}})()}addFrameworkForLogging($){!function Qt(O,V){(0,N.aC)(O)._logFramework(V)}(this._delegate,$)}onAuthStateChanged($,ae,Be){const{next:Ke,error:Ct,complete:nt}=ht($,ae,Be);return this._delegate.onAuthStateChanged(Ke,Ct,nt)}onIdTokenChanged($,ae,Be){const{next:Ke,error:Ct,complete:nt}=ht($,ae,Be);return this._delegate.onIdTokenChanged(Ke,Ct,nt)}sendSignInLinkToEmail($,ae){return N.a6(this._delegate,$,ae)}sendPasswordResetEmail($,ae){return N.$(this._delegate,$,ae||void 0)}setPersistence($){var ae=this;return(0,_.Z)(function*(){let Be;switch(function Pn(O,V){zn(Object.values(an).includes(V),O,"invalid-persistence-type"),(0,ie.b$)()?zn(V!==an.SESSION,O,"unsupported-persistence-type"):(0,ie.UG)()?zn(V===an.NONE,O,"unsupported-persistence-type"):yr()?zn(V===an.NONE||V===an.LOCAL&&(0,ie.hl)(),O,"unsupported-persistence-type"):zn(V===an.NONE||_i(),O,"unsupported-persistence-type")}(ae._delegate,$),$){case an.SESSION:Be=N.a;break;case an.LOCAL:Be=(yield N.ax(N.i)._isAvailable())?N.i:N.b;break;case an.NONE:Be=N.K;break;default:return N.as("argument-error",{appName:ae._delegate.name})}return ae._delegate.setPersistence(Be)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return ln(this._delegate,N.W(this._delegate))}signInWithCredential($){return ln(this._delegate,N.X(this._delegate,$))}signInWithCustomToken($){return ln(this._delegate,N._(this._delegate,$))}signInWithEmailAndPassword($,ae){return ln(this._delegate,N.a5(this._delegate,$,ae))}signInWithEmailLink($,ae){return ln(this._delegate,N.a8(this._delegate,$,ae))}signInWithPhoneNumber($,ae){return _t(this._delegate,N.s(this._delegate,$,ae))}signInWithPopup($){var ae=this;return(0,_.Z)(function*(){return Ce(Sr(),ae._delegate,"operation-not-supported-in-this-environment"),ln(ae._delegate,N.c(ae._delegate,$,rt))})()}signInWithRedirect($){var ae=this;return(0,_.Z)(function*(){return Ce(Sr(),ae._delegate,"operation-not-supported-in-this-environment"),yield Nn(ae._delegate),N.f(ae._delegate,$,rt)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return N.a3(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=an,O})();function ht(O,V,$){let ae=O;"function"!=typeof O&&({next:ae,error:V,complete:$}=O);const Be=ae;return{next:Ct=>Be(Ct&&Ge.getOrCreate(Ct)),error:V,complete:$}}function Nt(O,V){const $=function Ms(O,V){const $=Vt();if(!$)return[];const ae=N.ay(ii,O,V);switch($.getItem(ae)){case an.NONE:return[N.K];case an.LOCAL:return[N.i,N.a];case an.SESSION:return[N.a];default:return[]}}(O,V);if("undefined"!=typeof self&&!$.includes(N.i)&&$.push(N.i),"undefined"!=typeof window)for(const ae of[N.b,N.a])$.includes(ae)||$.push(ae);return $.includes(N.K)||$.push(N.K),$}class kt{constructor(){this.providerId="phone",this._delegate=new N.P(si(G.Z.auth()))}static credential(V,$){return N.P.credential(V,$)}verifyPhoneNumber(V,$){return this._delegate.verifyPhoneNumber(V,$)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=N.P.PROVIDER_ID;const K=N.aw;class j{constructor(V,$,ae=G.Z.app()){var Be;K(null===(Be=ae.options)||void 0===Be?void 0:Be.apiKey,"invalid-api-key",{appName:ae.name}),this._delegate=new N.R(V,$,ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function he(O){O.INTERNAL.registerComponent(new ce.wA("auth-compat",V=>{const $=V.getProvider("app-compat").getImmediate(),ae=V.getProvider("auth");return new tt($,ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.L,FacebookAuthProvider:N.M,GithubAuthProvider:N.Q,GoogleAuthProvider:N.N,OAuthProvider:N.T,SAMLAuthProvider:N.U,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:j,TwitterAuthProvider:N.V,Auth:tt,AuthCredential:N.G,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.2.12")}(G.Z)},8306:(ct,Te,L)=>{L.d(Te,{y:()=>z});var _=L(930),G=L(727),N=L(8822),ie=L(4671);var ce=L(2416),ue=L(576),ge=L(2806);let z=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const me=new Me;return me.source=this,me.operator=Ue,me}subscribe(Ue,me,Ie){const et=function qe(Me){return Me&&Me instanceof _.Lv||function te(Me){return Me&&(0,ue.m)(Me.next)&&(0,ue.m)(Me.error)&&(0,ue.m)(Me.complete)}(Me)&&(0,G.Nn)(Me)}(Ue)?Ue:new _.Hp(Ue,me,Ie);return(0,ge.x)(()=>{const{operator:$e,source:Re}=this;et.add($e?$e.call(et,Re):Re?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(me){Ue.error(me)}}forEach(Ue,me){return new(me=q(me))((Ie,et)=>{const $e=new _.Hp({next:Re=>{try{Ue(Re)}catch(Ae){et(Ae),$e.unsubscribe()}},error:et,complete:Ie});this.subscribe($e)})}_subscribe(Ue){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(Ue)}[N.L](){return this}pipe(...Ue){return function ye(Me){return 0===Me.length?ie.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((me,Ie)=>Ie(me),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=q(Ue))((me,Ie)=>{let et;this.subscribe($e=>et=$e,$e=>Ie($e),()=>me(et))})}}return Me.create=Le=>new Me(Le),Me})();function q(Me){var Le;return null!==(Le=null!=Me?Me:ce.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ct,Te,L)=>{L.d(Te,{x:()=>ce});var _=L(8306),G=L(727);const ie=(0,L(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=L(8737),ye=L(2806);let ce=(()=>{class ge extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const te=new ue(this,this);return te.operator=q,te}_throwIfClosed(){if(this.closed)throw new ie}next(q){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(q)}})}error(q){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:te}=this;for(;te.length;)te.shift().error(q)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:te,isStopped:qe,observers:Me}=this;return te||qe?G.Lc:(this.currentObservers=null,Me.push(q),new G.w0(()=>{this.currentObservers=null,(0,ne.P)(Me,q)}))}_checkFinalizedStatuses(q){const{hasError:te,thrownError:qe,isStopped:Me}=this;te?q.error(qe):Me&&q.complete()}asObservable(){const q=new _.y;return q.source=this,q}}return ge.create=(z,q)=>new ue(z,q),ge})();class ue extends ce{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===te||te.call(q,z)}error(z){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===te||te.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,te;return null!==(te=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==te?te:G.Lc}}},930:(ct,Te,L)=>{L.d(Te,{Hp:()=>Ue,Lv:()=>te});var _=L(576),G=L(727),N=L(2416),ie=L(7849),ne=L(5032);const ye=ge("C",void 0,void 0);function ge(Re,Ae,Ee){return{kind:Re,value:Ae,error:Ee}}var z=L(3410),q=L(2806);class te extends G.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,G.Nn)(Ae)&&Ae.add(this)):this.destination=$e}static create(Ae,Ee,Ze){return new Ue(Ae,Ee,Ze)}next(Ae){this.isStopped?et(function ue(Re){return ge("N",Re,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?et(function ce(Re){return ge("E",void 0,Re)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?et(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Me(Re,Ae){return qe.call(Re,Ae)}class Le{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Ae)}catch(Ze){me(Ze)}}error(Ae){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Ae)}catch(Ze){me(Ze)}else me(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(Ee){me(Ee)}}}class Ue extends te{constructor(Ae,Ee,Ze){let ee;if(super(),(0,_.m)(Ae)||!Ae)ee={next:null!=Ae?Ae:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ze?Ze:void 0};else{let Xe;this&&N.v.useDeprecatedNextContext?(Xe=Object.create(Ae),Xe.unsubscribe=()=>this.unsubscribe(),ee={next:Ae.next&&Me(Ae.next,Xe),error:Ae.error&&Me(Ae.error,Xe),complete:Ae.complete&&Me(Ae.complete,Xe)}):ee=Ae}this.destination=new Le(ee)}}function me(Re){N.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Re):(0,ie.h)(Re)}function et(Re,Ae){const{onStoppedNotification:Ee}=N.v;Ee&&z.z.setTimeout(()=>Ee(Re,Ae))}const $e={closed:!0,next:ne.Z,error:function Ie(Re){throw Re},complete:ne.Z}},727:(ct,Te,L)=>{L.d(Te,{Lc:()=>ye,w0:()=>ne,Nn:()=>ce});var _=L(576);const N=(0,L(3888).d)(ge=>function(q){ge(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((te,qe)=>`${qe+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ie=L(8737);class ne{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Me of q)Me.remove(this);else q.remove(this);const{initialTeardown:te}=this;if((0,_.m)(te))try{te()}catch(Me){z=Me instanceof N?Me.errors:[Me]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Me of qe)try{ue(Me)}catch(Le){z=null!=z?z:[],Le instanceof N?z=[...z,...Le.errors]:z.push(Le)}}if(z)throw new N(z)}}add(z){var q;if(z&&z!==this)if(this.closed)ue(z);else{if(z instanceof ne){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,ie.P)(q,z)}remove(z){const{_finalizers:q}=this;q&&(0,ie.P)(q,z),z instanceof ne&&z._removeParent(this)}}ne.EMPTY=(()=>{const ge=new ne;return ge.closed=!0,ge})();const ye=ne.EMPTY;function ce(ge){return ge instanceof ne||ge&&"closed"in ge&&(0,_.m)(ge.remove)&&(0,_.m)(ge.add)&&(0,_.m)(ge.unsubscribe)}function ue(ge){(0,_.m)(ge)?ge():ge.unsubscribe()}},2416:(ct,Te,L)=>{L.d(Te,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,Te,L)=>{L.d(Te,{E:()=>G});const G=new(L(8306).y)(ne=>ne.complete())},8996:(ct,Te,L)=>{L.d(Te,{D:()=>Ae});var _=L(8421),G=L(5363),N=L(9468),ye=L(8306),ue=L(2202),ge=L(576),z=L(9672);function te(Ee,Ze){if(!Ee)throw new Error("Iterable cannot be null");return new ye.y(ee=>{(0,z.f)(ee,Ze,()=>{const Xe=Ee[Symbol.asyncIterator]();(0,z.f)(ee,Ze,()=>{Xe.next().then(Qe=>{Qe.done?ee.complete():ee.next(Qe.value)})},0,!0)})})}var qe=L(3670),Me=L(8239),Le=L(1144),Ue=L(6495),me=L(2206),Ie=L(4532),et=L(3260);function Ae(Ee,Ze){return Ze?function Re(Ee,Ze){if(null!=Ee){if((0,qe.c)(Ee))return function ie(Ee,Ze){return(0,_.Xf)(Ee).pipe((0,N.R)(Ze),(0,G.Q)(Ze))}(Ee,Ze);if((0,Le.z)(Ee))return function ce(Ee,Ze){return new ye.y(ee=>{let Xe=0;return Ze.schedule(function(){Xe===Ee.length?ee.complete():(ee.next(Ee[Xe++]),ee.closed||this.schedule())})})}(Ee,Ze);if((0,Me.t)(Ee))return function ne(Ee,Ze){return(0,_.Xf)(Ee).pipe((0,N.R)(Ze),(0,G.Q)(Ze))}(Ee,Ze);if((0,me.D)(Ee))return te(Ee,Ze);if((0,Ue.T)(Ee))return function q(Ee,Ze){return new ye.y(ee=>{let Xe;return(0,z.f)(ee,Ze,()=>{Xe=Ee[ue.h](),(0,z.f)(ee,Ze,()=>{let Qe,se;try{({value:Qe,done:se}=Xe.next())}catch(oe){return void ee.error(oe)}se?ee.complete():ee.next(Qe)},0,!0)}),()=>(0,ge.m)(null==Xe?void 0:Xe.return)&&Xe.return()})}(Ee,Ze);if((0,et.L)(Ee))return function $e(Ee,Ze){return te((0,et.Q)(Ee),Ze)}(Ee,Ze)}throw(0,Ie.z)(Ee)}(Ee,Ze):(0,_.Xf)(Ee)}},8421:(ct,Te,L)=>{L.d(Te,{Xf:()=>qe});var _=L(655),G=L(1144),N=L(8239),ie=L(8306),ne=L(3670),ye=L(2206),ce=L(4532),ue=L(6495),ge=L(3260),z=L(576),q=L(7849),te=L(8822);function qe(Re){if(Re instanceof ie.y)return Re;if(null!=Re){if((0,ne.c)(Re))return function Me(Re){return new ie.y(Ae=>{const Ee=Re[te.L]();if((0,z.m)(Ee.subscribe))return Ee.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,G.z)(Re))return function Le(Re){return new ie.y(Ae=>{for(let Ee=0;Ee<Re.length&&!Ae.closed;Ee++)Ae.next(Re[Ee]);Ae.complete()})}(Re);if((0,N.t)(Re))return function Ue(Re){return new ie.y(Ae=>{Re.then(Ee=>{Ae.closed||(Ae.next(Ee),Ae.complete())},Ee=>Ae.error(Ee)).then(null,q.h)})}(Re);if((0,ye.D)(Re))return Ie(Re);if((0,ue.T)(Re))return function me(Re){return new ie.y(Ae=>{for(const Ee of Re)if(Ae.next(Ee),Ae.closed)return;Ae.complete()})}(Re);if((0,ge.L)(Re))return function et(Re){return Ie((0,ge.Q)(Re))}(Re)}throw(0,ce.z)(Re)}function Ie(Re){return new ie.y(Ae=>{(function $e(Re,Ae){var Ee,Ze,ee,Xe;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,_.KL)(Re);!(Ze=yield Ee.next()).done;)if(Ae.next(Ze.value),Ae.closed)return}catch(Qe){ee={error:Qe}}finally{try{Ze&&!Ze.done&&(Xe=Ee.return)&&(yield Xe.call(Ee))}finally{if(ee)throw ee.error}}Ae.complete()})})(Re,Ae).catch(Ee=>Ae.error(Ee))})}},6451:(ct,Te,L)=>{L.d(Te,{T:()=>ye});var _=L(8189),G=L(8421),N=L(515),ie=L(7669),ne=L(8996);function ye(...ce){const ue=(0,ie.yG)(ce),ge=(0,ie._6)(ce,1/0),z=ce;return z.length?1===z.length?(0,G.Xf)(z[0]):(0,_.J)(ge)((0,ne.D)(z,ue)):N.E}},5403:(ct,Te,L)=>{L.d(Te,{x:()=>G});var _=L(930);function G(ie,ne,ye,ce,ue){return new N(ie,ne,ye,ce,ue)}class N extends _.Lv{constructor(ne,ye,ce,ue,ge,z){super(ne),this.onFinalize=ge,this.shouldUnsubscribe=z,this._next=ye?function(q){try{ye(q)}catch(te){ne.error(te)}}:super._next,this._error=ue?function(q){try{ue(q)}catch(te){ne.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(q){ne.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(ct,Te,L)=>{L.d(Te,{U:()=>N});var _=L(4482),G=L(5403);function N(ie,ne){return(0,_.e)((ye,ce)=>{let ue=0;ye.subscribe((0,G.x)(ce,ge=>{ce.next(ie.call(ne,ge,ue++))}))})}},8189:(ct,Te,L)=>{L.d(Te,{J:()=>N});var _=L(5577),G=L(4671);function N(ie=1/0){return(0,_.z)(G.y,ie)}},5577:(ct,Te,L)=>{L.d(Te,{z:()=>ue});var _=L(4004),G=L(8421),N=L(4482),ie=L(9672),ne=L(5403),ce=L(576);function ue(ge,z,q=1/0){return(0,ce.m)(z)?ue((te,qe)=>(0,_.U)((Me,Le)=>z(te,Me,qe,Le))((0,G.Xf)(ge(te,qe))),q):("number"==typeof z&&(q=z),(0,N.e)((te,qe)=>function ye(ge,z,q,te,qe,Me,Le,Ue){const me=[];let Ie=0,et=0,$e=!1;const Re=()=>{$e&&!me.length&&!Ie&&z.complete()},Ae=Ze=>Ie<te?Ee(Ze):me.push(Ze),Ee=Ze=>{Me&&z.next(Ze),Ie++;let ee=!1;(0,G.Xf)(q(Ze,et++)).subscribe((0,ne.x)(z,Xe=>{null==qe||qe(Xe),Me?Ae(Xe):z.next(Xe)},()=>{ee=!0},void 0,()=>{if(ee)try{for(Ie--;me.length&&Ie<te;){const Xe=me.shift();Le?(0,ie.f)(z,Le,()=>Ee(Xe)):Ee(Xe)}Re()}catch(Xe){z.error(Xe)}}))};return ge.subscribe((0,ne.x)(z,Ae,()=>{$e=!0,Re()})),()=>{null==Ue||Ue()}}(te,qe,ge,q)))}},5363:(ct,Te,L)=>{L.d(Te,{Q:()=>ie});var _=L(9672),G=L(4482),N=L(5403);function ie(ne,ye=0){return(0,G.e)((ce,ue)=>{ce.subscribe((0,N.x)(ue,ge=>(0,_.f)(ue,ne,()=>ue.next(ge),ye),()=>(0,_.f)(ue,ne,()=>ue.complete(),ye),ge=>(0,_.f)(ue,ne,()=>ue.error(ge),ye)))})}},3099:(ct,Te,L)=>{L.d(Te,{B:()=>ye});var _=L(8996),G=L(5698),N=L(7579),ie=L(930),ne=L(4482);function ye(ue={}){const{connector:ge=(()=>new N.x),resetOnError:z=!0,resetOnComplete:q=!0,resetOnRefCountZero:te=!0}=ue;return qe=>{let Me=null,Le=null,Ue=null,me=0,Ie=!1,et=!1;const $e=()=>{null==Le||Le.unsubscribe(),Le=null},Re=()=>{$e(),Me=Ue=null,Ie=et=!1},Ae=()=>{const Ee=Me;Re(),null==Ee||Ee.unsubscribe()};return(0,ne.e)((Ee,Ze)=>{me++,!et&&!Ie&&$e();const ee=Ue=null!=Ue?Ue:ge();Ze.add(()=>{me--,0===me&&!et&&!Ie&&(Le=ce(Ae,te))}),ee.subscribe(Ze),Me||(Me=new ie.Hp({next:Xe=>ee.next(Xe),error:Xe=>{et=!0,$e(),Le=ce(Re,z,Xe),ee.error(Xe)},complete:()=>{Ie=!0,$e(),Le=ce(Re,q),ee.complete()}}),(0,_.D)(Ee).subscribe(Me))})(qe)}}function ce(ue,ge,...z){return!0===ge?(ue(),null):!1===ge?null:ge(...z).pipe((0,G.q)(1)).subscribe(()=>ue())}},9468:(ct,Te,L)=>{L.d(Te,{R:()=>G});var _=L(4482);function G(N,ie=0){return(0,_.e)((ne,ye)=>{ye.add(N.schedule(()=>ne.subscribe(ye),ie))})}},5698:(ct,Te,L)=>{L.d(Te,{q:()=>ie});var _=L(515),G=L(4482),N=L(5403);function ie(ne){return ne<=0?()=>_.E:(0,G.e)((ye,ce)=>{let ue=0;ye.subscribe((0,N.x)(ce,ge=>{++ue<=ne&&(ce.next(ge),ne<=ue&&ce.complete())}))})}},8505:(ct,Te,L)=>{L.d(Te,{b:()=>ne});var _=L(576),G=L(4482),N=L(5403),ie=L(4671);function ne(ye,ce,ue){const ge=(0,_.m)(ye)||ce||ue?{next:ye,error:ce,complete:ue}:ye;return ge?(0,G.e)((z,q)=>{var te;null===(te=ge.subscribe)||void 0===te||te.call(ge);let qe=!0;z.subscribe((0,N.x)(q,Me=>{var Le;null===(Le=ge.next)||void 0===Le||Le.call(ge,Me),q.next(Me)},()=>{var Me;qe=!1,null===(Me=ge.complete)||void 0===Me||Me.call(ge),q.complete()},Me=>{var Le;qe=!1,null===(Le=ge.error)||void 0===Le||Le.call(ge,Me),q.error(Me)},()=>{var Me,Le;qe&&(null===(Me=ge.unsubscribe)||void 0===Me||Me.call(ge)),null===(Le=ge.finalize)||void 0===Le||Le.call(ge)}))}):ie.y}},4408:(ct,Te,L)=>{L.d(Te,{o:()=>ne});var _=L(727);class G extends _.w0{constructor(ce,ue){super()}schedule(ce,ue=0){return this}}const N={setInterval(ye,ce,...ue){const{delegate:ge}=N;return(null==ge?void 0:ge.setInterval)?ge.setInterval(ye,ce,...ue):setInterval(ye,ce,...ue)},clearInterval(ye){const{delegate:ce}=N;return((null==ce?void 0:ce.clearInterval)||clearInterval)(ye)},delegate:void 0};var ie=L(8737);class ne extends G{constructor(ce,ue){super(ce,ue),this.scheduler=ce,this.work=ue,this.pending=!1}schedule(ce,ue=0){if(this.closed)return this;this.state=ce;const ge=this.id,z=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(z,ge,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(z,this.id,ue),this}requestAsyncId(ce,ue,ge=0){return N.setInterval(ce.flush.bind(ce,this),ge)}recycleAsyncId(ce,ue,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ue;N.clearInterval(ue)}execute(ce,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ce,ue);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ue){let z,ge=!1;try{this.work(ce)}catch(q){ge=!0,z=q||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ce,scheduler:ue}=this,{actions:ge}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(ge,this),null!=ce&&(this.id=this.recycleAsyncId(ue,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,Te,L)=>{L.d(Te,{v:()=>N});var _=L(6063);class G{constructor(ne,ye=G.now){this.schedulerActionCtor=ne,this.now=ye}schedule(ne,ye=0,ce){return new this.schedulerActionCtor(this,ne).schedule(ce,ye)}}G.now=_.l.now;class N extends G{constructor(ne,ye=G.now){super(ne,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:ye}=this;if(this._active)return void ye.push(ne);let ce;this._active=!0;do{if(ce=ne.execute(ne.state,ne.delay))break}while(ne=ye.shift());if(this._active=!1,ce){for(;ne=ye.shift();)ne.unsubscribe();throw ce}}}},4986:(ct,Te,L)=>{L.d(Te,{z:()=>N});var _=L(4408);const N=new(L(7565).v)(_.o)},6063:(ct,Te,L)=>{L.d(Te,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(ct,Te,L)=>{L.d(Te,{z:()=>_});const _={setTimeout(G,N,...ie){const{delegate:ne}=_;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(G,N,...ie):setTimeout(G,N,...ie)},clearTimeout(G){const{delegate:N}=_;return((null==N?void 0:N.clearTimeout)||clearTimeout)(G)},delegate:void 0}},2202:(ct,Te,L)=>{L.d(Te,{h:()=>G});const G=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,Te,L)=>{L.d(Te,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ct,Te,L)=>{L.d(Te,{_6:()=>ye,jO:()=>ie,yG:()=>ne});var _=L(576);function N(ce){return ce[ce.length-1]}function ie(ce){return(0,_.m)(N(ce))?ce.pop():void 0}function ne(ce){return function G(ce){return ce&&(0,_.m)(ce.schedule)}(N(ce))?ce.pop():void 0}function ye(ce,ue){return"number"==typeof N(ce)?ce.pop():ue}},8737:(ct,Te,L)=>{function _(G,N){if(G){const ie=G.indexOf(N);0<=ie&&G.splice(ie,1)}}L.d(Te,{P:()=>_})},3888:(ct,Te,L)=>{function _(G){const ie=G(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}L.d(Te,{d:()=>_})},2806:(ct,Te,L)=>{L.d(Te,{O:()=>ie,x:()=>N});var _=L(2416);let G=null;function N(ne){if(_.v.useDeprecatedSynchronousErrorHandling){const ye=!G;if(ye&&(G={errorThrown:!1,error:null}),ne(),ye){const{errorThrown:ce,error:ue}=G;if(G=null,ce)throw ue}}else ne()}function ie(ne){_.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=ne)}},9672:(ct,Te,L)=>{function _(G,N,ie,ne=0,ye=!1){const ce=N.schedule(function(){ie(),ye?G.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(G.add(ce),!ye)return ce}L.d(Te,{f:()=>_})},4671:(ct,Te,L)=>{function _(G){return G}L.d(Te,{y:()=>_})},1144:(ct,Te,L)=>{L.d(Te,{z:()=>_});const _=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(ct,Te,L)=>{L.d(Te,{D:()=>G});var _=L(576);function G(N){return Symbol.asyncIterator&&(0,_.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(ct,Te,L)=>{function _(G){return"function"==typeof G}L.d(Te,{m:()=>_})},3670:(ct,Te,L)=>{L.d(Te,{c:()=>N});var _=L(8822),G=L(576);function N(ie){return(0,G.m)(ie[_.L])}},6495:(ct,Te,L)=>{L.d(Te,{T:()=>N});var _=L(2202),G=L(576);function N(ie){return(0,G.m)(null==ie?void 0:ie[_.h])}},8239:(ct,Te,L)=>{L.d(Te,{t:()=>G});var _=L(576);function G(N){return(0,_.m)(null==N?void 0:N.then)}},3260:(ct,Te,L)=>{L.d(Te,{L:()=>ie,Q:()=>N});var _=L(655),G=L(576);function N(ne){return(0,_.FC)(this,arguments,function*(){const ce=ne.getReader();try{for(;;){const{value:ue,done:ge}=yield(0,_.qq)(ce.read());if(ge)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ue)}}finally{ce.releaseLock()}})}function ie(ne){return(0,G.m)(null==ne?void 0:ne.getReader)}},4482:(ct,Te,L)=>{L.d(Te,{A:()=>G,e:()=>N});var _=L(576);function G(ie){return(0,_.m)(null==ie?void 0:ie.lift)}function N(ie){return ne=>{if(G(ne))return ne.lift(function(ye){try{return ie(ye,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,Te,L)=>{function _(){}L.d(Te,{Z:()=>_})},7849:(ct,Te,L)=>{L.d(Te,{h:()=>N});var _=L(2416),G=L(3410);function N(ie){G.z.setTimeout(()=>{const{onUnhandledError:ne}=_.v;if(!ne)throw ie;ne(ie)})}},4532:(ct,Te,L)=>{function _(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>_})},655:(ct,Te,L)=>{function ie(se,oe){var le={};for(var be in se)Object.prototype.hasOwnProperty.call(se,be)&&oe.indexOf(be)<0&&(le[be]=se[be]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(be=Object.getOwnPropertySymbols(se);pe<be.length;pe++)oe.indexOf(be[pe])<0&&Object.prototype.propertyIsEnumerable.call(se,be[pe])&&(le[be[pe]]=se[be[pe]])}return le}function ue(se,oe,le,be){return new(le||(le=Promise))(function(Fe,xt){function Yt(Qt){try{He(be.next(Qt))}catch(lr){xt(lr)}}function on(Qt){try{He(be.throw(Qt))}catch(lr){xt(lr)}}function He(Qt){Qt.done?Fe(Qt.value):function pe(Fe){return Fe instanceof le?Fe:new le(function(xt){xt(Fe)})}(Qt.value).then(Yt,on)}He((be=be.apply(se,oe||[])).next())})}function me(se){return this instanceof me?(this.v=se,this):new me(se)}function Ie(se,oe,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,be=le.apply(se,oe||[]),Fe=[];return pe={},xt("next"),xt("throw"),xt("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function xt(Mn){be[Mn]&&(pe[Mn]=function(Xt){return new Promise(function(Kt,Jt){Fe.push([Mn,Xt,Kt,Jt])>1||Yt(Mn,Xt)})})}function Yt(Mn,Xt){try{!function on(Mn){Mn.value instanceof me?Promise.resolve(Mn.value.v).then(He,Qt):lr(Fe[0][2],Mn)}(be[Mn](Xt))}catch(Kt){lr(Fe[0][3],Kt)}}function He(Mn){Yt("next",Mn)}function Qt(Mn){Yt("throw",Mn)}function lr(Mn,Xt){Mn(Xt),Fe.shift(),Fe.length&&Yt(Fe[0][0],Fe[0][1])}}function $e(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,oe=se[Symbol.asyncIterator];return oe?oe.call(se):(se=function te(se){var oe="function"==typeof Symbol&&Symbol.iterator,le=oe&&se[oe],be=0;if(le)return le.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&be>=se.length&&(se=void 0),{value:se&&se[be++],done:!se}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),le={},be("next"),be("throw"),be("return"),le[Symbol.asyncIterator]=function(){return this},le);function be(Fe){le[Fe]=se[Fe]&&function(xt){return new Promise(function(Yt,on){!function pe(Fe,xt,Yt,on){Promise.resolve(on).then(function(He){Fe({value:He,done:Yt})},xt)}(Yt,on,(xt=se[Fe](xt)).done,xt.value)})}}}L.d(Te,{FC:()=>Ie,KL:()=>$e,_T:()=>ie,mG:()=>ue,qq:()=>me})},5e3:(ct,Te,L)=>{L.d(Te,{$8M:()=>Wa,$Z:()=>Ec,AFp:()=>Sb,AaK:()=>ue,CHM:()=>Wh,CRH:()=>lb,CZH:()=>wp,CqO:()=>We,EJc:()=>Ab,EpF:()=>Ju,F4k:()=>ky,FYo:()=>Ev,FiY:()=>hi,G48:()=>f0,GfV:()=>ph,JOm:()=>ha,LFG:()=>it,LSH:()=>wd,Lbi:()=>Yv,MAs:()=>HE,NdJ:()=>nm,OlP:()=>On,Oqu:()=>ns,PXZ:()=>a0,Q6J:()=>Py,QGY:()=>bc,Qsj:()=>rS,R0b:()=>bs,RDi:()=>Os,Rgc:()=>ll,SBq:()=>fh,Sil:()=>Jv,Suo:()=>qr,TTD:()=>Go,TgZ:()=>Po,VLi:()=>o0,X6Q:()=>fu,XFs:()=>dt,Xpm:()=>kt,Y36:()=>pr,YKP:()=>Tv,YNc:()=>jE,Yjl:()=>Be,Yz7:()=>Xt,ZZ4:()=>xp,_UZ:()=>au,_Vd:()=>ba,_c5:()=>VS,_uU:()=>Ac,aQg:()=>Xm,c2e:()=>Qv,cJS:()=>Jt,cg1:()=>nn,dDg:()=>Mb,deG:()=>sg,dqk:()=>Wt,eFA:()=>Lb,g9A:()=>jm,h0i:()=>_h,hGG:()=>BS,iGM:()=>ub,ifc:()=>Vt,ip1:()=>Db,kL8:()=>nv,lG2:()=>ae,oAB:()=>O,q4F:()=>sl,qLn:()=>yg,qZA:()=>Gn,s9C:()=>$f,sBO:()=>MS,sIi:()=>dc,s_b:()=>Cm,soG:()=>fl,tBr:()=>Ei,tb:()=>Bc,tp0:()=>wo,uIk:()=>Ff,vHH:()=>Le,vpe:()=>Xs,wAp:()=>wt,xp6:()=>Ww,z2F:()=>Cp,zSh:()=>vy,zs3:()=>Ro});var _=L(7579),G=L(727),N=L(8306),ie=L(6451),ne=L(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=ye({__forward_ref__:ye});function q(s){return s.__forward_ref__=q,s.toString=function(){return ue(this())},s}function te(s){return function qe(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===q}(s)?s():s}class Le extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}function Ae(s,o){const u=o?` in ${o}`:"";throw new Le(-201,`No provider for ${Ie(s)} found${u}`)}function on(s,o){null==s&&function He(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Sn(s){return _r(s,_i)||_r(s,Sr)}function _r(s,o){return s.hasOwnProperty(o)?s[o]:null}function Hi(s){return s&&(s.hasOwnProperty(yr)||s.hasOwnProperty(Gi))?s[yr]:null}const _i=ye({\u0275prov:ye}),yr=ye({\u0275inj:ye}),Sr=ye({ngInjectableDef:ye}),Gi=ye({ngInjectorDef:ye});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Fr;function an(s){const o=Fr;return Fr=s,o}function zn(s,o,u){const c=Sn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&dt.Optional?null:void 0!==o?o:void Ae(ue(s),"Injector")}function Pn(s){return{toString:s}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),Vt=(()=>{return(s=Vt||(Vt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Vt;var s})();const lt="undefined"!=typeof globalThis&&globalThis,rt="undefined"!=typeof window&&window,si="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=lt||"undefined"!=typeof global&&global||rt||si,ln={},_t=[],jn=ye({\u0275cmp:ye}),qt=ye({\u0275dir:ye}),Ge=ye({\u0275pipe:ye}),Ce=ye({\u0275mod:ye}),tt=ye({\u0275fac:ye}),ht=ye({__NG_ELEMENT_ID__:ye});let Nt=0;function kt(s){return Pn(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||_t,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Vt.Emulated,id:"c",styles:s.styles||_t,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return c.id+=Nt++,c.inputs=$(s.inputs,u),c.outputs=$(s.outputs),f&&f.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(j):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Y):null,c})}function j(s){return Ke(s)||function Ct(s){return s[qt]||null}(s)}function Y(s){return function nt(s){return s[Ge]||null}(s)}const he={};function O(s){return Pn(()=>{const o={type:s.type,bootstrap:s.bootstrap||_t,declarations:s.declarations||_t,imports:s.imports||_t,exports:s.exports||_t,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(he[s.id]=s.type),o})}function $(s,o){if(null==s)return ln;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const ae=kt;function Be(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ke(s){return s[jn]||null}function St(s,o){const u=s[Ce]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function oi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ki(s){return Array.isArray(s)&&!0===s[1]}function bu(s){return 0!=(8&s.flags)}function Bo(s){return 2==(2&s.flags)}function jo(s){return 1==(1&s.flags)}function Mi(s){return null!==s.template}function Cl(s){return 0!=(512&s[2])}function yi(s,o){return s.hasOwnProperty(tt)?s[tt]:null}class jh{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Go(){return Du}function Du(s){return s.type.prototype.ngOnChanges&&(s.setInput=ka),$h}function $h(){const s=Pi(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===ln)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function ka(s,o,u,c){const d=Pi(s)||function us(s,o){return s[Hh]=o}(s,{previous:ln,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],b=y[E];f[E]=new jh(b&&b.currentValue,o,y===ln),s[c]=o}Go.ngInherit=!0;const Hh="__ngSimpleChanges__";function Pi(s){return s[Hh]||null}let Au;function Os(s){Au=s}function vn(s){return!!s.listen}const so={createRenderer:(s,o)=>function io(){return void 0!==Au?Au:"undefined"!=typeof document?document:void 0}()};function pn(s){for(;Array.isArray(s);)s=s[0];return s}function xr(s,o){return pn(o[s.index])}function xu(s,o){return s.data[o]}function zr(s,o){const u=o[s];return oi(u)?u:u[0]}function ls(s){return 4==(4&s[2])}function ao(s){return 128==(128&s[2])}function Ni(s,o){return null==o?null:s[o]}function Zi(s){s[18]=0}function cs(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const vt={lFrame:Nl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yo(){return vt.bindingsEnabled}function De(){return vt.lFrame.lView}function Bt(){return vt.lFrame.tView}function Wh(s){return vt.lFrame.contextLView=s,s[8]}function wn(){let s=Ru();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ru(){return vt.lFrame.currentTNode}function ki(s,o){const u=vt.lFrame;u.currentTNode=s,u.isParent=o}function Al(){return vt.lFrame.isParent}function Qo(){return vt.isInCheckNoChangesMode}function Xo(s){vt.isInCheckNoChangesMode=s}function ea(){return vt.lFrame.bindingIndex++}function nd(s,o){const u=vt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Rl(o)}function Rl(s){vt.lFrame.currentDirectiveIndex=s}function zh(){return vt.lFrame.currentQueryIndex}function Ml(s){vt.lFrame.currentQueryIndex=s}function Pl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Mu(s,o,u){if(u&dt.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&dt.Host||(d=Pl(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=vt.lFrame=lo();return c.currentTNode=o,c.lView=s,!0}function Ba(s){const o=lo(),u=s[1];vt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function lo(){const s=vt.lFrame,o=null===s?null:s.child;return null===o?Nl(s):o}function Nl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Kh(){const s=vt.lFrame;return vt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const rd=Kh;function co(){const s=Kh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Kr(){return vt.lFrame.selectedIndex}function Vs(s){vt.lFrame.selectedIndex=s}function Hn(){const s=vt.lFrame;return xu(s.tView,s.selectedIndex)}function ja(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:x}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(u,x)}}function Ll(s,o,u){sd(s,o,3,u)}function Pu(s,o,u,c){(3&s[2])===u&&sd(s,o,u,c)}function ir(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function sd(s,o,u,c){const f=null!=c?c:-1,y=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<f||-1==f)&&(od(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function od(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Nu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function gt(s,o,u){const c=vn(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const y=u[d++],E=u[d++],b=u[d++];c?s.setAttribute(o,E,b,y):o.setAttributeNS(y,E,b)}else{const y=f,E=u[++d];li(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function hs(s){return 3===s||4===s||6===s}function li(s){return 64===s.charCodeAt(0)}function fr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||ud(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function ud(s,o,u,c,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function Kn(s){return-1!==s}function Bs(s){return 32767&s}function js(s,o){let u=function Fl(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let ra=!0;function Oi(s){const o=ra;return ra=s,o}let ku=0;function In(s,o){const u=Vl(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,$s(c.data,s),$s(o,null),$s(c.blueprint,null));const d=Zr(s,o),f=s.injectorIndex;if(Kn(d)){const y=Bs(d),E=js(d,o),b=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|b[y+A]}return o[f+8]=d,f}function $s(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Vl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Zr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(c=2===y?f.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function fo(s,o,u){!function Ou(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ht)&&(c=u[ht]),null==c&&(c=u[ht]=ku++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Hs(s,o,u){if(u&dt.Optional)return s;Ae(o,"NodeInjector")}function Ha(s,o,u,c){if(u&dt.Optional&&void 0===c&&(c=null),0==(u&(dt.Self|dt.Host))){const d=s[9],f=an(void 0);try{return d?d.get(o,c,u&dt.Optional):zn(o,c,u&dt.Optional)}finally{an(f)}}return Hs(c,o,u)}function po(s,o,u,c=dt.Default,d){if(null!==s){const f=function oa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ht)?s[ht]:void 0;return"number"==typeof o?o>=0?255&o:Bl:o}(u);if("function"==typeof f){if(!Mu(o,s,c))return c&dt.Host?Hs(d,u,c):Ha(o,u,c,d);try{const y=f(c);if(null!=y||c&dt.Optional)return y;Ae(u)}finally{rd()}}else if("number"==typeof f){let y=null,E=Vl(s,o),b=-1,A=c&dt.Host?o[16][6]:null;for((-1===E||c&dt.SkipSelf)&&(b=-1===E?Zr(s,o):o[E+8],-1!==b&&sr(c,!1)?(y=o[1],E=Bs(b),o=js(b,o)):E=-1);-1!==E;){const x=o[1];if(Ga(f,E,x.data)){const U=Xh(E,o,u,y,c,A);if(U!==fs)return U}b=o[E+8],-1!==b&&sr(c,o[1].data[E+8]===A)&&Ga(f,E,o)?(y=x,E=Bs(b),o=js(b,o)):E=-1}}}return Ha(o,u,c,d)}const fs={};function Bl(){return new ps(wn(),De())}function Xh(s,o,u,c,d,f){const y=o[1],E=y.data[s+8],x=Gs(E,y,u,null==c?Bo(E)&&ra:c!=y&&0!=(3&E.type),d&dt.Host&&f===E);return null!==x?sa(o,y,x,E):fs}function Gs(s,o,u,c,d){const f=s.providerIndexes,y=o.data,E=1048575&f,b=s.directiveStart,x=f>>20,W=d?E+x:s.directiveEnd;for(let Q=c?E:E+x;Q<W;Q++){const we=y[Q];if(Q<b&&u===we||Q>=b&&we.type===u)return Q}if(d){const Q=y[b];if(Q&&Mi(Q)&&Q.type===u)return b}return null}function sa(s,o,u,c){let d=s[u];const f=o.data;if(function $a(s){return s instanceof Nu}(d)){const y=d;y.resolving&&function et(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Le(-200,`Circular dependency in DI detected for ${s}${u}`)}(Ie(f[u]));const E=Oi(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?an(y.injectImpl):null;Mu(s,c,dt.Default);try{d=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function ho(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=Du(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==b&&an(b),Oi(E),y.resolving=!1,rd()}}return d}function Ga(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function sr(s,o){return!(s&dt.Self||s&dt.Host&&o)}class ps{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return po(this._tNode,this._lView,o,c,u)}}function Wa(s){return function ia(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(hs(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(wn(),s)}const gs="__parameters__";function xn(s,o,u){return Pn(()=>{const c=function Qi(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(b,A,x){const U=b.hasOwnProperty(gs)?b[gs]:Object.defineProperty(b,gs,{value:[]})[gs];for(;U.length<=x;)U.push(null);return(U[x]=U[x]||[]).push(y),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class On{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Xt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sg=new On("AnalyzeForEntryComponents");function Hr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Hr(c,o)):o!==s&&o.push(c)}return o}function Ji(s,o){s.forEach(u=>Array.isArray(u)?Ji(u,o):o(u))}function za(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function _o(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const vo={},Vu="__NG_DI_FLAG__",Za="ngTempTokenPath",T=/\n/gm,B="__source",X=ye({provide:String,useValue:ye});let re;function Pe(s){const o=re;return re=s,o}function ke(s,o=dt.Default){if(void 0===re)throw new Le(203,"");return null===re?zn(s,void 0,o):re.get(s,o&dt.Optional?null:void 0,o)}function it(s,o=dt.Default){return(function Vn(){return Fr}()||ke)(te(s),o)}const Ht=it;function At(s){const o=[];for(let u=0;u<s.length;u++){const c=te(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Le(900,"");let d,f=dt.Default;for(let y=0;y<c.length;y++){const E=c[y],b=Yn(E);"number"==typeof b?-1===b?d=E.token:f|=b:d=E}o.push(it(d,f))}else o.push(it(c))}return o}function ar(s,o){return s[Vu]=o,s.prototype[Vu]=o,s}function Yn(s){return s[Vu]}const Ei=ar(xn("Inject",s=>({token:s})),-1),hi=ar(xn("Optional"),8),wo=ar(xn("SkipSelf"),4);class _d{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const p=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var gn=(()=>((gn=gn||{})[gn.NONE=0]="NONE",gn[gn.HTML=1]="HTML",gn[gn.STYLE=2]="STYLE",gn[gn.SCRIPT=3]="SCRIPT",gn[gn.URL=4]="URL",gn[gn.RESOURCE_URL=5]="RESOURCE_URL",gn))();function wd(s){const o=function qu(){const s=De();return s&&s[12]}();return o?o.sanitize(gn.URL,s)||"":function Co(s,o){const u=function Yl(s){return s instanceof _d&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function ca(s){return s instanceof _d?s.changingThisBreaksApplicationSecurity:s}(s):function R(s){return(s=String(s)).match(p)||s.match(I)?s:"unsafe:"+s}(me(s))}const Cw="__ngContext__";function bi(s,o){s[Cw]=o}function O_(s){const o=function ff(s){return s[Cw]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function nc(s){return s.ngOriginalError}function wT(s,...o){s.error(...o)}class yg{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function vT(s){return s&&s.ngErrorLogger||wT}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&nc(o);for(;u&&nc(u);)u=nc(u);return u||null}}const xT=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function Do(s){return s instanceof Function?s():s}var ha=(()=>((ha=ha||{})[ha.Important=1]="Important",ha[ha.DashCase=2]="DashCase",ha))();function vg(s,o){return undefined(s,o)}function gf(s){const o=s[3];return Ki(o)?o[3]:o}function mf(s){return kw(s[13])}function Eg(s){return kw(s[4])}function kw(s){for(;null!==s&&!Ki(s);)s=s[4];return s}function Ed(s,o,u,c,d){if(null!=c){let f,y=!1;Ki(c)?f=c:oi(c)&&(y=!0,c=c[0]);const E=pn(c);0===s&&null!==u?null==d?W_(o,u,E):ys(o,u,E,d||null,!0):1===s&&null!==u?ys(o,u,E,d||null,!0):2===s?function Z_(s,o,u){const c=_f(s,o);c&&function FT(s,o,u,c){vn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function Bi(s,o,u,c,d){const f=u[7];f!==pn(u)&&Ed(o,s,c,f,d);for(let E=10;E<u.length;E++){const b=u[E];Cg(b[1],b,s,o,c,f)}}(o,s,f,u,d)}}function B_(s,o,u){if(vn(s))return s.createElement(o,u);{const c=null!==u?function Jc(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Lw(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,cs(d,-1)),u.splice(c,1)}function $_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&Lw(d,c),o>0&&(s[u-1][4]=c[4]);const f=_o(s,10+o);!function Vi(s,o){Cg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function H_(s,o){if(!(256&o[2])){const u=o[11];vn(u)&&u.destroyNode&&Cg(s,o,u,3,null,null),function ic(s){let o=s[13];if(!o)return G_(s[1],s);for(;o;){let u=null;if(oi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)oi(o)&&G_(o[1],o),o=o[3];null===o&&(o=s),oi(o)&&G_(o[1],o),u=o&&o[4]}o=u}}(o)}}function G_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Uw(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Nu)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],b=f[y+1];try{b.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function Fw(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],E="function"==typeof y?y(o):pn(o[y]),b=c[d=u[f+2]],A=u[f+3];"boolean"==typeof A?E.removeEventListener(u[f],b,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),f+=2}else{const y=c[d=u[f+1]];u[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&vn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Ki(o[3])){u!==o[3]&&Lw(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Ig(s,o,u){return function LT(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===Vt.None||d===Vt.Emulated)return null}return xr(c,u)}(s,o.parent,u)}function ys(s,o,u,c,d){vn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function W_(s,o,u){vn(s)?s.appendChild(o,u):o.appendChild(u)}function Vw(s,o,u,c,d){null!==c?ys(s,o,u,c,d):W_(s,o,u)}function _f(s,o){return vn(s)?s.parentNode(o):o.parentNode}let q_=function jw(s,o,u){return 40&s.type?xr(s,u):null};function bg(s,o,u,c){const d=Ig(s,c,o),f=o[11],E=function Bw(s,o,u){return q_(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)Vw(f,d,u[b],E,!1);else Vw(f,d,u,E,!1)}function bd(s,o){if(null!==o){const u=o.type;if(3&u)return xr(o,s);if(4&u)return K_(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return bd(s,c);{const d=s[o.index];return Ki(d)?K_(-1,d):pn(d)}}if(32&u)return vg(o,s)()||pn(s[o.index]);{const c=Hw(s,o);return null!==c?Array.isArray(c)?c[0]:bd(gf(s[16]),c):bd(s,o.next)}}return null}function Hw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function K_(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return bd(c,d)}return o[7]}function Y_(s,o,u,c,d,f,y){for(;null!=u;){const E=c[u.index],b=u.type;if(y&&0===o&&(E&&bi(pn(E),c),u.flags|=4),64!=(64&u.flags))if(8&b)Y_(s,o,u.child,c,d,f,!1),Ed(o,s,d,E,f);else if(32&b){const A=vg(u,c);let x;for(;x=A();)Ed(o,s,d,x,f);Ed(o,s,d,E,f)}else 16&b?k(s,o,c,u,d,f):Ed(o,s,d,E,f);u=y?u.projectionNext:u.next}}function Cg(s,o,u,c,d,f){Y_(u,c,s.firstChild,o,d,f,!1)}function k(s,o,u,c,d,f){const y=u[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Ed(o,s,d,b[A],f);else Y_(s,o,b,y[3],d,f,!0)}function zs(s,o,u){vn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function yf(s,o,u){vn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function cn(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const Q_="ng-template";function BT(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==cn(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Mr(s){return 4===s.type&&s.value!==Q_}function iR(s,o,u){return o===(4!==s.type||u?s.value:Q_)}function X_(s,o,u){let c=4;const d=s.attrs||[],f=function J_(s){for(let o=0;o<s.length;o++)if(hs(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!iR(s,b,u)||""===b&&1===o.length){if(fe(c))return!1;y=!0}}else{const A=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!BT(s.attrs,A,u)){if(fe(c))return!1;y=!0}continue}const U=jT(8&c?"class":b,d,Mr(s),u);if(-1===U){if(fe(c))return!1;y=!0;continue}if(""!==A){let W;W=U>f?"":d[U+1].toLowerCase();const Q=8&c?W:null;if(Q&&-1!==cn(Q,A,0)||2&c&&A!==W){if(fe(c))return!1;y=!0}}}}else{if(!y&&!fe(c)&&!fe(b))return!1;if(y&&fe(b))continue;y=!1,c=b|1&c}}return fe(c)||y}function fe(s){return 0==(1&s)}function jT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function Ft(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function fa(s,o,u=!1){for(let c=0;c<o.length;c++)if(X_(s,o[c],u))return!0;return!1}function Dg(s,o){return s?":not("+o.trim()+")":o}function vf(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!fe(y)&&(o+=Dg(f,d),d=""),c=y,f=f||!fe(c);u++}return""!==d&&(o+=Dg(f,d)),o}const Ut={};function Ww(s){qw(Bt(),De(),Kr()+s,Qo())}function qw(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Ll(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Pu(o,f,0,u)}Vs(u)}function ay(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];Ml(d),y.contentQueries(2,o[f],f)}}}function Ad(s,o,u,c,d,f,y,E,b,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|c,Zi(x),x[3]=x[15]=s,x[8]=u,x[10]=y||s&&s[10],x[11]=E||s&&s[11],x[12]=b||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=f,x[16]=2==o.type?s[16]:x,x}function zu(s,o,u,c,d){let f=s.data[o];if(null===f)f=function Og(s,o,u,c,d){const f=Ru(),y=Al(),b=s.data[o]=function YT(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,u,c,d),function qh(){return vt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const y=function Fs(){const s=vt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return ki(f,!0),f}function xd(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function ac(s,o,u){Ba(o);try{const c=s.viewQuery;null!==c&&Wg(1,c,u);const d=s.template;null!==d&&Gr(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ay(s,o),s.staticViewQueries&&Wg(2,s.viewQuery,u);const f=s.components;null!==f&&function oE(s,o){for(let u=0;u<o.length;u++)hy(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,co()}}function Ku(s,o,u,c){const d=o[2];if(256==(256&d))return;Ba(o);const f=Qo();try{Zi(o),function Jo(s){return vt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Gr(s,o,u,2,c);const y=3==(3&d);if(!f)if(y){const A=s.preOrderCheckHooks;null!==A&&Ll(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Pu(o,A,0,null),ir(o,0)}if(function mE(s){for(let o=mf(s);null!==o;o=Eg(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&cs(f,1),d[2]|=1024}}}(o),function gE(s){for(let o=mf(s);null!==o;o=Eg(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];ao(c)&&Ku(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&ay(s,o),!f)if(y){const A=s.contentCheckHooks;null!==A&&Ll(o,A)}else{const A=s.contentHooks;null!==A&&Pu(o,A,1),ir(o,1)}!function sE(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Vs(~d);else{const f=d,y=u[++c],E=u[++c];nd(y,f),E(2,o[f])}}}finally{Vs(-1)}}(s,o);const E=s.components;null!==E&&function ZT(s,o){for(let u=0;u<o.length;u++)Tf(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&Wg(2,b,c),!f)if(y){const A=s.viewCheckHooks;null!==A&&Ll(o,A)}else{const A=s.viewHooks;null!==A&&Pu(o,A,2),ir(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,cs(o[3],-1))}finally{co()}}function uy(s,o,u,c){const d=o[10],f=!Qo(),y=ls(o);try{f&&!y&&d.begin&&d.begin(),y&&ac(s,o,c),Ku(s,o,u,c)}finally{f&&!y&&d.end&&d.end()}}function Gr(s,o,u,c,d){const f=Kr(),y=2&c;try{Vs(-1),y&&o.length>20&&qw(s,o,20,Qo()),u(c,d)}finally{Vs(f)}}function Rd(s,o,u){!Yo()||(function tD(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||In(u,o),bi(c,o);const y=u.initialInputs;for(let E=d;E<f;E++){const b=s.data[E],A=Mi(b);A&&pE(o,u,b);const x=sa(o,s,E,u);bi(x,o),null!==y&&Cf(0,E-d,x,b,0,y),A&&(zr(u.index,o)[8]=x)}}(s,o,u,xr(u,o)),128==(128&u.flags)&&function Pd(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function Va(){return vt.lFrame.currentDirectiveIndex}();try{Vs(y);for(let b=c;b<d;b++){const A=s.data[b],x=o[b];Rl(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&hE(A,x)}}finally{Vs(-1),Rl(E)}}(s,o,u))}function If(s,o,u=xr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function aE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Lg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Lg(s,o,u,c,d,f,y,E,b,A){const x=20+c,U=x+d,W=function uE(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ut);return u}(x,U),Q="function"==typeof A?A():A;return W[1]={type:s,blueprint:W,template:u,queries:null,viewQuery:E,declTNode:o,data:W.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function Ug(s,o,u,c){const d=kd(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&my(s).push(c,d.length-1))}function Vg(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function Ci(s,o,u,c,d,f,y,E){const b=xr(o,u);let x,A=o.inputs;!E&&null!=A&&(x=A[c])?(Yu(s,u,x,c,d),Bo(o)&&function ly(s,o){const u=zr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function QT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,vn(f)?f.setProperty(b,c,d):li(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}function Bg(s,o,u,c){let d=!1;if(Yo()){const f=function nD(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];fa(u,y.selectors,!1)&&(d||(d=[]),fo(In(u,o),s,y.type),Mi(y)?(Zu(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==f){d=!0,dy(u,s.data.length,f.length);for(let x=0;x<f.length;x++){const U=f[x];U.providersResolver&&U.providersResolver(U)}let E=!1,b=!1,A=xd(s,o,f.length,null);for(let x=0;x<f.length;x++){const U=f[x];u.mergedAttrs=fr(u.mergedAttrs,U.hostAttrs),Nd(s,u,o,A,U),jg(A,U,y),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const W=U.type.prototype;!E&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!b&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),A++}!function cE(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,b=null;for(let A=o.directiveStart;A<c;A++){const x=d[A],U=x.inputs,W=null===f||Mr(o)?null:Hg(U,f);y.push(W),E=Vg(U,A,E),b=Vg(x.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=b}(s,u)}y&&function fE(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new Le(-301,!1);c.push(o[d],f)}}}(u,c,y)}return u.mergedAttrs=fr(u.mergedAttrs,u.attrs),d}function bf(s,o,u,c,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function eD(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=b&&E.push(b),E.push(c,d,y)}}function hE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Zu(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function jg(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Mi(o)&&(u[""]=s)}}function dy(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Nd(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=yi(d.type)),y=new Nu(f,Mi(d),null);s.blueprint[c]=y,u[c]=y,bf(s,o,0,c,xd(s,u,d.hostVars,Ut),d)}function pE(s,o,u){const c=xr(o,s),d=aE(u),f=s[10],y=uc(s,Ad(s,d,null,u.onPush?64:16,c,o,f,f.createRenderer(c,u),null,null));s[o.index]=y}function Qn(s,o,u,c,d,f){const y=xr(s,o);!function $g(s,o,u,c,d,f,y){if(null==f)vn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?me(f):y(f,c||"",d);vn(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,f,s.value,u,c,d)}function Cf(s,o,u,c,d,f){const y=f[o];if(null!==y){const E=c.setInput;for(let b=0;b<y.length;){const A=y[b++],x=y[b++],U=y[b++];null!==E?c.setInput(u,U,A,x):u[x]=U}}}function Hg(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Gg(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Tf(s,o){const u=zr(o,s);if(ao(u)){const c=u[1];80&u[2]?Ku(c,u,c.template,u[8]):u[5]>0&&Df(u)}}function Df(s){for(let c=mf(s);null!==c;c=Eg(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const y=f[1];Ku(y,f,y.template,f[8])}else f[5]>0&&Df(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=zr(u[c],s);ao(d)&&d[5]>0&&Df(d)}}function hy(s,o){const u=zr(o,s),c=u[1];(function fy(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),ac(c,u,u[8])}function uc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function lc(s){for(;s;){s[2]|=64;const o=gf(s);if(Cl(s)&&!o)return s;s=o}return null}function Sf(s,o,u){const c=o[10];c.begin&&c.begin();try{Ku(s,o,s.template,u)}catch(d){throw Od(o,d),d}finally{c.end&&c.end()}}function Af(s){!function py(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=O_(u),d=c[1];uy(d,c,d.template,u)}}(s[8])}function Wg(s,o,u){Ml(0),o(s,u)}const sD=(()=>Promise.resolve(null))();function kd(s){return s[7]||(s[7]=[])}function my(s){return s.cleanup||(s.cleanup=[])}function Od(s,o){const u=s[9],c=u?u.get(yg,null):null;c&&c.handleError(o)}function Yu(s,o,u,c,d){for(let f=0;f<u.length;){const y=u[f++],E=u[f++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,d,c,E):b[E]=d}}function Ao(s,o,u){const c=function Ls(s,o){return pn(o[s])}(o,s);!function V_(s,o,u){vn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function qg(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=ge(d,E):2==f&&(c=ge(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const tu=new On("INJECTOR",-1);class yy{get(o,u=vo){if(u===vo){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const vy=new On("Set Injector scope."),xo={},nu={};let Fd;function Rf(){return void 0===Fd&&(Fd=new yy),Fd}function Mf(s,o=null,u=null,c){const d=wy(s,o,u,c);return d._resolveInjectorDefTypes(),d}function wy(s,o=null,u=null,c){return new Xn(s,u,o||Rf(),c)}class Xn{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&Ji(u,E=>this.processProvider(E,o,u)),Ji([o],E=>this.processInjectorType(E,[],f)),this.records.set(tu,ma(void 0,this));const y=this.records.get(vy);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=vo,c=dt.Default){this.assertNotDestroyed();const d=Pe(this),f=an(void 0);try{if(!(c&dt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function Qu(s){return"function"==typeof s||"object"==typeof s&&s instanceof On}(o)&&Sn(o);E=b&&this.injectableDefInScope(b)?ma(Ud(o),xo):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&dt.Self?Rf():this.parent).get(o,u=c&dt.Optional&&u===vo?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Za]=y[Za]||[]).unshift(ue(o)),d)throw y;return function Ya(s,o,u,c){const d=s[Za];throw o[B]&&d.unshift(o[B]),s.message=function qs(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Za]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{an(f),Pe(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(o,u,c){if(!(o=te(o)))return!1;let d=Hi(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==c.indexOf(y);if(void 0!==f&&(d=Hi(f)),null==d)return!1;if(null!=d.imports&&!E){let x;c.push(y);try{Ji(d.imports,U=>{this.processInjectorType(U,u,c)&&(void 0===x&&(x=[]),x.push(U))})}finally{}if(void 0!==x)for(let U=0;U<x.length;U++){const{ngModule:W,providers:Q}=x[U];Ji(Q,we=>this.processProvider(we,W,Q||_t))}}this.injectorDefTypes.add(y);const b=yi(y)||(()=>new y);this.records.set(y,ma(b,xo));const A=d.providers;if(null!=A&&!E){const x=o;Ji(A,U=>this.processProvider(U,x,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,c){let d=Bd(o=te(o))?o:te(o&&o.provide);const f=function aD(s,o,u){return wE(s)?ma(void 0,s.useValue):ma(function Vd(s,o,u){let c;if(Bd(s)){const d=te(s);return yi(d)||Ud(d)}if(wE(s))c=()=>te(s.useValue);else if(function uD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...At(s.deps||[]));else if(function EE(s){return!(!s||!s.useExisting)}(s))c=()=>it(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function cD(s){return!!s.deps}(s))return yi(d)||Ud(d);c=()=>new d(...At(s.deps))}return c}(s),xo)}(o);if(Bd(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=ma(void 0,xo,!0),y.factory=()=>At(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===xo&&(u.value=nu,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Pf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=te(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Ud(s){const o=Sn(s),u=null!==o?o.factory:yi(s);if(null!==u)return u;if(s instanceof On)throw new Le(204,!1);if(s instanceof Function)return function oD(s){const o=s.length;if(o>0)throw function di(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Le(204,!1);const u=function Tr(s){const o=s&&(s[_i]||s[Sr]);if(o){const u=function Dr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Le(204,!1)}function ma(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function wE(s){return null!==s&&"object"==typeof s&&X in s}function Bd(s){return"function"==typeof s}let Ro=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return Mf({name:""},c,u,"");{const f=null!==(d=u.name)&&void 0!==d?d:"";return Mf({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=vo,s.NULL=new yy,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>it(tu)}),s.__NG_ELEMENT_ID__=-1,s})();function hD(s,o){ja(O_(s)[1],wn())}let $d=null;function _a(){if(!$d){const s=Wt.Symbol;if(s&&s.iterator)$d=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&($d=c)}}}return $d}function dc(s){return!!kf(s)&&(Array.isArray(s)||!(s instanceof Map)&&_a()in s)}function kf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function pi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Ff(s,o,u,c){const d=De();return pi(d,ea(),o)&&(Bt(),Qn(Hn(),d,s,o,u,c)),Ff}function hc(s,o,u,c){return pi(s,ea(),u)?o+me(u)+c:Ut}function jE(s,o,u,c,d,f,y,E){const b=De(),A=Bt(),x=s+20,U=A.firstCreatePass?function pD(s,o,u,c,d,f,y,E,b){const A=o.consts,x=zu(o,s,4,y||null,Ni(A,E));Bg(o,u,x,Ni(A,b)),ja(o,x);const U=x.tViews=Lg(2,x,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),U.queries=o.queries.embeddedTView(x)),x}(x,A,b,o,u,c,d,f,y):A.data[x];ki(U,!1);const W=b[11].createComment("");bg(A,b,W,U),bi(W,b),uc(b,b[x]=Gg(W,b,W,U)),jo(U)&&Rd(A,b,U),null!=y&&If(b,U,E)}function HE(s){return function vi(s,o){return s[o]}(function xl(){return vt.lFrame.contextLView}(),20+s)}function pr(s,o=dt.Default){const u=De();return null===u?it(s,o):po(wn(),u,te(s),o)}function Ec(){throw new Error("invalid")}function Py(s,o,u){const c=De();return pi(c,ea(),o)&&Ci(Bt(),Hn(),c,s,o,c[11],u,!1),Py}function Ir(s,o,u,c,d){const y=d?"class":"style";Yu(s,u,o.inputs[y],y,c)}function Po(s,o,u,c){const d=De(),f=Bt(),y=20+s,E=d[11],b=d[y]=B_(E,o,function id(){return vt.lFrame.currentNamespace}()),A=f.firstCreatePass?function bD(s,o,u,c,d,f,y){const E=o.consts,A=zu(o,s,2,d,Ni(E,f));return Bg(o,u,A,Ni(E,y)),null!==A.attrs&&qg(A,A.attrs,!1),null!==A.mergedAttrs&&qg(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,u,c):f.data[y];ki(A,!0);const x=A.mergedAttrs;null!==x&&gt(E,b,x);const U=A.classes;null!==U&&yf(E,b,U);const W=A.styles;return null!==W&&zs(E,b,W),64!=(64&A.flags)&&bg(f,d,b,A),0===function ed(){return vt.lFrame.elementDepthCount}()&&bi(b,d),function Zo(){vt.lFrame.elementDepthCount++}(),jo(A)&&(Rd(f,d,A),function ei(s,o,u){if(bu(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}(f,A,d)),null!==c&&If(d,A),Po}function Gn(){let s=wn();Al()?function Ua(){vt.lFrame.isParent=!1}():(s=s.parent,ki(s,!1));const o=s;!function td(){vt.lFrame.elementDepthCount--}();const u=Bt();return u.firstCreatePass&&(ja(u,s),bu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Qh(s){return 0!=(16&s.flags)}(o)&&Ir(u,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function w_(s){return 0!=(32&s.flags)}(o)&&Ir(u,o,De(),o.stylesWithoutHost,!1),Gn}function au(s,o,u,c){return Po(s,o,u,c),Gn(),au}function Ju(){return De()}function bc(s){return!!s&&"function"==typeof s.then}function ky(s){return!!s&&"function"==typeof s.subscribe}const We=ky;function nm(s,o,u,c){const d=De(),f=Bt(),y=wn();return function No(s,o,u,c,d,f,y,E){const b=jo(c),x=s.firstCreatePass&&my(s),U=o[8],W=kd(o);let Q=!0;if(3&c.type||E){const ze=xr(c,o),st=E?E(ze):ze,Se=W.length,Et=E?pt=>E(pn(pt[c.index])):c.index;if(vn(u)){let pt=null;if(!E&&b&&(pt=function Cc(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===c){const E=o[7],b=d[f+2];return E.length>b?E[b]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,c.index)),null!==pt)(pt.__ngLastListenerFn__||pt).__ngNextListenerFn__=f,pt.__ngLastListenerFn__=f,Q=!1;else{f=va(c,o,U,f,!1);const bn=u.listen(st,d,f);W.push(f,bn),x&&x.push(d,Et,Se,Se+1)}}else f=va(c,o,U,f,!0),st.addEventListener(d,f,y),W.push(f),x&&x.push(d,Et,Se,y)}else f=va(c,o,U,f,!1);const we=c.outputs;let Ve;if(Q&&null!==we&&(Ve=we[d])){const ze=Ve.length;if(ze)for(let st=0;st<ze;st+=2){const Js=o[Ve[st]][Ve[st+1]].subscribe(f),Un=W.length;W.push(f,Js),x&&x.push(d,c.index,Un,-(Un+1))}}}(f,d,d[11],y,s,o,!!u,c),nm}function qd(s,o,u,c){try{return!1!==u(c)}catch(d){return Od(s,d),!1}}function va(s,o,u,c,d){return function f(y){if(y===Function)return c;const E=2&s.flags?zr(s.index,o):o;0==(32&o[2])&&lc(E);let b=qd(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)b=qd(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function $f(s,o,u){return Dc(s,"",o,"",u),$f}function Dc(s,o,u,c,d){const f=De(),y=hc(f,o,u,c);return y!==Ut&&Ci(Bt(),Hn(),f,s,y,f[11],d,!1),Dc}function Ac(s,o=""){const u=De(),c=Bt(),d=s+20,f=c.firstCreatePass?zu(c,d,1,o,null):c.data[d],y=u[d]=function U_(s,o){return vn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);bg(c,u,y,f),ki(f,!1)}function ns(s){return am("",s,""),ns}function am(s,o,u){const c=De(),d=hc(c,s,o,u);return d!==Ut&&Ao(c,Kr(),d),am}const rl=void 0;var tv=["en",[["a","p"],["AM","PM"],rl],[["AM","PM"],rl,rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rl,"{1} 'at' {0}",rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xf(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ih={};function nn(s){const o=function mi(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=lu(o);if(u)return u;const c=o.split("-")[0];if(u=lu(c),u)return u;if("en"===c)return tv;throw new Error(`Missing locale data for the locale "${s}".`)}function nv(s){return nn(s)[wt.PluralCase]}function lu(s){return s in ih||(ih[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),ih[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const cu="en-US";let _I=cu;class _v{}class Pc{resolveComponentFactory(o){throw function nS(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ba=(()=>{class s{}return s.NULL=new Pc,s})();function hh(){return Ca(wn(),De())}function Ca(s,o){return new fh(xr(s,o))}let fh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=hh,s})();function wv(s){return s instanceof fh?s.nativeElement:s}class Ev{}let rS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function GI(){const s=De(),u=zr(wn().index,s);return function HI(s){return s[11]}(oi(u)?u:s)}(),s})(),Iv=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class ph{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const sl=new ph("13.3.5"),bv={};function ap(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(pn(f)),Ki(f))for(let E=10;E<f.length;E++){const b=f[E],A=b[1].firstChild;null!==A&&ap(b[1],b,A,c)}const y=u.type;if(8&y)ap(s,o,u.child,c);else if(32&y){const E=vg(u,o);let b;for(;b=E();)c.push(b)}else if(16&y){const E=Hw(o,u);if(Array.isArray(E))c.push(...E);else{const b=gf(o[16]);ap(b[1],b,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class up{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return ap(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ki(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&($_(o,c),_o(u,c))}this._attachedToViewContainer=!1}H_(this._lView[1],this._lView)}onDestroy(o){Ug(this._lView[1],this._lView,null,o)}markForCheck(){lc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Sf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function gy(s,o,u){Xo(!0);try{Sf(s,o,u)}finally{Xo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ow(s,o){Cg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=o}}class iS extends up{constructor(o){super(o),this._view=o}detectChanges(){Af(this._view)}checkNoChanges(){!function yE(s){Xo(!0);try{Af(s)}finally{Xo(!1)}}(this._view)}get context(){return null}}class WI extends ba{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Ke(o);return new wm(u,this.ngModule)}}function gh(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class wm extends _v{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function $T(s){return s.map(vf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return gh(this.componentDef.inputs)}get outputs(){return gh(this.componentDef.outputs)}create(o,u,c,d){const f=(d=d||this.ngModule)?function Nc(s,o){return{get:(u,c,d)=>{const f=s.get(u,bv,d);return f!==bv||c===bv?f:o.get(u,c,d)}}}(o,d.injector):o,y=f.get(Ev,so),E=f.get(Iv,null),b=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=c?function Fg(s,o,u){if(vn(s))return s.selectRootElement(o,u===Vt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):B_(y.createRenderer(null,this.componentDef),A,function ol(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),U=this.componentDef.onPush?576:528,W=function Ty(s,o){return{components:[],scheduler:s||xT,clean:sD,playerHandler:o||null,flags:0}}(),Q=Lg(0,null,null,1,0,null,null,null,null,null),we=Ad(null,Q,W,U,null,null,y,b,E,f);let Ve,ze;Ba(we);try{const st=function RE(s,o,u,c,d,f){const y=u[1];u[20]=s;const b=zu(y,20,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(qg(b,A,!0),null!==s&&(gt(d,s,A),null!==b.classes&&yf(d,s,b.classes),null!==b.styles&&zs(d,s,b.styles)));const x=c.createRenderer(s,o),U=Ad(u,aE(o),null,o.onPush?64:16,u[20],b,c,x,f||null,null);return y.firstCreatePass&&(fo(In(b,u),y,o.type),Zu(y,b),dy(b,u.length,1)),uc(u,U),u[20]=U}(x,this.componentDef,we,y,b);if(x)if(c)gt(b,x,["ng-version",sl.full]);else{const{attrs:Se,classes:Et}=function ey(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!fe(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Se&&gt(b,x,Se),Et&&Et.length>0&&yf(b,x,Et.join(" "))}if(ze=xu(Q,20),void 0!==u){const Se=ze.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const pt=u[Et];Se.push(null!=pt?Array.from(pt):null)}}Ve=function wr(s,o,u,c,d){const f=u[1],y=function dE(s,o,u){const c=wn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Nd(s,c,o,xd(s,o,1,null),u));const d=sa(o,s,c.directiveStart,c);bi(d,o);const f=xr(c,o);return f&&bi(f,o),d}(f,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(b=>b(y,o)),o.contentQueries){const b=wn();o.contentQueries(1,y,b.directiveStart)}const E=wn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Vs(E.index),bf(u[1],E,0,E.directiveStart,E.directiveEnd,o),hE(o,y)),y}(st,this.componentDef,we,W,[hD]),ac(Q,we,null)}finally{co()}return new Cv(this.componentType,Ve,Ca(ze,we),we,ze)}}class Cv extends class il{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new iS(d),this.componentType=o}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class _h{}class Tv{}const Ta=new Map;class Em extends _h{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new WI(this);const c=St(o);this._bootstrapComponents=Do(c.bootstrap),this._r3Injector=wy(o,u,[{provide:_h,useValue:this},{provide:ba,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Ro.THROW_IF_NOT_FOUND,c=dt.Default){return o===Ro||o===_h||o===tu?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Im extends Tv{constructor(o){super(),this.moduleType=o,null!==St(o)&&function qI(s){const o=new Set;!function u(c){const d=St(c,!0),f=d.id;null!==f&&(function lp(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(f,Ta.get(f),c),Ta.set(f,c));const y=Do(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new Em(this.moduleType,o)}}function bm(s){return o=>{setTimeout(s,void 0,o)}}const Xs=class lS extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,f,y;let E=o,b=u||(()=>null),A=c;if(o&&"object"==typeof o){const U=o;E=null===(d=U.next)||void 0===d?void 0:d.bind(U),b=null===(f=U.error)||void 0===f?void 0:f.bind(U),A=null===(y=U.complete)||void 0===y?void 0:y.bind(U)}this.__isAsync&&(b=bm(b),E&&(E=bm(E)),A&&(A=bm(A)));const x=super.subscribe({next:E,error:b,complete:A});return o instanceof G.w0&&o.add(x),x}};function Rv(){return this._results[_a()]()}class Fc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=_a(),c=Fc.prototype;c[u]||(c[u]=Rv)}get changes(){return this._changes||(this._changes=new Xs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Hr(o);(this._changesDetected=!function Fu(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ll=(()=>{class s{}return s.__NG_ELEMENT_ID__=Pv,s})();const Mv=ll,cS=class extends Mv{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Ad(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),ac(u,c,o),new up(c)}};function Pv(){return hp(wn(),De())}function hp(s,o){return 4&s.type?new cS(o,s,Ca(s,o)):null}let Cm=(()=>{class s{}return s.__NG_ELEMENT_ID__=nb,s})();function nb(){return sb(wn(),De())}const rb=Cm,Tm=class extends rb{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Ca(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){const o=Zr(this._hostTNode,this._hostLView);if(Kn(o)){const u=js(o,this._hostLView),c=Bs(o);return new ps(u[1].data[c+8],u)}return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=ib(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,f){const y=o&&!function Lu(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const U=u||{};E=U.index,c=U.injector,d=U.projectableNodes,f=U.ngModuleRef}const b=y?o:new wm(Ke(o)),A=c||this.parentInjector;if(!f&&null==b.ngModule){const W=(y?A:this.parentInjector).get(_h,null);W&&(f=W)}const x=b.create(A,d,void 0,f);return this.insert(x.hostView,E),x}insert(o,u){const c=o._lView,d=c[1];if(function Ko(s){return Ki(s[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const U=c[3],W=new Tm(U,U[6],U[3]);W.detach(W.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function j_(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],za(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Id(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,f);const E=K_(f,y),b=c[11],A=_f(b,y[7]);return null!==A&&function OT(s,o,u,c,d,f){c[0]=d,c[6]=o,Cg(s,c,u,1,d,f)}(d,y[6],b,c,A,E),o.attachToViewContainerRef(),za(Dm(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=ib(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=$_(this._lContainer,u);c&&(_o(Dm(this._lContainer),u),H_(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=$_(this._lContainer,u);return c&&null!=_o(Dm(this._lContainer),u)?new up(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function ib(s){return s[8]}function Dm(s){return s[8]||(s[8]=[])}function sb(s,o){let u;const c=o[s.index];if(Ki(c))u=c;else{let d;if(8&s.type)d=pn(c);else{const f=o[11];d=f.createComment("");const y=xr(s,o);ys(f,_f(f,y),d,function UT(s,o){return vn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=u=Gg(c,o,d,s),uc(o,u)}return new Tm(u,s,o)}class cl{constructor(o){this.queryList=o,this.matches=null}clone(){return new cl(this.queryList)}setDirty(){this.queryList.setDirty()}}class pp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new pp(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==hb(o,u).matches&&this.queries[u].setDirty()}}class gp{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Sm{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Sm(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Am{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Am(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,ab(u,f)),this.matchTNodeWithReadOption(o,u,Gs(u,o,f,!1,!1))}else c===ll?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Gs(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===fh||d===Cm||d===ll&&4&u.type)this.addMatch(u.index,-2);else{const f=Gs(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ab(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Nv(s,o,u,c){return-1===u?function hS(s,o){return 11&s.type?Ca(s,o):4&s.type?hp(s,o):null}(o,s):-2===u?function fS(s,o,u){return u===fh?Ca(o,s):u===ll?hp(o,s):u===Cm?sb(o,s):void 0}(s,o,c):sa(s,s[1],u,o)}function xm(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,y=u.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:Nv(o,f[A],y[b+1],u.metadata.read))}d.matches=E}return d.matches}function kv(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=xm(s,o,d,u);for(let E=0;E<f.length;E+=2){const b=f[E];if(b>0)c.push(y[E/2]);else{const A=f[E+1],x=o[-b];for(let U=10;U<x.length;U++){const W=x[U];W[17]===W[3]&&kv(W[1],W,A,c)}if(null!==x[9]){const U=x[9];for(let W=0;W<U.length;W++){const Q=U[W];kv(Q[1],Q,A,c)}}}}}return c}function ub(s){const o=De(),u=Bt(),c=zh();Ml(c+1);const d=hb(u,c);if(s.dirty&&ls(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?kv(u,o,c,[]):xm(u,o,d,c);s.reset(f,wv),s.notifyOnChanges()}return!0}return!1}function qr(s,o,u,c){const d=Bt();if(d.firstCreatePass){const f=wn();(function db(s,o,u){null===s.queries&&(s.queries=new Sm),s.queries.track(new Am(o,u))})(d,new gp(o,u,c),f.index),function gS(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function cb(s,o,u){const c=new Fc(4==(4&u));Ug(s,o,c,c.destroy),null===o[19]&&(o[19]=new pp),o[19].queries.push(new cl(c))}(d,De(),u)}function lb(){return function pS(s,o){return s[19].queries[o].queryList}(De(),zh())}function hb(s,o){return s.queries.getByIndex(o)}function Vm(...s){}const Db=new On("Application Initializer");let wp=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Vm,this.reject=Vm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(bc(f))u.push(f);else if(We(f)){const y=new Promise((E,b)=>{f.subscribe({complete:E,error:b})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(it(Db,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Sb=new On("AppId",{providedIn:"root",factory:function Bm(){return`${Ep()}${Ep()}${Ep()}`}});function Ep(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jm=new On("Platform Initializer"),Yv=new On("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bc=new On("appBootstrapListener");let Qv=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const fl=new On("LocaleId",{providedIn:"root",factory:()=>Ht(fl,dt.Optional|dt.SkipSelf)||function Th(){return"undefined"!=typeof $localize&&$localize.locale||cu}()}),Ab=new On("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xv{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Jv=(()=>{class s{compileModuleSync(u){return new Im(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=Do(St(u).declarations).reduce((y,E)=>{const b=Ke(E);return b&&y.push(new wm(b)),y},[]);return new Xv(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const IS=(()=>Promise.resolve(0))();function t0(s){"undefined"==typeof Zone?IS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class bs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xs(!1),this.onMicrotaskEmpty=new Xs(!1),this.onStable=new Xs(!1),this.onError=new Xs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function n0(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Rb(s){const o=()=>{!function CS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Hm(s),s.isCheckStableRunning=!0,$m(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Hm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,y,E)=>{try{return r0(s),u.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),s0(s)}},onInvoke:(u,c,d,f,y,E,b)=>{try{return r0(s),u.invoke(d,f,y,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),s0(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Hm(s),$m(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,bS,Vm,Vm);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const bS={};function $m(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Hm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function r0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function s0(s){s._nesting--,$m(s)}class TS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xs,this.onMicrotaskEmpty=new Xs,this.onStable=new Xs,this.onError=new Xs}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let Mb=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bs.assertNotInAngularZone(),t0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())t0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(it(bs))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),DS=(()=>{class s{constructor(){this._applications=new Map,bp.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return bp.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class SS{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function o0(s){bp=s}let bp=new SS,hu=null;const Pb=new On("AllowMultipleToken"),Gm=new On("PlatformOnDestroy");class a0{constructor(o,u){this.name=o,this.token=u}}function Lb(s,o,u=[]){const c=`Platform: ${o}`,d=new On(c);return(f=[])=>{let y=l0();if(!y||y.injector.get(Pb,!1)){const E=[...u,...f,{provide:d,useValue:!0}];s?s(E):function Ob(s){if(hu&&!hu.get(Pb,!1))throw new Le(400,"");hu=s;const o=s.get(Wm),u=s.get(jm,null);u&&u.forEach(c=>c())}(function xS(s=[],o){return Ro.create({name:o,providers:[{provide:vy,useValue:"platform"},{provide:Gm,useValue:()=>hu=null},...s]})}(E,c))}return function u0(s){const o=l0();if(!o)throw new Le(401,"");return o}()}}function l0(){var s;return null!==(s=null==hu?void 0:hu.get(Wm))&&void 0!==s?s:null}let Wm=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function RS(s,o){let u;return u="noop"===s?new TS:("zone.js"===s?void 0:s)||new bs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:bs,useValue:E}];return E.run(()=>{const A=Ro.create({providers:b,parent:this.injector,name:u.moduleType.name}),x=u.create(A),U=x.injector.get(yg,null);if(!U)throw new Le(402,"");return E.runOutsideAngular(()=>{const W=E.onError.subscribe({next:Q=>{U.handleError(Q)}});x.onDestroy(()=>{pl(this._modules,x),W.unsubscribe()})}),function c0(s,o,u){try{const c=u();return bc(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(U,E,()=>{const W=x.injector.get(wp);return W.runInitializers(),W.donePromise.then(()=>(function LD(s){on(s,"Expected localeId to be defined"),"string"==typeof s&&(_I=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(fl,cu)||cu),this._moduleDoBootstrap(x),x))})})}bootstrapModule(u,c=[]){const d=qm({},c);return function AS(s,o,u){const c=new Im(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(Cp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Le(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Gm,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(it(Ro))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function qm(s,o){return Array.isArray(o)?o.reduce(qm,s):Object.assign(Object.assign({},s),o)}let Cp=(()=>{class s{constructor(u,c,d,f){this._zone=u,this._injector=c,this._exceptionHandler=d,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new N.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new N.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{bs.assertNotInAngularZone(),t0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{bs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ie.T)(y,E.pipe((0,ne.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Le(405,"");let d;d=u instanceof _v?u:this._injector.get(ba).resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function kb(s){return s.isBoundToModule}(d)?void 0:this._injector.get(_h),E=d.create(Ro.NULL,[],c||d.selector,f),b=E.location.nativeElement,A=E.injector.get(Mb,null),x=A&&E.injector.get(DS);return A&&x&&x.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),pl(this.components,E),x&&x.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;pl(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Bc,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(it(bs),it(Ro),it(yg),it(wp))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function pl(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Ub=!0,zm=!1;function fu(){return zm=!0,Ub}function f0(){if(zm)throw new Error("Cannot enable prod mode after platform setup.");Ub=!1}let MS=(()=>{class s{}return s.__NG_ELEMENT_ID__=p0,s})();function p0(s){return function PS(s,o,u){if(Bo(s)&&!u){const c=zr(s.index,o);return new up(c,c)}return 47&s.type?new up(o[16],o):null}(wn(),De(),16==(16&s))}class Zb{constructor(){}supports(o){return dc(o)}create(o){return new LS(o)}}const OS=(s,o)=>o;class LS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||OS}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<y0(c,d,f)?u:c,E=y0(y,d,f),b=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,x=b-d;if(A!=x){for(let W=0;W<A;W++){const Q=W<f.length?f[W]:f[W]=0,we=Q+W;x<=we&&we<A&&(f[W]=Q+1)}f[y.previousIndex]=x-A}}E!==b&&o(y,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!dc(o))throw new Le(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,E),c=!0),u=u._next}else d=0,function UE(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[_a()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new FS(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Zm),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zm),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class FS{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Zm{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Yb,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function y0(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Ym{constructor(){}supports(o){return o instanceof Map||kf(o)}create(){return new v0}}class v0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||kf(o)))throw new Le(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new w0(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class w0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ap(){return new xp([new Zb])}let xp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ap()),deps:[[s,new wo,new hi]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Le(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Ap}),s})();function Qm(){return new Xm([new Ym])}let Xm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Qm()),deps:[[s,new wo,new hi]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new Le(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Qm}),s})();const VS=Lb(null,"core",[]);let BS=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(it(Cp))},s.\u0275mod=O({type:s}),s.\u0275inj=Jt({}),s})()},3942:(ct,Te,L)=>{L.d(Te,{Z:()=>Le});var _=L(2090),G=L(4859),N=L(9681),ie=L(1877);class ne{constructor(me,Ie){this._delegate=me,this.firebase=Ie,(0,N._addComponent)(me,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(me,Ie=N._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(me);return!$e.isInitialized()&&"EXPLICIT"===(null===(et=$e.getComponent())||void 0===et?void 0:et.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Ie})}_removeServiceInstance(me,Ie=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Ie)}_addComponent(me){(0,N._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,N._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ge(){const Ue=function ue(Ue){const me={},Ie={__esModule:!0,initializeApp:function Re(ee,Xe={}){const Qe=N.initializeApp(ee,Xe);if((0,_.r3)(me,Qe.name))return me[Qe.name];const se=new Ue(Qe,Ie);return me[Qe.name]=se,se},app:$e,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ee(ee){const Xe=ee.name,Qe=Xe.replace("-compat","");if(N._registerComponent(ee)&&"PUBLIC"===ee.type){const se=(oe=$e())=>{if("function"!=typeof oe[Qe])throw ce.create("invalid-app-argument",{appName:Xe});return oe[Qe]()};void 0!==ee.serviceProps&&(0,_.ZB)(se,ee.serviceProps),Ie[Qe]=se,Ue.prototype[Qe]=function(...oe){return this._getService.bind(this,Xe).apply(this,ee.multipleInstances?oe:[])}}return"PUBLIC"===ee.type?Ie[Qe]:null},removeApp:function et(ee){delete me[ee]},useAsService:function Ze(ee,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:N}};function $e(ee){if(!(0,_.r3)(me,ee=ee||N._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:ee});return me[ee]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Ae(){return Object.keys(me).map(ee=>me[ee])}}),$e.App=Ue,Ie}(ne);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function me(Ie){(0,_.ZB)(Ue,Ie)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Ue}(),q=new ie.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=z;!function Me(Ue){(0,N.registerVersion)("@firebase/app-compat","0.1.23",Ue)}()},9681:(ct,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>Yt,_addComponent:()=>lr,_addOrOverwriteComponent:()=>Mn,_apps:()=>He,_clearComponents:()=>Sn,_components:()=>Qt,_getProvider:()=>Kt,_registerComponent:()=>Xt,_removeServiceInstance:()=>Jt,deleteApp:()=>Gi,getApp:()=>yr,getApps:()=>Sr,initializeApp:()=>_i,onLog:()=>Vn,registerVersion:()=>Fr,setLogLevel:()=>an});var _=L(5861),G=L(4859),N=L(1877),ie=L(2090);class ne{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ye(Ge){const Ce=Ge.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(tt)){const ht=tt.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(tt=>tt).join(" ")}}const ce="@firebase/app",ge=new N.Yd("@firebase/app"),Yt="[DEFAULT]",on={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},He=new Map,Qt=new Map;function lr(Ge,Ce){try{Ge.container.addComponent(Ce)}catch(tt){ge.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ge.name}`,tt)}}function Mn(Ge,Ce){Ge.container.addOrOverwriteComponent(Ce)}function Xt(Ge){const Ce=Ge.name;if(Qt.has(Ce))return ge.debug(`There were multiple attempts to register component ${Ce}.`),!1;Qt.set(Ce,Ge);for(const tt of He.values())lr(tt,Ge);return!0}function Kt(Ge,Ce){const tt=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),Ge.container.getProvider(Ce)}function Jt(Ge,Ce,tt=Yt){Kt(Ge,Ce).clearInstance(tt)}function Sn(){Qt.clear()}const Tr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Dr{constructor(Ce,tt,ht){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Hi="9.7.0";function _i(Ge,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const tt=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},Ce),ht=tt.name;if("string"!=typeof ht||!ht)throw Tr.create("bad-app-name",{appName:String(ht)});const Nt=He.get(ht);if(Nt){if((0,ie.vZ)(Ge,Nt.options)&&(0,ie.vZ)(tt,Nt.config))return Nt;throw Tr.create("duplicate-app",{appName:ht})}const kt=new G.H0(ht);for(const j of Qt.values())kt.addComponent(j);const K=new Dr(Ge,tt,kt);return He.set(ht,K),K}function yr(Ge=Yt){const Ce=He.get(Ge);if(!Ce)throw Tr.create("no-app",{appName:Ge});return Ce}function Sr(){return Array.from(He.values())}function Gi(Ge){return dt.apply(this,arguments)}function dt(){return(dt=(0,_.Z)(function*(Ge){const Ce=Ge.name;He.has(Ce)&&(He.delete(Ce),yield Promise.all(Ge.container.getProviders().map(tt=>tt.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function Fr(Ge,Ce,tt){var ht;let Nt=null!==(ht=on[Ge])&&void 0!==ht?ht:Ge;tt&&(Nt+=`-${tt}`);const kt=Nt.match(/\s|\//),K=Ce.match(/\s|\//);if(kt||K){const j=[`Unable to register library "${Nt}" with version "${Ce}":`];return kt&&j.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),kt&&K&&j.push("and"),K&&j.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ge.warn(j.join(" "))}Xt(new G.wA(`${Nt}-version`,()=>({library:Nt,version:Ce}),"VERSION"))}function Vn(Ge,Ce){if(null!==Ge&&"function"!=typeof Ge)throw Tr.create("invalid-log-argument");(0,N.Am)(Ge,Ce)}function an(Ge){(0,N.Ub)(Ge)}const Pn="firebase-heartbeat-store";let Nn=null;function Ur(){return Nn||(Nn=(0,ie.X3)("firebase-heartbeat-database",1,(Ge,Ce)=>{0===Ce&&Ge.createObjectStore(Pn)}).catch(Ge=>{throw Tr.create("storage-open",{originalErrorMessage:Ge.message})})),Nn}function Vt(){return(Vt=(0,_.Z)(function*(Ge){try{return(yield Ur()).transaction(Pn).objectStore(Pn).get(si(Ge))}catch(Ce){throw Tr.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function lt(Ge,Ce){return rt.apply(this,arguments)}function rt(){return(rt=(0,_.Z)(function*(Ge,Ce){try{const ht=(yield Ur()).transaction(Pn,"readwrite");return yield ht.objectStore(Pn).put(Ce,si(Ge)),ht.complete}catch(tt){throw Tr.create("storage-set",{originalErrorMessage:tt.message})}})).apply(this,arguments)}function si(Ge){return`${Ge.name}!${Ge.options.appId}`}class qi{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new _t(tt),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var Ce=this;return(0,_.Z)(function*(){const ht=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=Bn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Ce._heartbeatsCache.heartbeats.some(kt=>kt.date===Nt))return Ce._heartbeatsCache.heartbeats.push({date:Nt,agent:ht}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(kt=>{const K=new Date(kt.date).valueOf();return Date.now()-K<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,_.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const tt=Bn(),{heartbeatsToSend:ht,unsentEntries:Nt}=function ln(Ge,Ce=1024){const tt=[];let ht=Ge.slice();for(const Nt of Ge){const kt=tt.find(K=>K.agent===Nt.agent);if(kt){if(kt.dates.push(Nt.date),jn(tt)>Ce){kt.dates.pop();break}}else if(tt.push({agent:Nt.agent,dates:[Nt.date]}),jn(tt)>Ce){tt.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:tt,unsentEntries:ht}}(Ce._heartbeatsCache.heartbeats),kt=(0,ie.L)(JSON.stringify({version:2,heartbeats:ht}));return Ce._heartbeatsCache.lastSentHeartbeatDate=tt,Nt.length>0?(Ce._heartbeatsCache.heartbeats=Nt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),kt})()}}function Bn(){return(new Date).toISOString().substring(0,10)}class _t{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,_.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Ms(Ge){return Vt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var tt=this;return(0,_.Z)(function*(){var ht;if(yield tt._canUseIndexedDBPromise){const kt=yield tt.read();return lt(tt.app,{lastSentHeartbeatDate:null!==(ht=Ce.lastSentHeartbeatDate)&&void 0!==ht?ht:kt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var tt=this;return(0,_.Z)(function*(){var ht;if(yield tt._canUseIndexedDBPromise){const kt=yield tt.read();return lt(tt.app,{lastSentHeartbeatDate:null!==(ht=Ce.lastSentHeartbeatDate)&&void 0!==ht?ht:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...Ce.heartbeats]})}})()}}function jn(Ge){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function qt(Ge){Xt(new G.wA("platform-logger",Ce=>new ne(Ce),"PRIVATE")),Xt(new G.wA("heartbeat",Ce=>new qi(Ce),"PRIVATE")),Fr(ce,"0.7.22",Ge),Fr(ce,"0.7.22","esm2017"),Fr("fire-js","")}("")},4859:(ct,Te,L)=>{L.d(Te,{H0:()=>ue,wA:()=>N,zt:()=>ne});var _=L(5861),G=L(2090);class N{constructor(z,q,te){this.name=z,this.instanceFactory=q,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ie="[DEFAULT]";class ne{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const te=new G.BH;if(this.instancesDeferred.set(q,te),this.isInitialized(q)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:q});qe&&te.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const te=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),qe=null!==(q=null==z?void 0:z.optional)&&void 0!==q&&q;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Me){if(qe)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ce(ge){return"EAGER"===ge.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(q){}for(const[q,te]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(q);try{const Me=this.getOrInitializeService({instanceIdentifier:qe});te.resolve(Me)}catch(Me){}}}}clearInstance(z=ie){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,_.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...q.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ie){return this.instances.has(z)}getOptions(z=ie){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,te=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:te,options:q});for(const[Me,Le]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Me)&&Le.resolve(qe);return qe}onInit(z,q){var te;const qe=this.normalizeInstanceIdentifier(q),Me=null!==(te=this.onInitCallbacks.get(qe))&&void 0!==te?te:new Set;Me.add(z),this.onInitCallbacks.set(qe,Me);const Le=this.instances.get(qe);return Le&&z(Le,qe),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,q){const te=this.onInitCallbacks.get(q);if(te)for(const qe of te)try{qe(z,q)}catch(Me){}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let te=this.instances.get(z);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=z,ge===ie?void 0:ge),options:q}),this.instances.set(z,te),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(te,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,te)}catch(qe){}var ge;return te||null}normalizeInstanceIdentifier(z=ie){return this.component?this.component.multipleInstances?z:ie:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new ne(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,Te,L)=>{L.d(Te,{Am:()=>ge,Ub:()=>ue,Yd:()=>ce,in:()=>G});const _=[];var G=(()=>{return(z=G||(G={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",G;var z})();const N={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ie=G.INFO,ne={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ye=(z,q,...te)=>{if(q<z.logLevel)return;const qe=(new Date).toISOString(),Me=ne[q];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Me](`[${qe}]  ${z.name}:`,...te)};class ce{constructor(q){this.name=q,this._logLevel=ie,this._logHandler=ye,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in G))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?N[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...q),this._logHandler(this,G.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...q),this._logHandler(this,G.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...q),this._logHandler(this,G.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...q),this._logHandler(this,G.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...q),this._logHandler(this,G.ERROR,...q)}}function ue(z){_.forEach(q=>{q.setLogLevel(z)})}function ge(z,q){for(const te of _){let qe=null;q&&q.level&&(qe=N[q.level]),te.userLogHandler=null===z?null:(Me,Le,...Ue)=>{const me=Ue.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(et){return null}}).filter(Ie=>Ie).join(" ");Le>=(null!=qe?qe:Me.logLevel)&&z({level:G[Le].toLowerCase(),message:me,args:Ue,type:Me.name})}}}},5861:(ct,Te,L)=>{function _(N,ie,ne,ye,ce,ue,ge){try{var z=N[ue](ge),q=z.value}catch(te){return void ne(te)}z.done?ie(q):Promise.resolve(q).then(ye,ce)}function G(N){return function(){var ie=this,ne=arguments;return new Promise(function(ye,ce){var ue=N.apply(ie,ne);function ge(q){_(ue,ye,ce,ge,z,"next",q)}function z(q){_(ue,ye,ce,ge,z,"throw",q)}ge(void 0)})}}L.d(Te,{Z:()=>G})}},ct=>{ct(ct.s=5811)}]);