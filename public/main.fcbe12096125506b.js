"use strict";(self.webpackChunksanjit_majumdar=self.webpackChunksanjit_majumdar||[]).push([[179],{2011:(pt,De,L)=>{L.d(De,{Dh:()=>le,GT:()=>we,cc:()=>Ne,hO:()=>Ke,on:()=>K,pX:()=>re,xv:()=>me});var g=L(5e3),q=L(127),M=L(5813);pt=L.hmd(pt);const se=["ngOnDestroy"],re=(Ie,it,$e,Pe={})=>new Proxy(Ie,{get:(Re,be)=>$e.runOutsideAngular(()=>{var Je;if(Ie[be])return(null===(Je=null==Pe?void 0:Pe.spy)||void 0===Je?void 0:Je.get)&&Pe.spy.get(be,Ie[be]),Ie[be];if(se.indexOf(be)>-1)return()=>{};const te=it.toPromise().then(nt=>{const tt=nt&&nt[be];return"function"==typeof tt?tt.bind(nt):tt&&tt.then?tt.then(oe=>$e.run(()=>oe)):$e.run(()=>tt)});return new Proxy(()=>{},{get:(nt,tt)=>te[tt],apply:(nt,tt,oe)=>te.then(ae=>{var ce;const Te=ae&&ae(...oe);return(null===(ce=null==Pe?void 0:Pe.spy)||void 0===ce?void 0:ce.apply)&&Pe.spy.apply(be,oe,Te),Te})})})}),we=(Ie,it)=>{it.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(Pe=>{Object.defineProperty(Ie.prototype,Pe,Object.getOwnPropertyDescriptor($e.prototype||$e,Pe))})})};class de{constructor(it){return it}}const le=new g.OlP("angularfire2.app.options"),me=new g.OlP("angularfire2.app.name");function K(Ie,it,$e){const Re="object"==typeof $e&&$e||{};Re.name=Re.name||"string"==typeof $e&&$e||"[DEFAULT]";const Je=q.Z.apps.filter(te=>te&&te.name===Re.name)[0]||it.runOutsideAngular(()=>q.Z.initializeApp(Ie,Re));try{JSON.stringify(Ie)!==JSON.stringify(Je.options)&&z("error",`${Je.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(te){}return new de(Je)}const z=(Ie,...it)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ie](...it)},ne={provide:de,useFactory:K,deps:[le,g.R0b,[new g.FiY,me]]};let Ke=(()=>{class Ie{constructor($e){q.Z.registerVersion("angularfire",M.q4.full,"core"),q.Z.registerVersion("angularfire",M.q4.full,"app-compat"),q.Z.registerVersion("angular",g.q4F.full,$e.toString())}static initializeApp($e,Pe){return{ngModule:Ie,providers:[{provide:le,useValue:$e},{provide:me,useValue:Pe}]}}}return Ie.\u0275fac=function($e){return new($e||Ie)(g.LFG(g.Lbi))},Ie.\u0275mod=g.oAB({type:Ie}),Ie.\u0275inj=g.cJS({providers:[ne]}),Ie})();function Ne(Ie,it,$e,Pe,Re){const[,be,Je]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===Ie)||[];if(be)return function Fe(Ie,it){try{return Ie.toString()===it.toString()}catch($e){return Ie===it}}(Re,Je)||(ye("error",`${it} was already initialized on the ${$e} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Re,was:Je})),be;{const te=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Ie,te,Re]),te}}const Ue=!!pt.hot,ye=(Ie,...it)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ie](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,De,L)=>{L.d(De,{q4:()=>lu,iC:()=>lc,fc:()=>fr,HU:()=>el,vb:()=>jg,JM:()=>ds});var g=L(5e3),q=L(5867),M=L(5861),se=L(9681),re=L(2090),we=L(4859),de=L(1877);const le="@firebase/installations",z="w:0.5.8",ne="FIS_v2",Ie=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(C){return C instanceof re.ZR&&C.code.includes("request-failed")}function $e({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Pe(C){return{token:C.token,requestStatus:2,expiresIn:oe(C.expiresIn),creationTime:Date.now()}}function Re(C,S){return be.apply(this,arguments)}function be(){return(be=(0,M.Z)(function*(C,S){const H=(yield S.json()).error;return Ie.create("request-failed",{requestName:C,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function Je({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function te(C,{refreshToken:S}){const N=Je(C);return N.append("Authorization",function ae(C){return`${ne} ${C}`}(S)),N}function nt(C){return tt.apply(this,arguments)}function tt(){return(tt=(0,M.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function oe(C){return Number(C.replace("s","000"))}function ce(C,S){return Te.apply(this,arguments)}function Te(){return(Te=(0,M.Z)(function*({appConfig:C,heartbeatServiceProvider:S},{fid:N}){const H=$e(C),X=Je(C),ie=S.getImmediate({optional:!0});if(ie){const Dt=yield ie.getHeartbeatsHeader();Dt&&X.append("x-firebase-client",Dt)}const Oe={method:"POST",headers:X,body:JSON.stringify({fid:N,authVersion:ne,appId:C.appId,sdkVersion:z})},ut=yield nt(()=>fetch(H,Oe));if(ut.ok){const Dt=yield ut.json();return{fid:Dt.fid||N,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Pe(Dt.authToken)}}throw yield Re("Create Installation",ut)})).apply(this,arguments)}function ge(C){return new Promise(S=>{setTimeout(S,C)})}const Mt=/^[cdef][\w-]{21}$/;function ln(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const N=function Ge(C){return function Le(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Mt.test(N)?N:""}catch(C){return""}}function tn(C){return`${C.appName}!${C.appId}`}const mr=new Map;function Ln(C,S){const N=tn(C);rn(N,S),function Mn(C,S){const N=function kr(){return!Ir&&"BroadcastChannel"in self&&(Ir=new BroadcastChannel("[Firebase] FID Change"),Ir.onmessage=C=>{rn(C.data.key,C.data.fid)}),Ir}();N&&N.postMessage({key:C,fid:S}),function Or(){0===mr.size&&Ir&&(Ir.close(),Ir=null)}()}(N,S)}function rn(C,S){const N=mr.get(C);if(N)for(const H of N)H(S)}let Ir=null;const Tr="firebase-installations-store";let Fr=null;function Xi(){return Fr||(Fr=(0,re.X3)("firebase-installations-database",1,(C,S)=>{0===S&&C.createObjectStore(Tr)})),Fr}function gt(C,S){return qr.apply(this,arguments)}function qr(){return(qr=(0,M.Z)(function*(C,S){const N=tn(C),X=(yield Xi()).transaction(Tr,"readwrite"),ie=X.objectStore(Tr),Me=yield ie.get(N);return yield ie.put(S,N),yield X.complete,(!Me||Me.fid!==S.fid)&&Ln(C,S.fid),S})).apply(this,arguments)}function qn(C){return cn.apply(this,arguments)}function cn(){return(cn=(0,M.Z)(function*(C){const S=tn(C),H=(yield Xi()).transaction(Tr,"readwrite");yield H.objectStore(Tr).delete(S),yield H.complete})).apply(this,arguments)}function Xn(C,S){return hi.apply(this,arguments)}function hi(){return(hi=(0,M.Z)(function*(C,S){const N=tn(C),X=(yield Xi()).transaction(Tr,"readwrite"),ie=X.objectStore(Tr),Me=yield ie.get(N),Oe=S(Me);return void 0===Oe?yield ie.delete(N):yield ie.put(Oe,N),yield X.complete,Oe&&(!Me||Me.fid!==Oe.fid)&&Ln(C,Oe.fid),Oe})).apply(this,arguments)}function Un(C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,M.Z)(function*(C){let S;const N=yield Xn(C.appConfig,H=>{const X=Wr(H),ie=js(C,X);return S=ie.registrationPromise,ie.installationEntry});return""===N.fid?{installationEntry:yield S}:{installationEntry:N,registrationPromise:S}})).apply(this,arguments)}function Wr(C){return Zt(C||{fid:ln(),registrationStatus:0})}function js(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Ie.create("app-offline"))};const N={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function Gt(C,S){return ft.apply(this,arguments)}(C,N);return{installationEntry:N,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:at(C)}:{installationEntry:S}}function ft(){return(ft=(0,M.Z)(function*(C,S){try{const N=yield ce(C,S);return gt(C.appConfig,N)}catch(N){throw it(N)&&409===N.customData.serverCode?yield qn(C.appConfig):yield gt(C.appConfig,{fid:S.fid,registrationStatus:0}),N}})).apply(this,arguments)}function at(C){return fi.apply(this,arguments)}function fi(){return(fi=(0,M.Z)(function*(C){let S=yield es(C.appConfig);for(;1===S.registrationStatus;)yield ge(100),S=yield es(C.appConfig);if(0===S.registrationStatus){const{installationEntry:N,registrationPromise:H}=yield Un(C);return H||N}return S})).apply(this,arguments)}function es(C){return Xn(C,S=>{if(!S)throw Ie.create("installation-not-found");return Zt(S)})}function Zt(C){return function ts(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Wn(C,S){return pn.apply(this,arguments)}function pn(){return(pn=(0,M.Z)(function*({appConfig:C,heartbeatServiceProvider:S},N){const H=wt(C,N),X=te(C,N),ie=S.getImmediate({optional:!0});if(ie){const Dt=yield ie.getHeartbeatsHeader();Dt&&X.append("x-firebase-client",Dt)}const Oe={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:z,appId:C.appId}})},ut=yield nt(()=>fetch(H,Oe));if(ut.ok)return Pe(yield ut.json());throw yield Re("Generate Auth Token",ut)})).apply(this,arguments)}function wt(C,{fid:S}){return`${$e(C)}/${S}/authTokens:generate`}function zn(C){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,M.Z)(function*(C,S=!1){let N;const H=yield Xn(C.appConfig,ie=>{if(!Bt(ie))throw Ie.create("not-registered");const Me=ie.authToken;if(!S&&Z(Me))return ie;if(1===Me.requestStatus)return N=qe(C,S),ie;{if(!navigator.onLine)throw Ie.create("app-offline");const Oe=Y(ie);return N=mt(C,Oe),Oe}});return N?yield N:H.authToken})).apply(this,arguments)}function qe(C,S){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,M.Z)(function*(C,S){let N=yield st(C.appConfig);for(;1===N.authToken.requestStatus;)yield ge(100),N=yield st(C.appConfig);const H=N.authToken;return 0===H.requestStatus?zn(C,S):H})).apply(this,arguments)}function st(C){return Xn(C,S=>{if(!Bt(S))throw Ie.create("not-registered");return function pe(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function mt(C,S){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,M.Z)(function*(C,S){try{const N=yield Wn(C,S),H=Object.assign(Object.assign({},S),{authToken:N});return yield gt(C.appConfig,H),N}catch(N){if(!it(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield gt(C.appConfig,H)}else yield qn(C.appConfig);throw N}})).apply(this,arguments)}function Bt(C){return void 0!==C&&2===C.registrationStatus}function Z(C){return 2===C.requestStatus&&!function $(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+36e5}(C)}function Y(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}function j(){return(j=(0,M.Z)(function*(C){const S=C,{installationEntry:N,registrationPromise:H}=yield Un(S);return H?H.catch(console.error):zn(S).catch(console.error),N.fid})).apply(this,arguments)}function ue(){return(ue=(0,M.Z)(function*(C,S=!1){const N=C;return yield Ve(N),(yield zn(N,S)).token})).apply(this,arguments)}function Ve(C){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,M.Z)(function*(C){const{registrationPromise:S}=yield Un(C);S&&(yield S)})).apply(this,arguments)}function ur(C){return Ie.create("missing-app-config-values",{valueName:C})}const Lu="installations",Xe=C=>{const S=C.getProvider("app").getImmediate(),N=function Bi(C){if(!C||!C.options)throw ur("App Configuration");if(!C.name)throw ur("App Name");const S=["projectId","apiKey","appId"];for(const N of S)if(!C.options[N])throw ur(N);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:N,heartbeatServiceProvider:(0,se._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Wt=C=>{const S=C.getProvider("app").getImmediate(),N=(0,se._getProvider)(S,Lu).getImmediate();return{getId:()=>function F(C){return j.apply(this,arguments)}(N),getToken:X=>function G(C){return ue.apply(this,arguments)}(N,X)}};(function _n(){(0,se._registerComponent)(new we.wA(Lu,Xe,"PUBLIC")),(0,se._registerComponent)(new we.wA("installations-internal",Wt,"PRIVATE"))})(),(0,se.registerVersion)(le,"0.5.8"),(0,se.registerVersion)(le,"0.5.8","esm2017");const Kr="@firebase/remote-config",Kn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bu{constructor(S,N,H,X){this.client=S,this.storage=N,this.storageCache=H,this.logger=X}isCachedDataFresh(S,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-N,X=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var N=this;return(0,M.Z)(function*(){const[H,X]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(X&&N.isCachedDataFresh(S.cacheMaxAgeMillis,H))return X;S.eTag=X&&X.eTag;const ie=yield N.client.fetch(S),Me=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Me.push(N.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Me),ie})()}}function Vu(C=navigator){return C.languages&&C.languages[0]||C.language}class $s{constructor(S,N,H,X,ie,Me){this.firebaseInstallations=S,this.sdkVersion=N,this.namespace=H,this.projectId=X,this.apiKey=ie,this.appId=Me}fetch(S){var N=this;return(0,M.Z)(function*(){const[H,X]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Oe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},ut={sdk_version:N.sdkVersion,app_instance_id:H,app_instance_id_token:X,app_id:N.appId,language_code:Vu()},Dt={method:"POST",headers:Oe,body:JSON.stringify(ut)},zt=fetch(Me,Dt),Pt=new Promise((wi,Wi)=>{S.signal.addEventListener(()=>{const Po=new Error("The operation was aborted.");Po.name="AbortError",Wi(Po)})});let pr;try{yield Promise.race([zt,Pt]),pr=yield zt}catch(wi){let Wi="fetch-client-network";throw"AbortError"===wi.name&&(Wi="fetch-timeout"),Kn.create(Wi,{originalErrorMessage:wi.message})}let nr=pr.status;const hu=pr.headers.get("ETag")||void 0;let ro,Ri;if(200===pr.status){let wi;try{wi=yield pr.json()}catch(Wi){throw Kn.create("fetch-client-parse",{originalErrorMessage:Wi.message})}ro=wi.entries,Ri=wi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ri?nr=500:"NO_CHANGE"===Ri?nr=304:("NO_TEMPLATE"===Ri||"EMPTY_CONFIG"===Ri)&&(ro={}),304!==nr&&200!==nr)throw Kn.create("fetch-status",{httpStatus:nr});return{status:nr,eTag:hu,config:ro}})()}}class ms{constructor(S,N){this.client=S,this.storage=N}fetch(S){var N=this;return(0,M.Z)(function*(){const H=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:N,backoffCount:H}){var X=this;return(0,M.Z)(function*(){yield function gi(C,S){return new Promise((N,H)=>{const X=Math.max(S-Date.now(),0),ie=setTimeout(N,X);C.addEventListener(()=>{clearTimeout(ie),H(Kn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,N);try{const ie=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function xg(C){if(!(C instanceof re.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ie))throw ie;const Me={throttleEndTimeMillis:Date.now()+(0,re.$s)(H),backoffCount:H+1};return yield X.storage.setThrottleMetadata(Me),X.attemptFetch(S,Me)}})()}}class Ng{constructor(S,N,H,X,ie){this.app=S,this._client=N,this._storageCache=H,this._storage=X,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ka(C,S){const N=C.target.error||void 0;return Kn.create(S,{originalErrorMessage:N&&N.message})}const na="app_namespace_store";class _d{constructor(S,N,H,X=function kg(){return new Promise((C,S)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=H=>{S(Ka(H,"storage-open"))},N.onsuccess=H=>{C(H.target.result)},N.onupgradeneeded=H=>{0===H.oldVersion&&H.target.result.createObjectStore(na,{keyPath:"compositeKey"})}}catch(N){S(Kn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=S,this.appName=N,this.namespace=H,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var N=this;return(0,M.Z)(function*(){const H=yield N.openDbPromise;return new Promise((X,ie)=>{const Oe=H.transaction([na],"readonly").objectStore(na),ut=N.createCompositeKey(S);try{const Dt=Oe.get(ut);Dt.onerror=zt=>{ie(Ka(zt,"storage-get"))},Dt.onsuccess=zt=>{const Pt=zt.target.result;X(Pt?Pt.value:void 0)}}catch(Dt){ie(Kn.create("storage-get",{originalErrorMessage:Dt&&Dt.message}))}})})()}set(S,N){var H=this;return(0,M.Z)(function*(){const X=yield H.openDbPromise;return new Promise((ie,Me)=>{const ut=X.transaction([na],"readwrite").objectStore(na),Dt=H.createCompositeKey(S);try{const zt=ut.put({compositeKey:Dt,value:N});zt.onerror=Pt=>{Me(Ka(Pt,"storage-set"))},zt.onsuccess=()=>{ie()}}catch(zt){Me(Kn.create("storage-set",{originalErrorMessage:zt&&zt.message}))}})})()}delete(S){var N=this;return(0,M.Z)(function*(){const H=yield N.openDbPromise;return new Promise((X,ie)=>{const Oe=H.transaction([na],"readwrite").objectStore(na),ut=N.createCompositeKey(S);try{const Dt=Oe.delete(ut);Dt.onerror=zt=>{ie(Ka(zt,"storage-delete"))},Dt.onsuccess=()=>{X()}}catch(Dt){ie(Kn.create("storage-delete",{originalErrorMessage:Dt&&Dt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class ra{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,M.Z)(function*(){const N=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),ie=yield N;ie&&(S.lastFetchStatus=ie);const Me=yield H;Me&&(S.lastSuccessfulFetchTimestampMillis=Me);const Oe=yield X;Oe&&(S.activeConfig=Oe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function vd(){return ju.apply(this,arguments)}function ju(){return(ju=(0,M.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Og(){(0,se._registerComponent)(new we.wA("remote-config",function C(S,{instanceIdentifier:N}){const H=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Kn.create("registration-window");if(!(0,re.hl)())throw Kn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Me,appId:Oe}=H.options;if(!ie)throw Kn.create("registration-project-id");if(!Me)throw Kn.create("registration-api-key");if(!Oe)throw Kn.create("registration-app-id");const ut=new _d(Oe,H.name,N=N||"firebase"),Dt=new ra(ut),zt=new de.Yd(Kr);zt.logLevel=de.in.ERROR;const Pt=new $s(X,se.SDK_VERSION,N,ie,Me,Oe),pr=new ms(Pt,ut),nr=new Bu(pr,ut,Dt,zt),hu=new Ng(H,nr,Dt,ut,zt);return function Yr(C){const S=(0,re.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(hu),hu},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Kr,"0.3.7"),(0,se.registerVersion)(Kr,"0.3.7","esm2017")}();const ys="/firebase-messaging-sw.js",Za="/firebase-cloud-messaging-push-scope",Di="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ia="google.c.a.c_id",Hu="google.c.a.c_l",gf="google.c.a.ts",Ya="google.c.a.e";var ji=(()=>{return(C=ji||(ji={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",ji;var C})();function _s(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $u(C){const N=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(N),X=new Uint8Array(H.length);for(let ie=0;ie<H.length;++ie)X[ie]=H.charCodeAt(ie);return X}const Qa="fcm_token_details_db",sa="fcm_token_object_Store";function Fg(C){return oa.apply(this,arguments)}function oa(){return oa=(0,M.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Qa))return null;let S=null;return(yield(0,re.X3)(Qa,5,function(){var H=(0,M.Z)(function*(X,ie,Me,Oe){var ut;if(ie<2||!X.objectStoreNames.contains(sa))return;const Dt=Oe.objectStore(sa),zt=yield Dt.index("fcmSenderId").get(C);if(yield Dt.clear(),zt)if(2===ie){const Pt=zt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;S={token:Pt.fcmToken,createTime:null!==(ut=Pt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:_s(Pt.vapidKey)}}}else if(3===ie){const Pt=zt;S={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:_s(Pt.auth),p256dh:_s(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:_s(Pt.vapidKey)}}}else if(4===ie){const Pt=zt;S={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:_s(Pt.auth),p256dh:_s(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:_s(Pt.vapidKey)}}}});return function(X,ie,Me,Oe){return H.apply(this,arguments)}}())).close(),yield(0,re.Lj)(Qa),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),$l(S)?S:null}),oa.apply(this,arguments)}function $l(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const qs="firebase-messaging-store";let mo=null;function Gl(){return mo||(mo=(0,re.X3)("firebase-messaging-database",1,(C,S)=>{0===S&&C.createObjectStore(qs)})),mo}function In(C){return yo.apply(this,arguments)}function yo(){return(yo=(0,M.Z)(function*(C){const S=Ws(C),H=yield(yield Gl()).transaction(qs).objectStore(qs).get(S);if(H)return H;{const X=yield Fg(C.appConfig.senderId);if(X)return yield _o(C,X),X}})).apply(this,arguments)}function _o(C,S){return vn.apply(this,arguments)}function vn(){return(vn=(0,M.Z)(function*(C,S){const N=Ws(C),X=(yield Gl()).transaction(qs,"readwrite");return yield X.objectStore(qs).put(S,N),yield X.complete,S})).apply(this,arguments)}function ql(C){return aa.apply(this,arguments)}function aa(){return(aa=(0,M.Z)(function*(C){const S=Ws(C),H=(yield Gl()).transaction(qs,"readwrite");yield H.objectStore(qs).delete(S),yield H.complete})).apply(this,arguments)}function Ws({appConfig:C}){return C.appId}const lr=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qu(C,S){return Si.apply(this,arguments)}function Si(){return(Si=(0,M.Z)(function*(C,S){const N=yield ss(C),H=Et(S),X={method:"POST",headers:N,body:JSON.stringify(H)};let ie;try{ie=yield(yield fetch(Hi(C.appConfig),X)).json()}catch(Me){throw lr.create("token-subscribe-failed",{errorInfo:Me})}if(ie.error)throw lr.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw lr.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function ti(C,S){return vs.apply(this,arguments)}function vs(){return(vs=(0,M.Z)(function*(C,S){const N=yield ss(C),H=Et(S.subscriptionOptions),X={method:"PATCH",headers:N,body:JSON.stringify(H)};let ie;try{ie=yield(yield fetch(`${Hi(C.appConfig)}/${S.token}`,X)).json()}catch(Me){throw lr.create("token-update-failed",{errorInfo:Me})}if(ie.error)throw lr.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw lr.create("token-update-no-token");return ie.token})).apply(this,arguments)}function vo(C,S){return ua.apply(this,arguments)}function ua(){return(ua=(0,M.Z)(function*(C,S){const H={method:"DELETE",headers:yield ss(C)};try{const ie=yield(yield fetch(`${Hi(C.appConfig)}/${S}`,H)).json();if(ie.error)throw lr.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(X){throw lr.create("token-unsubscribe-failed",{errorInfo:X})}})).apply(this,arguments)}function Hi({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function ss(C){return ws.apply(this,arguments)}function ws(){return(ws=(0,M.Z)(function*({appConfig:C,installations:S}){const N=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Et({p256dh:C,auth:S,endpoint:N,vapidKey:H}){const X={web:{endpoint:N,auth:S,p256dh:C}};return H!==Di&&(X.web.applicationPubKey=H),X}const Ja=6048e5;function Ed(C){return la.apply(this,arguments)}function la(){return(la=(0,M.Z)(function*(C){const S=yield _f(C.swRegistration,C.vapidKey),N={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:_s(S.getKey("auth")),p256dh:_s(S.getKey("p256dh"))},H=yield In(C.firebaseDependencies);if(H){if(Wu(H.subscriptionOptions,N))return Date.now()>=H.createTime+Ja?yf(C,{token:H.token,createTime:Date.now(),subscriptionOptions:N}):H.token;try{yield vo(C.firebaseDependencies,H.token)}catch(X){console.warn(X)}return Se(C.firebaseDependencies,N)}return Se(C.firebaseDependencies,N)})).apply(this,arguments)}function bd(C){return ca.apply(this,arguments)}function ca(){return(ca=(0,M.Z)(function*(C){const S=yield In(C.firebaseDependencies);S&&(yield vo(C.firebaseDependencies,S.token),yield ql(C.firebaseDependencies));const N=yield C.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function yf(C,S){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,M.Z)(function*(C,S){try{const N=yield ti(C.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:N,createTime:Date.now()});return yield _o(C.firebaseDependencies,H),N}catch(N){throw yield bd(C),N}})).apply(this,arguments)}function Se(C,S){return qt.apply(this,arguments)}function qt(){return(qt=(0,M.Z)(function*(C,S){const H={token:yield qu(C,S),createTime:Date.now(),subscriptionOptions:S};return yield _o(C,H),H.token})).apply(this,arguments)}function _f(C,S){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,M.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$u(S)})})).apply(this,arguments)}function Wu(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}function zs(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function $i(C,S){if(!S.notification)return;C.notification={};const N=S.notification.title;N&&(C.notification.title=N);const H=S.notification.body;H&&(C.notification.body=H);const X=S.notification.image;X&&(C.notification.image=X)}(S,C),function Wl(C,S){!S.data||(C.data=S.data)}(S,C),function eu(C,S){if(!S.fcmOptions)return;C.fcmOptions={};const N=S.fcmOptions.link;N&&(C.fcmOptions.link=N);const H=S.fcmOptions.analytics_label;H&&(C.fcmOptions.analyticsLabel=H)}(S,C),S}function Lg(C){return"object"==typeof C&&!!C&&ia in C}function zl(C,S){const N=[];for(let H=0;H<C.length;H++)N.push(C.charAt(H)),H<S.length&&N.push(S.charAt(H));return N.join("")}function ha(C){return lr.create("missing-app-config-values",{valueName:C})}zl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vr{constructor(S,N,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function da(C){if(!C||!C.options)throw ha("App Configuration Object");if(!C.name)throw ha("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:N}=C;for(const H of S)if(!N[H])throw ha(H);return{appName:C.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:N,analyticsProvider:H}}_delete(){return Promise.resolve()}}function os(C){return fa.apply(this,arguments)}function fa(){return(fa=(0,M.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(ys,{scope:Za}),C.swRegistration.update().catch(()=>{})}catch(S){throw lr.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function pa(C,S){return mi.apply(this,arguments)}function mi(){return(mi=(0,M.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield os(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw lr.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function vf(C,S){return ga.apply(this,arguments)}function ga(){return(ga=(0,M.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=Di)})).apply(this,arguments)}function tu(){return(tu=(0,M.Z)(function*(C,S){if(!navigator)throw lr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lr.create("permission-blocked");return yield vf(C,null==S?void 0:S.vapidKey),yield pa(C,null==S?void 0:S.serviceWorkerRegistration),Ed(C)})).apply(this,arguments)}function Kl(C,S,N){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,M.Z)(function*(C,S,N){const H=wf(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:N[ia],message_name:N[Hu],message_time:N[gf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wf(C){switch(C){case ji.NOTIFICATION_CLICKED:return"notification_open";case ji.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Yl(){return(Yl=(0,M.Z)(function*(C,S){const N=S.data;if(!N.isFirebaseMessaging)return;C.onMessageHandler&&N.messageType===ji.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(zs(N)):C.onMessageHandler.next(zs(N)));const H=N.data;Lg(H)&&"1"===H[Ya]&&(yield Kl(C,N.messageType,H))})).apply(this,arguments)}const zu="@firebase/messaging",wo=C=>{const S=new vr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Zl(C,S){return Yl.apply(this,arguments)}(S,N)),S},Ql=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:H=>function Id(C,S){return tu.apply(this,arguments)}(S,H)}};function Td(){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,M.Z)(function*(){try{yield(0,re.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ef(){(0,se._registerComponent)(new we.wA("messaging",wo,"PUBLIC")),(0,se._registerComponent)(new we.wA("messaging-internal",Ql,"PRIVATE")),(0,se.registerVersion)(zu,"0.9.12"),(0,se.registerVersion)(zu,"0.9.12","esm2017")}();const Xl="analytics",Cd="firebase_id",ec="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ku="https://www.googletagmanager.com/gtag/js",cr=new de.Yd("@firebase/analytics");function Dd(C){return Promise.all(C.map(S=>S.catch(N=>N)))}function Sd(C,S){const N=document.createElement("script");N.src=`${Ku}?l=${C}&id=${S}`,N.async=!0,document.head.appendChild(N)}function Zu(C,S,N,H,X,ie){return iu.apply(this,arguments)}function iu(){return(iu=(0,M.Z)(function*(C,S,N,H,X,ie){const Me=H[X];try{if(Me)yield S[Me];else{const ut=(yield Dd(N)).find(Dt=>Dt.measurementId===X);ut&&(yield S[ut.appId])}}catch(Oe){cr.error(Oe)}C("config",X,ie)})).apply(this,arguments)}function If(C,S,N,H,X){return ma.apply(this,arguments)}function ma(){return(ma=(0,M.Z)(function*(C,S,N,H,X){try{let ie=[];if(X&&X.send_to){let Me=X.send_to;Array.isArray(Me)||(Me=[Me]);const Oe=yield Dd(N);for(const ut of Me){const Dt=Oe.find(Pt=>Pt.measurementId===ut),zt=Dt&&S[Dt.appId];if(!zt){ie=[];break}ie.push(zt)}}0===ie.length&&(ie=Object.values(S)),yield Promise.all(ie),C("event",H,X||{})}catch(ie){cr.error(ie)}})).apply(this,arguments)}function n_(){const C=window.document.getElementsByTagName("script");for(const S of Object.values(C))if(S.src&&S.src.includes(Ku))return S;return null}const Ur=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),dr=new class yi{constructor(S={},N=1e3){this.throttleMetadata=S,this.intervalMillis=N}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,N){this.throttleMetadata[S]=N}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Rd(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function er(C){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,M.Z)(function*(C){var S;const{appId:N,apiKey:H}=C,X={method:"GET",headers:Rd(H)},ie=ec.replace("{app-id}",N),Me=yield fetch(ie,X);if(200!==Me.status&&304!==Me.status){let Oe="";try{const ut=yield Me.json();(null===(S=ut.error)||void 0===S?void 0:S.message)&&(Oe=ut.error.message)}catch(ut){}throw Ur.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Oe})}return Me.json()})).apply(this,arguments)}function tc(C){return Js.apply(this,arguments)}function Js(){return(Js=(0,M.Z)(function*(C,S=dr,N){const{appId:H,apiKey:X,measurementId:ie}=C.options;if(!H)throw Ur.create("no-app-id");if(!X){if(ie)return{measurementId:ie,appId:H};throw Ur.create("no-api-key")}const Me=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Oe=new xd;return setTimeout((0,M.Z)(function*(){Oe.abort()}),void 0!==N?N:6e4),ya({appId:H,apiKey:X,measurementId:ie},Me,Oe,S)})).apply(this,arguments)}function ya(C,S,N){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,M.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:N},H,X=dr){const{appId:ie,measurementId:Me}=C;try{yield St(H,S)}catch(Oe){if(Me)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Oe.message}]`),{appId:ie,measurementId:Me};throw Oe}try{const Oe=yield er(C);return X.deleteThrottleMetadata(ie),Oe}catch(Oe){if(!nc(Oe)){if(X.deleteThrottleMetadata(ie),Me)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Oe.message}]`),{appId:ie,measurementId:Me};throw Oe}const ut=503===Number(Oe.customData.httpStatus)?(0,re.$s)(N,X.intervalMillis,30):(0,re.$s)(N,X.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+ut,backoffCount:N+1};return X.setThrottleMetadata(ie,Dt),cr.debug(`Calling attemptFetch again in ${ut} millis`),ya(C,Dt,H,X)}})).apply(this,arguments)}function St(C,S){return new Promise((N,H)=>{const X=Math.max(S-Date.now(),0),ie=setTimeout(N,X);C.addEventListener(()=>{clearTimeout(ie),H(Ur.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function nc(C){if(!(C instanceof re.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}class xd{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Yu(){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,M.Z)(function*(){if(!(0,re.hl)())return cr.warn(Ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return cr.warn(Ur.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function Xs(){return(Xs=(0,M.Z)(function*(C,S,N,H,X,ie,Me){var Oe;const ut=tc(C);ut.then(nr=>{N[nr.measurementId]=nr.appId,C.options.measurementId&&nr.measurementId!==C.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nr=>cr.error(nr)),S.push(ut);const Dt=Yu().then(nr=>{if(nr)return H.getId()}),[zt,Pt]=yield Promise.all([ut,Dt]);n_()||Sd(ie,zt.measurementId),X("js",new Date);const pr=null!==(Oe=null==Me?void 0:Me.config)&&void 0!==Oe?Oe:{};return pr.origin="firebase",pr.update=!0,null!=Pt&&(pr[Cd]=Pt),X("config",zt.measurementId,pr),zt.measurementId})).apply(this,arguments)}class rc{constructor(S){this.app=S}_delete(){return delete ri[this.app.options.appId],Promise.resolve()}}let ri={},Io=[];const _a={};let To,Is,eo="dataLayer",ic=!1;function va(C,S,N){!function to(){const C=[];if((0,re.ru)()&&C.push("This is a browser extension environment."),(0,re.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((H,X)=>`(${X+1}) ${H}`).join(" "),N=Ur.create("invalid-analytics-context",{errorInfo:S});cr.warn(N.message)}}();const H=C.options.appId;if(!H)throw Ur.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Ur.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ri[H])throw Ur.create("already-exists",{id:H});if(!ic){!function Es(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(eo);const{wrappedGtag:ie,gtagCore:Me}=function Tf(C,S,N,H,X){let ie=function(...Me){window[H].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ie=window[X]),window[X]=function Ad(C,S,N,H){function ie(){return(ie=(0,M.Z)(function*(Me,Oe,ut){try{"event"===Me?yield If(C,S,N,Oe,ut):"config"===Me?yield Zu(C,S,N,H,Oe,ut):C("set",Oe)}catch(Dt){cr.error(Dt)}})).apply(this,arguments)}return function X(Me,Oe,ut){return ie.apply(this,arguments)}}(ie,C,S,N),{gtagCore:ie,wrappedGtag:window[X]}}(ri,Io,_a,eo,"gtag");Is=ie,To=Me,ic=!0}return ri[H]=function An(C,S,N,H,X,ie,Me){return Xs.apply(this,arguments)}(C,Io,_a,S,To,eo,N),new rc(C)}function ou(){return(ou=(0,M.Z)(function*(C,S,N,H,X){if(X&&X.global)C("event",N,H);else{const ie=yield S;C("event",N,Object.assign(Object.assign({},H),{send_to:ie}))}})).apply(this,arguments)}function On(){return Co.apply(this,arguments)}function Co(){return(Co=(0,M.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}const Do="@firebase/analytics";!function Vg(){(0,se._registerComponent)(new we.wA(Xl,(S,{options:N})=>va(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,se._registerComponent)(new we.wA("analytics-internal",function C(S){try{const N=S.getProvider(Xl).getImmediate();return{logEvent:(H,X,ie)=>function Df(C,S,N,H){C=(0,re.m9)(C),function wa(C,S,N,H,X){return ou.apply(this,arguments)}(Is,ri[C.app.options.appId],S,N,H).catch(X=>cr.error(X))}(N,H,X,ie)}}catch(N){throw Ur.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,se.registerVersion)(Do,"0.7.8"),(0,se.registerVersion)(Do,"0.7.8","esm2017")}();var ls=L(4408),Ea=L(7565);const uu=new class tr extends Ea.v{}(class So extends ls.o{constructor(S,N){super(S,N),this.scheduler=S,this.work=N}schedule(S,N=0){return N>0?super.schedule(S,N):(this.delay=N,this.state=S,this.scheduler.flush(this),this)}execute(S,N){return N>0||this.closed?super.execute(S,N):this._execute(S,N)}requestAsyncId(S,N,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,N,H):S.flush(this)}});var Md=L(4986),Xu=L(8505),Qr=L(5363),cs=L(9468);const lu=new g.GfV("7.3.0"),Ao="__angularfire_symbol__analyticsIsSupportedValue",vi="__angularfire_symbol__analyticsIsSupported",ba="__angularfire_symbol__remoteConfigIsSupportedValue",sc="__angularfire_symbol__remoteConfigIsSupported",oc="__angularfire_symbol__messagingIsSupportedValue",ac="__angularfire_symbol__messagingIsSupported";function ds(C,S,N){if(S){if(1===S.length)return S[0];const ie=S.filter(Me=>Me.app===N);if(1===ie.length)return ie[0]}return N.container.getProvider(C).getImmediate({optional:!0})}globalThis[vi]||(globalThis[vi]=On().then(C=>globalThis[Ao]=C).catch(()=>globalThis[Ao]=!1)),globalThis[ac]||(globalThis[ac]=Td().then(C=>globalThis[oc]=C).catch(()=>globalThis[oc]=!1)),globalThis[sc]||(globalThis[sc]=vd().then(C=>globalThis[ba]=C).catch(()=>globalThis[ba]=!1));const jg=(C,S)=>{const N=S?[S]:(0,q.C6)(),H=[];return N.forEach(X=>{X.container.getProvider(C).instances.forEach(Me=>{H.includes(Me)||H.push(Me)})}),H};function Ds(){}class Od{constructor(S,N=uu){this.zone=S,this.delegate=N}now(){return this.delegate.now()}schedule(S,N,H){const X=this.zone;return this.delegate.schedule(function(Me){X.runGuarded(()=>{S.apply(this,[Me])})},N,H)}}class Ai{constructor(S){this.zone=S,this.task=null}call(S,N){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ds,{},Ds,Ds)),N.pipe((0,Xu.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let el=(()=>{class C{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Od(Zone.current)),this.insideAngular=N.run(()=>new Od(Zone.current,Md.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(N){return new(N||C)(g.LFG(g.R0b))},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function no(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function fr(C){return C.pipe((0,Qr.Q)(no().outsideAngular))}function lc(C){return no(),function xo(C){return function(N){return(N=N.lift(new Ai(C.ngZone))).pipe((0,cs.R)(C.outsideAngular),(0,Qr.Q)(C.insideAngular))}}(no())(C)}},573:(pt,De,L)=>{L.d(De,{$:()=>Ed,A:()=>z,E:()=>Wt,G:()=>Zr,I:()=>ms,K:()=>$,L:()=>ju,M:()=>pf,N:()=>ia,P:()=>Ao,Q:()=>Hu,R:()=>_i,T:()=>Di,U:()=>ji,V:()=>_s,W:()=>Fg,X:()=>Lr,Y:()=>qu,Z:()=>ti,_:()=>Hi,a:()=>yt,a0:()=>bd,a1:()=>yf,a2:()=>Se,a3:()=>_f,a4:()=>Wu,a5:()=>$i,a6:()=>Wl,a7:()=>Lg,a8:()=>zl,a9:()=>os,aA:()=>pr,aB:()=>tl,aC:()=>yn,aG:()=>dr,aJ:()=>Ya,aa:()=>pa,ab:()=>vf,ae:()=>Kl,af:()=>wf,ag:()=>Zl,aj:()=>qs,ak:()=>Jl,am:()=>ec,an:()=>Zu,ao:()=>xn,ap:()=>tt,aq:()=>xt,ar:()=>Ye,as:()=>$e,at:()=>pu,au:()=>nl,av:()=>Pe,aw:()=>te,ax:()=>ae,ay:()=>Y,az:()=>wi,b:()=>Sn,c:()=>uc,d:()=>Od,e:()=>jg,f:()=>S,g:()=>Oe,h:()=>X,i:()=>to,j:()=>zt,k:()=>Oo,l:()=>tr,m:()=>l_,o:()=>le,r:()=>Ju,s:()=>So,u:()=>cs,z:()=>Ne});var g=L(5861),q=L(2090),M=L(9681),se=L(655),re=L(1877),we=L(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new re.Yd("@firebase/auth");function it(w,...m){Ie.logLevel<=re.in.ERROR&&Ie.error(`Auth (${M.SDK_VERSION}): ${w}`,...m)}function $e(w,...m){throw Je(w,...m)}function Pe(w,...m){return Je(w,...m)}function Re(w,m,y){const b=Object.assign(Object.assign({},Fe()),{[m]:y});return new q.LL("auth","Firebase",b).create(m,{appName:w.name})}function be(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&$e(w,"argument-error"),Re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(w,...m){if("string"!=typeof w){const y=m[0],b=[...m.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(y,...b)}return Ue.create(w,...m)}function te(w,m,...y){if(!w)throw Je(m,...y)}function nt(w){const m="INTERNAL ASSERTION FAILED: "+w;throw it(m),new Error(m)}function tt(w,m){w||nt(m)}const oe=new Map;function ae(w){tt(w instanceof Function,"Expected a class definition");let m=oe.get(w);return m?(tt(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,oe.set(w,m),m)}function ge(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Le(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ge{constructor(m,y){this.shortDelay=m,this.longDelay=y,tt(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function en(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Le()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tn(w,m){tt(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class mr{static initialize(m,y,b){this.fetchImpl=m,y&&(this.headersImpl=y),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ln={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Ge(3e4,6e4);function Jt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function rn(w,m,y,b){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(w,m,y,b,x={}){return Ir(w,x,(0,g.Z)(function*(){let U={},ee={};b&&("GET"===m?ee=b:U={body:JSON.stringify(b)});const xe=(0,q.xO)(Object.assign({key:w.config.apiKey},ee)).slice(1),dt=yield w._getAdditionalHeaders();return dt["Content-Type"]="application/json",w.languageCode&&(dt["X-Firebase-Locale"]=w.languageCode),mr.fetch()(Ci(w,w.config.apiHost,y,xe),Object.assign({method:m,headers:dt,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function Ir(w,m,y){return kr.apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(w,m,y){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},Ln),m);try{const x=new Tr(w),U=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const ee=yield U.json();if("needConfirmation"in ee)throw Fr(w,"account-exists-with-different-credential",ee);if(U.ok&&!("errorMessage"in ee))return ee;{const xe=U.ok?ee.errorMessage:ee.error.message,[dt,Tt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===dt)throw Fr(w,"credential-already-in-use",ee);if("EMAIL_EXISTS"===dt)throw Fr(w,"email-already-in-use",ee);const jt=b[dt]||dt.toLowerCase().replace(/[_\s]+/g,"-");if(Tt)throw Re(w,jt,Tt);$e(w,jt)}}catch(x){if(x instanceof q.ZR)throw x;$e(w,"network-request-failed")}})).apply(this,arguments)}function Or(w,m,y,b){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(w,m,y,b,x={}){const U=yield rn(w,m,y,b,x);return"mfaPendingCredential"in U&&$e(w,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function Ci(w,m,y,b){const x=`${m}${y}?${b}`;return w.config.emulator?tn(w.config,x):`${w.config.apiScheme}://${x}`}class Tr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,b)=>{this.timer=setTimeout(()=>b(Pe(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fr(w,m,y){const b={appName:w.name};y.email&&(b.email=y.email),y.phoneNumber&&(b.phoneNumber=y.phoneNumber);const x=Pe(w,m,b);return x.customData._tokenResponse=y,x}function gt(){return(gt=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function qr(w,m){return qn.apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function cn(w,m){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function hi(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Wr(){return(Wr=(0,g.Z)(function*(w,m=!1){const y=(0,q.m9)(w),b=yield y.getIdToken(m),x=Gt(b);te(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const U="object"==typeof x.firebase?x.firebase:void 0,ee=null==U?void 0:U.sign_in_provider;return{claims:x,token:b,authTime:hi(js(x.auth_time)),issuedAtTime:hi(js(x.iat)),expirationTime:hi(js(x.exp)),signInProvider:ee||null,signInSecondFactor:(null==U?void 0:U.sign_in_second_factor)||null}})).apply(this,arguments)}function js(w){return 1e3*Number(w)}function Gt(w){const[m,y,b]=w.split(".");if(void 0===m||void 0===y||void 0===b)return it("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,q.tV)(y);return x?JSON.parse(x):(it("Failed to decode base64 JWT payload"),null)}catch(x){return it("Caught error parsing JWT payload as JSON",x),null}}function at(w,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(b){throw b instanceof q.ZR&&es(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}function es({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Zt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const b=this.getInterval(m);this.timerId=setTimeout((0,g.Z)(function*(){yield y.iteration()}),b)}iteration(){var m=this;return(0,g.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&m.schedule(!0))}m.schedule()})()}}class ts{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wn(w){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(w){var m;const y=w.auth,b=yield w.getIdToken(),x=yield at(w,cn(y,{idToken:b}));te(null==x?void 0:x.users.length,y,"internal-error");const U=x.users[0];w._notifyReloadListener(U);const ee=(null===(m=U.providerUserInfo)||void 0===m?void 0:m.length)?qe(U.providerUserInfo):[],xe=Yt(w.providerData,ee),jt=!!w.isAnonymous&&!(w.email&&U.passwordHash||(null==xe?void 0:xe.length)),mn={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:xe,metadata:new ts(U.createdAt,U.lastLoginAt),isAnonymous:jt};Object.assign(w,mn)})).apply(this,arguments)}function zn(){return(zn=(0,g.Z)(function*(w){const m=(0,q.m9)(w);yield Wn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Yt(w,m){return[...w.filter(b=>!m.some(x=>x.providerId===b.providerId)),...m]}function qe(w){return w.map(m=>{var{providerId:y}=m,b=(0,se._T)(m,["providerId"]);return{providerId:y,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function st(){return(st=(0,g.Z)(function*(w,m){const y=yield Ir(w,{},(0,g.Z)(function*(){const b=(0,q.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:x,apiKey:U}=w.config,ee=Ci(w,x,"/v1/token",`key=${U}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",mr.fetch()(ee,{method:"POST",headers:xe,body:b})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){te(m.idToken,"internal-error"),te(void 0!==m.idToken,"internal-error"),te(void 0!==m.refreshToken,"internal-error");const y="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function ft(w){const m=Gt(w);return te(m,"internal-error"),te(void 0!==m.exp,"internal-error"),te(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var b=this;return(0,g.Z)(function*(){return te(!b.accessToken||b.refreshToken,m,"user-token-expired"),y||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(m,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var b=this;return(0,g.Z)(function*(){const{accessToken:x,refreshToken:U,expiresIn:ee}=yield function Ce(w,m){return st.apply(this,arguments)}(m,y);b.updateTokensAndExpiration(x,U,Number(ee))})()}updateTokensAndExpiration(m,y,b){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(m,y){const{refreshToken:b,accessToken:x,expirationTime:U}=y,ee=new mt;return b&&(te("string"==typeof b,"internal-error",{appName:m}),ee.refreshToken=b),x&&(te("string"==typeof x,"internal-error",{appName:m}),ee.accessToken=x),U&&(te("number"==typeof U,"internal-error",{appName:m}),ee.expirationTime=U),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new mt,this.toJSON())}_performRefresh(){return nt("not implemented")}}function Ut(w,m){te("string"==typeof w||void 0===w,"internal-error",{appName:m})}class Bt{constructor(m){var{uid:y,auth:b,stsTokenManager:x}=m,U=(0,se._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=b,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new ts(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,g.Z)(function*(){const b=yield at(y,y.stsTokenManager.getToken(y.auth,m));return te(b,y.auth,"internal-error"),y.accessToken!==b&&(y.accessToken=b,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),b})()}getIdTokenResult(m){return function Bn(w){return Wr.apply(this,arguments)}(this,m)}reload(){return function wt(w){return zn.apply(this,arguments)}(this)}_assign(m){this!==m&&(te(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Bt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var b=this;return(0,g.Z)(function*(){let x=!1;m.idToken&&m.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(m),x=!0),y&&(yield Wn(b)),yield b.auth._persistUserIfCurrent(b),x&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var m=this;return(0,g.Z)(function*(){const y=yield m.getIdToken();return yield at(m,function Xi(w,m){return gt.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var b,x,U,ee,xe,dt,Tt,jt;const mn=null!==(b=y.displayName)&&void 0!==b?b:void 0,Fo=null!==(x=y.email)&&void 0!==x?x:void 0,zi=null!==(U=y.phoneNumber)&&void 0!==U?U:void 0,ol=null!==(ee=y.photoURL)&&void 0!==ee?ee:void 0,Vd=null!==(xe=y.tenantId)&&void 0!==xe?xe:void 0,gc=null!==(dt=y._redirectEventId)&&void 0!==dt?dt:void 0,h_=null!==(Tt=y.createdAt)&&void 0!==Tt?Tt:void 0,mc=null!==(jt=y.lastLoginAt)&&void 0!==jt?jt:void 0,{uid:Ta,emailVerified:zg,isAnonymous:al,providerData:yc,stsTokenManager:Kg}=y;te(Ta&&Kg,m,"internal-error");const Ff=mt.fromJSON(this.name,Kg);te("string"==typeof Ta,m,"internal-error"),Ut(mn,m.name),Ut(Fo,m.name),te("boolean"==typeof zg,m,"internal-error"),te("boolean"==typeof al,m,"internal-error"),Ut(zi,m.name),Ut(ol,m.name),Ut(Vd,m.name),Ut(gc,m.name),Ut(h_,m.name),Ut(mc,m.name);const gu=new Bt({uid:Ta,auth:m,email:Fo,emailVerified:zg,displayName:mn,isAnonymous:al,photoURL:ol,phoneNumber:zi,tenantId:Vd,stsTokenManager:Ff,createdAt:h_,lastLoginAt:mc});return yc&&Array.isArray(yc)&&(gu.providerData=yc.map(f_=>Object.assign({},f_))),gc&&(gu._redirectEventId=gc),gu}static _fromIdTokenResponse(m,y,b=!1){return(0,g.Z)(function*(){const x=new mt;x.updateFromServerResponse(y);const U=new Bt({uid:y.localId,auth:m,stsTokenManager:x,isAnonymous:b});return yield Wn(U),U})()}}const $=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(y,b){var x=this;return(0,g.Z)(function*(){x.storage[y]=b})()}_get(y){var b=this;return(0,g.Z)(function*(){const x=b.storage[y];return void 0===x?null:x})()}_remove(y){var b=this;return(0,g.Z)(function*(){delete b.storage[y]})()}_addListener(y,b){}_removeListener(y,b){}}return w.type="NONE",w})();function Y(w,m,y){return`firebase:${w}:${m}:${y}`}class pe{constructor(m,y,b){this.persistence=m,this.auth=y,this.userKey=b;const{config:x,name:U}=this.auth;this.fullUserKey=Y(this.userKey,x.apiKey,U),this.fullPersistenceKey=Y("persistence",x.apiKey,U),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,g.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?Bt._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,g.Z)(function*(){if(y.persistence===m)return;const b=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,b?y.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,b="authUser"){return(0,g.Z)(function*(){if(!y.length)return new pe(ae($),m,b);const x=(yield Promise.all(y.map(function(){var Tt=(0,g.Z)(function*(jt){if(yield jt._isAvailable())return jt});return function(jt){return Tt.apply(this,arguments)}}()))).filter(Tt=>Tt);let U=x[0]||ae($);const ee=Y(b,m.config.apiKey,m.name);let xe=null;for(const Tt of y)try{const jt=yield Tt._get(ee);if(jt){const mn=Bt._fromJSON(m,jt);Tt!==U&&(xe=mn),U=Tt;break}}catch(jt){}const dt=x.filter(Tt=>Tt._shouldAllowMigration);return U._shouldAllowMigration&&dt.length?(U=dt[0],xe&&(yield U._set(ee,xe.toJSON())),yield Promise.all(y.map(function(){var Tt=(0,g.Z)(function*(jt){if(jt!==U)try{yield jt._remove(ee)}catch(mn){}});return function(jt){return Tt.apply(this,arguments)}}())),new pe(U,m,b)):new pe(U,m,b)})()}}function F(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Ve(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(j(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ct(m))return"Blackberry";if(ot(m))return"Webos";if(G(m))return"Safari";if((m.includes("chrome/")||ue(m))&&!m.includes("edge/"))return"Chrome";if(Ye(m))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function j(w=(0,q.z$)()){return/firefox\//i.test(w)}function G(w=(0,q.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function ue(w=(0,q.z$)()){return/crios\//i.test(w)}function Ve(w=(0,q.z$)()){return/iemobile/i.test(w)}function Ye(w=(0,q.z$)()){return/android/i.test(w)}function Ct(w=(0,q.z$)()){return/blackberry/i.test(w)}function ot(w=(0,q.z$)()){return/webos/i.test(w)}function xt(w=(0,q.z$)()){return/iphone|ipad|ipod/i.test(w)}function xn(w=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function zr(w=(0,q.z$)()){return xt(w)||Ye(w)||ot(w)||Ct(w)||/windows phone/i.test(w)||Ve(w)}function ur(w,m=[]){let y;switch(w){case"Browser":y=F((0,q.z$)());break;case"Worker":y=`${F((0,q.z$)())}-${w}`;break;default:y=w}const b=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${M.SDK_VERSION}/${b}`}class Lu{constructor(m,y,b){this.app=m,this.heartbeatServiceProvider=y,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xe(this),this.idTokenSubscription=new Xe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(m,y){var b=this;return y&&(this._popupRedirectResolver=ae(y)),this._initializationPromise=this.queue((0,g.Z)(function*(){var x,U;if(!b._deleted&&(b.persistenceManager=yield pe.create(b,m),!b._deleted)){if(null===(x=b._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(ee){}yield b.initializeCurrentUser(y),b.lastNotifiedUid=(null===(U=b.currentUser)||void 0===U?void 0:U.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,g.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y)}})()}initializeCurrentUser(m){var y=this;return(0,g.Z)(function*(){var b;let x=yield y.assertedPersistence.getCurrentUser();if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const U=null===(b=y.redirectUser)||void 0===b?void 0:b._redirectEventId,ee=null==x?void 0:x._redirectEventId,xe=yield y.tryRedirectSignIn(m);(!U||U===ee)&&(null==xe?void 0:xe.user)&&(x=xe.user)}return x?x._redirectEventId?(te(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===x._redirectEventId?y.directlySetCurrentUser(x):y.reloadAndSetCurrentUserOrClear(x)):y.reloadAndSetCurrentUserOrClear(x):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var y=this;return(0,g.Z)(function*(){let b=null;try{b=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch(x){yield y._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,g.Z)(function*(){try{yield Wn(m)}catch(b){if("auth/network-request-failed"!==b.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function ln(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,g.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,g.Z)(function*(){const b=m?(0,q.m9)(m):null;return b&&te(b.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(b&&b._clone(y))})()}_updateCurrentUser(m){var y=this;return(0,g.Z)(function*(){if(!y._deleted)return m&&te(y.tenantId===m.tenantId,y,"tenant-id-mismatch"),y.queue((0,g.Z)(function*(){yield y.directlySetCurrentUser(m),y.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,g.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var y=this;return this.queue((0,g.Z)(function*(){yield y.assertedPersistence.setPersistence(ae(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new q.LL("auth","Firebase",m())}onAuthStateChanged(m,y,b){return this.registerStateListener(this.authStateSubscription,m,y,b)}onIdTokenChanged(m,y,b){return this.registerStateListener(this.idTokenSubscription,m,y,b)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var b=this;return(0,g.Z)(function*(){const x=yield b.getOrInitRedirectPersistenceManager(y);return null===m?x.removeCurrentUser():x.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,g.Z)(function*(){if(!y.redirectPersistenceManager){const b=m&&ae(m)||y._popupRedirectResolver;te(b,y,"argument-error"),y.redirectPersistenceManager=yield pe.create(y,[ae(b._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,g.Z)(function*(){var b,x;return y._isInitialized&&(yield y.queue((0,g.Z)(function*(){}))),(null===(b=y._currentUser)||void 0===b?void 0:b._redirectEventId)===m?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,g.Z)(function*(){if(m===y.currentUser)return y.queue((0,g.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,b,x){if(this._deleted)return()=>{};const U="function"==typeof y?y:y.next.bind(y),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return te(ee,this,"internal-error"),ee.then(()=>U(this.currentUser)),"function"==typeof y?m.addObserver(y,b,x):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,g.Z)(function*(){y.currentUser&&y.currentUser!==m&&(y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh()),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,g.Z)(function*(){var y;const b={"X-Client-Version":m.clientVersion};m.app.options.appId&&(b["X-Firebase-gmpid"]=m.app.options.appId);const x=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(b["X-Firebase-Client"]=x),b})()}}function yn(w){return(0,q.m9)(w)}class Xe{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,q.ne)(y=>this.observer=y)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wt(w,m,y){const b=yn(w);te(b._canInitEmulator,b,"emulator-config-failed"),te(/^https?:\/\//.test(m),b,"invalid-emulator-scheme");const x=!!(null==y?void 0:y.disableWarnings),U=_n(m),{host:ee,port:xe}=function Kr(w){const m=_n(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const b=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(b);if(x){const U=x[1];return{host:U,port:gs(b.substr(U.length+1))}}{const[U,ee]=b.split(":");return{host:U,port:gs(ee)}}}(m);b.config.emulator={url:`${U}//${ee}${null===xe?"":`:${xe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ee,port:xe,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function _r(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function _n(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function gs(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Zr{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return nt("not implemented")}_getIdTokenResponse(m){return nt("not implemented")}_linkToIdToken(m,y){return nt("not implemented")}_getReauthenticationResolver(m){return nt("not implemented")}}function Pn(w,m){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:resetPassword",Jt(w,m))})).apply(this,arguments)}function po(w,m){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function za(w,m){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:update",Jt(w,m))})).apply(this,arguments)}function rs(){return(rs=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signInWithPassword",Jt(w,m))})).apply(this,arguments)}function Cr(w,m){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:sendOobCode",Jt(w,m))})).apply(this,arguments)}function go(w,m){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(w,m){return Cr(w,m)})).apply(this,arguments)}function bn(w,m){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,g.Z)(function*(w,m){return Cr(w,m)})).apply(this,arguments)}function gd(w,m){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(w,m){return Cr(w,m)})).apply(this,arguments)}function is(w,m){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,g.Z)(function*(w,m){return Cr(w,m)})).apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signInWithEmailLink",Jt(w,m))})).apply(this,arguments)}function Bu(){return(Bu=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signInWithEmailLink",Jt(w,m))})).apply(this,arguments)}class Vu extends Zr{constructor(m,y,b,x=null){super("password",b),this._email=m,this._password=y,this._tenantId=x}static _fromEmailAndPassword(m,y){return new Vu(m,y,"password")}static _fromEmailAndCode(m,y,b=null){return new Vu(m,y,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,g.Z)(function*(){switch(y.signInMethod){case"password":return function Hl(w,m){return rs.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function ea(w,m){return ta.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:$e(m,"internal-error")}})()}_linkToIdToken(m,y){var b=this;return(0,g.Z)(function*(){switch(b.signInMethod){case"password":return po(m,{idToken:y,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Vi(w,m){return Bu.apply(this,arguments)}(m,{idToken:y,email:b._email,oobCode:b._password});default:$e(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function $s(w,m){return gi.apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signInWithIdp",Jt(w,m))})).apply(this,arguments)}class ms extends Zr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new ms(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):$e("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:x}=y,U=(0,se._T)(y,["providerId","signInMethod"]);if(!b||!x)return null;const ee=new ms(b,x);return ee.idToken=U.idToken||void 0,ee.accessToken=U.accessToken||void 0,ee.secret=U.secret,ee.nonce=U.nonce,ee.pendingToken=U.pendingToken||null,ee}_getIdTokenResponse(m){return $s(m,this.buildRequest())}_linkToIdToken(m,y){const b=this.buildRequest();return b.idToken=y,$s(m,b)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,$s(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,q.xO)(y)}return m}}function Pg(w,m){return md.apply(this,arguments)}function md(){return(md=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:sendVerificationCode",Jt(w,m))})).apply(this,arguments)}function Ka(){return(Ka=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,m))})).apply(this,arguments)}function yd(){return(yd=(0,g.Z)(function*(w,m){const y=yield Or(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,m));if(y.temporaryProof)throw Fr(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Mg={USER_NOT_FOUND:"user-not-found"};function _d(){return(_d=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Mg)})).apply(this,arguments)}class ra extends Zr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new ra({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new ra({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function Ng(w,m){return Ka.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function na(w,m){return yd.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function kg(w,m){return _d.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:b,verificationCode:x}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:b,code:x}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:b,phoneNumber:x,temporaryProof:U}=m;return b||y||x||U?new ra({verificationId:y,verificationCode:b,phoneNumber:x,temporaryProof:U}):null}}class Gs{constructor(m){var y,b,x,U,ee,xe;const dt=(0,q.zd)((0,q.pd)(m)),Tt=null!==(y=dt.apiKey)&&void 0!==y?y:null,jt=null!==(b=dt.oobCode)&&void 0!==b?b:null,mn=function Og(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=dt.mode)&&void 0!==x?x:null);te(Tt&&jt&&mn,"argument-error"),this.apiKey=Tt,this.operation=mn,this.code=jt,this.continueUrl=null!==(U=dt.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(ee=dt.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(xe=dt.tenantId)&&void 0!==xe?xe:null}static parseLink(m){const y=function t_(w){const m=(0,q.zd)((0,q.pd)(w)).link,y=m?(0,q.zd)((0,q.pd)(m)).deep_link_id:null,b=(0,q.zd)((0,q.pd)(w)).deep_link_id;return(b?(0,q.zd)((0,q.pd)(b)).link:null)||b||y||m||w}(m);try{return new Gs(y)}catch(b){return null}}}let ju=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,b){return Vu._fromEmailAndPassword(y,b)}static credentialWithLink(y,b){const x=Gs.parseLink(b);return te(x,"argument-error"),Vu._fromEmailAndCode(y,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ys{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Za extends ys{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Di extends Za{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return te("providerId"in y&&"signInMethod"in y,"argument-error"),ms._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return te(m.idToken||m.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Di.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Di.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:U,nonce:ee,providerId:xe}=m;if(!b&&!x&&!y&&!U||!xe)return null;try{return new Di(xe)._credential({idToken:y,accessToken:b,nonce:ee,pendingToken:U})}catch(dt){return null}}}let pf=(()=>{class w extends Za{constructor(){super("facebook.com")}static credential(y){return ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(b){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ia=(()=>{class w extends Za{constructor(){super("google.com"),this.addScope("profile")}static credential(y,b){return ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:b})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:b,oauthAccessToken:x}=y;if(!b&&!x)return null;try{return w.credential(b,x)}catch(U){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Hu=(()=>{class w extends Za{constructor(){super("github.com")}static credential(y){return ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(b){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ya extends Zr{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return $s(m,this.buildRequest())}_linkToIdToken(m,y){const b=this.buildRequest();return b.idToken=y,$s(m,b)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,$s(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:x,pendingToken:U}=y;return b&&x&&U&&b===x?new Ya(b,U):null}static _create(m,y){return new Ya(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ji extends ys{constructor(m){te(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return ji.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return ji.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=Ya.fromJSON(m);return te(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:b}=m;if(!y||!b)return null;try{return Ya._create(b,y)}catch(x){return null}}}let _s=(()=>{class w extends Za{constructor(){super("twitter.com")}static credential(y,b){return ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:b})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:b,oauthTokenSecret:x}=y;if(!b||!x)return null;try{return w.credential(b,x)}catch(U){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function $u(w,m){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signUp",Jt(w,m))})).apply(this,arguments)}class Vn{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,b,x=!1){return(0,g.Z)(function*(){const U=yield Bt._fromIdTokenResponse(m,b,x),ee=sa(b);return new Vn({user:U,providerId:ee,_tokenResponse:b,operationType:y})})()}static _forOperation(m,y,b){return(0,g.Z)(function*(){yield m._updateTokensIfNecessary(b,!0);const x=sa(b);return new Vn({user:m,providerId:x,_tokenResponse:b,operationType:y})})()}}function sa(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Fg(w){return oa.apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(w){var m;const y=yn(w);if(yield y._initializationPromise,null===(m=y.currentUser)||void 0===m?void 0:m.isAnonymous)return new Vn({user:y.currentUser,providerId:null,operationType:"signIn"});const b=yield $u(y,{returnSecureToken:!0}),x=yield Vn._fromIdTokenResponse(y,"signIn",b,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class $l extends q.ZR{constructor(m,y,b,x){var U;super(y.code,y.message),this.operationType=b,this.user=x,Object.setPrototypeOf(this,$l.prototype),this.customData={appName:m.name,tenantId:null!==(U=m.tenantId)&&void 0!==U?U:void 0,_serverResponse:y.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(m,y,b,x){return new $l(m,y,b,x)}}function wd(w,m,y,b){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?$l._fromErrorAndOperation(w,U,m,b):U})}function Gu(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function qs(w,m){return mo.apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(w,m){const y=(0,q.m9)(w);yield yo(!0,y,m);const{providerUserInfo:b}=yield qr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),x=Gu(b||[]);return y.providerData=y.providerData.filter(U=>x.has(U.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Gl(w,m){return In.apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(w,m,y=!1){const b=yield at(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return Vn._forOperation(w,"link",b)})).apply(this,arguments)}function yo(w,m,y){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(w,m,y){yield Wn(m);const x=!1===w?"provider-already-linked":"no-such-provider";te(Gu(m.providerData).has(y)===w,m.auth,x)})).apply(this,arguments)}function vn(w,m){return ql.apply(this,arguments)}function ql(){return(ql=(0,g.Z)(function*(w,m,y=!1){const{auth:b}=w,x="reauthenticate";try{const U=yield at(w,wd(b,x,m,w),y);te(U.idToken,b,"internal-error");const ee=Gt(U.idToken);te(ee,b,"internal-error");const{sub:xe}=ee;return te(w.uid===xe,b,"user-mismatch"),Vn._forOperation(w,x,U)}catch(U){throw"auth/user-not-found"===(null==U?void 0:U.code)&&$e(b,"user-mismatch"),U}})).apply(this,arguments)}function aa(w,m){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(w,m,y=!1){const b="signIn",x=yield wd(w,b,m),U=yield Vn._fromIdTokenResponse(w,b,x);return y||(yield w._updateCurrentUser(U.user)),U})).apply(this,arguments)}function Lr(w,m){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(w,m){return aa(yn(w),m)})).apply(this,arguments)}function qu(w,m){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(w,m){const y=(0,q.m9)(w);return yield yo(!1,y,m.providerId),Gl(y,m)})).apply(this,arguments)}function ti(w,m){return vs.apply(this,arguments)}function vs(){return(vs=(0,g.Z)(function*(w,m){return vn((0,q.m9)(w),m)})).apply(this,arguments)}function vo(w,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(w,m){return Or(w,"POST","/v1/accounts:signInWithCustomToken",Jt(w,m))})).apply(this,arguments)}function Hi(w,m){return ss.apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(w,m){const y=yn(w),b=yield vo(y,{token:m,returnSecureToken:!0}),x=yield Vn._fromIdTokenResponse(y,"signIn",b);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class ws{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Et._fromServerResponse(m,y):$e(m,"internal-error")}}class Et extends ws{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Et(y)}}function Ja(w,m,y){var b;te((null===(b=y.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),te(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(te(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(te(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function Ed(w,m,y){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w),x={requestType:"PASSWORD_RESET",email:m};y&&Ja(b,x,y),yield bn(b,x)})).apply(this,arguments)}function bd(w,m,y){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(w,m,y){yield Pn((0,q.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function yf(w,m){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,g.Z)(function*(w,m){yield za((0,q.m9)(w),{oobCode:m})})).apply(this,arguments)}function Se(w,m){return qt.apply(this,arguments)}function qt(){return(qt=(0,g.Z)(function*(w,m){const y=(0,q.m9)(w),b=yield Pn(y,{oobCode:m}),x=b.requestType;switch(te(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(b.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(b.mfaInfo,y,"internal-error");default:te(b.email,y,"internal-error")}let U=null;return b.mfaInfo&&(U=ws._fromServerResponse(yn(y),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:U},operation:x}})).apply(this,arguments)}function _f(w,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(w,m){const{data:y}=yield Se((0,q.m9)(w),m);return y.email})).apply(this,arguments)}function Wu(w,m,y){return zs.apply(this,arguments)}function zs(){return(zs=(0,g.Z)(function*(w,m,y){const b=yn(w),x=yield $u(b,{returnSecureToken:!0,email:m,password:y}),U=yield Vn._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(U.user),U})).apply(this,arguments)}function $i(w,m,y){return Lr((0,q.m9)(w),ju.credential(m,y))}function Wl(w,m,y){return eu.apply(this,arguments)}function eu(){return(eu=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w),x={requestType:"EMAIL_SIGNIN",email:m};te(y.handleCodeInApp,b,"argument-error"),y&&Ja(b,x,y),yield gd(b,x)})).apply(this,arguments)}function Lg(w,m){const y=Gs.parseLink(m);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function zl(w,m,y){return da.apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w),x=ju.credentialWithLink(m,y||ge());return te(x._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Lr(b,x)})).apply(this,arguments)}function ha(w,m){return vr.apply(this,arguments)}function vr(){return(vr=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:createAuthUri",Jt(w,m))})).apply(this,arguments)}function os(w,m){return fa.apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(w,m){const b={identifier:m,continueUri:Le()?ge():"http://localhost"},{signinMethods:x}=yield ha((0,q.m9)(w),b);return x||[]})).apply(this,arguments)}function pa(w,m){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(w,m){const y=(0,q.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Ja(y.auth,x,m);const{email:U}=yield go(y.auth,x);U!==w.email&&(yield w.reload())})).apply(this,arguments)}function vf(w,m,y){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&Ja(b.auth,U,y);const{email:ee}=yield is(b.auth,U);ee!==w.email&&(yield w.reload())})).apply(this,arguments)}function Id(w,m){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(w,m){return rn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Kl(w,m){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const b=(0,q.m9)(w),U={idToken:yield b.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},ee=yield at(b,Id(b.auth,U));b.displayName=ee.displayName||null,b.photoURL=ee.photoUrl||null;const xe=b.providerData.find(({providerId:dt})=>"password"===dt);xe&&(xe.displayName=b.displayName,xe.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ee)})).apply(this,arguments)}function wf(w,m){return Yl((0,q.m9)(w),m,null)}function Zl(w,m){return Yl((0,q.m9)(w),null,m)}function Yl(w,m,y){return zu.apply(this,arguments)}function zu(){return(zu=(0,g.Z)(function*(w,m,y){const{auth:b}=w,U={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(U.email=m),y&&(U.password=y);const ee=yield at(w,po(b,U));yield w._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class wo{constructor(m,y,b={}){this.isNewUser=m,this.providerId=y,this.profile=b}}class Ql extends wo{constructor(m,y,b,x){super(m,y,b),this.username=x}}class Ef extends wo{constructor(m,y){super(m,"facebook.com",y)}}class Td extends Ql{constructor(m,y){super(m,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Eo extends wo{constructor(m,y){super(m,"google.com",y)}}class Zs extends Ql{constructor(m,y,b){super(m,"twitter.com",y,b)}}function Jl(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function nu(w){var m,y;if(!w)return null;const{providerId:b}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},U=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&(null==w?void 0:w.idToken)){const ee=null===(y=null===(m=Gt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(ee)return new wo(U,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!b)return null;switch(b){case"facebook.com":return new Ef(U,x);case"github.com":return new Td(U,x);case"google.com":return new Eo(U,x);case"twitter.com":return new Zs(U,x,w.screenName||null);case"custom":case"anonymous":return new wo(U,null);default:return new wo(U,b,x)}}(y)}class bo{constructor(m,y){this.type=m,this.credential=y}static _fromIdtoken(m){return new bo("enroll",m)}static _fromMfaPendingCredential(m){return new bo("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,b;if(null==m?void 0:m.multiFactorSession){if(null===(y=m.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return bo._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(b=m.multiFactorSession)||void 0===b?void 0:b.idToken)return bo._fromIdtoken(m.multiFactorSession.idToken)}return null}}class ru{constructor(m,y,b){this.session=m,this.hints=y,this.signInResolver=b}static _fromError(m,y){const b=yn(m),x=y.customData._serverResponse,U=(x.mfaInfo||[]).map(xe=>ws._fromServerResponse(b,xe));te(x.mfaPendingCredential,b,"internal-error");const ee=bo._fromMfaPendingCredential(x.mfaPendingCredential);return new ru(ee,U,function(){var xe=(0,g.Z)(function*(dt){const Tt=yield dt._process(b,ee);delete x.mfaInfo,delete x.mfaPendingCredential;const jt=Object.assign(Object.assign({},x),{idToken:Tt.idToken,refreshToken:Tt.refreshToken});switch(y.operationType){case"signIn":const mn=yield Vn._fromIdTokenResponse(b,y.operationType,jt);return yield b._updateCurrentUser(mn.user),mn;case"reauthenticate":return te(y.user,b,"internal-error"),Vn._forOperation(y.user,y.operationType,jt);default:$e(b,"internal-error")}});return function(dt){return xe.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,g.Z)(function*(){return y.signInResolver(m)})()}}function ec(w,m){var y;const b=(0,q.m9)(w),x=m;return te(m.customData.operationType,b,"argument-error"),te(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,b,"argument-error"),ru._fromError(b,x)}function Ku(w,m){return rn(w,"POST","/v2/accounts/mfaEnrollment:start",Jt(w,m))}class Sd{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(b=>ws._fromServerResponse(m.auth,b)))})}static _fromUser(m){return new Sd(m)}getSession(){var m=this;return(0,g.Z)(function*(){return bo._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,y){var b=this;return(0,g.Z)(function*(){const x=m,U=yield b.getSession(),ee=yield at(b.user,x._process(b.user.auth,U,y));return yield b.user._updateTokensIfNecessary(ee),b.user.reload()})()}unenroll(m){var y=this;return(0,g.Z)(function*(){const b="string"==typeof m?m:m.uid,x=yield y.user.getIdToken(),U=yield at(y.user,function Dd(w,m){return rn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(w,m))}(y.user.auth,{idToken:x,mfaEnrollmentId:b}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ee})=>ee!==b),yield y.user._updateTokensIfNecessary(U);try{yield y.user.reload()}catch(ee){if("auth/user-token-expired"!==ee.code)throw ee}})()}}const Es=new WeakMap;function Zu(w){const m=(0,q.m9)(w);return Es.has(m)||Es.set(m,Sd._fromUser(m)),Es.get(m)}const iu="__sak";class If{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(iu,"1"),this.storage.removeItem(iu),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Sn=(()=>{class w extends If{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,b)=>this.onStorageEvent(y,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ma(){const w=(0,q.z$)();return G(w)||xt(w)}()&&function Bi(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=zr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const b of Object.keys(this.listeners)){const x=this.storage.getItem(b),U=this.localCache[b];x!==U&&y(b,U,x)}}onStorageEvent(y,b=!1){if(!y.key)return void this.forAllChangedKeys((xe,dt,Tt)=>{this.notifyListeners(xe,Tt)});const x=y.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(y.newValue!==xe)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!b)return}const U=()=>{const xe=this.storage.getItem(x);!b&&this.localCache[x]===xe||this.notifyListeners(x,xe)},ee=this.storage.getItem(x);!function Xt(){return(0,q.w1)()&&10===document.documentMode}()||ee===y.newValue||y.newValue===y.oldValue?U():setTimeout(U,10)}notifyListeners(y,b){this.localCache[y]=b;const x=this.listeners[y];if(x)for(const U of Array.from(x))U(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,b,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:b,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,b){var x=()=>super._set,U=this;return(0,g.Z)(function*(){yield x().call(U,y,b),U.localCache[y]=JSON.stringify(b)})()}_get(y){var b=()=>super._get,x=this;return(0,g.Z)(function*(){const U=yield b().call(x,y);return x.localCache[y]=JSON.stringify(U),U})()}_remove(y){var b=()=>super._remove,x=this;return(0,g.Z)(function*(){yield b().call(x,y),delete x.localCache[y]})()}}return w.type="LOCAL",w})(),yt=(()=>{class w extends If{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,b){}_removeListener(y,b){}}return w.type="SESSION",w})();let yi=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const b=this.receivers.find(U=>U.isListeningto(y));if(b)return b;const x=new w(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var b=this;return(0,g.Z)(function*(){const x=y,{eventId:U,eventType:ee,data:xe}=x.data,dt=b.handlersMap[ee];if(!(null==dt?void 0:dt.size))return;x.ports[0].postMessage({status:"ack",eventId:U,eventType:ee});const Tt=Array.from(dt).map(function(){var mn=(0,g.Z)(function*(Fo){return Fo(x.origin,xe)});return function(Fo){return mn.apply(this,arguments)}}()),jt=yield function bs(w){return Promise.all(w.map(function(){var m=(0,g.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(b){return{fulfilled:!1,reason:b}}});return function(y){return m.apply(this,arguments)}}()))}(Tt);x.ports[0].postMessage({status:"done",eventId:U,eventType:ee,response:jt})})()}_subscribe(y,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(b)}_unsubscribe(y,b){this.handlersMap[y]&&b&&this.handlersMap[y].delete(b),(!b||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function dr(w="",m=10){let y="";for(let b=0;b<m;b++)y+=Math.floor(10*Math.random());return w+y}class Rd{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,b=50){var x=this;return(0,g.Z)(function*(){const U="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let ee,xe;return new Promise((dt,Tt)=>{const jt=dr("",20);U.port1.start();const mn=setTimeout(()=>{Tt(new Error("unsupported_event"))},b);xe={messageChannel:U,onMessage(Fo){const zi=Fo;if(zi.data.eventId===jt)switch(zi.data.status){case"ack":clearTimeout(mn),ee=setTimeout(()=>{Tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),dt(zi.data.response);break;default:clearTimeout(mn),clearTimeout(ee),Tt(new Error("invalid_response"))}}},x.handlers.add(xe),U.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:m,eventId:jt,data:y},[U.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function er(){return window}function tc(){return void 0!==er().WorkerGlobalScope&&"function"==typeof er().importScripts}function ya(){return(ya=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const nc="firebaseLocalStorageDb",Yu="firebaseLocalStorage",Qu="fbase_key";class An{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Xs(w,m){return w.transaction([Yu],m?"readwrite":"readonly").objectStore(Yu)}function ri(){const w=indexedDB.open(nc,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(Yu,{keyPath:Qu})}catch(x){y(x)}}),w.addEventListener("success",(0,g.Z)(function*(){const b=w.result;b.objectStoreNames.contains(Yu)?m(b):(b.close(),yield function rc(){const w=indexedDB.deleteDatabase(nc);return new An(w).toPromise()}(),m(yield ri()))}))})}function Io(w,m,y){return _a.apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(w,m,y){const b=Xs(w,!0).put({[Qu]:m,value:y});return new An(b).toPromise()})).apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(w,m){const y=Xs(w,!1).get(m),b=yield new An(y).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function To(w,m){const y=Xs(w,!0).delete(m);return new An(y).toPromise()}const to=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,g.Z)(function*(){return y.db||(y.db=yield ri()),y.db})()}_withRetries(y){var b=this;return(0,g.Z)(function*(){let x=0;for(;;)try{const U=yield b._openDb();return yield y(U)}catch(U){if(x++>3)throw U;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,g.Z)(function*(){return tc()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,g.Z)(function*(){y.receiver=yi._getInstance(function St(){return tc()?self:null}()),y.receiver._subscribe("keyChanged",function(){var b=(0,g.Z)(function*(x,U){return{keyProcessed:(yield y._poll()).includes(U.key)}});return function(x,U){return b.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var b=(0,g.Z)(function*(x,U){return["keyChanged"]});return function(x,U){return b.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,g.Z)(function*(){var b,x;if(y.activeServiceWorker=yield function Js(){return ya.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Rd(y.activeServiceWorker);const U=yield y.sender._send("ping",{},800);!U||(null===(b=U[0])||void 0===b?void 0:b.fulfilled)&&(null===(x=U[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var b=this;return(0,g.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Gi(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:y},b.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ri();return yield Io(y,iu,"1"),yield To(y,iu),!0}catch(y){}return!1})()}_withPendingWrite(y){var b=this;return(0,g.Z)(function*(){b.pendingWrites++;try{yield y()}finally{b.pendingWrites--}})()}_set(y,b){var x=this;return(0,g.Z)(function*(){return x._withPendingWrite((0,g.Z)(function*(){return yield x._withRetries(U=>Io(U,y,b)),x.localCache[y]=b,x.notifyServiceWorker(y)}))})()}_get(y){var b=this;return(0,g.Z)(function*(){const x=yield b._withRetries(U=>function eo(w,m){return su.apply(this,arguments)}(U,y));return b.localCache[y]=x,x})()}_remove(y){var b=this;return(0,g.Z)(function*(){return b._withPendingWrite((0,g.Z)(function*(){return yield b._withRetries(x=>To(x,y)),delete b.localCache[y],b.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,g.Z)(function*(){const b=yield y._withRetries(ee=>{const xe=Xs(ee,!1).getAll();return new An(xe).toPromise()});if(!b)return[];if(0!==y.pendingWrites)return[];const x=[],U=new Set;for(const{fbase_key:ee,value:xe}of b)U.add(ee),JSON.stringify(y.localCache[ee])!==JSON.stringify(xe)&&(y.notifyListeners(ee,xe),x.push(ee));for(const ee of Object.keys(y.localCache))y.localCache[ee]&&!U.has(ee)&&(y.notifyListeners(ee,null),x.push(ee));return x})()}notifyListeners(y,b){this.localCache[y]=b;const x=this.listeners[y];if(x)for(const U of Array.from(x))U(b)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function va(w,m){return rn(w,"POST","/v2/accounts/mfaSignIn:start",Jt(w,m))}function hr(){return(hr=(0,g.Z)(function*(w){return(yield rn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pd(w){return new Promise((m,y)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=m,b.onerror=x=>{const U=Pe("internal-error");U.customData=x,y(U)},b.type="text/javascript",b.charset="UTF-8",function Ts(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(b)})}function kn(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Cs=1e12;class ii{constructor(m){this.auth=m,this.counter=Cs,this._widgets=new Map}render(m,y){const b=this.counter;return this._widgets.set(b,new as(m,this.auth.name,y||{})),this.counter++,b}reset(m){var y;const b=m||Cs;null===(y=this._widgets.get(b))||void 0===y||y.delete(),this._widgets.delete(b)}getResponse(m){var y;return(null===(y=this._widgets.get(m||Cs))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,g.Z)(function*(){var b;return null===(b=y._widgets.get(m||Cs))||void 0===b||b.execute(),""})()}}class as{constructor(m,y,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof m?document.getElementById(m):m;te(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function us(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const On=kn("rcb"),Co=new Ge(3e4,6e4);class jn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!er().grecaptcha}load(m,y=""){return te(function Ug(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(er().grecaptcha):new Promise((b,x)=>{const U=er().setTimeout(()=>{x(Pe(m,"network-request-failed"))},Co.get());er()[On]=()=>{er().clearTimeout(U),delete er()[On];const xe=er().grecaptcha;if(!xe)return void x(Pe(m,"internal-error"));const dt=xe.render;xe.render=(Tt,jt)=>{const mn=dt(Tt,jt);return this.counter++,mn},this.hostLanguage=y,b(xe)},Pd(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:On,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(U),x(Pe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!er().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bg{load(m){return(0,g.Z)(function*(){return new ii(m)})()}clearedOneInstance(){}}const Df="recaptcha",Do={theme:"light",type:"image"};class _i{constructor(m,y=Object.assign({},Do),b){this.parameters=y,this.type=Df,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(b),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof m?document.getElementById(m):m;te(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bg:new jn,this.validateStartingState()}verify(){var m=this;return(0,g.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),b=m.getAssertedRecaptcha();return b.getResponse(y)||new Promise(U=>{const ee=xe=>{!xe||(m.tokenChangeListeners.delete(ee),U(xe))};m.tokenChangeListeners.add(ee),m.isInvisible&&b.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(b=>b(y)),"function"==typeof m)m(y);else if("string"==typeof m){const b=er()[m];"function"==typeof b&&b(y)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,g.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const b=document.createElement("div");y.appendChild(b),y=b}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,g.Z)(function*(){te(Le()&&!tc(),m.auth,"internal-error"),yield function Vg(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function ou(w){return hr.apply(this,arguments)}(m.auth);te(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ls{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=ra._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function So(w,m,y){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,g.Z)(function*(w,m,y){const b=yn(w),x=yield Xu(b,m,(0,q.m9)(y));return new ls(x,U=>Lr(b,U))})).apply(this,arguments)}function tr(w,m,y){return uu.apply(this,arguments)}function uu(){return(uu=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w);yield yo(!1,b,"phone");const x=yield Xu(b.auth,m,(0,q.m9)(y));return new ls(x,U=>qu(b,U))})).apply(this,arguments)}function Ju(w,m,y){return Md.apply(this,arguments)}function Md(){return(Md=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w),x=yield Xu(b.auth,m,(0,q.m9)(y));return new ls(x,U=>ti(b,U))})).apply(this,arguments)}function Xu(w,m,y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(w,m,y){var b;const x=yield y.verify();try{let U;if(te("string"==typeof x,w,"argument-error"),te(y.type===Df,w,"argument-error"),U="string"==typeof m?{phoneNumber:m}:m,"session"in U){const ee=U.session;if("phoneNumber"in U)return te("enroll"===ee.type,w,"internal-error"),(yield Ku(w,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{te("signin"===ee.type,w,"internal-error");const xe=(null===(b=U.multiFactorHint)||void 0===b?void 0:b.uid)||U.multiFactorUid;return te(xe,w,"missing-multi-factor-info"),(yield va(w,{mfaPendingCredential:ee.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield Pg(w,{phoneNumber:U.phoneNumber,recaptchaToken:x});return ee}}finally{y._reset()}})).apply(this,arguments)}function cs(w,m){return lu.apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(w,m){yield Gl((0,q.m9)(w),m)})).apply(this,arguments)}let Ao=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=yn(y)}verifyPhoneNumber(y,b){return Xu(this.auth,y,(0,q.m9)(b))}static credential(y,b){return ra._fromVerification(y,b)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:b,temporaryProof:x}=y;return b&&x?ra._fromTokenResponse(b,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function vi(w,m){return m?ae(m):(te(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ba extends Zr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return $s(m,this._buildIdpRequest())}_linkToIdToken(m,y){return $s(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return $s(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function sc(w){return aa(w.auth,new ba(w),w.bypassAuthState)}function oc(w){const{auth:m,user:y}=w;return te(y,m,"internal-error"),vn(y,new ba(w),w.bypassAuthState)}function ac(w){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,g.Z)(function*(w){const{auth:m,user:y}=w;return te(y,m,"internal-error"),Gl(y,new ba(w),w.bypassAuthState)})).apply(this,arguments)}class kd{constructor(m,y,b,x,U=!1){this.auth=m,this.resolver=b,this.user=x,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,g.Z)(function*(b,x){m.pendingPromise={resolve:b,reject:x};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(U){m.reject(U)}});return function(b,x){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,g.Z)(function*(){const{urlResponse:b,sessionId:x,postBody:U,tenantId:ee,error:xe,type:dt}=m;if(xe)return void y.reject(xe);const Tt={auth:y.auth,requestUri:b,sessionId:x,tenantId:ee||void 0,postBody:U||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(dt)(Tt))}catch(jt){y.reject(jt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return sc;case"linkViaPopup":case"linkViaRedirect":return ac;case"reauthViaPopup":case"reauthViaRedirect":return oc;default:$e(this.auth,"internal-error")}}resolve(m){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dr=new Ge(2e3,1e4);function uc(w,m,y){return ds.apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(w,m,y){const b=yn(w);be(w,m,ys);const x=vi(b,y);return new el(b,"signInViaPopup",m,x).executeNotNull()})).apply(this,arguments)}function jg(w,m,y){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w);be(b.auth,m,ys);const x=vi(b.auth,y);return new el(b.auth,"reauthViaPopup",m,x,b).executeNotNull()})).apply(this,arguments)}function Od(w,m,y){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w);be(b.auth,m,ys);const x=vi(b.auth,y);return new el(b.auth,"linkViaPopup",m,x,b).executeNotNull()})).apply(this,arguments)}let el=(()=>{class w extends kd{constructor(y,b,x,U,ee){super(y,b,U,ee),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,g.Z)(function*(){const b=yield y.execute();return te(b,y.auth,"internal-error"),b})()}onExecution(){var y=this;return(0,g.Z)(function*(){tt(1===y.filter.length,"Popup operations only handle one event");const b=dr();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],b),y.authWindow.associatedEvent=b,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Pe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var b,x;this.pollId=(null===(x=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Dr.get())};y()}}return w.currentPopupAction=null,w})();const cu=new Map;class Ro extends kd{constructor(m,y,b=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,b),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,g.Z)(function*(){let b=cu.get(y.auth._key());if(!b){try{const U=(yield function fr(w,m){return si.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;b=()=>Promise.resolve(U)}catch(x){b=()=>Promise.reject(x)}cu.set(y.auth._key(),b)}return y.bypassAuthState||cu.set(y.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,b=this;return(0,g.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(b,m);if("unknown"!==m.type){if(m.eventId){const x=yield b.auth._redirectUserForId(m.eventId);if(x)return b.user=x,y().call(b,m);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function si(){return(si=(0,g.Z)(function*(w,m){const y=C(m),b=du(w);if(!(yield b._isAvailable()))return!1;const x="true"===(yield b._get(y));return yield b._remove(y),x})).apply(this,arguments)}function lc(w,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,g.Z)(function*(w,m){return du(w)._set(C(m),"true")})).apply(this,arguments)}function tl(){cu.clear()}function du(w){return ae(w._redirectPersistence)}function C(w){return Y("pendingRedirect",w.config.apiKey,w.name)}function S(w,m,y){return function N(w,m,y){return H.apply(this,arguments)}(w,m,y)}function H(){return(H=(0,g.Z)(function*(w,m,y){const b=yn(w);be(w,m,ys);const x=vi(b,y);return yield lc(x,b),x._openRedirect(b,m,"signInViaRedirect")})).apply(this,arguments)}function X(w,m,y){return function ie(w,m,y){return Me.apply(this,arguments)}(w,m,y)}function Me(){return(Me=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w);be(b.auth,m,ys);const x=vi(b.auth,y);yield lc(x,b.auth);const U=yield hu(b);return x._openRedirect(b.auth,m,"reauthViaRedirect",U)})).apply(this,arguments)}function Oe(w,m,y){return function ut(w,m,y){return Dt.apply(this,arguments)}(w,m,y)}function Dt(){return(Dt=(0,g.Z)(function*(w,m,y){const b=(0,q.m9)(w);be(b.auth,m,ys);const x=vi(b.auth,y);yield yo(!1,b,m.providerId),yield lc(x,b.auth);const U=yield hu(b);return x._openRedirect(b.auth,m,"linkViaRedirect",U)})).apply(this,arguments)}function zt(w,m){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,g.Z)(function*(w,m){return yield yn(w)._initializationPromise,pr(w,m,!1)})).apply(this,arguments)}function pr(w,m){return nr.apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(w,m,y=!1){const b=yn(w),x=vi(b,m),ee=yield new Ro(b,x,y).execute();return ee&&!y&&(delete ee.user._redirectEventId,yield b._persistUserIfCurrent(ee.user),yield b._setRedirectUser(null,m)),ee})).apply(this,arguments)}function hu(w){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(w){const m=dr(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class wi{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(m,b)&&(y=!0,this.sendToConsumer(m,b),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Sf(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Po(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var b;if(m.error&&!Po(m)){const x=(null===(b=m.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";y.onError(Pe(this.auth,x))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const b=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&b}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wi(m))}saveEventToCache(m){this.cachedEventUids.add(Wi(m)),this.lastProcessedEventTime=Date.now()}}function Wi(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Po({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===(null==m?void 0:m.code)}function nl(w){return rl.apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(w,m={}){return rn(w,"GET","/v1/projects",m)})).apply(this,arguments)}const cc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hg=/^https?/;function Af(){return(Af=(0,g.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield nl(w);for(const y of m)try{if(No(y))return}catch(b){}$e(w,"unauthorized-domain")})).apply(this,arguments)}function No(w){const m=ge(),{protocol:y,hostname:b}=new URL(m);if(w.startsWith("chrome-extension://")){const ee=new URL(w);return""===ee.hostname&&""===b?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&ee.hostname===b}if(!Hg.test(y))return!1;if(cc.test(w))return b===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(b)}const dc=new Ge(3e4,6e4);function $g(){const w=er().___jsl;if(null==w?void 0:w.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let hc=null;function i_(w){return hc=hc||function u0(w){return new Promise((m,y)=>{var b,x,U;function ee(){$g(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{$g(),y(Pe(w,"network-request-failed"))},timeout:dc.get()})}if(null===(x=null===(b=er().gapi)||void 0===b?void 0:b.iframes)||void 0===x?void 0:x.Iframe)m(gapi.iframes.getContext());else{if(!(null===(U=er().gapi)||void 0===U?void 0:U.load)){const xe=kn("iframefcb");return er()[xe]=()=>{gapi.load?ee():y(Pe(w,"network-request-failed"))},Pd(`https://apis.google.com/js/api.js?onload=${xe}`).catch(dt=>y(dt))}ee()}}).catch(m=>{throw hc=null,m})}(w),hc}const s_=new Ge(5e3,15e3),Mo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ko=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fd(w){const m=w.config;te(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?tn(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,b={apiKey:m.apiKey,appName:w.name,v:M.SDK_VERSION},x=ko.get(w.config.apiHost);x&&(b.eid=x);const U=w._getFrameworks();return U.length&&(b.fw=U.join(",")),`${y}?${(0,q.xO)(b).slice(1)}`}function Pf(){return Pf=(0,g.Z)(function*(w){const m=yield i_(w),y=er().gapi;return te(y,w,"internal-error"),m.open({where:document.body,url:Fd(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mo,dontclear:!0},b=>new Promise(function(){var x=(0,g.Z)(function*(U,ee){yield b.restyle({setHideOnLeave:!1});const xe=Pe(w,"network-request-failed"),dt=er().setTimeout(()=>{ee(xe)},s_.get());function Tt(){er().clearTimeout(dt),U(b)}b.ping(Tt).then(Tt,()=>{ee(xe)})});return function(U,ee){return x.apply(this,arguments)}}()))}),Pf.apply(this,arguments)}const il={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fc{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function pu(w,m,y,b,x,U){te(w.config.authDomain,w,"auth-domain-config-required"),te(w.config.apiKey,w,"invalid-api-key");const ee={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:b,v:M.SDK_VERSION,eventId:x};if(m instanceof ys){m.setDefaultLanguage(w.languageCode),ee.providerId=m.providerId||"",(0,q.xb)(m.getCustomParameters())||(ee.customParameters=JSON.stringify(m.getCustomParameters()));for(const[dt,Tt]of Object.entries(U||{}))ee[dt]=Tt}if(m instanceof Za){const dt=m.getScopes().filter(Tt=>""!==Tt);dt.length>0&&(ee.scopes=dt.join(","))}w.tenantId&&(ee.tid=w.tenantId);const xe=ee;for(const dt of Object.keys(xe))void 0===xe[dt]&&delete xe[dt];return`${function u_({config:w}){return w.emulator?tn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,q.xO)(xe).slice(1)}`}const Of="webStorageSupport",Oo=class Ia{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yt,this._completeRedirectFn=pr}_openPopup(m,y,b,x){var U=this;return(0,g.Z)(function*(){var ee;tt(null===(ee=U.eventManagers[m._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const xe=pu(m,y,b,ge(),x);return function Mf(w,m,y,b=500,x=600){const U=Math.max((window.screen.availHeight-x)/2,0).toString(),ee=Math.max((window.screen.availWidth-b)/2,0).toString();let xe="";const dt=Object.assign(Object.assign({},il),{width:b.toString(),height:x.toString(),top:U,left:ee}),Tt=(0,q.z$)().toLowerCase();y&&(xe=ue(Tt)?"_blank":y),j(Tt)&&(m=m||"http://localhost",dt.scrollbars="yes");const jt=Object.entries(dt).reduce((Fo,[zi,ol])=>`${Fo}${zi}=${ol},`,"");if(function yr(w=(0,q.z$)()){var m;return xt(w)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Tt)&&"_self"!==xe)return function Ud(w,m){const y=document.createElement("a");y.href=w,y.target=m;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(b)}(m||"",xe),new fc(null);const mn=window.open(m||"",xe,jt);te(mn,w,"popup-blocked");try{mn.focus()}catch(Fo){}return new fc(mn)}(m,xe,dr())})()}_openRedirect(m,y,b,x){var U=this;return(0,g.Z)(function*(){return yield U._originValidation(m),function Qs(w){er().location.href=w}(pu(m,y,b,ge(),x)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:x,promise:U}=this.eventManagers[y];return x?Promise.resolve(x):(tt(U,"If manager is not set, promise should be"),U)}const b=this.initAndGetManager(m);return this.eventManagers[y]={promise:b},b.catch(()=>{delete this.eventManagers[y]}),b}initAndGetManager(m){var y=this;return(0,g.Z)(function*(){const b=yield function fu(w){return Pf.apply(this,arguments)}(m),x=new wi(m);return b.register("authEvent",U=>(te(null==U?void 0:U.authEvent,m,"invalid-auth-event"),{status:x.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:x},y.iframes[m._key()]=b,x})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(Of,{type:Of},x=>{var U;const ee=null===(U=null==x?void 0:x[0])||void 0===U?void 0:U[Of];void 0!==ee&&y(!!ee),$e(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function r_(w){return Af.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return zr()||G()||xt()}};class Bd extends class pc{constructor(m){this.factorId=m}_process(m,y,b){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,b);case"signin":return this._finalizeSignIn(m,y.credential);default:return nt("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Bd(m)}_finalizeEnroll(m,y,b){return function cr(w,m){return rn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(w,m))}(m,{idToken:y,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function wa(w,m){return rn(w,"POST","/v2/accounts/mfaSignIn:finalize",Jt(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let l_=(()=>{class w{constructor(){}static assertion(y){return Bd._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var Gg="@firebase/auth",c_="0.19.12";class qg{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,g.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(b=>{var x;m((null===(x=b)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function d_(w){(0,M._registerComponent)(new we.wA("auth",(m,{options:y})=>{const b=m.getProvider("app").getImmediate(),x=m.getProvider("heartbeat"),{apiKey:U,authDomain:ee}=b.options;return((xe,dt)=>{te(U&&!U.includes(":"),"invalid-api-key",{appName:xe.name}),te(!(null==ee?void 0:ee.includes(":")),"argument-error",{appName:xe.name});const Tt={apiKey:U,authDomain:ee,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ur(w)},jt=new Lu(xe,dt,Tt);return function Te(w,m){const y=(null==m?void 0:m.persistence)||[],b=(Array.isArray(y)?y:[y]).map(ae);(null==m?void 0:m.errorMap)&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(b,null==m?void 0:m.popupRedirectResolver)}(jt,y),jt})(b,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,b)=>{m.getProvider("auth-internal").initialize()})),(0,M._registerComponent)(new we.wA("auth-internal",m=>{const y=yn(m.getProvider("auth").getImmediate());return new qg(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,M.registerVersion)(Gg,c_,function Wg(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,M.registerVersion)(Gg,c_,"esm2017")}("Browser")},2090:(pt,De,L)=>{L.d(De,{$s:()=>ts,BH:()=>Ne,DV:()=>Mn,Dv:()=>hi,G6:()=>nt,GJ:()=>Jt,L:()=>me,LL:()=>Le,Lj:()=>Ut,Mn:()=>Je,Pz:()=>Ge,Sg:()=>Fe,UG:()=>Ie,UI:()=>kr,US:()=>de,Wj:()=>Wr,X3:()=>mt,Yr:()=>te,ZB:()=>ne,ZR:()=>ge,b$:()=>Pe,cI:()=>ln,d:()=>Re,dS:()=>Gt,eu:()=>oe,g5:()=>se,gK:()=>Un,gQ:()=>Xi,h$:()=>le,hl:()=>tt,hu:()=>M,jU:()=>it,lb:()=>js,m9:()=>wt,ne:()=>gt,p$:()=>z,pd:()=>Fr,r3:()=>rn,ru:()=>$e,tV:()=>K,uI:()=>ye,ug:()=>ft,vZ:()=>Or,w1:()=>be,w9:()=>nn,xO:()=>Ci,xb:()=>Ir,z$:()=>Ue,zI:()=>ae,zd:()=>Tr});var g=L(5861);const M=function(Z,$){if(!Z)throw se($)},se=function(Z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Z)},re=function(Z){const $=[];let Y=0;for(let pe=0;pe<Z.length;pe++){let F=Z.charCodeAt(pe);F<128?$[Y++]=F:F<2048?($[Y++]=F>>6|192,$[Y++]=63&F|128):55296==(64512&F)&&pe+1<Z.length&&56320==(64512&Z.charCodeAt(pe+1))?(F=65536+((1023&F)<<10)+(1023&Z.charCodeAt(++pe)),$[Y++]=F>>18|240,$[Y++]=F>>12&63|128,$[Y++]=F>>6&63|128,$[Y++]=63&F|128):($[Y++]=F>>12|224,$[Y++]=F>>6&63|128,$[Y++]=63&F|128)}return $},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,$){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let F=0;F<Z.length;F+=3){const j=Z[F],G=F+1<Z.length,ue=G?Z[F+1]:0,Ve=F+2<Z.length,Ye=Ve?Z[F+2]:0;let xt=(15&ue)<<2|Ye>>6,xn=63&Ye;Ve||(xn=64,G||(xt=64)),pe.push(Y[j>>2],Y[(3&j)<<4|ue>>4],Y[xt],Y[xn])}return pe.join("")},encodeString(Z,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Z):this.encodeByteArray(re(Z),$)},decodeString(Z,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Z):function(Z){const $=[];let Y=0,pe=0;for(;Y<Z.length;){const F=Z[Y++];if(F<128)$[pe++]=String.fromCharCode(F);else if(F>191&&F<224){const j=Z[Y++];$[pe++]=String.fromCharCode((31&F)<<6|63&j)}else if(F>239&&F<365){const Ve=((7&F)<<18|(63&Z[Y++])<<12|(63&Z[Y++])<<6|63&Z[Y++])-65536;$[pe++]=String.fromCharCode(55296+(Ve>>10)),$[pe++]=String.fromCharCode(56320+(1023&Ve))}else{const j=Z[Y++],G=Z[Y++];$[pe++]=String.fromCharCode((15&F)<<12|(63&j)<<6|63&G)}}return $.join("")}(this.decodeStringToByteArray(Z,$))},decodeStringToByteArray(Z,$){this.init_();const Y=$?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let F=0;F<Z.length;){const j=Y[Z.charAt(F++)],ue=F<Z.length?Y[Z.charAt(F)]:0;++F;const Ye=F<Z.length?Y[Z.charAt(F)]:64;++F;const ot=F<Z.length?Y[Z.charAt(F)]:64;if(++F,null==j||null==ue||null==Ye||null==ot)throw Error();pe.push(j<<2|ue>>4),64!==Ye&&(pe.push(ue<<4&240|Ye>>2),64!==ot&&pe.push(Ye<<6&192|ot))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},le=function(Z){const $=re(Z);return de.encodeByteArray($,!0)},me=function(Z){return le(Z).replace(/\./g,"")},K=function(Z){try{return de.decodeString(Z,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function z(Z){return ne(void 0,Z)}function ne(Z,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return $}for(const Y in $)!$.hasOwnProperty(Y)||!Ke(Y)||(Z[Y]=ne(Z[Y],$[Y]));return Z}function Ke(Z){return"__proto__"!==Z}class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,Y)=>{this.resolve=$,this.reject=Y})}wrapCallback($){return(Y,pe)=>{Y?this.reject(Y):this.resolve(pe),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(Y):$(Y,pe))}}}function Fe(Z,$){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=$||"demo-project",F=Z.iat||0,j=Z.sub||Z.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const G=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:F,exp:F+3600,auth_time:F,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(G)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ye(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Z){return!1}}function it(){return"object"==typeof self&&self.self===self}function $e(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function Pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return Ue().indexOf("Electron/")>=0}function be(){const Z=Ue();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Je(){return Ue().indexOf("MSAppHost/")>=0}function te(){return!1}function nt(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tt(){return"object"==typeof indexedDB}function oe(){return new Promise((Z,$)=>{try{let Y=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",F=self.indexedDB.open(pe);F.onsuccess=()=>{F.result.close(),Y||self.indexedDB.deleteDatabase(pe),Z(!0)},F.onupgradeneeded=()=>{Y=!1},F.onerror=()=>{var j;$((null===(j=F.error)||void 0===j?void 0:j.message)||"")}}catch(Y){$(Y)}})}function ae(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ge extends Error{constructor($,Y,pe){super(Y),this.code=$,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor($,Y,pe){this.service=$,this.serviceName=Y,this.errors=pe}create($,...Y){const pe=Y[0]||{},F=`${this.service}/${$}`,j=this.errors[$],G=j?function Mt(Z,$){return Z.replace(en,(Y,pe)=>{const F=$[pe];return null!=F?String(F):`<${pe}?>`})}(j,pe):"Error";return new ge(F,`${this.serviceName}: ${G} (${F}).`,pe)}}const en=/\{\$([^}]+)}/g;function ln(Z){return JSON.parse(Z)}function Ge(Z){return JSON.stringify(Z)}const tn=function(Z){let $={},Y={},pe={},F="";try{const j=Z.split(".");$=ln(K(j[0])||""),Y=ln(K(j[1])||""),F=j[2],pe=Y.d||{},delete Y.d}catch(j){}return{header:$,claims:Y,data:pe,signature:F}},nn=function(Z){const Y=tn(Z).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Jt=function(Z){const $=tn(Z).claims;return"object"==typeof $&&!0===$.admin};function rn(Z,$){return Object.prototype.hasOwnProperty.call(Z,$)}function Mn(Z,$){if(Object.prototype.hasOwnProperty.call(Z,$))return Z[$]}function Ir(Z){for(const $ in Z)if(Object.prototype.hasOwnProperty.call(Z,$))return!1;return!0}function kr(Z,$,Y){const pe={};for(const F in Z)Object.prototype.hasOwnProperty.call(Z,F)&&(pe[F]=$.call(Y,Z[F],F,Z));return pe}function Or(Z,$){if(Z===$)return!0;const Y=Object.keys(Z),pe=Object.keys($);for(const F of Y){if(!pe.includes(F))return!1;const j=Z[F],G=$[F];if(Ji(j)&&Ji(G)){if(!Or(j,G))return!1}else if(j!==G)return!1}for(const F of pe)if(!Y.includes(F))return!1;return!0}function Ji(Z){return null!==Z&&"object"==typeof Z}function Ci(Z){const $=[];for(const[Y,pe]of Object.entries(Z))Array.isArray(pe)?pe.forEach(F=>{$.push(encodeURIComponent(Y)+"="+encodeURIComponent(F))}):$.push(encodeURIComponent(Y)+"="+encodeURIComponent(pe));return $.length?"&"+$.join("&"):""}function Tr(Z){const $={};return Z.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[F,j]=pe.split("=");$[decodeURIComponent(F)]=decodeURIComponent(j)}}),$}function Fr(Z){const $=Z.indexOf("?");if(!$)return"";const Y=Z.indexOf("#",$);return Z.substring($,Y>0?Y:void 0)}class Xi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,Y){Y||(Y=0);const pe=this.W_;if("string"==typeof $)for(let ot=0;ot<16;ot++)pe[ot]=$.charCodeAt(Y)<<24|$.charCodeAt(Y+1)<<16|$.charCodeAt(Y+2)<<8|$.charCodeAt(Y+3),Y+=4;else for(let ot=0;ot<16;ot++)pe[ot]=$[Y]<<24|$[Y+1]<<16|$[Y+2]<<8|$[Y+3],Y+=4;for(let ot=16;ot<80;ot++){const xt=pe[ot-3]^pe[ot-8]^pe[ot-14]^pe[ot-16];pe[ot]=4294967295&(xt<<1|xt>>>31)}let Ye,Ct,F=this.chain_[0],j=this.chain_[1],G=this.chain_[2],ue=this.chain_[3],Ve=this.chain_[4];for(let ot=0;ot<80;ot++){ot<40?ot<20?(Ye=ue^j&(G^ue),Ct=1518500249):(Ye=j^G^ue,Ct=1859775393):ot<60?(Ye=j&G|ue&(j|G),Ct=2400959708):(Ye=j^G^ue,Ct=3395469782);const xt=(F<<5|F>>>27)+Ye+Ve+Ct+pe[ot]&4294967295;Ve=ue,ue=G,G=4294967295&(j<<30|j>>>2),j=F,F=xt}this.chain_[0]=this.chain_[0]+F&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+G&4294967295,this.chain_[3]=this.chain_[3]+ue&4294967295,this.chain_[4]=this.chain_[4]+Ve&4294967295}update($,Y){if(null==$)return;void 0===Y&&(Y=$.length);const pe=Y-this.blockSize;let F=0;const j=this.buf_;let G=this.inbuf_;for(;F<Y;){if(0===G)for(;F<=pe;)this.compress_($,F),F+=this.blockSize;if("string"==typeof $){for(;F<Y;)if(j[G]=$.charCodeAt(F),++G,++F,G===this.blockSize){this.compress_(j),G=0;break}}else for(;F<Y;)if(j[G]=$[F],++G,++F,G===this.blockSize){this.compress_(j),G=0;break}}this.inbuf_=G,this.total_+=Y}digest(){const $=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let F=this.blockSize-1;F>=56;F--)this.buf_[F]=255&Y,Y/=256;this.compress_(this.buf_);let pe=0;for(let F=0;F<5;F++)for(let j=24;j>=0;j-=8)$[pe]=this.chain_[F]>>j&255,++pe;return $}}function gt(Z,$){const Y=new qr(Z,$);return Y.subscribe.bind(Y)}class qr{constructor($,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{$(this)}).catch(pe=>{this.error(pe)})}next($){this.forEachObserver(Y=>{Y.next($)})}error($){this.forEachObserver(Y=>{Y.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,Y,pe){let F;if(void 0===$&&void 0===Y&&void 0===pe)throw new Error("Missing Observer.");F=function cn(Z,$){if("object"!=typeof Z||null===Z)return!1;for(const Y of $)if(Y in Z&&"function"==typeof Z[Y])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:Y,complete:pe},void 0===F.next&&(F.next=Xn),void 0===F.error&&(F.error=Xn),void 0===F.complete&&(F.complete=Xn);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?F.error(this.finalError):F.complete()}catch(G){}}),this.observers.push(F),j}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,$)}sendOne($,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{Y(this.observers[$])}catch(pe){"undefined"!=typeof console&&console.error&&console.error(pe)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xn(){}const hi=function(Z,$,Y,pe){let F;if(pe<$?F="at least "+$:pe>Y&&(F=0===Y?"none":"no more than "+Y),F)throw new Error(Z+" failed: Was called with "+pe+(1===pe?" argument.":" arguments.")+" Expects "+F+".")};function Un(Z,$){return`${Z} failed: ${$} argument `}function Wr(Z,$,Y,pe){if((!pe||Y)&&"function"!=typeof Y)throw new Error(Un(Z,$)+"must be a valid function.")}function js(Z,$,Y,pe){if((!pe||Y)&&("object"!=typeof Y||null===Y))throw new Error(Un(Z,$)+"must be a valid context object.")}const Gt=function(Z){const $=[];let Y=0;for(let pe=0;pe<Z.length;pe++){let F=Z.charCodeAt(pe);if(F>=55296&&F<=56319){const j=F-55296;pe++,M(pe<Z.length,"Surrogate pair missing trail surrogate."),F=65536+(j<<10)+(Z.charCodeAt(pe)-56320)}F<128?$[Y++]=F:F<2048?($[Y++]=F>>6|192,$[Y++]=63&F|128):F<65536?($[Y++]=F>>12|224,$[Y++]=F>>6&63|128,$[Y++]=63&F|128):($[Y++]=F>>18|240,$[Y++]=F>>12&63|128,$[Y++]=F>>6&63|128,$[Y++]=63&F|128)}return $},ft=function(Z){let $=0;for(let Y=0;Y<Z.length;Y++){const pe=Z.charCodeAt(Y);pe<128?$++:pe<2048?$+=2:pe>=55296&&pe<=56319?($+=4,Y++):$+=3}return $};function ts(Z,$=1e3,Y=2){const pe=$*Math.pow(Y,Z),F=Math.round(.5*pe*(Math.random()-.5)*2);return Math.min(144e5,pe+F)}function wt(Z){return Z&&Z._delegate?Z._delegate:Z}function zn(Z,$){return new Promise((Y,pe)=>{Z.onsuccess=F=>{Y(F.target.result)},Z.onerror=F=>{var j;pe(`${$}: ${null===(j=F.target.error)||void 0===j?void 0:j.message}`)}})}class Yt{constructor($){this._db=$,this.objectStoreNames=this._db.objectStoreNames}transaction($,Y="readonly"){return new qe(this._db.transaction.call(this._db,$,Y))}createObjectStore($,Y){return new Ce(this._db.createObjectStore($,Y))}close(){this._db.close()}}class qe{constructor($){this._transaction=$,this.complete=new Promise((Y,pe)=>{this._transaction.oncomplete=function(){Y()},this._transaction.onerror=()=>{pe(this._transaction.error)},this._transaction.onabort=()=>{pe(this._transaction.error)}})}objectStore($){return new Ce(this._transaction.objectStore($))}}class Ce{constructor($){this._store=$}index($){return new st(this._store.index($))}createIndex($,Y,pe){return new st(this._store.createIndex($,Y,pe))}get($){return zn(this._store.get($),"Error reading from IndexedDB")}put($,Y){return zn(this._store.put($,Y),"Error writing to IndexedDB")}delete($){return zn(this._store.delete($),"Error deleting from IndexedDB")}clear(){return zn(this._store.clear(),"Error clearing IndexedDB object store")}}class st{constructor($){this._index=$}get($){return zn(this._index.get($),"Error reading from IndexedDB")}}function mt(Z,$,Y){return new Promise((pe,F)=>{try{const j=indexedDB.open(Z,$);j.onsuccess=G=>{pe(new Yt(G.target.result))},j.onerror=G=>{var ue;F(`Error opening indexedDB: ${null===(ue=G.target.error)||void 0===ue?void 0:ue.message}`)},j.onupgradeneeded=G=>{Y(new Yt(j.result),G.oldVersion,G.newVersion,new qe(j.transaction))}}catch(j){F(`Error opening indexedDB: ${j.message}`)}})}function Ut(Z){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(Z){return new Promise(($,Y)=>{try{const pe=indexedDB.deleteDatabase(Z);pe.onsuccess=()=>{$()},pe.onerror=F=>{var j;Y(`Error deleting indexedDB database "${Z}": ${null===(j=F.target.error)||void 0===j?void 0:j.message}`)}}catch(pe){Y(`Error deleting indexedDB database "${Z}": ${pe.message}`)}})})).apply(this,arguments)}},7307:(pt,De,L)=>{var g=L(5e3);let q=null;function M(){return q}const de=new g.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function me(){return(0,g.LFG)(z)}()},providedIn:"platform"}),n})();const K=new g.OlP("Location Initialized");let z=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M().getBaseHref(this._doc)}onPopState(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ke(){return new z((0,g.LFG)(de))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,g.LFG)(de).location;return new $e((0,g.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const it=new g.OlP("appBaseHref");let $e=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(it,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(it,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(te(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Ne,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(g.LFG(ye),g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function be(){return new Re((0,g.LFG)(ye),(0,g.LFG)(le))}()},providedIn:"root"}),n})();function te(n){return n.replace(/\/index.html$/,"")}function za(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let ns=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class rs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rs(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,l),Hs(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Hs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Hs(n,e){n.context.$implicit=e.item}let Yr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class bn{constructor(){this.$implicit=null,this.ngIf=null}}function Xo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Bu=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split(".");null!=(r=null!=r&&a?`${r}${a}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),mf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function sa(n){return"server"===n}let wd=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Gu((0,g.LFG)(de),window)}),n})();class Gu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function mo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qs(this.window.history)||qs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class In{}class _o extends class yo extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){q||(q=n)}(new _o)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ql(){return vn=vn||document.querySelector("base"),vn?vn.getAttribute("href"):null}();return null==t?null:function Ws(n){aa=aa||document.createElement("a"),aa.setAttribute("href",n);const e=aa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return za(document.cookie,e)}}let aa,vn=null;const Lr=new g.OlP("TRANSITION_ID"),qu=[{provide:g.ip1,useFactory:function lr(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=M(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Lr,de,g.zs3],multi:!0}];class Si{static init(){(0,g.VLi)(new Si)}addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(f){l=l||f,a--,0==a&&r(l)};i.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?M().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ti=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const vs=new g.OlP("EventManagerPlugins");let vo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(vs),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class ua{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=M().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Hi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ss=(()=>{class n extends Hi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ws),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ws))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ws(n){M().remove(n)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ja=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(Ja,n),t.push(i))}return t}function qt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Tn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Wl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new eu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(vo),g.LFG(ss),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Wu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Et[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Et[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Et[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qt(r)):this.eventManager.addEventListener(e,t,qt(r))}}class Wl extends Wu{constructor(e,t,r,i){super(e),this.component=r;const a=Se(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function yf(n){return"_ngcontent-%COMP%".replace(Ja,n)}(i+"-"+r.id),this.hostAttr=function Xa(n){return"_nghost-%COMP%".replace(Ja,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class eu extends Wu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Se(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Lg=(()=>{class n extends ua{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const zl=["alt","control","meta","shift"],ha={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},os={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fa=(()=>{class n extends ua{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>M().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(zl.forEach(f=>{const _=r.indexOf(f);_>-1&&(r.splice(_,1),l+=f+".")}),l+=a,0!=r.length||0===a.length)return null;const d={};return d.domEventName=i,d.fullKey=l,d}static getEventFullKey(t){let r="",i=function pa(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&vr.hasOwnProperty(e)&&(e=vr[e]))}return ha[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zl.forEach(a=>{a!=i&&os[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const tu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function mi(){_o.makeCurrent(),Si.init()},multi:!0},{provide:de,useFactory:function ga(){return(0,g.RDi)(document),document},deps:[]}]),Kl=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function vf(){return new g.qLn},deps:[]},{provide:vs,useClass:Lg,multi:!0,deps:[de,g.R0b,g.Lbi]},{provide:vs,useClass:fa,multi:!0,deps:[de]},{provide:Tn,useClass:Tn,deps:[vo,ss,g.AFp]},{provide:g.FYo,useExisting:Tn},{provide:Hi,useExisting:ss},{provide:ss,useClass:ss,deps:[de]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:vo,useClass:vo,deps:[vs,g.R0b]},{provide:In,useClass:ti,deps:[]}];let Ks=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Lr,useExisting:g.AFp},qu]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:Kl,imports:[mf,g.hGG]}),n})();"undefined"!=typeof window&&window;var Sn=L(8996),Ur=L(7669);function yt(...n){const e=(0,Ur.yG)(n);return(0,Sn.D)(n,e)}var bs=L(7579);class yi extends bs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var dr=L(8306);const{isArray:Rd}=Array,{getPrototypeOf:er,prototype:Qs,keys:tc}=Object;var Gi=L(4671),St=L(4004);const{isArray:nc}=Array;var An=L(5403),Xs=L(9672);function rc(...n){const e=(0,Ur.yG)(n),t=(0,Ur.jO)(n),{args:r,keys:i}=function Js(n){if(1===n.length){const e=n[0];if(Rd(e))return{args:e,keys:null};if(function ya(n){return n&&"object"==typeof n&&er(n)===Qs}(e)){const t=tc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Sn.D)([],e);const a=new dr.y(function ri(n,e,t=Gi.y){return r=>{Io(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let f=0;f<i;f++)Io(e,()=>{const _=(0,Sn.D)(n[f],e);let T=!1;_.subscribe((0,An.x)(r,D=>{a[f]=D,T||(T=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function Qu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):Gi.y));return t?a.pipe(function Yu(n){return(0,St.U)(e=>function xd(n,e){return nc(e)?n(...e):n(e)}(n,e))}(t)):a}function Io(n,e,t){n?(0,Xs.f)(t,n,e):e()}var _a=L(576);function eo(n,e){const t=(0,_a.m)(n)?n:()=>n,r=i=>i.error(t());return new dr.y(e?i=>e.schedule(r,0,i):r)}const To=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Is=L(8189);function Cf(...n){return function ic(){return(0,Is.J)(1)}()((0,Sn.D)(n,(0,Ur.yG)(n)))}var to=L(8421);function va(n){return new dr.y(e=>{(0,to.Xf)(n()).subscribe(e)})}var wa=L(515),ou=L(727),hr=L(4482);function Ts(){return(0,hr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,An.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Pd extends dr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,hr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ou.w0;const t=this.getSubject();e.add(this.source.subscribe((0,An.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ou.w0.EMPTY)}return e}refCount(){return Ts()(this)}}function kn(n,e){return(0,hr.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,An.x)(r,f=>{null==i||i.unsubscribe();let _=0;const T=a++;(0,to.Xf)(n(f,T)).subscribe(i=(0,An.x)(r,D=>r.next(e?e(f,D,T,_++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}var au=L(5698);function qi(...n){const e=(0,Ur.yG)(n);return(0,hr.e)((t,r)=>{(e?Cf(n,t,e):Cf(n,t)).subscribe(r)})}function Cs(n,e,t,r,i){return(a,l)=>{let d=t,f=e,_=0;a.subscribe((0,An.x)(l,T=>{const D=_++;f=d?n(f,T,D):(d=!0,T),r&&l.next(f)},i&&(()=>{d&&l.next(f),l.complete()})))}}function ii(n,e){return(0,hr.e)(Cs(n,e,arguments.length>=2,!0))}function as(n,e){return(0,hr.e)((t,r)=>{let i=0;t.subscribe((0,An.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function us(n){return(0,hr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,An.x)(t,void 0,void 0,l=>{a=(0,to.Xf)(n(l,us(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var On=L(5577);function Co(n,e){return(0,_a.m)(e)?(0,On.z)(n,e,1):(0,On.z)(n,1)}function Nd(n){return n<=0?()=>wa.E:(0,hr.e)((e,t)=>{let r=[];e.subscribe((0,An.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function jn(n=Ug){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,An.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ug(){return new To}function Bg(n){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,An.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Do(n,e){const t=arguments.length>=2;return r=>r.pipe(n?as((i,a)=>n(i,a,r)):Gi.y,(0,au.q)(1),t?Bg(e):jn(()=>new To))}var _i=L(8505);class ls{constructor(e,t){this.id=e,this.url=t}}class So extends ls{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ea extends ls{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tr extends ls{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class uu extends ls{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ju extends ls{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Md extends ls{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xu extends ls{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qr extends ls{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cs extends ls{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ao{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ba{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ac{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class kd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Dr(n){return new kd(n)}const uc="ngNavigationCancelingError";function ds(n){const e=Error("NavigationCancelingError: "+n);return e[uc]=!0,e}function Ds(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ai(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!el(n[i],e[i]))return!1;return!0}function el(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function no(n){return Array.prototype.concat.apply([],n)}function cu(n){return n.length>0?n[n.length-1]:null}function fr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function si(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Sn.D)(Promise.resolve(n)):yt(n)}const xo={exact:function S(n,e,t){if(!zt(n.segments,e.segments)||!ie(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!S(n.children[r],e.children[r],t))return!1;return!0},subset:H},tl={exact:function C(n,e){return Ai(n,e)},subset:function N(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>el(n[t],e[t]))},ignored:()=>!0};function du(n,e,t){return xo[t.paths](n.root,e.root,t.matrixParams)&&tl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function H(n,e,t){return X(n,e,e.segments,t)}function X(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!zt(i,t)||e.hasChildren()||!ie(i,t,r))}if(n.segments.length===t.length){if(!zt(n.segments,t)||!ie(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!H(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(zt(n.segments,i)&&ie(n.segments,i,r)&&n.children[Vt])&&X(n.children[Vt],e,a,r)}}function ie(n,e,t){return e.every((r,i)=>tl[t](n[i].parameters,r.parameters))}class Me{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dr(this.queryParams)),this._queryParamMap}toString(){return hu.serialize(this)}}class Oe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,fr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ro(this)}}class ut{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Dr(this.parameters)),this._parameterMap}toString(){return cc(this)}}function zt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class pr{}class nr{parse(e){const t=new i_(e);return new Me(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ri(e.root,!0)}`,r=function r_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Wi(t)}=${Wi(i)}`).join("&"):`${Wi(t)}=${Wi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Po(n){return encodeURI(n)}(e.fragment)}`:""}`}}const hu=new nr;function ro(n){return n.segments.map(e=>cc(e)).join("/")}function Ri(n,e){if(!n.hasChildren())return ro(n);if(e){const t=n.children[Vt]?Ri(n.children[Vt],!1):"",r=[];return fr(n.children,(i,a)=>{a!==Vt&&r.push(`${a}:${Ri(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Pt(n,e){let t=[];return fr(n.children,(r,i)=>{i===Vt&&(t=t.concat(e(r,i)))}),fr(n.children,(r,i)=>{i!==Vt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Vt?[Ri(n.children[Vt],!1)]:[`${i}:${Ri(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${ro(n)}/${t[0]}`:`${ro(n)}/(${t.join("//")})`}}function wi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wi(n){return wi(n).replace(/%3B/gi,";")}function Sf(n){return wi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nl(n){return decodeURIComponent(n)}function rl(n){return nl(n.replace(/\+/g,"%20"))}function cc(n){return`${Sf(n.path)}${function Hg(n){return Object.keys(n).map(e=>`;${Sf(e)}=${Sf(n[e])}`).join("")}(n.parameters)}`}const Af=/^[^\/()?;=#]+/;function No(n){const e=n.match(Af);return e?e[0]:""}const dc=/^[^=?&#]+/,u0=/^[^&#]+/;class i_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new Oe(e,t)),r}parseSegment(){const e=No(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ut(nl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=No(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=No(this.remaining);i&&(r=i,this.capture(r))}e[nl(t)]=nl(r)}parseQueryParam(e){const t=function $g(n){const e=n.match(dc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function hc(n){const e=n.match(u0);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=rl(t),a=rl(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=No(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Vt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Vt]:new Oe([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class s_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Rf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Rf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=xf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return xf(e,this._root).map(t=>t.value)}}function Rf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Rf(n,t);if(r)return r}return null}function xf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=xf(n,t);if(r.length)return r.unshift(e),r}return[]}class Mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ko(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fd extends s_{constructor(e,t){super(e),this.snapshot=t,fc(this,e)}toString(){return this.snapshot.toString()}}function fu(n,e){const t=function Pf(n,e){const l=new sl([],{},{},"",{},Vt,e,null,n.root,-1,{});return new Nf("",new Mo(l,[]))}(n,e),r=new yi([new ut("",{})]),i=new yi({}),a=new yi({}),l=new yi({}),d=new yi(""),f=new il(r,i,l,d,a,Vt,e,t.root);return f.snapshot=t.root,new Fd(new Mo(f,[]),t)}class il{constructor(e,t,r,i,a,l,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>Dr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>Dr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function o_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Ld(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sl{constructor(e,t,r,i,a,l,d,f,_,T,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.routeConfig=f,this._urlSegment=_,this._lastPathIndex=T,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nf extends s_{constructor(e,t){super(t),this.url=e,fc(this,t)}toString(){return Mf(this._root)}}function fc(n,e){e.value._routerState=n,e.children.forEach(t=>fc(n,t))}function Mf(n){const e=n.children.length>0?` { ${n.children.map(Mf).join(", ")} } `:"";return`${n.value}${e}`}function Ud(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ai(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ai(e.params,t.params)||n.params.next(t.params),function Od(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ai(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ai(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kf(n,e){const t=Ai(n.params,e.params)&&function Dt(n,e){return zt(n,e)&&n.every((t,r)=>Ai(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kf(n.parent,e.parent))}function pu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function u_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return pu(n,r,i);return pu(n,r)})}(n,e,t);return new Mo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>pu(n,d)),l}}const r=function Of(n){return new il(new yi(n.url),new yi(n.params),new yi(n.queryParams),new yi(n.fragment),new yi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>pu(n,a));return new Mo(r,i)}}function Oo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function pc(n){return"object"==typeof n&&null!=n&&n.outlets}function Bd(n,e,t,r,i){let a={};if(r&&fr(r,(d,f)=>{a[f]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),n===e)return new Me(t,a,i);const l=l_(n,e,t);return new Me(l,a,i)}function l_(n,e,t){const r={};return fr(n.children,(i,a)=>{r[a]=i===e?t:l_(i,e,t)}),new Oe(n.segments,r)}class Gg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Oo(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(pc);if(i&&i!==cu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function w(n,e,t){if(n||(n=new Oe([],{})),0===n.segments.length&&n.hasChildren())return m(n,e,t);const r=function y(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(pc(d))break;const f=`${d}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&_&&"object"==typeof _&&void 0===_.outlets){if(!ee(f,_,l))return a;r+=2}else{if(!ee(f,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Oe(n.segments.slice(0,r.pathIndex),{});return a.children[Vt]=new Oe(n.segments.slice(r.pathIndex),n.children),m(a,0,i)}return r.match&&0===i.length?new Oe(n.segments,{}):r.match&&!n.hasChildren()?b(n,e,t):r.match?m(n,0,i):b(n,e,t)}function m(n,e,t){if(0===t.length)return new Oe(n.segments,{});{const r=function l0(n){return pc(n[0])?n[0].outlets:{[Vt]:n}}(t),i={};return fr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=w(n.children[l],e,a))}),fr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Oe(n.segments,i)}}function b(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(pc(a)){const f=x(a.outlets);return new Oe(r,f)}if(0===i&&Oo(t[0])){r.push(new ut(n.segments[e].path,U(t[0]))),i++;continue}const l=pc(a)?a.outlets[Vt]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&Oo(d)?(r.push(new ut(l,U(d))),i+=2):(r.push(new ut(l,{})),i++)}return new Oe(r,{})}function x(n){const e={};return fr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=b(new Oe([],{}),0,t))}),e}function U(n){const e={};return fr(n,(t,r)=>e[r]=`${t}`),e}function ee(n,e,t){return n==t.path&&Ai(e,t.parameters)}class dt{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ud(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ko(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),fr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ko(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ko(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ko(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new oc(a.value.snapshot))}),e.children.length&&this.forwardEvent(new ba(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ud(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Ud(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function Tt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),f=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=f,l.outlet&&l.outlet.activateWith(i,f),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class jt{constructor(e,t){this.routes=e,this.module=t}}function mn(n){return"function"==typeof n}function zi(n){return n instanceof Me}const mc=Symbol("INITIAL_VALUE");function Ta(){return kn(n=>rc(n.map(e=>e.pipe((0,au.q)(1),qi(mc)))).pipe(ii((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==mc?i:(a===mc&&(r=!0),r||!1!==a&&l!==t.length-1&&!zi(a)?i:a),e)},mc),as(e=>e!==mc),(0,St.U)(e=>zi(e)?e:!0===e),(0,au.q)(1)))}class zg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new al,this.attachRef=null}}class al{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new zg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let yc=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=a||Vt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,f=new Kg(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(al),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Kg{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===il?this.route:e===al?this.childContexts:this.parent.get(e,t)}}let Ff=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[yc],encapsulation:2}),n})();function gu(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];f_(r,p_(e,r))}}function f_(n,e){n.children&&gu(n.children,e)}function p_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function g_(n){const e=n.children&&n.children.map(g_),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=Ff),t}function wn(n){return n.outlet||Vt}function m_(n,e){const t=n.filter(r=>wn(r)===e);return t.push(...n.filter(r=>wn(r)!==e)),t}const c0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},c0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Ds)(t,n,e);if(!a)return Object.assign({},c0);const l={};fr(a.posParams,(f,_)=>{l[_]=f.path});const d=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:d,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Lf(n,e,t,r,i="corrected"){if(t.length>0&&function mD(n,e,t){return t.some(r=>Zg(n,e,r)&&wn(r)!==Vt)}(n,t,r)){const l=new Oe(e,function gD(n,e,t,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&wn(a)!==Vt){const l=new Oe([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[wn(a)]=l}return i}(n,e,r,new Oe(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function yD(n,e,t){return t.some(r=>Zg(n,e,r))}(n,t,r)){const l=new Oe(n.segments,function pD(n,e,t,r,i,a){const l={};for(const d of r)if(Zg(n,t,d)&&!i[wn(d)]){const f=new Oe([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[wn(d)]=f}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Oe(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Zg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function _D(n,e,t,r){return!!(wn(n)===r||r!==Vt&&Zg(e,t,n))&&("**"===n.path||jd(e,n,t).matched)}function vD(n,e,t){return 0===e.length&&!n.children[t]}class ul{constructor(e){this.segmentGroup=e||null}}class xi{constructor(e){this.urlTree=e}}function _c(n){return eo(new ul(n))}function y_(n){return eo(new xi(n))}class __{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Lf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Oe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Vt).pipe((0,St.U)(a=>this.createUrlTree(v_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(us(a=>{if(a instanceof xi)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof ul?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Vt).pipe((0,St.U)(i=>this.createUrlTree(v_(i),e.queryParams,e.fragment))).pipe(us(i=>{throw i instanceof ul?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Oe([],{[Vt]:e}):e;return new Me(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(a=>new Oe([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Sn.D)(i).pipe(Co(a=>{const l=r.children[a],d=m_(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,St.U)(f=>({segment:f,outlet:a})))}),ii((a,l)=>(a[l.outlet]=l.segment,a),{}),function Df(n,e){const t=arguments.length>=2;return r=>r.pipe(n?as((i,a)=>n(i,a,r)):Gi.y,Nd(1),t?Bg(e):jn(()=>new To))}())}expandSegment(e,t,r,i,a,l){return(0,Sn.D)(r).pipe(Co(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(us(_=>{if(_ instanceof ul)return yt(null);throw _}))),Do(d=>!!d),us((d,f)=>{if(d instanceof To||"EmptyError"===d.name)return vD(t,i,a)?yt(new Oe([],{})):_c(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return _D(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):_c(t):_c(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?y_(a):this.lineralizeSegments(r,a).pipe((0,On.z)(l=>{const d=new Oe(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:f,remainingSegments:_,positionalParamSegments:T}=jd(t,i,a);if(!d)return _c(t);const D=this.applyRedirectCommands(f,i.redirectTo,T);return i.redirectTo.startsWith("/")?y_(D):this.lineralizeSegments(i,D).pipe((0,On.z)(P=>this.expandSegment(e,t,r,P.concat(_),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?yt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,St.U)(D=>(r._loadedConfig=D,new Oe(i,{})))):yt(new Oe(i,{}));const{matched:l,consumedSegments:d,remainingSegments:f}=jd(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,On.z)(T=>{const D=T.module,P=T.routes,{segmentGroup:O,slicedSegments:V}=Lf(t,d,f,P),Q=new Oe(O.segments,O.children);if(0===V.length&&Q.hasChildren())return this.expandChildren(D,P,Q).pipe((0,St.U)(et=>new Oe(d,et)));if(0===P.length&&0===V.length)return yt(new Oe(d,{}));const ve=wn(r)===a;return this.expandSegment(D,Q,P,V,ve?Vt:a,!0).pipe((0,St.U)(Qe=>new Oe(d.concat(Qe.segments),Qe.children)))})):_c(t)}getChildConfig(e,t,r){return t.children?yt(new jt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,On.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,St.U)(a=>(t._loadedConfig=a,a))):function Pi(n){return eo(ds(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yt(new jt([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?yt(i.map(l=>{const d=e.get(l);let f;if(function ol(n){return n&&mn(n.canLoad)}(d))f=d.canLoad(t,r);else{if(!mn(d))throw new Error("Invalid CanLoad guard");f=d(t,r)}return si(f)})).pipe(Ta(),(0,_i.b)(l=>{if(!zi(l))return;const d=ds(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,St.U)(l=>!0===l)):yt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return yt(r);if(i.numberOfChildren>1||!i.children[Vt])return eo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Me(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return fr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return fr(t.children,(d,f)=>{l[f]=this.createSegmentGroup(e,d,r,i)}),new Oe(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function v_(n){const e={};for(const r of Object.keys(n.children)){const a=v_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function wD(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new Oe(n.segments.concat(e.segments),e.children)}return n}(new Oe(n.segments,e))}class f0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bf{constructor(e,t){this.component=e,this.route=t}}function ED(n,e,t){const r=n._root;return vc(r,e?e._root:null,t,[r.value])}function Yg(n,e,t){const r=function bD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function vc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ko(e);return n.children.forEach(l=>{(function ID(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const f=function TD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zt(n.url,e.url)||!Ai(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kf(n,e)||!Ai(n.queryParams,e.queryParams);default:return!kf(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new f0(r)):(a.data=l.data,a._resolvedData=l._resolvedData),vc(n,e,a.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Bf(d.outlet.component,l))}else l&&wc(e,d,i),i.canActivateChecks.push(new f0(r)),vc(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),fr(a,(l,d)=>wc(l,t.getContext(d),i)),i}function wc(n,e,t){const r=ko(n),i=n.value;fr(r,(a,l)=>{wc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Bf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class g0{}function m0(n){return new dr.y(e=>e.error(n))}class MD{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Lf(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Vt);if(null===t)return null;const r=new sl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Mo(r,t),a=new Nf(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=o_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],d=m_(e,a),f=this.processSegmentGroup(d,l,a);if(null===f)return null;r.push(...f)}const i=_0(r);return function kD(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return vD(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!_D(e,t,r,i))return null;let a,l=[],d=[];if("**"===e.path){const O=r.length>0?cu(r).parameters:{};a=new sl(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,FD(e),wn(e),e.component,e,Ec(t),Lo(t)+r.length,LD(e))}else{const O=jd(t,e,r);if(!O.matched)return null;l=O.consumedSegments,d=O.remainingSegments,a=new sl(l,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,FD(e),wn(e),e.component,e,Ec(t),Lo(t)+l.length,LD(e))}const f=function OD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:_,slicedSegments:T}=Lf(t,l,d,f.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===T.length&&_.hasChildren()){const O=this.processChildren(f,_);return null===O?null:[new Mo(a,O)]}if(0===f.length&&0===T.length)return[new Mo(a,[])];const D=wn(e)===i,P=this.processSegment(f,_,T,D?Vt:i);return null===P?null:[new Mo(a,P)]}}function y0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _0(n){const e=[],t=new Set;for(const r of n){if(!y0(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=_0(r.children);e.push(new Mo(r.value,i))}return e.filter(r=>!t.has(r))}function Ec(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Lo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function FD(n){return n.data||{}}function LD(n){return n.resolve||{}}function Jg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Xg(n){return kn(e=>{const t=n(e);return t?(0,Sn.D)(t).pipe((0,St.U)(()=>e)):yt(e)})}class E0 extends class w0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const jf=new g.OlP("ROUTES");class em{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,St.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new jt(no(l.injector.get(jf,void 0,g.XFs.Self|g.XFs.Optional)).map(g_),l)}),us(a=>{throw t._loader$=void 0,a}));return t._loader$=new Pd(i,()=>new bs.x).pipe(Ts()),t._loader$}loadModuleFactory(e){return si(e()).pipe((0,On.z)(t=>t instanceof g.YKP?yt(t):(0,Sn.D)(this.compiler.compileModuleAsync(t))))}}class BP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Hd(n){throw n}function E_(n,e,t){return e.parse("/")}function b_(n,e){return yt(null)}const BD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},I_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ki=(()=>{class n{constructor(t,r,i,a,l,d,f){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bs.x,this.errorHandler=Hd,this.malformedUriErrorHandler=E_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:b_,afterPreactivation:b_},this.urlHandlingStrategy=new BP,this.routeReuseStrategy=new E0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(g.h0i),this.console=l.get(g.c2e);const D=l.get(g.R0b);this.isNgZoneEnabled=D instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function lc(){return new Me(new Oe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new em(l,d,P=>this.triggerEvent(new lu(P)),P=>this.triggerEvent(new Ao(P))),this.routerState=fu(this.currentUrlTree,this.rootComponentType),this.transitions=new yi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(as(i=>0!==i.id),(0,St.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),kn(i=>{let a=!1,l=!1;return yt(i).pipe((0,_i.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),kn(d=>{const f=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return I0(d.source)&&(this.browserUrlTree=d.extractedUrl),yt(d).pipe(kn(D=>{const P=this.transitions.getValue();return r.next(new So(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),P!==this.transitions.getValue()?wa.E:Promise.resolve(D)}),function h0(n,e,t,r){return kn(i=>function Uf(n,e,t,r,i){return new __(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,St.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_i.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function v0(n,e,t,r,i){return(0,On.z)(a=>function ND(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new MD(n,e,t,r,i,a).recognize();return null===l?m0(new g0):yt(l)}catch(l){return m0(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,St.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_i.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(O,D)}this.browserUrlTree=D.urlAfterRedirects}const P=new Ju(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(P)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:O,source:V,restoredState:Q,extras:ve}=d,He=new So(P,this.serializeUrl(O),V,Q);r.next(He);const Qe=fu(O,this.rootComponentType).snapshot;return yt(Object.assign(Object.assign({},d),{targetSnapshot:Qe,urlAfterRedirects:O,extras:Object.assign(Object.assign({},ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),wa.E}),Xg(d=>{const{targetSnapshot:f,id:_,extractedUrl:T,rawUrl:D,extras:{skipLocationChange:P,replaceUrl:O}}=d;return this.hooks.beforePreactivation(f,{navigationId:_,appliedUrlTree:T,rawUrlTree:D,skipLocationChange:!!P,replaceUrl:!!O})}),(0,_i.b)(d=>{const f=new Md(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(f)}),(0,St.U)(d=>Object.assign(Object.assign({},d),{guards:ED(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function CD(n,e){return(0,On.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?yt(Object.assign(Object.assign({},t),{guardsResult:!0})):function DD(n,e,t,r){return(0,Sn.D)(n).pipe((0,On.z)(i=>function PD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?yt(a.map(d=>{const f=Yg(d,e,i);let _;if(function h_(n){return n&&mn(n.canDeactivate)}(f))_=si(f.canDeactivate(n,e,t,r));else{if(!mn(f))throw new Error("Invalid CanDeactivate guard");_=si(f(n,e,t,r))}return _.pipe(Do())})).pipe(Ta()):yt(!0)}(i.component,i.route,t,e,r)),Do(i=>!0!==i,!0))}(l,r,i,n).pipe((0,On.z)(d=>d&&function Fo(n){return"boolean"==typeof n}(d)?function Qg(n,e,t,r){return(0,Sn.D)(e).pipe(Co(i=>Cf(function AD(n,e){return null!==n&&e&&e(new vi(n)),yt(!0)}(i.route.parent,r),function SD(n,e){return null!==n&&e&&e(new sc(n)),yt(!0)}(i.route,r),function xD(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function p0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>va(()=>yt(l.guards.map(f=>{const _=Yg(f,l.node,t);let T;if(function gc(n){return n&&mn(n.canActivateChild)}(_))T=si(_.canActivateChild(r,n));else{if(!mn(_))throw new Error("Invalid CanActivateChild guard");T=si(_(r,n))}return T.pipe(Do())})).pipe(Ta())));return yt(a).pipe(Ta())}(n,i.path,t),function RD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const i=r.map(a=>va(()=>{const l=Yg(a,e,t);let d;if(function Vd(n){return n&&mn(n.canActivate)}(l))d=si(l.canActivate(e,n));else{if(!mn(l))throw new Error("Invalid CanActivate guard");d=si(l(e,n))}return d.pipe(Do())}));return yt(i).pipe(Ta())}(n,i.route,t))),Do(i=>!0!==i,!0))}(r,a,n,e):yt(d)),(0,St.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,_i.b)(d=>{if(zi(d.guardsResult)){const _=ds(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw _.url=d.guardsResult,_}const f=new Xu(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(f)}),as(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Xg(d=>{if(d.guards.canActivateChecks.length)return yt(d).pipe((0,_i.b)(f=>{const _=new Qr(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),kn(f=>{let _=!1;return yt(f).pipe(function UP(n,e){return(0,On.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return yt(t);let a=0;return(0,Sn.D)(i).pipe(Co(l=>function Ca(n,e,t,r){return function w_(n,e,t,r){const i=Jg(n);if(0===i.length)return yt({});const a={};return(0,Sn.D)(i).pipe((0,On.z)(l=>function UD(n,e,t,r){const i=Yg(n,e,r);return si(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,_i.b)(d=>{a[l]=d}))),Nd(1),(0,On.z)(()=>Jg(a).length===i.length?yt(a):wa.E))}(n._resolve,n,e,r).pipe((0,St.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),o_(n,t).resolve),null)))}(l.route,r,n,e)),(0,_i.b)(()=>a++),Nd(1),(0,On.z)(l=>a===i.length?yt(t):wa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_i.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),(0,_i.b)(f=>{const _=new cs(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}))}),Xg(d=>{const{targetSnapshot:f,id:_,extractedUrl:T,rawUrl:D,extras:{skipLocationChange:P,replaceUrl:O}}=d;return this.hooks.afterPreactivation(f,{navigationId:_,appliedUrlTree:T,rawUrlTree:D,skipLocationChange:!!P,replaceUrl:!!O})}),(0,St.U)(d=>{const f=function a_(n,e,t){const r=pu(n,e._root,t?t._root:void 0);return new Fd(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:f})}),(0,_i.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new dt(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,_i.b)({next(){a=!0},complete(){a=!0}}),function Vg(n){return(0,hr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),us(d=>{if(l=!0,function jg(n){return n&&n[uc]}(d)){const f=zi(d.url);f||(this.navigated=!0,this.restoreHistory(i,!0));const _=new tr(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(_),f?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||I0(i.source)};this.scheduleNavigation(T,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new uu(i.id,this.serializeUrl(i.extractedUrl),d);r.next(f);try{i.resolve(this.errorHandler(d))}catch(_){i.reject(_)}}return wa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const f=Object.assign({},l);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(a.state=f)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gu(t),this.config=t.map(g_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:f}=r,_=i||this.routerState.root,T=f?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),function Ia(n,e,t,r,i){if(0===t.length)return Bd(e.root,e.root,e.root,r,i);const a=function c_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Gg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return fr(a.outlets,(f,_)=>{d[_]="string"==typeof f?f.split("/"):f}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new Gg(t,e,r)}(t);if(a.toRoot())return Bd(e.root,e.root,new Oe([],{}),r,i);const l=function Wg(n,e,t){if(n.isAbsolute)return new qg(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new qg(a,a===e.root,0)}const r=Oo(n.commands[0])?0:1;return function d_(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new qg(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),d=l.processChildren?m(l.segmentGroup,l.index,a.commands):w(l.segmentGroup,l.index,a.commands);return Bd(e.root,l.segmentGroup,d,r,i)}(_,this.currentUrlTree,t,D,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=zi(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function VD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},BD):!1===r?Object.assign({},I_):r,zi(t))return du(this.currentUrlTree,t,i);const a=this.parseUrl(t);return du(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ea(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var d,f;if(this.disposed)return Promise.resolve(!1);let _,T,D;l?(_=l.resolve,T=l.reject,D=l.promise):D=new Promise((V,Q)=>{_=V,T=Q});const P=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),O=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(f=this.browserPageId)&&void 0!==f?f:0)+1):O=0,this.setTransition({id:P,targetPageId:O,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:_,reject:T,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new tr(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function I0(n){return"imperative"!==n}let bc=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new bs.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:$d(this.skipLocationChange),replaceUrl:$d(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$d(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ki),g.Y36(il),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function $d(n){return""===n||!!n}class C_{}class C0{preload(e,t){return yt(null)}}let D0=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new em(i,r,f=>t.triggerEvent(new lu(f)),f=>t.triggerEvent(new Ao(f)))}setUpPreloading(){this.subscription=this.router.events.pipe(as(t=>t instanceof Ea),Co(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Sn.D)(i).pipe((0,Is.J)(),(0,St.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?yt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,On.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ki),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(C_))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),nm=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof So?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ea&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ac&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ac(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ss=new g.OlP("ROUTER_CONFIGURATION"),S_=new g.OlP("ROUTER_FORROOT_GUARD"),S0=[Re,{provide:pr,useClass:nr},{provide:Ki,useFactory:function R_(n,e,t,r,i,a,l={},d,f){const _=new Ki(null,n,e,t,r,i,no(a));return d&&(_.urlHandlingStrategy=d),f&&(_.routeReuseStrategy=f),function x0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,_),l.enableTracing&&_.events.subscribe(T=>{var D,P;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(P=console.groupEnd)||void 0===P||P.call(console)}),_},deps:[pr,al,Re,g.zs3,g.Sil,jf,Ss,[class b0{},new g.FiY],[class Vf{},new g.FiY]]},al,{provide:il,useFactory:function rm(n){return n.routerState.root},deps:[Ki]},D0,C0,class D_{preload(e,t){return t().pipe(us(()=>yt(null)))}},{provide:Ss,useValue:{enableTracing:!1}}];function HD(){return new g.PXZ("Router",Ki)}let Hf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[S0,A_(t),{provide:S_,useFactory:R0,deps:[[Ki,new g.FiY,new g.tp0]]},{provide:Ss,useValue:r||{}},{provide:ye,useFactory:A0,deps:[le,[new g.tBr(it),new g.FiY],Ss]},{provide:nm,useFactory:$D,deps:[Ki,wd,Ss]},{provide:C_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:C0},{provide:g.PXZ,multi:!0,useFactory:HD},[Gd,{provide:g.ip1,multi:!0,useFactory:P0,deps:[Gd]},{provide:P_,useFactory:x_,deps:[Gd]},{provide:g.tb,multi:!0,useExisting:P_}]]}}static forChild(t){return{ngModule:n,providers:[A_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(S_,8),g.LFG(Ki,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function $D(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new nm(n,e,t)}function A0(n,e,t={}){return t.useHash?new Pe(n,e):new $e(n,e)}function R0(n){return"guarded"}function A_(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:jf,multi:!0,useValue:n}]}let Gd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new bs.x}appInitializer(){return this.injector.get(K,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),a=this.injector.get(Ki),l=this.injector.get(Ss);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?yt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ss),i=this.injector.get(D0),a=this.injector.get(nm),l=this.injector.get(Ki),d=this.injector.get(g.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function P0(n){return n.appInitializer.bind(n)}function x_(n){return n.bootstrapListener.bind(n)}const P_=new g.OlP("Router Initializer");var GD=L(573),k=L(2090),Zi=L(9681),Uo=L(1877),io=L(4859),$f=L(4986),gn=L(5813);function N0(){return(0,hr.e)((n,e)=>{let t,r=!1;n.subscribe((0,An.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function M_(n,e=Gi.y){return n=null!=n?n:qD,(0,hr.e)((t,r)=>{let i,a=!0;t.subscribe((0,An.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function qD(n,e){return n===e}var ct,Br=L(2011),k_=(L(5881),L(3942)),he=L(5861),WD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Da={},O_=O_||{},Ht=WD||self;function sm(){}function om(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Gf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var F_="closure_uid_"+(1e9*Math.random()>>>0),$t=0;function M0(n,e,t){return n.call.apply(n.bind,arguments)}function k0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function oi(n,e,t){return(oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?M0:k0).apply(null,arguments)}function Ic(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function mu(){this.s=this.s,this.o=this.o}var L_={};mu.prototype.s=!1,mu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function zD(n){return Object.prototype.hasOwnProperty.call(n,F_)&&n[F_]||(n[F_]=++$t)}(this);delete L_[n]}},mu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sa=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},am=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function um(n){return Array.prototype.concat.apply([],arguments)}function F0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function qf(n){return/^[\s\xa0]*$/.test(n)}var Ei,ZD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ai(n,e){return-1!=n.indexOf(e)}function qd(n,e){return n<e?-1:n>e?1:0}e:{var lm=Ht.navigator;if(lm){var cm=lm.userAgent;if(cm){Ei=cm;break e}}Ei=""}function L0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function U0(n){const e={};for(const t in n)e[t]=n[t];return e}var B0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V0(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<B0.length;a++)t=B0[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function U_(n){return U_[" "](n),n}U_[" "]=sm;var V_,n,jP=ai(Ei,"Opera"),Wd=ai(Ei,"Trident")||ai(Ei,"MSIE"),YD=ai(Ei,"Edge"),dm=YD||Wd,B_=ai(Ei,"Gecko")&&!(ai(Ei.toLowerCase(),"webkit")&&!ai(Ei,"Edge"))&&!(ai(Ei,"Trident")||ai(Ei,"MSIE"))&&!ai(Ei,"Edge"),QD=ai(Ei.toLowerCase(),"webkit")&&!ai(Ei,"Edge");function hm(){var n=Ht.document;return n?n.documentMode:void 0}e:{var H0="",$0=(n=Ei,B_?/rv:([^\);]+)(\)|;)/.exec(n):YD?/Edge\/([\d\.]+)/.exec(n):Wd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):QD?/WebKit\/(\S+)/.exec(n):jP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($0&&(H0=$0?$0[1]:""),Wd){var G0=hm();if(null!=G0&&G0>parseFloat(H0)){V_=String(G0);break e}}V_=H0}var HP={};var GP=Ht.document&&Wd&&(hm()||parseInt(V_,10))||void 0,qP=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",sm,e),Ht.removeEventListener("test",sm,e)}catch(t){}return n}();function gr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Tc(n,e){if(gr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(B_){e:{try{U_(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:XD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Tc.Z.h.call(this)}}gr.prototype.h=function(){this.defaultPrevented=!0},Fn(Tc,gr);var XD={2:"touch",3:"pen",4:"mouse"};Tc.prototype.h=function(){Tc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zd="closure_listenable_"+(1e6*Math.random()|0),j_=0;function W0(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++j_,this.ca=this.fa=!1}function Kd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function fm(n){this.src=n,this.g={},this.h=0}function Aa(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Sa(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Kd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function pm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}fm.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=pm(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new W0(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var H_="closure_lm_"+(1e6*Math.random()|0),Wf={};function z0(n,e,t,r,i){if(r&&r.once)return K0(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)z0(n,e[a],t,r,i);return null}return t=G_(t),n&&n[zd]?n.N(e,t,Gf(r)?!!r.capture:!!r,i):$_(n,e,t,!1,r,i)}function $_(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Gf(i)?!!i.capture:!!i,d=Cc(n);if(d||(n[H_]=d=new fm(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function eS(){var e=Yd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)qP||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(gm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function K0(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)K0(n,e[a],t,r,i);return null}return t=G_(t),n&&n[zd]?n.O(e,t,Gf(r)?!!r.capture:!!r,i):$_(n,e,t,!0,r,i)}function Zd(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Zd(n,e[a],t,r,i);else r=Gf(r)?!!r.capture:!!r,t=G_(t),n&&n[zd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=pm(a=n.g[e],t,r,i))&&(Kd(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Cc(n))&&(e=n.g[e.toString()],n=-1,e&&(n=pm(e,t,r,i)),(t=-1<n?e[n]:null)&&ll(t))}function ll(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[zd])Aa(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Cc(e))?(Aa(t,n),0==t.h&&(t.src=null,e[H_]=null)):Kd(n)}}}function gm(n){return n in Wf?Wf[n]:Wf[n]="on"+n}function Yd(n,e){if(n.ca)n=!0;else{e=new Tc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ll(n),n=t.call(r,e)}return n}function Cc(n){return(n=n[H_])instanceof fm?n:null}var cl="__closure_events_fn_"+(1e9*Math.random()>>>0);function G_(n){return"function"==typeof n?n:(n[cl]||(n[cl]=function(e){return n.handleEvent(e)}),n[cl])}function Jr(){mu.call(this),this.i=new fm(this),this.P=this,this.I=null}function ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gr(e,n);else if(e instanceof gr)e.target=e.target||n;else{var i=e;V0(e=new gr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Qd(l,r,!0,e)&&i}if(i=Qd(l=e.g=n,r,!0,e)&&i,i=Qd(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Qd(l=e.g=t[a],r,!1,e)&&i}function Qd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var d=l.listener,f=l.ia||l.src;l.fa&&Aa(n.i,l),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}Fn(Jr,mu),Jr.prototype[zd]=!0,Jr.prototype.removeEventListener=function(n,e,t,r){Zd(this,n,e,t,r)},Jr.prototype.M=function(){if(Jr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Kd(t[r]);delete n.g[e],n.h--}}this.I=null},Jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zf=Ht.JSON.stringify;function Z0(){var n=J0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _m,Y0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Q0,n=>n.reset());class Q0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function WP(n){Ht.setTimeout(()=>{throw n},0)}function ym(n,e){_m||function tS(){var n=Ht.Promise.resolve(void 0);_m=function(){n.then(nS)}}(),vm||(_m(),vm=!0),J0.add(n,e)}var vm=!1,J0=new class mm{constructor(){this.h=this.g=null}add(e,t){const r=Y0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nS(){for(var n;n=Z0();){try{n.h.call(n.g)}catch(t){WP(t)}var e=Y0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vm=!1}function Ni(n,e){Jr.call(this),this.h=n||1,this.g=e||Ht,this.j=oi(this.kb,this),this.l=Date.now()}function q_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function W_(n,e,t){if("function"==typeof n)t&&(n=oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ht.setTimeout(n,e||0)}function rS(n){n.g=W_(()=>{n.g=null,n.i&&(n.i=!1,rS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fn(Ni,Jr),(ct=Ni.prototype).da=!1,ct.S=null,ct.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ui(this,"tick"),this.da&&(q_(this),this.start()))}},ct.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){Ni.Z.M.call(this),q_(this),delete this.g};class zP extends mu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rS(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jd(n){mu.call(this),this.h=n,this.g={}}Fn(Jd,mu);var iS=[];function X0(n,e,t,r){Array.isArray(t)||(t&&(iS[0]=t.toString()),t=iS);for(var i=0;i<t.length;i++){var a=z0(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function wm(n){L0(n.g,function(e,t){this.g.hasOwnProperty(t)&&ll(e)},n),n.g={}}function Kf(){this.g=!0}function Xd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function aS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return zf(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}Jd.prototype.M=function(){Jd.Z.M.call(this),wm(this)},Jd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kf.prototype.Aa=function(){this.g=!1},Kf.prototype.info=function(){};var dl={},tb=null;function Em(){return tb=tb||new Jr}function z_(n){gr.call(this,dl.Ma,n)}function eh(n){const e=Em();ui(e,new z_(e,n))}function nb(n,e){gr.call(this,dl.STAT_EVENT,n),this.stat=e}function rr(n){const e=Em();ui(e,new nb(e,n))}function bm(n,e){gr.call(this,dl.Na,n),this.size=e}function Zf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},e)}dl.Ma="serverreachability",Fn(z_,gr),dl.STAT_EVENT="statevent",Fn(nb,gr),dl.Na="timingevent",Fn(bm,gr);var Im={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},uS={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Tm(){}function ib(){}Tm.prototype.h=null;var Z_,Yf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Qf(){gr.call(this,"d")}function K_(){gr.call(this,"c")}function Dc(){}function Sc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Jd(this),this.P=Y_,this.W=new Ni(n=dm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sb}function sb(){this.i=null,this.g="",this.h=!1}Fn(Qf,gr),Fn(K_,gr),Fn(Dc,Tm),Dc.prototype.g=function(){return new XMLHttpRequest},Dc.prototype.i=function(){return{}},Z_=new Dc;var Y_=45e3,Jf={},Xf={};function Q_(n,e,t){n.K=1,n.v=sh(_u(e)),n.s=t,n.U=!0,ob(n,null)}function ob(n,e){n.F=Date.now(),th(n),n.A=_u(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),rv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new sb,n.g=Oc(n.l,t?e:null,!n.s),0<n.O&&(n.L=new zP(oi(n.Ia,n,n.g),n.O)),X0(n.V,n.g,"readystatechange",n.gb),e=n.H?U0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),eh(1),function sS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),f=0;f<d.length;f++){var _=d[f].split("=");if(1<_.length){var T=_[0];_=_[1];var D=T.split("_");l=2<=D.length&&"type"==D[1]?l+(T+"=")+_+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Cm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function lS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=cS(n,t),i==Xf){4==e&&(n.o=4,rr(14),r=!1),Xd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Jf){n.o=4,rr(15),Xd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xd(n.j,n.m,i,null),Bo(n,i)}Cm(n)&&i!=Xf&&i!=Jf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,rr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),pl(e),e.L=!0,rr(11))):(Xd(n.j,n.m,t,"[Invalid Chunked Response]"),hl(n),nh(n))}function cS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xf:(t=Number(e.substring(t,r)),isNaN(t)?Jf:(r+=1)+t>e.length?Xf:(e=e.substr(r,t),n.C=r+t,e))}function th(n){n.Y=Date.now()+n.P,J_(n,n.P)}function J_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Zf(oi(n.eb,n),e)}function ep(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function nh(n){0==n.l.G||n.I||Pc(n.l,n)}function hl(n){ep(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,q_(n.W),wm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Bo(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Am(t.i,n)))if(t.I=n.N,!n.J&&Am(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Zf(oi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;wu(t),km(t)}up(t),rr(18)}if(1>=pb(t.i)&&t.ka){try{t.ka()}catch(_){}t.ka=void 0}}else oo(t,11)}else if((n.J||t.g==n)&&wu(t),!qf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.U=_[0],_=_[1],2==t.G)if("c"==_[0]){t.J=_[1],t.la=_[2];const T=_[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const D=_[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const P=_[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const V=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var a=r.i;!a.g&&(ai(V,"spdy")||ai(V,"quic")||ai(V,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(gb(a,a.h),a.h=null))}if(r.D){const Q=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.sa=Q,ir(r.F,r.D,Q))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=kc(r,r.H?r.la:null,r.W),l.J){iv(r.i,l);var d=l,f=r.K;f&&d.setTimeout(f),d.B&&(ep(d),th(d)),r.g=l}else Rs(r);0<t.l.length&&As(t)}else"stop"!=_[0]&&"close"!=_[0]||oo(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?oo(t,7):Rc(t):"noop"!=_[0]&&t.j&&t.j.wa(_),t.A=0)}eh(4)}catch(_){}}function X_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(om(n)||"string"==typeof n)am(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(om(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Dm(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(om(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function rh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof rh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ab(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];yu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)yu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function yu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ct=Sc.prototype).setTimeout=function(n){this.P=n},ct.gb=function(n){n=n.target;const e=this.L;e&&3==vu(n)?e.l():this.Ia(n)},ct.Ia=function(n){try{if(n==this.g)e:{const T=vu(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>T)&&(3!=T||dm||this.g&&(this.h.h||this.g.ga()||Tb(this.g)))){this.I||4!=T||7==e||eh(8==e||0>=D?3:2),ep(this);var t=this.g.ba();this.N=t;t:if(Cm(this)){var r=Tb(this.g);n="";var i=r.length,a=4==vu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hl(this),nh(this);var l="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function oS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qf(d)){var _=d;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,rr(12),hl(this),nh(this);break e}Xd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bo(this,t)}this.U?(lS(this,T,l),dm&&this.i&&3==T&&(X0(this.V,this.W,"tick",this.fb),this.W.start())):(Xd(this.j,this.m,l,null),Bo(this,l)),4==T&&hl(this),this.i&&!this.I&&(4==T?Pc(this.l,this):(this.i=!1,th(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,rr(12)):(this.o=0,rr(13)),hl(this),nh(this)}}}catch(T){}},ct.fb=function(){if(this.g){var n=vu(this.g),e=this.g.ga();this.C<e.length&&(ep(this),lS(this,n,e),this.i&&4!=n&&th(this))}},ct.cancel=function(){this.I=!0,hl(this)},ct.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function eb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(eh(3),rr(17)),hl(this),this.o=2,nh(this)):J_(this,this.Y-n)},(ct=rh.prototype).R=function(){ab(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ct.T=function(){return ab(this),this.g.concat()},ct.get=function(n,e){return yu(this.h,n)?this.h[n]:e},ct.set=function(n,e){yu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ct.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var ev=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Vo){this.g=void 0!==e?e:n.g,ih(this,n.j),this.s=n.s,tp(this,n.i),np(this,n.m),this.l=n.l,e=n.h;var t=new rp;t.i=e.i,e.g&&(t.g=new rh(e.g),t.h=e.h),nv(this,t),this.o=n.o}else n&&(t=String(n).match(ev))?(this.g=!!e,ih(this,t[1]||"",!0),this.s=oh(t[2]||""),tp(this,t[3]||"",!0),np(this,t[4]),this.l=oh(t[5]||"",!0),nv(this,t[6]||"",!0),this.o=oh(t[7]||"")):(this.g=!!e,this.h=new rp(null,this.g))}function _u(n){return new Vo(n)}function ih(n,e,t){n.j=t?oh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tp(n,e,t){n.i=t?oh(e,!0):e}function np(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nv(n,e,t){e instanceof rp?(n.h=e,function cb(n,e){e&&!n.j&&(fl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(jo(this,r),rv(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ra(e,pS)),n.h=new rp(e,n.g))}function ir(n,e,t){n.h.set(e,t)}function sh(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function oh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ra(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ub),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ub(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ra(e,lb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ra(e,lb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ra(t,"/"==t.charAt(0)?ah:fS,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ra(t,gS)),n.join("")};var lb=/[#\/\?@]/g,fS=/[#\?:]/g,ah=/[#\?]/g,pS=/[#\?@]/g,gS=/#/g;function rp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fl(n){n.g||(n.g=new rh,n.h=0,n.i&&function tv(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jo(n,e){fl(n),e=Ac(n,e),yu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,yu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ab(n)))}function Sm(n,e){return fl(n),e=Ac(n,e),yu(n.g.h,e)}function rv(n,e,t){jo(n,e),0<t.length&&(n.i=null,n.g.set(Ac(n,e),F0(t)),n.h+=t.length)}function Ac(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hb(n){this.l=n||mS,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ea&&Ht.g.Ea()&&Ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=rp.prototype).add=function(n,e){fl(this),this.i=null,n=Ac(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){fl(this),this.g.forEach(function(t,r){am(t,function(i){n.call(e,i,r,this)},this)},this)},ct.T=function(){fl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ct.R=function(n){fl(this);var e=[];if("string"==typeof n)Sm(this,n)&&(e=um(e,this.g.get(Ac(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=um(e,n[t])}return e},ct.set=function(n,e){return fl(this),this.i=null,Sm(this,n=Ac(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var mS=10;function fb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pb(n){return n.h?1:n.g?n.g.size:0}function Am(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gb(n,e){n.g?n.g.add(e):n.h=e}function iv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return F0(n.i)}function sv(){}function KP(){this.g=new sv}function ZP(n,e,t){const r=t||"";try{X_(n,function(i,a){let l=i;Gf(i)&&(l=zf(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function uh(n){this.l=n.$b||null,this.j=n.ib||!1}function ip(n,e){Jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=yb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hb.prototype.cancel=function(){if(this.i=mb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sv.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},sv.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},Fn(uh,Tm),uh.prototype.g=function(){return new ip(this.l,this.j)},uh.prototype.i=function(n){return function(){return n}}({}),Fn(ip,Jr);var yb=0;function so(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function xm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Pm(n)}function Pm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=ip.prototype).open=function(n,e){if(this.readyState!=yb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Pm(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ht).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xm(this)),this.readyState=yb},ct.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Pm(this)),this.g&&(this.readyState=3,Pm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;so(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ct.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xm(this):Pm(this),3==this.readyState&&so(this)}},ct.Ua=function(n){this.g&&(this.response=this.responseText=n,xm(this))},ct.Ta=function(n){this.g&&(this.response=n,xm(this))},ct.ha=function(){this.g&&xm(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ip.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _b=Ht.JSON.parse;function Sr(n){Jr.call(this),this.headers=new rh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=av,this.K=this.L=!1}Fn(Sr,Jr);var av="",yS=/^https?$/i,YP=["POST","PUT"];function wb(n){return"content-type"==n.toLowerCase()}function Eb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Nm(n),Mm(n)}function Nm(n){n.D||(n.D=!0,ui(n,"complete"),ui(n,"error"))}function bb(n){if(n.h&&void 0!==O_&&(!n.C[1]||4!=vu(n)||2!=n.ba()))if(n.v&&4==vu(n))W_(n.Fa,0,n);else if(ui(n,"readystatechange"),4==vu(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(ev)[1]||null;if(!i&&Ht.self&&Ht.self.location){var a=Ht.self.location.protocol;i=a.substr(0,a.length-1)}r=!yS.test(i?i.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var l=2<vu(n)?n.g.statusText:""}catch(f){l=""}n.j=l+" ["+n.ba()+"]",Nm(n)}}finally{Mm(n)}}}function Mm(n,e){if(n.g){Ib(n);const t=n.g,r=n.C[0]?sm:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Ib(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function vu(n){return n.g?n.g.readyState:0}function Tb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case av:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function lh(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function _S(n){let e="";return L0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function xa(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Cb(n){this.za=0,this.l=[],this.h=new Kf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xa("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xa("baseRetryDelayMs",5e3,n),this.$a=xa("retryDelaySeedMs",1e4,n),this.Ya=xa("forwardChannelMaxRetries",2,n),this.ra=xa("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new hb(n&&n.concurrentRequestLimit),this.Ca=new KP,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Rc(n){if(Db(n),3==n.G){var e=n.V++,t=_u(n.F);ir(t,"SID",n.J),ir(t,"RID",e),ir(t,"TYPE","terminate"),Ho(n,t),(e=new Sc(n,n.h,e,void 0)).K=2,e.v=sh(_u(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(t=Ht.navigator.sendBeacon(e.v.toString(),"")),!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=Oc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),th(e)}Mc(n)}function km(n){n.g&&(pl(n),n.g.cancel(),n.g=null)}function Db(n){km(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),wu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function sp(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&As(n)}function As(n){fb(n.i)||n.m||(n.m=!0,ym(n.Ha,n),n.C=0)}function bi(n,e){var t;t=e?e.m:n.V++;const r=_u(n.F);ir(r,"SID",n.J),ir(r,"RID",t),ir(r,"AID",n.U),Ho(n,r),n.o&&n.s&&lh(r,n.o,n.s),t=new Sc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ap(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gb(n.i,t),Q_(t,r,e)}function Ho(n,e){n.j&&X_({},function(t,r){ir(e,r,t)})}function ap(n,e,t){t=Math.min(n.l.length,t);var r=n.j?oi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let f=0;f<t;f++){let _=i[f].h;const T=i[f].g;if(_-=a,0>_)a=Math.max(0,i[f].h-100),d=!1;else try{ZP(T,l,"req"+_+"_")}catch(D){r&&r(T)}}if(d){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Rs(n){n.g||n.u||(n.Y=1,ym(n.Ga,n),n.A=0)}function up(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Zf(oi(n.Ga,n),Nc(n,n.A)),n.A++,0))}function pl(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function xc(n){n.g=new Sc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_u(n.oa);ir(e,"RID","rpc"),ir(e,"SID",n.J),ir(e,"CI",n.N?"0":"1"),ir(e,"AID",n.U),Ho(n,e),ir(e,"TYPE","xmlhttp"),n.o&&n.s&&lh(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=sh(_u(e)),t.s=null,t.U=!0,ob(t,n)}function wu(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function Pc(n,e){var t=null;if(n.g==e){wu(n),pl(n),n.g=null;var r=2}else{if(!Am(n.i,e))return;t=e.D,iv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ui(r=Em(),new bm(r,t,e,i)),As(n)}else Rs(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function op(n,e){return!(pb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Zf(oi(n.Ha,n,e),Nc(n,n.C)),n.C++,0)))}(n,e)||2==r&&up(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:oo(n,5);break;case 4:oo(n,10);break;case 3:oo(n,6);break;default:oo(n,2)}}function Nc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function oo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=oi(n.jb,n);t||(t=new Vo("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||ih(t,"https"),sh(t)),function ov(n,e){const t=new Kf;if(Ht.Image){const r=new Image;r.onload=Ic(Rm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ic(Rm,t,r,"TestLoadImage: error",!1,e),r.onabort=Ic(Rm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ic(Rm,t,r,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else rr(2);n.G=0,n.j&&n.j.va(e),Mc(n),Db(n)}function Mc(n){n.G=0,n.I=-1,n.j&&((0!=mb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,F0(n.l),n.l.length=0),n.j.ua())}function kc(n,e,t){let r=function dS(n){return n instanceof Vo?_u(n):new Vo(n,void 0)}(t);if(""!=r.i)e&&tp(r,e+"."+r.i),np(r,r.m);else{const i=Ht.location;r=function hS(n,e,t,r){var i=new Vo(null,void 0);return n&&ih(i,n),e&&tp(i,e),t&&np(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&L0(n.aa,function(i,a){ir(r,a,i)}),t=n.sa,(e=n.D)&&t&&ir(r,e,t),ir(r,"VER",n.ma),Ho(n,r),r}function Oc(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&n.Ba&&!n.qa?new uh({ib:!0}):n.qa)).L=n.H,e}function uv(){}function lp(){if(Wd&&!(10<=Number(GP)))throw Error("Environmental error: no available transport.")}function hs(n,e){Jr.call(this),this.g=new Cb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!qf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fc(this)}function lv(n){Qf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cv(){K_.call(this),this.status=1}function Fc(n){this.g=n}(ct=Sr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Z_.g(),this.C=function rb(n){return n.h||(n.h=n.i())}(this.u?this.u:Z_),this.g.onreadystatechange=oi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Eb(this,a)}n=t||"";const i=new rh(this.headers);r&&X_(r,function(a,l){i.set(l,a)}),r=function O0(n){e:{var e=wb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ht.FormData&&n instanceof Ht.FormData,!(0<=Sa(YP,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ib(this),0<this.B&&((this.K=function vb(n){return Wd&&function $P(){return function j0(n){var e=HP;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ZD(String(V_)).split("."),t=ZD("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=qd(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||qd(0==i[2].length,0==a[2].length)||qd(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oi(this.pa,this)):this.A=W_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Eb(this,a)}},ct.pa=function(){void 0!==O_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),Mm(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mm(this,!0)),Sr.Z.M.call(this)},ct.Fa=function(){this.s||(this.F||this.v||this.l?bb(this):this.cb())},ct.cb=function(){bb(this)},ct.ba=function(){try{return 2<vu(this)?this.g.status:-1}catch(n){return-1}},ct.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ct.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_b(e)}},ct.Da=function(){return this.m},ct.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=Cb.prototype).ma=8,ct.G=1,ct.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ct.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Sc(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=U0(a),V0(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ap(this,i,e),ir(t=_u(this.F),"RID",n),ir(t,"CVER",22),this.D&&ir(t,"X-HTTP-Session-Id",this.D),Ho(this,t),this.o&&a&&lh(t,this.o,a),gb(this.i,i),this.Ra&&ir(t,"TYPE","init"),this.ja?(ir(t,"$req",e),ir(t,"SID","null"),i.$=!0,Q_(i,t,null)):Q_(i,t,e),this.G=2}}else 3==this.G&&(n?bi(this,n):0==this.l.length||fb(this.i)||bi(this))},ct.Ga=function(){if(this.u=null,xc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Zf(oi(this.bb,this),n)}},ct.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rr(10),km(this),xc(this))},ct.ab=function(){null!=this.v&&(this.v=null,km(this),up(this),rr(19))},ct.jb=function(n){n?(this.h.info("Successfully pinged google.com"),rr(2)):(this.h.info("Failed to ping google.com"),rr(1))},(ct=uv.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Oa=function(){},lp.prototype.g=function(n,e){return new hs(n,e)},Fn(hs,Jr),hs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ym(oi(n.hb,n,e))),rr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=kc(n,null,n.W),As(n)},hs.prototype.close=function(){Rc(this.g)},hs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,sp(this.g,e)}else this.v?((e={}).__data__=zf(n),sp(this.g,e)):sp(this.g,n)},hs.prototype.M=function(){this.g.j=null,delete this.j,Rc(this.g),delete this.g,hs.Z.M.call(this)},Fn(lv,Qf),Fn(cv,K_),Fn(Fc,uv),Fc.prototype.xa=function(){ui(this.g,"a")},Fc.prototype.wa=function(n){ui(this.g,new lv(n))},Fc.prototype.va=function(n){ui(this.g,new cv(n))},Fc.prototype.ua=function(){ui(this.g,"b")},lp.prototype.createWebChannel=lp.prototype.g,hs.prototype.send=hs.prototype.u,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,Im.NO_ERROR=0,Im.TIMEOUT=8,Im.HTTP_ERROR=6,uS.COMPLETE="complete",ib.EventType=Yf,Yf.OPEN="a",Yf.CLOSE="b",Yf.ERROR="c",Yf.MESSAGE="d",Jr.prototype.listen=Jr.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.La,Sr.prototype.getLastErrorCode=Sr.prototype.Da,Sr.prototype.getStatus=Sr.prototype.ba,Sr.prototype.getResponseJson=Sr.prototype.Qa,Sr.prototype.getResponseText=Sr.prototype.ga,Sr.prototype.send=Sr.prototype.ea;var Sb=Da.createWebChannelTransport=function(){return new lp},Ab=Da.getStatEventTarget=function(){return Em()},Om=Da.ErrorCode=Im,vS=Da.EventType=uS,Rb=Da.Event=dl,xb=Da.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Pb=Da.FetchXmlHttpFactory=uh,cp=Da.WebChannel=ib,wS=Da.XhrIo=Sr;const Nb="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let ch="9.6.11";const Eu=new Uo.Yd("@firebase/firestore");function dv(){return Eu.logLevel}function je(n,...e){if(Eu.logLevel<=Uo.in.DEBUG){const t=e.map(dp);Eu.debug(`Firestore (${ch}): ${n}`,...t)}}function Vr(n,...e){if(Eu.logLevel<=Uo.in.ERROR){const t=e.map(dp);Eu.error(`Firestore (${ch}): ${n}`,...t)}}function Lc(n,...e){if(Eu.logLevel<=Uo.in.WARN){const t=e.map(dp);Eu.warn(`Firestore (${ch}): ${n}`,...t)}}function dp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${ch}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function Ft(n,e){n||ht()}function rt(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Mb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class bS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kb{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let l=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ii,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const _=l;e.enqueueRetryable((0,he.Z)(function*(){yield _.promise,yield a(r.currentUser)}))},f=_=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ii)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new Mb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new li(e)}}class IS{constructor(e,t,r){this.type="FirstParty",this.user=li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Ob{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new IS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TS{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new hp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class xs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function DS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}xs.A=-1;class Fb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=DS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function hh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hv(n){return n+"\0"}class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Ar(0,0))}static max(){return new At(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function fv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Uc{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends Uc{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const JP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wr extends Uc{construct(e,t,r){return new wr(e,t,r)}static isValidIdentifier(e){return JP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new ke(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new ke(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new ke(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wr(t)}static emptyPath(){return new wr([])}}class Bc{constructor(e){this.fields=e,e.sort(wr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const AS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=AS.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Iu(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function Lb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ub(n){const e=n.mapValue.fields.__previous_value__;return Lb(e)?Ub(e):e}function gl(n){const e=$o(n.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}class Fm{constructor(e,t,r,i,a,l,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class Pa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}function ml(n){return null==n}function Vc(n){return 0===n&&1/n==-1/0}function gv(n){return"number"==typeof n&&Number.isInteger(n)&&!Vc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class We{constructor(e){this.path=e}static fromPath(e){return new We(dn.fromString(e))}static fromName(e){return new We(dn.fromString(e).popFirst(5))}static empty(){return new We(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new dn(e.slice()))}}const Lm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mv={nullValue:"NULL_VALUE"};function jc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lb(n)?4:Ev(n)?9:10:ht()}function Go(n,e){if(n===e)return!0;const t=jc(n);if(t!==jc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gl(n).isEqual(gl(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=$o(r.timestampValue),l=$o(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Iu(n.bytesValue).isEqual(Iu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Yn(r.geoPointValue.latitude)===Yn(i.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Yn(r.integerValue)===Yn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Yn(r.doubleValue),l=Yn(i.doubleValue);return a===l?Vc(a)===Vc(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return hh(n.arrayValue.values||[],e.arrayValue.values||[],Go);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(fv(a)!==fv(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!Go(a[d],l[d])))return!1;return!0}(n,e);default:return ht()}var i}function fh(n,e){return void 0!==(n.values||[]).find(t=>Go(t,e))}function Na(n,e){if(n===e)return 0;const t=jc(n),r=jc(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Yn(i.integerValue||i.doubleValue),d=Yn(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return yv(n.timestampValue,e.timestampValue);case 4:return yv(gl(n),gl(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Iu(i),d=Iu(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let f=0;f<l.length&&f<d.length;f++){const _=Kt(l[f],d[f]);if(0!==_)return _}return Kt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Kt(Yn(i.latitude),Yn(a.latitude));return 0!==l?l:Kt(Yn(i.longitude),Yn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let f=0;f<l.length&&f<d.length;++f){const _=Na(l[f],d[f]);if(_)return _}return Kt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},d=Object.keys(l),f=a.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let T=0;T<d.length&&T<_.length;++T){const D=Kt(d[T],_[T]);if(0!==D)return D;const P=Na(l[d[T]],f[_[T]]);if(0!==P)return P}return Kt(d.length,_.length)}(n.mapValue,e.mapValue);default:throw ht()}}function yv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=$o(n),r=$o(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function ph(n){return _v(n)}function _v(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=$o(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Iu(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=_v(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${_v(r.fields[d])}`;return a+"}"}(n.mapValue):ht();var e}function Hc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fp(n){return!!n&&"integerValue"in n}function $c(n){return!!n&&"arrayValue"in n}function vv(n){return!!n&&"nullValue"in n}function wv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pp(n){return!!n&&"mapValue"in n}function gh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ev(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bb(n){return"nullValue"in n?mv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hc(Pa.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function Vb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hc(Pa.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Lm:ht()}function bv(n,e){return void 0===n?e:void 0===e||Na(n,e)>0?n:e}function RS(n,e){return void 0===n?e:void 0===e||Na(n,e)<0?n:e}class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gh(t)}setAll(e){let t=wr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=gh(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());pp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Go(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bu(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Mi(gh(this.value))}}function jb(n){const e=[];return bu(n.fields,(t,r)=>{const i=new wr([t]);if(pp(r)){const a=jb(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Bc(e)}class Hn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Hn(e,0,At.min(),At.min(),Mi.empty(),0)}static newFoundDocument(e,t,r){return new Hn(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new Hn(e,2,t,At.min(),Mi.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,At.min(),Mi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Um{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function xr(n){return n.fields.find(e=>2===e.kind)}function yl(n){return n.fields.filter(e=>2!==e.kind)}Um.UNKNOWN_ID=-1;class Bm{constructor(e,t){this.fieldPath=e,this.kind=t}}class gp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gp(0,Ma.min())}}function Iv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Ar(t+1,0):new Ar(t,r));return new Ma(i,We.empty(),e)}function xS(n){return new Ma(n.readTime,n.key,-1)}class Ma{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ma(At.min(),We.empty(),-1)}static max(){return new Ma(At.max(),We.empty(),-1)}}function Hb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}class mh{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.P=null}}function $b(n,e=null,t=[],r=[],i=null,a=null,l=null){return new mh(n,e,t,r,i,a,l)}function Gc(n){const e=rt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+ph(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ml(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ph(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ph(r)).join(",")),e.P=t}return e.P}function mp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!kS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Go(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_h(n.startAt,e.startAt)&&_h(n.endAt,e.endAt)}function yp(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Tv(n,e){return n.filters.filter(t=>t instanceof $n&&t.field.isEqual(e))}function Cv(n,e,t){let r,i=!0;for(const a of Tv(n,e)){let l,d=!0;switch(a.op){case"<":case"<=":l=Bb(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=mv}bv(r,l)===l&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];bv(r,l)===l&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Dv(n,e,t){let r,i=!0;for(const a of Tv(n,e)){let l,d=!0;switch(a.op){case">=":case">":l=Vb(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Lm}RS(r,l)===l&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];RS(r,l)===l&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class $n extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new PS(e,t,r):"array-contains"===t?new qo(e,r):"in"===t?new qb(e,r):"not-in"===t?new Wb(e,r):"array-contains-any"===t?new MS(e,r):new $n(e,t,r)}static V(e,t,r){return"in"===t?new NS(e,r):new ka(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Na(t,this.value)):null!==t&&jc(this.value)===jc(t)&&this.v(Na(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class PS extends $n{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.v(t)}}class NS extends $n{constructor(e,t){super(e,"in",t),this.keys=ao(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ka extends $n{constructor(e,t){super(e,"not-in",t),this.keys=ao(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ao(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class qo extends $n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $c(t)&&fh(t.arrayValue,this.value)}}class qb extends $n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fh(this.value.arrayValue,t)}}class Wb extends $n{constructor(e,t){super(e,"not-in",t)}matches(e){if(fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fh(this.value.arrayValue,t)}}class MS extends $n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$c(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fh(this.value.arrayValue,r))}}class _l{constructor(e,t){this.position=e,this.inclusive=t}}class yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function kS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Vm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):Na(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function _h(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Go(n.position[t],e.position[t]))return!1;return!0}class Tu{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.D=null,this.C=null}}function Sv(n,e,t,r,i,a,l,d){return new Tu(n,e,t,r,i,a,l,d)}function vh(n){return new Tu(n)}function _p(n){return!ml(n.limit)&&"F"===n.limitType}function vp(n){return!ml(n.limit)&&"L"===n.limitType}function wh(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Av(n){for(const e of n.filters)if(e.S())return e.field;return null}function jm(n){return null!==n.collectionGroup}function qc(n){const e=rt(n);if(null===e.D){e.D=[];const t=Av(e),r=wh(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new yh(t)),e.D.push(new yh(wr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new yh(wr.keyField(),a))}}}return e.D}function fs(n){const e=rt(n);if(!e.C)if("F"===e.limitType)e.C=$b(e.path,e.collectionGroup,qc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of qc(e))t.push(new yh(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new _l(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new _l(e.startAt.position,!e.startAt.inclusive):null;e.C=$b(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function wp(n,e,t){return new Tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eh(n,e){return mp(fs(n),fs(e))&&n.limitType===e.limitType}function Rv(n){return`${Gc(fs(n))}|lt:${n.limitType}`}function Hm(n){return`Query(target=${function Gb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ph(r.value)}`;var r}).join(", ")}]`),ml(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ph(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ph(t)).join(",")),`Target(${e})`}(fs(n))}; limitType=${n.limitType})`}function $m(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=Vm(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,qc(t),r)||t.endAt&&!function(i,a,l){const d=Vm(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,qc(t),r)));var t,r}function xv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pv(n){return(e,t)=>{let r=!1;for(const i of qc(n)){const a=zb(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function zb(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),f=l.data.field(i);return null!==d&&null!==f?Na(d,f):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function Nv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function Kb(n){return{integerValue:""+n}}function Zb(n,e){return gv(e)?Kb(e):Nv(n,e)}class Gm{constructor(){this._=void 0}}function OS(n,e,t){return n instanceof bh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Wc?Qb(n,e):n instanceof zc?Jb(n,e):function(r,i){const a=Yb(r,i),l=Xb(a)+Xb(r.k);return fp(a)&&fp(r.k)?Kb(l):Nv(r.M,l)}(n,e)}function FS(n,e,t){return n instanceof Wc?Qb(n,e):n instanceof zc?Jb(n,e):t}function Yb(n,e){return n instanceof Ih?fp(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bh extends Gm{}class Wc extends Gm{constructor(e){super(),this.elements=e}}function Qb(n,e){const t=eI(e);for(const r of n.elements)t.some(i=>Go(i,r))||t.push(r);return{arrayValue:{values:t}}}class zc extends Gm{constructor(e){super(),this.elements=e}}function Jb(n,e){let t=eI(e);for(const r of n.elements)t=t.filter(i=>!Go(i,r));return{arrayValue:{values:t}}}class Ih extends Gm{constructor(e,t){super(),this.M=e,this.k=t}}function Xb(n){return Yn(n.integerValue||n.doubleValue)}function eI(n){return $c(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ep{constructor(e,t){this.field=e,this.transform=t}}class US{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ip{}function tI(n,e,t){n instanceof Th?function(r,i,a){const l=r.value.clone(),d=Fv(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof vl?function(r,i,a){if(!bp(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Fv(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(Ov(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qm(n,e,t){var i;n instanceof Th?function(r,i,a){if(!bp(r.precondition,i))return;const l=r.value.clone(),d=wl(r.fieldTransforms,a,i);l.setAll(d),i.convertToFoundDocument(kv(i),l).setHasLocalMutations()}(n,e,t):n instanceof vl?function(r,i,a){if(!bp(r.precondition,i))return;const l=wl(r.fieldTransforms,a,i),d=i.data;d.setAll(Ov(r)),d.setAll(l),i.convertToFoundDocument(kv(i),d).setHasLocalMutations()}(n,e,t):bp(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function nI(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Yb(r.transform,i||null);null!=a&&(null==t&&(t=Mi.empty()),t.set(r.field,a))}return t||null}function Mv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&hh(t,r,(i,a)=>function LS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wc&&r instanceof Wc||t instanceof zc&&r instanceof zc?hh(t.elements,r.elements,Go):t instanceof Ih&&r instanceof Ih?Go(t.k,r.k):t instanceof bh&&r instanceof bh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function kv(n){return n.isFoundDocument()?n.version:At.min()}class Th extends Ip{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class vl extends Ip{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Ov(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Fv(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,FS(l,d,t[i]))}return r}function wl(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,OS(a,l,e))}return r}class Tp extends Ip{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Lv extends Ip{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ch{constructor(e){this.count=e}}var Xr,an;function BS(n){switch(n){default:return ht();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function Uv(n){if(void 0===n)return Vr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Xr.OK:return fe.OK;case Xr.CANCELLED:return fe.CANCELLED;case Xr.UNKNOWN:return fe.UNKNOWN;case Xr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Xr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Xr.INTERNAL:return fe.INTERNAL;case Xr.UNAVAILABLE:return fe.UNAVAILABLE;case Xr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Xr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Xr.NOT_FOUND:return fe.NOT_FOUND;case Xr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Xr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Xr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Xr.ABORTED:return fe.ABORTED;case Xr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Xr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Xr.DATA_LOSS:return fe.DATA_LOSS;default:return ht()}}(an=Xr||(Xr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class Cu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bu(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return SS(this.inner)}size(){return this.innerSize}}class Hr{constructor(e,t){this.comparator=e,this.root=t||Ti.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bt(this.root,e,this.comparator,!1)}getReverseIterator(){return new bt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bt(this.root,e,this.comparator,!0)}}class bt{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ti{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Ti.RED,this.left=null!=i?i:Ti.EMPTY,this.right=null!=a?a:Ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ti(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1,Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rI(this.data.getIterator())}getIteratorFrom(e){return new rI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qn(this.comparator);return t.data=e,t}}class rI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Du(n){return n.hasNext()?n.getNext():void 0}const VS=new Hr(We.comparator);function Yi(){return VS}const Wm=new Hr(We.comparator);function sr(){return Wm}function zm(){return new Cu(n=>n.toString(),(n,e)=>n.isEqual(e))}const iI=new Hr(We.comparator),jS=new Qn(We.comparator);function Cn(...n){let e=jS;for(const t of n)e=e.add(t);return e}const sI=new Qn(Kt);function Cp(){return sI}class Dh{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Dh(At.min(),r,Cp(),Yi(),Cn())}}class Sh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Sh(Rr.EMPTY_BYTE_STRING,t,Cn(),Cn(),Cn())}}class Km{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class oI{constructor(e,t){this.targetId=e,this.$=t}}class aI{constructor(e,t,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ah{constructor(){this.B=0,this.L=lI(),this.U=Rr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Cn(),t=Cn(),r=Cn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new Sh(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=lI()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class HS{constructor(e){this.nt=e,this.st=new Map,this.it=Yi(),this.rt=uI(),this.ot=new Qn(Kt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(yp(a))if(0===r){const l=new We(a.path);this.ct(t,l,Hn.newNoDocument(l,At.min()))}else Ft(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const d=this.wt(l);if(d){if(a.current&&yp(d.target)){const f=new We(d.target.path);null!==this.it.get(f)||this.It(l,f)||this.ct(l,f,Hn.newNoDocument(f,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=Cn();this.rt.forEach((a,l)=>{let d=!0;l.forEachWhile(f=>{const _=this.wt(f);return!_||2===_.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new Dh(e,t,this.ot,this.it,r);return this.it=Yi(),this.rt=uI(),this.ot=new Qn(Kt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ah,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Qn(Kt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ah),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function uI(){return new Hr(We.comparator)}function lI(){return new Hr(We.comparator)}const Zm={asc:"ASCENDING",desc:"DESCENDING"},cI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dI{constructor(e,t){this.databaseId=e,this.N=t}}function Rh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hI(n,e){return n.N?e.toBase64():e.toUint8Array()}function Dp(n,e){return Rh(n,e.toTimestamp())}function Er(n){return Ft(!!n),At.fromTimestamp(function(e){const t=$o(e);return new Ar(t.seconds,t.nanos)}(n))}function Bv(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fI(n){const e=dn.fromString(n);return Ft(bI(e)),e}function Sp(n,e){return Bv(n.databaseId,e.path)}function Wo(n,e){const t=fI(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(jv(t))}function Ym(n,e){return Bv(n.databaseId,e)}function Vv(n){const e=fI(n);return 4===e.length?dn.emptyPath():jv(e)}function Ap(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jv(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pI(n,e,t){return{name:Sp(n,e),fields:t.value.mapValue.fields}}function gI(n,e,t){const r=Wo(n,e.name),i=Er(e.updateTime),a=new Mi({mapValue:{fields:e.fields}}),l=Hn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Qm(n,e){let t;if(e instanceof Th)t={update:pI(n,e.key,e.value)};else if(e instanceof Tp)t={delete:Sp(n,e.key)};else if(e instanceof vl)t={update:pI(n,e.key,e.data),updateMask:WS(e.fieldMask)};else{if(!(e instanceof Lv))return ht();t={verify:Sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof bh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ih)return{fieldPath:a.field.canonicalString(),increment:l.k};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Dp(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function mI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?jr.updateTime(Er(i.updateTime)):void 0!==i.exists?jr.exists(i.exists):jr.none():jr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(Ft("REQUEST_TIME"===l.setToServerValue),d=new bh):"appendMissingElements"in l?d=new Wc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new zc(l.removeAllFromArray.values||[]):"increment"in l?d=new Ih(a,l.increment):ht();const f=wr.fromServerFormat(l.fieldPath);return new Ep(f,d)}(n,i)):[];var i;if(e.update){const i=Wo(n,e.update.name),a=new Mi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Bc((e.updateMask.fieldPaths||[]).map(_=>wr.fromServerFormat(_)));return new vl(i,a,l,t,r)}return new Th(i,a,t,r)}if(e.delete){const i=Wo(n,e.delete);return new Tp(i,t)}if(e.verify){const i=Wo(n,e.verify);return new Lv(i,t)}return ht()}function Rp(n,e){return{documents:[Ym(n,e.path)]}}function _I(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ym(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ym(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0===f.length)return;const _=f.map(T=>function(D){if("=="===D.op){if(wv(D.value))return{unaryFilter:{field:Ph(D.field),op:"IS_NAN"}};if(vv(D.value))return{unaryFilter:{field:Ph(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(wv(D.value))return{unaryFilter:{field:Ph(D.field),op:"IS_NOT_NAN"}};if(vv(D.value))return{unaryFilter:{field:Ph(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ph(D.field),op:GS(D.op),value:D.value}}}(T));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(f){if(0!==f.length)return f.map(_=>{return{field:Ph((T=_).field),direction:$S(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(_=e.limit,n.N||ml(_)?_:{value:_});var _,d,f;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function vI(n){let e=Vv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=xh(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new yh(Nh((D=T).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(T){let D;return D="object"==typeof T?T.value:T,ml(D)?null:D}(t.limit));let f=null;var T;t.startAt&&(f=new _l((T=t.startAt).values||[],!!T.before));let _=null;return t.endAt&&(_=function(T){return new _l(T.values||[],!T.before)}(t.endAt)),Sv(e,i,l,a,d,"F",f,_)}function xh(n){return n?void 0!==n.unaryFilter?[EI(n)]:void 0!==n.fieldFilter?[qS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>xh(e)).reduce((e,t)=>e.concat(t)):ht():[]}function $S(n){return Zm[n]}function GS(n){return cI[n]}function Ph(n){return{fieldPath:n.canonicalString()}}function Nh(n){return wr.fromServerFormat(n.fieldPath)}function qS(n){return $n.create(Nh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function EI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Nh(n.unaryFilter.field);return $n.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Nh(n.unaryFilter.field);return $n.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nh(n.unaryFilter.field);return $n.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nh(n.unaryFilter.field);return $n.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function WS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function $r(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hv(e)),e=zS(n.get(t),e);return Hv(e)}function zS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Hv(n){return n+"\x01\x01"}function Oa(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ht(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ht()}a=l+2}return new dn(r)}const $v=["userId","batchId"];function Jm(n,e){return[n,$r(e)]}function Gv(n,e,t){return[n,$r(e),t]}const KS={},qv=["prefixPath","collectionGroup","readTime","documentId"],ZS=["prefixPath","collectionGroup","documentId"],II=["collectionGroup","readTime","prefixPath","documentId"],TI=["canonicalId","targetId"],YS=["targetId","path"],QS=["path","targetId"],JS=["collectionId","parent"],Wv=["indexId","uid"],XS=["uid","sequenceNumber"],CI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eA=["indexId","uid","orderedDocumentKey"],tA=["userId","collectionPath","documentId"],nA=["userId","collectionPath","largestBatchId"],rA=["userId","collectionGroup","largestBatchId"],DI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iA=[...DI,"documentOverlays"],SI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sA=[...SI,"indexConfiguration","indexState","indexEntries"],zv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _e((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _e?t:_e.resolve(t)}catch(t){return _e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.reject(t)}static resolve(e){return new _e((t,r)=>{t(e)})}static reject(e){return new _e((t,r)=>{r(e)})}static waitFor(e){return new _e((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},f=>r(f))}),l=!0,a===i&&t()})}static or(e){let t=_e.resolve(!1);for(const r of e)t=t.next(i=>i?_e.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class Xm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ii,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new xp(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Pp(r.target.error);this.At.reject(new xp(e,i))}}static open(e,t,r,i){try{return new Xm(t,e.transaction(i,r))}catch(a){throw new xp(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Zv(t)}}class uo{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===uo.Vt((0,k.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),Su(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(uo.St())return!0;const e=(0,k.z$)(),t=uo.Vt(e),r=0<t&&t<10,i=uo.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,he.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new xp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new ke(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new ke(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new xp(e,d))},a.onupgradeneeded=l=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.bt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,he.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.Nt(e);const f=Xm.open(a.db,e,l?"readonly":"readwrite",r),_=i(f).next(T=>(f.Pt(),T)).catch(T=>(f.abort(T),_e.reject(T))).toPromise();return _.catch(()=>{}),yield f.Rt,_}catch(f){const _="FirebaseError"!==f.name&&d<3;if(je("SimpleDb","Transaction failed with error:",f.message,"Retrying:",_),a.close(),!_)return Promise.reject(f)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oA{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Su(this.Ft.delete())}}class xp extends ke{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kc(n){return"IndexedDbTransactionError"===n.name}class Zv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Su(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),Su(this.store.add(e))}get(e){return Su(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),Su(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),Su(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new _e((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new _e((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,d)=>d.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new _e((r,i)=>{t.onerror=a=>{const l=Pp(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new _e((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const f=new oA(d),_=t(d.primaryKey,d.value,f);if(_ instanceof _e){const T=_.catch(D=>(f.done(),_e.reject(D)));r.push(T)}f.isDone?i():null===f.Lt?d.continue():d.continue(f.Lt)}}).next(()=>_e.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Su(n){return new _e((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Pp(r.target.error);t(i)}})}let Yv=!1;function Pp(n){const e=uo.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yv||(Yv=!0,setTimeout(()=>{throw r},0)),r}}return n}class AI extends Kv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ci(n,e){const t=rt(n);return uo.xt(t.Ht,e)}class Np{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&tI(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&qm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&qm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Cn())}isEqual(e){return this.batchId===e.batchId&&hh(this.mutations,e.mutations,(t,r)=>Mv(t,r))&&hh(this.baseMutations,e.baseMutations,(t,r)=>Mv(t,r))}}class Qv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=iI;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Qv(e,t,r,i)}}class Jv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(e,t,r,i,a=At.min(),l=At.min(),d=Rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new El(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xv{constructor(e){this.Jt=e}}function ew(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sp(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Rh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zc(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Zc(e.version)}}var i,a;return r}function tw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fa(n){const e=new Ar(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Mh(n,e){const t=(e.baseMutations||[]).map(a=>mI(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>mI(n.Jt,a)),i=Ar.fromMillis(e.localWriteTimeMs);return new Np(e.batchId,i,t,r)}function La(n){const e=Fa(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Fa(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=fs(vh(Vv(i.documents[0])))):r=fs(vI(n.query)),new El(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function kh(n,e){const t=Zc(e.snapshotVersion),r=Zc(e.lastLimboFreeSnapshotVersion);let i;i=yp(e.target)?Rp(n.Jt,e.target):_I(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nw(n){const e=vI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wp(e,e.limit,"L"):e}function RI(n,e){return new Jv(e.largestBatchId,mI(n.Jt,e.overlayMutation))}function rw(n,e){const t=e.path.lastSegment();return[n,$r(e.path.popLast()),t]}class uA{getBundleMetadata(e,t){return xI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Fa(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return xI(e).put({bundleId:(r=t).id,createTime:Zc(Er(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return PI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:nw(i.bundledQuery),readTime:Fa(i.readTime)};var i})}saveNamedQuery(e,t){return PI(e).put({name:(r=t).name,readTime:Zc(Er(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xI(n){return ci(n,"bundles")}function PI(n){return ci(n,"namedQueries")}class iw{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new iw(e,t.uid||"")}getOverlay(e,t){return Oh(e).get(rw(this.userId,t)).next(r=>r?RI(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new Jv(t,l);i.push(this.Xt(e,d))}),_e.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add($r(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Oh(e).Qt("collectionPathOverlayIndex",d))}),_e.waitFor(a)}getOverlaysForCollection(e,t,r){const i=zm(),a=$r(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Oh(e).qt("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const _=RI(this.M,f);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=zm();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Oh(e).Wt({index:"collectionGroupOverlayIndex",range:d},(f,_,T)=>{const D=RI(this.M,_);a.size()<i||D.largestBatchId===l?(a.set(D.getKey(),D),l=D.largestBatchId):T.done()}).next(()=>a)}Xt(e,t){return Oh(e).put(function(r,i,a){const[l,d,f]=rw(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Qm(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Oh(n){return ci(n,"documentOverlays")}class bl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Vc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Iu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Ev(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ht()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),We.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function sw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Mp(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=sw(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}bl.fe=new bl;class kp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Mp(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Mp(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lA{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class NI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Fh{constructor(){this.De=new kp,this.Ce=new lA(this.De),this.xe=new NI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Il{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Il(this.indexId,this.documentKey,this.arrayValue,r)}}function Yc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ey(n.arrayValue,e.arrayValue),0!==t?t:(t=ey(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function ey(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=xr(e);if(void 0!==t&&!this.Be(t))return!1;const r=yl(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class tN{constructor(){this.qe=new ow}addToCollectionParentIndex(e,t){return this.qe.add(t),_e.resolve()}getCollectionParents(e,t){return _e.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return _e.resolve()}deleteFieldIndex(e,t){return _e.resolve()}getDocumentsMatchingTarget(e,t){return _e.resolve(null)}getFieldIndex(e,t){return _e.resolve(null)}getFieldIndexes(e,t){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}updateCollectionGroup(e,t,r){return _e.resolve()}updateIndexEntries(e,t){return _e.resolve()}}class ow{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Qn(dn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qn(dn.comparator)).toArray()}}const Lh=new Uint8Array(0);class Uh{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new ow,this.Ge=new Cu(r=>Gc(r),(r,i)=>mp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:$r(i)};return aw(e).put(a)}return _e.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hv(t),""],!1,!0);return aw(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Oa(l.parent))}return r})}addFieldIndex(e,t){const r=uw(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=uw(e),i=Op(e),a=Ua(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ua(e);let i=!0;const a=new Map;return _e.forEach(this.Qe(t),l=>this.getFieldIndex(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=Cn();const d=[];return _e.forEach(a,(f,_)=>{var T;je("IndexedDbIndexManager",`Using index ${T=f,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${Gc(t)}`);const D=function(et,ze){const Nt=xr(ze);if(void 0===Nt)return null;for(const kt of Tv(et,Nt.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(_,f),P=function(et,ze){const Nt=new Map;for(const kt of yl(ze))for(const fn of Tv(et,kt.fieldPath))switch(fn.op){case"==":case"in":Nt.set(kt.fieldPath.canonicalString(),fn.value);break;case"not-in":case"!=":return Nt.set(kt.fieldPath.canonicalString(),fn.value),Array.from(Nt.values())}return null}(_,f),O=function(et,ze){const Nt=[];let kt=!0;for(const fn of yl(ze)){const Nr=0===fn.kind?Cv(et,fn.fieldPath,et.startAt):Dv(et,fn.fieldPath,et.startAt);if(!Nr.value)return null;Nt.push(Nr.value),kt&&(kt=Nr.inclusive)}return new _l(Nt,kt)}(_,f),V=function(et,ze){const Nt=[];let kt=!0;for(const fn of yl(ze)){const Nr=0===fn.kind?Dv(et,fn.fieldPath,et.endAt):Cv(et,fn.fieldPath,et.endAt);if(!Nr.value)return null;Nt.push(Nr.value),kt&&(kt=Nr.inclusive)}return new _l(Nt,kt)}(_,f),Q=this.je(f,_,O),ve=this.je(f,_,V),He=this.We(f,_,P),Qe=this.ze(f.indexId,D,Q,!!O&&O.inclusive,ve,!!V&&V.inclusive,He);return _e.forEach(Qe,et=>r.Gt(et,t.limit).next(ze=>{ze.forEach(Nt=>{const kt=We.fromSegments(Nt.documentKey);l.has(kt)||(l=l.add(kt),d.push(kt))})}))}).next(()=>d)}return _e.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,a,l,d){const f=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),_=f/(null!=t?t.length:1),T=[];for(let D=0;D<f;++D){const P=t?this.He(t[D/_]):Lh,O=r?this.Je(e,P,r[D%_],i):this.Ye(e),V=a?this.Xe(e,P,a[D%_],l):this.Ye(e+1);T.push(...this.createRange(O,V,d.map(Q=>this.Je(e,P,Q,!0))))}return T}Je(e,t,r,i){const a=new Il(e,We.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Il(e,We.empty(),t,r);return i?a.ke():a}Ye(e){return new Il(e,We.empty(),Lh,Lh)}getFieldIndex(e,t){const r=new cA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const l=a.filter(d=>r.$e(d));return l.sort((d,f)=>f.fields.length-d.fields.length),l.length>0?l[0]:null})}Ze(e,t){const r=new Fh;for(const i of yl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);bl.fe.Zt(a,l)}return r.Se()}He(e){const t=new Fh;return bl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Fh;return bl.fe.Zt(Hc(this.databaseId,t),r.Ne(function(i){const a=yl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Fh);let a=0;for(const l of yl(e)){const d=r[a++];for(const f of i)if(this.en(t,l.fieldPath)&&$c(d))i=this.nn(i,l,d);else{const _=f.Ne(l.kind);bl.fe.Zt(d,_)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const f=new Fh;f.seed(d.Se()),bl.fe.Zt(l,f.Ne(t.kind)),a.push(f)}return a}en(e,t){return!!e.filters.find(r=>r instanceof $n&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=uw(e),i=Op(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return _e.forEach(a,d=>i.get([d.indexId,this.uid]).next(f=>{l.push(function(_,T){const D=T?new gp(T.sequenceNumber,new Ma(Fa(T.readTime),new We(Oa(T.documentKey)),T.largestBatchId)):gp.empty(),P=_.fields.map(([O,V])=>new Bm(wr.fromServerFormat(O),V));return new Um(_.indexId,_.collectionGroup,P,D)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=uw(e),a=Op(e);return this.rn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>_e.forEach(d,f=>{return a.put({indexId:f.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:Zc((P=r).readTime),documentKey:$r(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return _e.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?_e.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),_e.forEach(d,f=>this.on(e,i,f).next(_=>{const T=this.un(a,f);return _.isEqual(T)?_e.resolve():this.an(e,a,f,_,T)}))))})}cn(e,t,r,i){return Ua(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Ua(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Ua(e);let a=new Qn(Yc);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(l,d)=>{a=a.add(new Il(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}un(e,t){let r=new Qn(Yc);const i=this.Ze(t,e);if(null==i)return r;const a=xr(t);if(null!=a){const l=e.data.field(a.fieldPath);if($c(l))for(const d of l.arrayValue.values||[])r=r.add(new Il(t.indexId,e.key,this.He(d),i))}else r=r.add(new Il(t.indexId,e.key,Lh,i));return r}an(e,t,r,i,a){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,f,_,T,D){const P=d.getIterator(),O=f.getIterator();let V=Du(P),Q=Du(O);for(;V||Q;){let ve=!1,He=!1;if(V&&Q){const Qe=_(V,Q);Qe<0?He=!0:Qe>0&&(ve=!0)}else null!=V?He=!0:ve=!0;ve?(T(Q),Q=Du(O)):He?(D(V),V=Du(P)):(V=Du(P),Q=Du(O))}}(i,a,Yc,d=>{l.push(this.cn(e,t,r,d))},d=>{l.push(this.hn(e,t,r,d))}),_e.waitFor(l)}rn(e){let t=1;return Op(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>Yc(l,d)).filter((l,d,f)=>!d||0!==Yc(l,f[d-1]));const i=[];i.push(e);for(const l of r){const d=Yc(l,e),f=Yc(l,t);if(0===d)i[0]=e.ke();else if(d>0&&f<0)i.push(l),i.push(l.ke());else if(f>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Lh,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Lh,[]]));return a}}function aw(n){return ci(n,"collectionParents")}function Ua(n){return ci(n,"indexEntries")}function uw(n){return ci(n,"indexConfiguration")}function Op(n){return ci(n,"indexState")}const MI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ps(e,Ps.DEFAULT_COLLECTION_PERCENTILE,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lw(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=r.Wt({range:l},(T,D,P)=>(d++,P.delete()));a.push(f.next(()=>{Ft(1===d)}));const _=[];for(const T of t.mutations){const D=Gv(e,T.key.path,t.batchId);a.push(i.delete(D)),_.push(T.key)}return _e.waitFor(a).next(()=>_)}function cw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Ps.DEFAULT_COLLECTION_PERCENTILE=10,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ps.DEFAULT=new Ps(41943040,Ps.DEFAULT_COLLECTION_PERCENTILE,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ps.DISABLED=new Ps(-1,0,0);class ty{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ty(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tl(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Qc(e),l=Tl(e);return l.add({}).next(d=>{Ft("number"==typeof d);const f=new Np(d,t,r,i),_=function(P,O,V){const Q=V.baseMutations.map(He=>Qm(P.Jt,He)),ve=V.mutations.map(He=>Qm(P.Jt,He));return{userId:O,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:Q,mutations:ve}}(this.M,this.userId,f),T=[];let D=new Qn((P,O)=>Kt(P.canonicalString(),O.canonicalString()));for(const P of i){const O=Gv(this.userId,P.key.path,d);D=D.add(P.key.path.popLast()),T.push(l.put(_)),T.push(a.put(O,KS))}return D.forEach(P=>{T.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[d]=f.keys()}),_e.waitFor(T).next(()=>f)})}lookupMutationBatch(e,t){return Tl(e).get(t).next(r=>r?(Ft(r.userId===this.userId),Mh(this.M,r)):null)}fn(e,t){return this.ln[t]?_e.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Tl(e).Wt({index:"userMutationsIndex",range:i},(l,d,f)=>{d.userId===this.userId&&(Ft(d.batchId>=r),a=Mh(this.M,d)),f.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Tl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tl(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Mh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Qc(e).Wt({range:i},(l,d,f)=>{const[_,T,D]=l,P=Oa(T);if(_===this.userId&&t.path.isEqual(P))return Tl(e).get(D).next(O=>{if(!O)throw ht();Ft(O.userId===this.userId),a.push(Mh(this.M,O))});f.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Kt);const i=[];return t.forEach(a=>{const l=Jm(this.userId,a.path),d=IDBKeyRange.lowerBound(l),f=Qc(e).Wt({range:d},(_,T,D)=>{const[P,O,V]=_,Q=Oa(O);P===this.userId&&a.path.isEqual(Q)?r=r.add(V):D.done()});i.push(f)}),_e.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Jm(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Qn(Kt);return Qc(e).Wt({range:l},(f,_,T)=>{const[D,P,O]=f,V=Oa(P);D===this.userId&&r.isPrefixOf(V)?V.length===i&&(d=d.add(O)):T.done()}).next(()=>this.dn(e,d))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Tl(e).get(a).next(l=>{if(null===l)throw ht();Ft(l.userId===this.userId),r.push(Mh(this.M,l))}))}),_e.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lw(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),_e.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _e.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qc(e).Wt({range:r},(a,l,d)=>{if(a[0]===this.userId){const f=Oa(a[1]);i.push(f)}else d.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return ny(e,this.userId,t)}wn(e){return dw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ny(n,e,t){const r=Jm(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Qc(n).Wt({range:a,jt:!0},(d,f,_)=>{const[T,D,P]=d;T===e&&D===i&&(l=!0),_.done()}).next(()=>l)}function Tl(n){return ci(n,"mutations")}function Qc(n){return ci(n,"documentMutations")}function dw(n){return ci(n,"mutationQueues")}class Jc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Jc(0)}static yn(){return new Jc(-1)}}class dA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Jc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>At.fromTimestamp(new Ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bh(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Bh(e).Wt((l,d)=>{const f=La(d);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,a.push(this.removeTargetData(e,f)))}).next(()=>_e.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Bh(e).Wt((r,i)=>{const a=La(i);t(a)})}pn(e){return kI(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}In(e,t){return kI(e).put("targetGlobalKey",t)}Tn(e,t){return Bh(e).put(kh(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Bh(e).Wt({range:i,index:"queryTargetsIndex"},(l,d,f)=>{const _=La(d);mp(t,_.target)&&(a=_,f.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Cl(e);return t.forEach(l=>{const d=$r(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),_e.waitFor(i)}removeMatchingKeys(e,t,r){const i=Cl(e);return _e.forEach(t,a=>{const l=$r(a.path);return _e.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Cl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Cl(e);let a=Cn();return i.Wt({range:r,jt:!0},(l,d,f)=>{const _=Oa(l[1]),T=new We(_);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=$r(t.path),i=IDBKeyRange.bound([r],[hv(r)],!1,!0);let a=0;return Cl(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,d],f,_)=>{0!==l&&(a++,_.done())}).next(()=>a>0)}Et(e,t){return Bh(e).get(t).next(r=>r?La(r):null)}}function Bh(n){return ci(n,"targets")}function kI(n){return ci(n,"targetGlobal")}function Cl(n){return ci(n,"targetDocuments")}function Xc(n){return hw.apply(this,arguments)}function hw(){return hw=(0,he.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==zv)throw n;je("LocalStore","Unexpectedly lost primary lease")}),hw.apply(this,arguments)}function Vh([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class OI{constructor(e){this.An=e,this.buffer=new Qn(Vh),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Vh(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,he.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Kc(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Xc(i)}yield t.Sn(e)}))}}class LI{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return _e.resolve(xs.A);const r=new OI(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(MI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MI):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,l,d,f,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(_=Date.now(),dv()<=Uo.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(f-d)+`ms\n\tRemoved ${D} documents in `+(_-f)+`ms\nTotal Duration: ${_-T}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class UI{constructor(e,t){this.db=e,this.garbageCollector=new LI(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Fp(e,r)}removeReference(e,t,r){return Fp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Fp(e,t)}On(e,t){return function(r,i){let a=!1;return dw(r).zt(l=>ny(r,l,i).next(d=>(d&&(a=!0),_e.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(l,d)=>{if(d<=t){const f=this.On(e,l).next(_=>{if(!_)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),Cl(e).delete([0,$r(l.path)])))});i.push(f)}}).next(()=>_e.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Fp(e,t)}Mn(e,t){const r=Cl(e);let i,a=xs.A;return r.Wt({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:_})=>{0===l?(a!==xs.A&&t(new We(Oa(i)),a),a=_,i=f):a=xs.A}).next(()=>{a!==xs.A&&t(new We(Oa(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fp(n,e){return Cl(n).put((r=n.currentSequenceNumber,{targetId:0,path:$r(e.path),sequenceNumber:r}));var r}class BI{constructor(){this.changes=new Cu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?_e.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hA{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ed(e).put(r)}removeEntry(e,t,r){return ed(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],tw(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return ed(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lp(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return ed(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lp(t))},(i,a)=>{r={document:this.$n(t,a),size:cw(a)}}).next(()=>r)}getEntries(e,t){let r=Yi();return this.Ln(e,t,(i,a)=>{const l=this.$n(i,a);r=r.insert(i,l)}).next(()=>r)}Un(e,t){let r=Yi(),i=new Hr(We.comparator);return this.Ln(e,t,(a,l)=>{const d=this.$n(a,l);r=r.insert(a,d),i=i.insert(a,cw(l))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return _e.resolve();let i=new Qn(jh);t.forEach(f=>i=i.add(f));const a=IDBKeyRange.bound(Lp(i.first()),Lp(i.last())),l=i.getIterator();let d=l.getNext();return ed(e).Wt({index:"documentKeyIndex",range:a},(f,_,T)=>{const D=We.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&jh(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,_),d=l.hasNext()?l.getNext():null),d?T.Ut(Lp(d)):T.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),tw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ed(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=Yi();for(const f of l){const _=this.$n(We.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=Yi();const l=jI(t,r),d=jI(t,Ma.max());return ed(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,_,T)=>{const D=this.$n(We.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);a=a.insert(D.key,D),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new fA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return VI(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Fn(e,t){return VI(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function aA(n,e){let t;if(e.document)t=gI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=Fa(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=We.fromSegments(e.unknownDocument.path),i=Fa(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ar(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return Hn.newInvalidDocument(e)}}class fA extends BI{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Cu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Qn((a,l)=>Kt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const f=ew(this.Kn.M,l);i=i.add(a.path.popLast()),r+=cw(f)-d.size,t.push(this.Kn.addEntry(e,a,f))}else if(r-=d.size,this.trackRemovals){const f=ew(this.Kn.M,l.convertToNoDocument(At.min()));t.push(this.Kn.addEntry(e,a,f))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),_e.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function VI(n){return ci(n,"remoteDocumentGlobal")}function ed(n){return ci(n,"remoteDocumentsV14")}function Lp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jI(n,e){const t=e.documentKey.path.toArray();return[n,tw(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jh(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Kt(t[a],r[a]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class pA{constructor(e){this.M=e}kt(e,t,r,i){const a=new Xm("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$v,{unique:!0}),d.createObjectStore("documentMutations"),ry(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=_e.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),ry(e)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",_)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,f){return f.store("mutations").qt().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$v,{unique:!0});const T=f.store("mutations"),D=_.map(P=>T.put(P));return _e.waitFor(D)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Qn(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(l=l.next(()=>this.Wn(a))),r<8&&i>=8&&(l=l.next(()=>this.zn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Hn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:tA});f.createIndex("collectionPathOverlayIndex",nA,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",rA,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:qv});f.createIndex("documentKeyIndex",ZS),f.createIndex("collectionGroupIndex",II)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Wv}).createIndex("sequenceNumberIndex",XS,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:CI}).createIndex("documentKeyIndex",eA,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=cw(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>_e.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(d=>_e.forEach(d,f=>{Ft(f.userId===a.userId);const _=Mh(this.M,f);return lw(e,a.userId,_).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,d)=>{const f=new dn(l),_=[0,$r(f)];a.push(t.get(_).next(T=>T?_e.resolve():t.put({targetId:0,path:$r(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>_e.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:JS});const r=t.store("collectionParents"),i=new ow,a=l=>{if(i.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:$r(f)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,d)=>{const f=new dn(l);return a(f.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,d,f],_)=>{const T=Oa(d);return a(T.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=La(i),l=kh(this.M,a);return t.put(l)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const d=t.store("remoteDocumentsV14"),f=(_=l,_.document?new We(dn.fromString(_.document.name).popFirst(5)):_.noDocument?We.fromSegments(_.noDocument.path):_.unknownDocument?We.fromSegments(_.unknownDocument.path):ht()).path.toArray();var _;const T={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(T))}).next(()=>_e.waitFor(i))}}function ry(n){n.createObjectStore("targetDocuments",{keyPath:YS}).createIndex("documentTargetsIndex",QS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TI,{unique:!0}),n.createObjectStore("targetGlobal")}const lo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fw{constructor(e,t,r,i,a,l,d,f,_,T,D=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=l,this.document=d,this.Xn=_,this.Zn=T,this.ts=D,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!fw.vt())throw new ke(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UI(this,i),this.hs=t+"main",this.M=new Xv(f),this.ls=new uo(this.hs,this.ts,new pA(this.M)),this.fs=new dA(this.referenceDelegate,this.M),this.ds=new hA(this.M),this._s=new uA,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,lo);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new xs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,he.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Kc(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return td(e).get("owner").next(t=>_e.resolve(this.bs(t)))}Vs(e){return Dl(e).delete(this.clientId)}vs(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ci(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ds(a,18e5),d=a.filter(f=>-1===l.indexOf(f));return _e.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?_e.resolve(!0):td(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,lo);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dl(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new AI(t,xs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Dl(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return ty.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Uh(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return iw.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.ts)?sA:13===l?SI:12===l?iA:11===l?DI:void ht();var l;let d;return this.ls.runTransaction(e,i,a,f=>(d=new AI(f,this.es?this.es.next():xs.A),"readwrite-primary"===t?this.Es(d).next(_=>!!_||this.As(d)).next(_=>{if(!_)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ke(fe.FAILED_PRECONDITION,zv);return r(d)}).next(_=>this.Ps(d).next(()=>_)):this.$s(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}$s(e){return td(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(fe.FAILED_PRECONDITION,lo)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return td(e).put("owner",t)}static vt(){return uo.vt()}Rs(e){const t=td(e);return t.get("owner").next(r=>this.bs(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_e.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function td(n){return ci(n,"owner")}function Dl(n){return ci(n,"clientMetadata")}function pw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gA{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):jm(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new We(t)).next(r=>{let i=sr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=sr();return this.indexManager.getCollectionParents(e,i).next(l=>_e.forEach(l,d=>{const f=(_=t,T=d.child(i),new Tu(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,T;return this.zs(e,f,r).next(_=>{_.forEach((T,D)=>{a=a.insert(T,D)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const d of l.mutations){const f=d.key;let _=i.get(f);null==_&&(_=Hn.newInvalidDocument(f),i=i.insert(f,_)),qm(d,_,l.localWriteTime),_.isFoundDocument()||(i=i.remove(f))}}).next(()=>(i.forEach((a,l)=>{$m(t,l)||(i=i.remove(a))}),i))}}class gw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Cn(),i=Cn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new gw(e,t.fromCache,r,i)}}class Up{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.ti(e,t):this.Zs.Ks(e,i).next(a=>{const l=this.ei(t,a);return(_p(t)||vp(t))&&this.ni(t.limitType,l,i,r)?this.ti(e,t):(dv()<=Uo.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hm(t)),this.Zs.Qs(e,t,Iv(r,-1)).next(d=>(l.forEach(f=>{d=d.insert(f.key,f)}),d)))});var a}ei(e,t){let r=new Qn(Pv(e));return t.forEach((i,a)=>{$m(e,a)&&(r=r.add(a))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ti(e,t){return dv()<=Uo.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Hm(t)),this.Zs.Qs(e,t,Ma.min())}}class iy{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new Hr(Kt),this.ri=new Cu(a=>Gc(a),mp),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new gA(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function HI(n,e,t,r){return new iy(n,e,t,r)}function $I(n,e){return sy.apply(this,arguments)}function sy(){return sy=(0,he.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.ai(e),t.Bs.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let f=Cn();for(const _ of i){l.push(_.batchId);for(const T of _.mutations)f=f.add(T.key)}for(const _ of a){d.push(_.batchId);for(const T of _.mutations)f=f.add(T.key)}return t.ci.Ks(r,f).next(_=>({hi:_,removedBatchIds:l,addedBatchIds:d}))})})}),sy.apply(this,arguments)}function GI(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ui.newChangeBuffer({trackRemovals:!0});return function(l,d,f,_){const T=f.batch,D=T.keys();let P=_e.resolve();return D.forEach(O=>{P=P.next(()=>_.getEntry(d,O)).next(V=>{const Q=f.docVersions.get(O);Ft(null!==Q),V.version.compareTo(Q)<0&&(T.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),_.addEntry(V)))})}),P.next(()=>l.Bs.removeMutationBatch(d,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function oy(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function qI(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const d=[];e.targetChanges.forEach((_,T)=>{const D=i.get(T);if(!D)return;d.push(t.fs.removeMatchingKeys(a,_.removedDocuments,T).next(()=>t.fs.addMatchingKeys(a,_.addedDocuments,T)));let P=D.withSequenceNumber(a.currentSequenceNumber);var O,V,Q;e.targetMismatches.has(T)?P=P.withResumeToken(Rr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,r)),i=i.insert(T,P),V=P,Q=_,(0===(O=D).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&d.push(t.fs.updateTargetData(a,P))});let f=Yi();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),d.push(WI(a,l,e.documentUpdates).next(_=>{f=_})),!r.isEqual(At.min())){const _=t.fs.getLastRemoteSnapshotVersion(a).next(T=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(_)}return _e.waitFor(d).next(()=>l.apply(a)).next(()=>t.ci.Gs(a,f)).next(()=>f)}).then(a=>(t.ii=i,a))}function WI(n,e,t){let r=Cn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Yi();return t.forEach((l,d)=>{const f=i.get(l);d.isNoDocument()&&d.version.isEqual(At.min())?(e.removeEntry(l,d.readTime),a=a.insert(l,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||0===d.version.compareTo(f.version)&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(l,d)):je("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",d.version)}),a})}function mA(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Bp(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,_e.resolve(i)):t.fs.allocateTargetId(r).next(l=>(i=new El(e,l,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Sl(n,e,t){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,he.Z)(function*(n,e,t){const r=rt(n),i=r.ii.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Kc(l))throw l;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),Vp.apply(this,arguments)}function jp(n,e,t){const r=rt(n);let i=At.min(),a=Cn();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,f,_){const T=rt(d),D=T.ri.get(_);return void 0!==D?_e.resolve(T.ii.get(D)):T.fs.getTargetData(f,_)}(r,l,fs(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(l,d.targetId).next(f=>{a=f})}).next(()=>r.si.Qs(l,e,t?i:At.min(),t?a:Cn())).next(d=>(zI(r,xv(e),d),{documents:d,li:a})))}function ay(n,e){const t=rt(n),r=rt(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function uy(n,e){const t=rt(n),r=t.oi.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,Iv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zI(t,e,i),i))}function zI(n,e,t){let r=At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.oi.set(e,r)}function mw(){return mw=(0,he.Z)(function*(n,e,t,r){const i=rt(n);let a=Cn(),l=Yi();for(const _ of t){const T=e.fi(_.metadata.name);_.document&&(a=a.add(T));const D=e.di(_);D.setReadTime(e._i(_.metadata.readTime)),l=l.insert(T,D)}const d=i.ui.newChangeBuffer({trackRemovals:!0}),f=yield Bp(i,(_=r,fs(vh(dn.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>WI(_,d,l).next(T=>(d.apply(_),T)).next(T=>i.fs.removeMatchingKeysForTargetId(_,f.targetId).next(()=>i.fs.addMatchingKeys(_,a,f.targetId)).next(()=>i.ci.Gs(_,T)).next(()=>T)))}),mw.apply(this,arguments)}function _A(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,he.Z)(function*(n,e,t=Cn()){const r=yield Bp(n,fs(nw(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Er(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i._s.saveNamedQuery(a,e);const d=r.withResumeToken(Rr.EMPTY_BYTE_STRING,l);return i.ii=i.ii.insert(d.targetId,d),i.fs.updateTargetData(a,d).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),ly.apply(this,arguments)}class yw{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return _e.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Er(r.createTime)}),_e.resolve()}getNamedQuery(e,t){return _e.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:nw(r.bundledQuery),readTime:Er(r.readTime)}),_e.resolve();var r}}class KI{constructor(){this.overlays=new Hr(We.comparator),this.gi=new Map}getOverlay(e,t){return _e.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),_e.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(r)),_e.resolve()}getOverlaysForCollection(e,t,r){const i=zm(),a=t.length+1,l=new We(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Hr((_,T)=>_-T);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let T=a.get(_.largestBatchId);null===T&&(T=zm(),a=a.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const d=zm(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,T)=>d.set(_,T)),!(d.size()>=i)););return _e.resolve(d)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Jv(t,r));let a=this.gi.get(t);void 0===a&&(a=Cn(),this.gi.set(t,a)),this.gi.set(t,a.add(r.key))}}class _w{constructor(){this.yi=new Qn(ei.pi),this.Ii=new Qn(ei.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new ei(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new ei(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new We(new dn([])),r=new ei(t,e),i=new ei(t,e+1),a=[];return this.Ii.forEachInRange([r,i],l=>{this.Ai(l),a.push(l.key)}),a}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new We(new dn([])),r=new ei(t,e),i=new ei(t,e+1);let a=Cn();return this.Ii.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ei(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ei{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return We.comparator(e.key,t.key)||Kt(e.vi,t.vi)}static Ti(e,t){return Kt(e.vi,t.vi)||We.comparator(e.key,t.key)}}class ZI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Qn(ei.pi)}checkEmpty(e){return _e.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.Si;this.Si++;const l=new Np(a,t,r,i);this.Bs.push(l);for(const d of i)this.Di=this.Di.add(new ei(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return _e.resolve(l)}lookupMutationBatch(e,t){return _e.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),a=i<0?0:i;return _e.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return _e.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ei(t,0),i=new ei(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],l=>{const d=this.Ci(l.vi);a.push(d)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Kt);return t.forEach(i=>{const a=new ei(i,0),l=new ei(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,l],d=>{r=r.add(d.vi)})}),_e.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const l=new ei(new We(a),0);let d=new Qn(Kt);return this.Di.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(f.vi)),!0)},l),_e.resolve(this.Ni(d))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return _e.forEach(t.mutations,i=>{const a=new ei(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new ei(t,0),i=this.Di.firstAfterOrEqual(r);return _e.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return _e.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class vA{constructor(e){this.Mi=e,this.docs=new Hr(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return _e.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Yi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hn.newInvalidDocument(i))}),_e.resolve(r)}getAllFromCollection(e,t,r){let i=Yi();const a=new We(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:f}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||Hb(xS(f),r)<=0||(i=i.insert(f.key,f.mutableCopy()))}return _e.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}Oi(e,t){return _e.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YI(this)}getSize(e){return _e.resolve(this.size)}}class YI extends BI{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),_e.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class QI{constructor(e){this.persistence=e,this.Fi=new Cu(t=>Gc(t),mp),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.$i=0,this.Bi=new _w,this.targetCount=0,this.Li=Jc.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),_e.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Jc(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,_e.resolve()}updateTargetData(e,t){return this.Tn(t),_e.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Fi.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Fi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),_e.waitFor(a).next(()=>i)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return _e.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),_e.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),_e.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return _e.resolve(r)}containsKey(e,t){return _e.resolve(this.Bi.containsKey(t))}}class wA{constructor(e,t){this.Ui={},this.overlays={},this.es=new xs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new QI(this),this.indexManager=new tN,this.ds=new vA(r=>this.referenceDelegate.qi(r)),this.M=new Xv(t),this._s=new yw(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new ZI(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new JI(this.es.next());return this.referenceDelegate.Ki(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Qi(e,t){return _e.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class JI extends Kv{constructor(e){super(),this.currentSequenceNumber=e}}class vw{constructor(e){this.persistence=e,this.ji=new _w,this.Wi=null}static zi(e){return new vw(e)}get Hi(){if(this.Wi)return this.Wi;throw ht()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),_e.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),_e.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Hi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.Hi,r=>{const i=We.fromPath(r);return this.Ji(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return _e.or([()=>_e.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function ki(n,e){return`firestore_clients_${n}_${e}`}function nd(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ww(n,e){return`firestore_targets_${n}_${e}`}class cy{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new ke(i.error.code,i.error.message))),l?new cy(e,t,i.state,a):(Vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dy{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new dy(e,r.state,i):(Vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Al{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Cp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=gv(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Al(e,a):(Vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ew{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ew(t.clientId,t.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Hp{constructor(){this.activeTargetIds=Cp()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bw{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Hr(Kt),this.started=!1,this.rr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=ki(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Hp),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const a=e.getItem(ki(e.persistenceKey,i));if(a){const l=Al.Yi(i,a);l&&(e.ir=e.ir.insert(l.clientId,l))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ww(this.persistenceKey,e));if(r){const i=dy.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ww(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(a){let l=xs.A;if(null!=a)try{const d=JSON.parse(a);Ft("number"==typeof d),l=d}catch(d){Vr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==xs.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.kr(a)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new cy(this.currentUser,e,t,r),a=nd(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Ir(e){const t=nd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=ww(this.persistenceKey,e),a=new dy(e,t,r);this.setItem(i,a.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Al.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return cy.Yi(new li(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return dy.Yi(i,t)}mr(e){return Ew.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),l=[],d=[];return a.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{a.has(f)||d.push(f)}),this.syncEngine.Fr(l,d).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Cp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Iw{constructor(){this.$r=new Hp,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Hp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EA{Lr(e){}shutdown(){}}class XI{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Tw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class eT{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class tT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,a){const l=this.uo(e,t);je("RestConnection","Sending: ",l,r);const d={};return this.ao(d,i,a),this.co(e,l,d,r).then(f=>(je("RestConnection","Received: ",f),f),f=>{throw Lc("RestConnection",`${e} failed with error: `,f,"url: ",l,"request:",r),f})}ho(e,t,r,i,a){return this.oo(e,t,r,i,a)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ch,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}uo(e,t){return`${this.io}/v1/${t}:${Tw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,l)=>{const d=new wS;d.listenOnce(vS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Om.NO_ERROR:const _=d.getResponseJson();je("Connection","XHR received:",JSON.stringify(_)),a(_);break;case Om.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),l(new ke(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Om.HTTP_ERROR:const T=d.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',T,"response text:",d.getResponseText()),T>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const P=function(O){const V=O.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(V)>=0?V:fe.UNKNOWN}(D.status);l(new ke(P,D.message))}else l(new ke(fe.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new ke(fe.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(i);d.send(t,"POST",f,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Sb(),l=Ab(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new Pb({})),this.ao(d.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");je("Connection","Creating WebChannel: "+f,d);const _=a.createWebChannel(f,d);let T=!1,D=!1;const P=new eT({Wr:V=>{D?je("Connection","Not sending because WebChannel is closed:",V):(T||(je("Connection","Opening WebChannel transport."),_.open(),T=!0),je("Connection","WebChannel sending:",V),_.send(V))},zr:()=>_.close()}),O=(V,Q,ve)=>{V.listen(Q,He=>{try{ve(He)}catch(Qe){setTimeout(()=>{throw Qe},0)}})};return O(_,cp.EventType.OPEN,()=>{D||je("Connection","WebChannel transport opened.")}),O(_,cp.EventType.CLOSE,()=>{D||(D=!0,je("Connection","WebChannel transport closed"),P.no())}),O(_,cp.EventType.ERROR,V=>{D||(D=!0,Lc("Connection","WebChannel transport errored:",V),P.no(new ke(fe.UNAVAILABLE,"The operation could not be completed")))}),O(_,cp.EventType.MESSAGE,V=>{var Q;if(!D){const ve=V.data[0];Ft(!!ve);const He=ve,Qe=He.error||(null===(Q=He[0])||void 0===Q?void 0:Q.error);if(Qe){je("Connection","WebChannel received error:",Qe);const et=Qe.status;let ze=function(kt){const fn=Xr[kt];if(void 0!==fn)return Uv(fn)}(et),Nt=Qe.message;void 0===ze&&(ze=fe.INTERNAL,Nt="Unknown error status: "+et+" with message "+Qe.message),D=!0,P.no(new ke(ze,Nt)),_.close()}else je("Connection","WebChannel received:",ve),P.so(ve)}}),O(l,Rb.STAT_EVENT,V=>{V.stat===xb.PROXY?je("Connection","Detected buffering proxy"):V.stat===xb.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.eo()},0),P}}function $p(){return"undefined"!=typeof window?window:null}function Hh(){return"undefined"!=typeof document?document:null}function hy(n){return new dI(n,!0)}class fy{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class nT{constructor(e,t,r,i,a,l,d,f){this.Yn=e,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new fy(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,he.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,he.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new ke(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,he.Z)(function*(){e.state=0,e.start()}))}Ko(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rT extends nT{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function eN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:ht(),i=e.targetChange.targetIds||[],a=function(f,_){return f.N?(Ft(void 0===_||"string"==typeof _),Rr.fromBase64String(_||"")):(Ft(void 0===_||_ instanceof Uint8Array),Rr.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const _=void 0===f.code?fe.UNKNOWN:Uv(f.code);return new ke(_,f.message||"")}(l);t=new aI(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Wo(n,r.document.name),a=Er(r.document.updateTime),l=new Mi({mapValue:{fields:r.document.fields}}),d=Hn.newFoundDocument(i,a,l);t=new Km(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Wo(n,r.document),a=r.readTime?Er(r.readTime):At.min(),l=Hn.newNoDocument(i,a);t=new Km([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Wo(n,r.document);t=new Km([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,a=new Ch(r.count||0);t=new oI(r.targetId,a)}}var f;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Er(a.readTime):At.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Ap(this.M),t.addTarget=function(i,a){let l;const d=a.target;return l=yp(d)?{documents:Rp(i,d)}:{query:_I(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=hI(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(l.readTime=Rh(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function wI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Ap(this.M),t.removeTarget=e,this.Fo(t)}}class py extends nT{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function yI(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let a=Er(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Er(i)),new US(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.Yo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Ap(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qm(this.M,r))};this.Fo(t)}}class iT extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.oo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(fe.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ho(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(fe.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class bA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Vr(t),this.iu=!1):je("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Cw{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(d=>{r.enqueueAndForget((0,he.Z)(function*(){var f;Rl(l)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,he.Z)(function*(_){const T=rt(_);T.fu.add(4),yield $h(T),T.wu.set("Unknown"),T.fu.delete(4),yield rd(T)}),function(_){return f.apply(this,arguments)})(l))}))}),this.wu=new bA(r,i)}}function rd(n){return sT.apply(this,arguments)}function sT(){return sT=(0,he.Z)(function*(n){if(Rl(n))for(const e of n.du)yield e(!0)}),sT.apply(this,arguments)}function $h(n){return Dw.apply(this,arguments)}function Dw(){return Dw=(0,he.Z)(function*(n){for(const e of n.du)yield e(!1)}),Dw.apply(this,arguments)}function Gp(n,e){const t=rt(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Rw(t)?gy(t):id(t).xo()&&Sw(t,e))}function Gh(n,e){const t=rt(n),r=id(t);t.lu.delete(e),r.xo()&&Aw(t,e),0===t.lu.size&&(r.xo()?r.Mo():Rl(t)&&t.wu.set("Unknown"))}function Sw(n,e){n.mu.Z(e.targetId),id(n).jo(e)}function Aw(n,e){n.mu.Z(e),id(n).Wo(e)}function gy(n){n.mu=new HS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),id(n).start(),n.wu.ru()}function Rw(n){return Rl(n)&&!id(n).Co()&&n.lu.size>0}function Rl(n){return 0===rt(n).fu.size}function xw(n){n.mu=void 0}function IA(n){return my.apply(this,arguments)}function my(){return my=(0,he.Z)(function*(n){n.lu.forEach((e,t)=>{Sw(n,e)})}),my.apply(this,arguments)}function oT(n,e){return yy.apply(this,arguments)}function yy(){return yy=(0,he.Z)(function*(n,e){xw(n),Rw(n)?(n.wu.au(e),gy(n)):n.wu.set("Unknown")}),yy.apply(this,arguments)}function aT(n,e,t){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,he.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof aI&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.lu.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.lu.delete(d),i.mu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _y(n,r)}else if(e instanceof Km?n.mu.ut(e):e instanceof oI?n.mu._t(e):n.mu.ht(e),!t.isEqual(At.min()))try{const r=yield oy(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.mu.yt(a);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=i.lu.get(f);_&&i.lu.set(f,_.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const f=i.lu.get(d);if(!f)return;i.lu.set(d,f.withResumeToken(Rr.EMPTY_BYTE_STRING,f.snapshotVersion)),Aw(i,d);const _=new El(f.target,d,1,f.sequenceNumber);Sw(i,_)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield _y(n,r)}var r}),Pw.apply(this,arguments)}function _y(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=(0,he.Z)(function*(n,e,t){if(!Kc(e))throw e;n.fu.add(1),yield $h(n),n.wu.set("Offline"),t||(t=()=>oy(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield rd(n)}))}),uT.apply(this,arguments)}function Nw(n,e){return e().catch(t=>_y(n,t,e))}function qp(n){return lT.apply(this,arguments)}function lT(){return lT=(0,he.Z)(function*(n){const e=rt(n),t=sd(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;nN(e);)try{const i=yield mA(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,rN(e,i)}catch(i){yield _y(e,i)}TA(e)&&CA(e)}),lT.apply(this,arguments)}function nN(n){return Rl(n)&&n.hu.length<10}function rN(n,e){n.hu.push(e);const t=sd(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function TA(n){return Rl(n)&&!sd(n).Co()&&n.hu.length>0}function CA(n){sd(n).start()}function iN(n){return cT.apply(this,arguments)}function cT(){return cT=(0,he.Z)(function*(n){sd(n).Zo()}),cT.apply(this,arguments)}function vy(n){return dT.apply(this,arguments)}function dT(){return dT=(0,he.Z)(function*(n){const e=sd(n);for(const t of n.hu)e.Jo(t.mutations)}),dT.apply(this,arguments)}function hT(n,e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,he.Z)(function*(n,e,t){const r=n.hu.shift(),i=Qv.from(r,e,t);yield Nw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qp(n)}),Wp.apply(this,arguments)}function fT(n,e){return wy.apply(this,arguments)}function wy(){return wy=(0,he.Z)(function*(n,e){var t;e&&sd(n).Ho&&(yield(t=(0,he.Z)(function*(r,i){if(BS(a=i.code)&&a!==fe.ABORTED){const l=r.hu.shift();sd(r).ko(),yield Nw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield qp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),TA(n)&&CA(n)}),wy.apply(this,arguments)}function DA(n,e){return zp.apply(this,arguments)}function zp(){return zp=(0,he.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=Rl(t);t.fu.add(3),yield $h(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield rd(t)}),zp.apply(this,arguments)}function Ey(n,e){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,he.Z)(function*(n,e){const t=rt(n);e?(t.fu.delete(2),yield rd(t)):e||(t.fu.add(2),yield $h(t),t.wu.set("Unknown"))}),Mw.apply(this,arguments)}function id(n){return n.gu||(n.gu=function(e,t,r){const i=rt(e);return i.eu(),new rT(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:IA.bind(null,n),Yr:oT.bind(null,n),Qo:aT.bind(null,n)}),n.du.push(function(){var e=(0,he.Z)(function*(t){t?(n.gu.ko(),Rw(n)?gy(n):n.wu.set("Unknown")):(yield n.gu.stop(),xw(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function sd(n){return n.yu||(n.yu=function(e,t,r){const i=rt(e);return i.eu(),new py(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:iN.bind(null,n),Yr:fT.bind(null,n),Xo:vy.bind(null,n),Yo:hT.bind(null,n)}),n.du.push(function(){var e=(0,he.Z)(function*(t){t?(n.yu.ko(),yield qp(n)):(yield n.yu.stop(),n.hu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class kw{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new kw(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qh(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),Kc(n))return new ke(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class xl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=sr(),this.sortedSet=new Hr(this.comparator)}static emptySet(e){return new xl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new xl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pT{constructor(){this.pu=new Hr(We.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):ht():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Kp{constructor(e,t,r,i,a,l,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new Kp(e,t,xl.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class sN{constructor(){this.Tu=void 0,this.listeners=[]}}class oN{constructor(){this.queries=new Cu(e=>Rv(e),Eh),this.onlineState="Unknown",this.Eu=new Set}}function Ow(n,e){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,he.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new sN),i)try{a.Tu=yield t.onListen(r)}catch(l){const d=qh(l,`Initialization of query '${Hm(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Au(t.onlineState),a.Tu&&e.Ru(a.Tu)&&Bw(t)}),Fw.apply(this,arguments)}function Lw(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,he.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),gT.apply(this,arguments)}function SA(n,e){const t=rt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Ru(i)&&(r=!0);l.Tu=i}}r&&Bw(t)}function Uw(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Bw(n){n.Eu.forEach(e=>{e.next()})}class Ns{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Kp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Kp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class AA{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class by{constructor(e){this.M=e}fi(e){return Wo(this.M,e)}di(e){return e.metadata.exists?gI(this.M,e.document,!1):Hn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Er(e)}}class RA{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mT(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=dn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new by(this.M);for(const i of e)if(i.metadata.queries){const a=r.fi(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Cn()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function yA(n,e,t,r){return mw.apply(this,arguments)}(e.localStore,new by(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield _A(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function mT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Iy{constructor(e){this.key=e}}class Vw{constructor(e){this.key=e}}class jw{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Cn(),this.mutatedKeys=Cn(),this.Uu=Pv(e),this.qu=new xl(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new pT,i=t?t.qu:this.qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f=_p(this.query)&&i.size===this.query.limit?i.last():null,_=vp(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,D)=>{const P=i.get(T),O=$m(this.query,D)?D:null,V=!!P&&this.mutatedKeys.has(P.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let ve=!1;P&&O?P.data.isEqual(O.data)?V!==Q&&(r.track({type:3,doc:O}),ve=!0):this.ju(P,O)||(r.track({type:2,doc:O}),ve=!0,(f&&this.Uu(O,f)>0||_&&this.Uu(O,_)<0)&&(d=!0)):!P&&O?(r.track({type:0,doc:O}),ve=!0):P&&!O&&(r.track({type:1,doc:P}),ve=!0,(f||_)&&(d=!0)),ve&&(O?(l=l.add(O),a=Q?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),_p(this.query)||vp(this.query))for(;l.size>this.query.limit;){const T=_p(this.query)?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{qu:l,Qu:r,ni:d,mutatedKeys:a}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const a=e.Qu.Iu();a.sort((_,T)=>function(D,P){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return O(D)-O(P)}(_.type,T.type)||this.Uu(_.doc,T.doc)),this.Wu(r);const l=t?this.zu():[],d=0===this.Lu.size&&this.current?1:0,f=d!==this.Bu;return this.Bu=d,0!==a.length||f?{snapshot:new Kp(this.query,e.qu,i,a,e.mutatedKeys,0===d,f,!1),Hu:l}:{Hu:l}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new pT,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Cn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new Vw(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new Iy(r))}),t}Yu(e){this.$u=e.li,this.Lu=Cn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Kp.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class xA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yT{constructor(e){this.key=e,this.Zu=!1}}class PA{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.ta={},this.ea=new Cu(d=>Rv(d),Eh),this.na=new Map,this.sa=new Set,this.ia=new Hr(We.comparator),this.ra=new Map,this.oa=new _w,this.ua={},this.aa=new Map,this.ca=Jc.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function NA(n,e){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,he.Z)(function*(n,e){const t=Jp(n);let r,i;const a=t.ea.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Xu();else{const l=yield Bp(t.localStore,fs(e));t.isPrimaryClient&&Gp(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Zp(t,e,r,"current"===d)}return i}),Hw.apply(this,arguments)}function Zp(n,e,t,r){return Au.apply(this,arguments)}function Au(){return Au=(0,he.Z)(function*(n,e,t,r){n.la=(T,D,P)=>{return(O=(0,he.Z)(function*(V,Q,ve,He){let Qe=Q.view.Gu(ve);Qe.ni&&(Qe=yield jp(V.localStore,Q.query,!1).then(({documents:Nt})=>Q.view.Gu(Nt,Qe)));const et=He&&He.targetChanges.get(Q.targetId),ze=Q.view.applyChanges(Qe,V.isPrimaryClient,et);return Kw(V,Q.targetId,ze.Hu),ze.snapshot}),function(V,Q,ve,He){return O.apply(this,arguments)})(n,T,D,P);var O};const i=yield jp(n.localStore,e,!0),a=new jw(e,i.li),l=a.Gu(i.documents),d=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),f=a.applyChanges(l,n.isPrimaryClient,d);Kw(n,t,f.Hu);const _=new xA(e,t,a);return n.ea.set(e,_),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),f.snapshot}),Au.apply(this,arguments)}function _T(n,e){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,he.Z)(function*(n,e){const t=rt(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(a=>!Eh(a,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Sl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Gh(t.remoteStore,r.targetId),Pl(t,r.targetId)}).catch(Xc))):(Pl(t,r.targetId),yield Sl(t.localStore,r.targetId,!0))}),Ty.apply(this,arguments)}function vT(){return vT=(0,he.Z)(function*(n,e,t){const r=Qw(n);try{const i=yield function(a,l){const d=rt(a),f=Ar.now(),_=l.reduce((D,P)=>D.add(P.key),Cn());let T;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>d.ci.Ks(D,_).next(P=>{T=P;const O=[];for(const V of l){const Q=nI(V,T.get(V.key));null!=Q&&O.push(new vl(V.key,Q,jb(Q.value.mapValue),jr.exists(!0)))}return d.Bs.addMutationBatch(D,f,O,l)})).then(D=>(D.applyToLocalDocumentSet(T),{batchId:D.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let f=a.ua[a.currentUser.toKey()];f||(f=new Hr(Kt)),f=f.insert(l,d),a.ua[a.currentUser.toKey()]=f}(r,i.batchId,t),yield Ru(r,i.changes),yield qp(r.remoteStore)}catch(i){const a=qh(i,"Failed to persist write");t.reject(a)}}),vT.apply(this,arguments)}function wT(n,e){return $w.apply(this,arguments)}function $w(){return $w=(0,he.Z)(function*(n,e){const t=rt(n);try{const r=yield qI(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ra.get(a);l&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Zu=!0:i.modifiedDocuments.size>0?Ft(l.Zu):i.removedDocuments.size>0&&(Ft(l.Zu),l.Zu=!1))}),yield Ru(t,r,e)}catch(r){yield Xc(r)}}),$w.apply(this,arguments)}function ET(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((a,l)=>{const d=l.view.Au(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=rt(a);d.onlineState=l;let f=!1;d.queries.forEach((_,T)=>{for(const D of T.listeners)D.Au(l)&&(f=!0)}),f&&Bw(d)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bT(n,e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,he.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),a=i&&i.key;if(a){let l=new Hr(We.comparator);l=l.insert(a,Hn.newNoDocument(a,At.min()));const d=Cn().add(a),f=new Dh(At.min(),new Map,new Qn(Kt),l,d);yield wT(r,f),r.ia=r.ia.remove(a),r.ra.delete(e),Sy(r)}else yield Sl(r.localStore,e,!1).then(()=>Pl(r,e,t)).catch(Xc)}),Gw.apply(this,arguments)}function kA(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,he.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield GI(t.localStore,e);Yp(t,r,null),Dy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ru(t,i)}catch(i){yield Xc(i)}}),IT.apply(this,arguments)}function qw(n,e,t){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,he.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(a,l){const d=rt(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return d.Bs.lookupMutationBatch(f,l).next(T=>(Ft(null!==T),_=T.keys(),d.Bs.removeMutationBatch(f,T))).next(()=>d.Bs.performConsistencyCheck(f)).next(()=>d.ci.Ks(f,_))})}(r.localStore,e);Yp(r,e,t),Dy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ru(r,i)}catch(i){yield Xc(i)}}),Cy.apply(this,arguments)}function Ww(){return Ww=(0,he.Z)(function*(n,e){const t=rt(n);Rl(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=rt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.Bs.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=qh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Ww.apply(this,arguments)}function Dy(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function Yp(n,e,t){const r=rt(n);let i=r.ua[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function Pl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||zw(n,r)})}function zw(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Gh(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),Sy(n))}function Kw(n,e,t){for(const r of t)r instanceof Iy?(n.oa.addReference(r.key,e),TT(n,r)):r instanceof Vw?(je("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||zw(n,r.key)):ht()}function TT(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(je("SyncEngine","New document in limbo: "+t),n.sa.add(r),Sy(n))}function Sy(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new We(dn.fromString(e)),r=n.ca.next();n.ra.set(r,new yT(t)),n.ia=n.ia.insert(t,r),Gp(n.remoteStore,new El(fs(vh(t.path)),r,2,xs.A))}}function Ru(n,e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,he.Z)(function*(n,e,t){const r=rt(n),i=[],a=[],l=[];var d;r.ea.isEmpty()||(r.ea.forEach((d,f)=>{l.push(r.la(f,e,t).then(_=>{if(_){r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,_.fromCache?"not-current":"current"),i.push(_);const T=gw.Ys(f.targetId,_);a.push(T)}}))}),yield Promise.all(l),r.ta.Qo(i),yield(d=(0,he.Z)(function*(f,_){const T=rt(f);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>_e.forEach(_,P=>_e.forEach(P.Hs,O=>T.persistence.referenceDelegate.addReference(D,P.targetId,O)).next(()=>_e.forEach(P.Js,O=>T.persistence.referenceDelegate.removeReference(D,P.targetId,O)))))}catch(D){if(!Kc(D))throw D;je("LocalStore","Failed to update sequence numbers: "+D)}for(const D of _){const P=D.targetId;if(!D.fromCache){const O=T.ii.get(P),Q=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);T.ii=T.ii.insert(P,Q)}}}),function(f,_){return d.apply(this,arguments)})(r.localStore,a))}),Zw.apply(this,arguments)}function aN(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,he.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield $I(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(l=>{l.forEach(d=>{d.reject(new ke(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ru(t,r.hi)}var i}),CT.apply(this,arguments)}function DT(n,e){const t=rt(n),r=t.ra.get(e);if(r&&r.Zu)return Cn().add(r.key);{let i=Cn();const a=t.na.get(e);if(!a)return i;for(const l of a){const d=t.ea.get(l);i=i.unionWith(d.view.Ku)}return i}}function FA(n,e){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,he.Z)(function*(n,e){const t=rt(n),r=yield jp(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&Kw(t,e.targetId,i.Hu),i}),Yw.apply(this,arguments)}function LA(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,he.Z)(function*(n,e){const t=rt(n);return uy(t.localStore,e).then(r=>Ru(t,r))}),ST.apply(this,arguments)}function uN(n,e,t,r){return AT.apply(this,arguments)}function AT(){return AT=(0,he.Z)(function*(n,e,t,r){const i=rt(n),a=yield function(l,d){const f=rt(l),_=rt(f.Bs);return f.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.fn(T,d).next(D=>D?f.ci.Ks(T,D):_e.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield qp(i.remoteStore):"acknowledged"===t||"rejected"===t?(Yp(i,e,r||null),Dy(i,e),d=e,rt(rt(i.localStore).Bs)._n(d)):ht(),yield Ru(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),AT.apply(this,arguments)}function RT(){return RT=(0,he.Z)(function*(n,e){const t=rt(n);if(Jp(t),Qw(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield xT(t,r.toArray());t.ha=!0,yield Ey(t.remoteStore,!0);for(const a of i)Gp(t.remoteStore,a)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Pl(t,l),Sl(t.localStore,l,!0))),Gh(t.remoteStore,l)}),yield i,yield xT(t,r),function(a){const l=rt(a);l.ra.forEach((d,f)=>{Gh(l.remoteStore,f)}),l.oa.bi(),l.ra=new Map,l.ia=new Hr(We.comparator)}(t),t.ha=!1,yield Ey(t.remoteStore,!1)}}),RT.apply(this,arguments)}function xT(n,e,t){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,he.Z)(function*(n,e,t){const r=rt(n),i=[],a=[];for(const l of e){let d;const f=r.na.get(l);if(f&&0!==f.length){d=yield Bp(r.localStore,fs(f[0]));for(const _ of f){const T=r.ea.get(_),D=yield FA(r,T);D.snapshot&&a.push(D.snapshot)}}else{const _=yield ay(r.localStore,l);d=yield Bp(r.localStore,_),yield Zp(r,PT(_),l,!1)}i.push(d)}return r.ta.Qo(a),i}),Wh.apply(this,arguments)}function PT(n){return Sv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UA(n){const e=rt(n);return rt(rt(e.localStore).persistence).Fs()}function NT(n,e,t,r){return xu.apply(this,arguments)}function xu(){return xu=(0,he.Z)(function*(n,e,t,r){const i=rt(n);if(i.ha)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.na.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield uy(i.localStore,xv(a[0])),d=Dh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ru(i,l,d);break}case"rejected":yield Sl(i.localStore,e,!0),Pl(i,e,r);break;default:ht()}}),xu.apply(this,arguments)}function MT(n,e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,he.Z)(function*(n,e,t){const r=Jp(n);if(r.ha){for(const i of e){if(r.na.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield ay(r.localStore,i),l=yield Bp(r.localStore,a);yield Zp(r,PT(a),l.targetId,!1),Gp(r.remoteStore,l)}for(const i of t)r.na.has(i)&&(yield Sl(r.localStore,i,!1).then(()=>{Gh(r.remoteStore,i),Pl(r,i)}).catch(Xc))}}),Qp.apply(this,arguments)}function Jp(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bT.bind(null,e),e.ta.Qo=SA.bind(null,e.eventManager),e.ta.fa=Uw.bind(null,e.eventManager),e}function Qw(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qw.bind(null,e),e}class Ay{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.M=hy(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return HI(this.persistence,new Up,e.initialUser,this.M)}wa(e){return new wA(vw.zi,this.M)}_a(e){return new Iw}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Xp extends Ay{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield Qw(r.ya.syncEngine),yield qp(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return HI(this.persistence,new Up,e.initialUser,this.M)}ma(e){return new FI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ps.withCacheSize(this.cacheSizeBytes):Ps.DEFAULT;return new fw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$p(),Hh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Iw}}class cN extends Xp{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof bw&&(r.sharedClientState.syncEngine={Mr:uN.bind(null,i),Or:NT.bind(null,i),Fr:MT.bind(null,i),Fs:UA.bind(null,i),kr:LA.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,he.Z)(function*(l){yield function lN(n,e){return RT.apply(this,arguments)}(r.ya.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}_a(e){const t=$p();if(!bw.vt(t))throw new ke(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kT{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>ET(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aN.bind(null,r.syncEngine),yield Ey(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new oN}createDatastore(e){const t=hy(e.databaseInfo.databaseId),r=new tT(e.databaseInfo);return new iT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>ET(this.syncEngine,d,0),l=XI.vt()?new XI:new EA,new Cw(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,f,_){const T=new PA(r,i,a,l,d,f);return _&&(T.ha=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=rt(t);je("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield $h(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function BA(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class OT{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Ii,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new AA(JSON.parse(a),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,he.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,he.Z)(function*(a,l){const d=rt(a),f=Ap(d.M)+"/documents",_={documents:l.map(O=>Sp(d.M,O))},T=yield d.ho("BatchGetDocuments",f,_),D=new Map;T.forEach(O=>{const V=function XP(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=Wo(t,r.found.name),a=Er(r.found.updateTime),l=new Mi({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=Wo(t,r.missing),a=Er(r.readTime);return Hn.newNoDocument(i,a)}(n,e):ht()}(d.M,O);D.set(V.key.toString(),V)});const P=[];return l.forEach(O=>{const V=D.get(O.toString());Ft(!!V),P.push(V)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new Lv(a,e.precondition(a)))}),yield(r=(0,he.Z)(function*(i,a){const l=rt(i),d=Ap(l.M)+"/documents",f={writes:a.map(_=>Qm(l.M,_))};yield l.oo("Commit",d,f)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?jr.updateTime(t):jr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new ke(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jr.updateTime(t)}return jr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class jA{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new fy(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,he.Z)(function*(){const t=new VA(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.xa(a)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!ml(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!BS(t)}return!1}}class HA{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=Fb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,he.Z)(function*(d){je("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=qh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function FT(n,e){return Ry.apply(this,arguments)}function Ry(){return Ry=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,he.Z)(function*(a){r.isEqual(a)||(yield $I(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Ry.apply(this,arguments)}function eE(n,e){return xy.apply(this,arguments)}function xy(){return xy=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield tE(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>DA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>DA(e.remoteStore,a)),n.onlineComponents=e}),xy.apply(this,arguments)}function tE(n){return nE.apply(this,arguments)}function nE(){return nE=(0,he.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield FT(n,new Ay)),n.offlineComponents}),nE.apply(this,arguments)}function eg(n){return tg.apply(this,arguments)}function tg(){return tg=(0,he.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield eE(n,new kT)),n.onlineComponents}),tg.apply(this,arguments)}function $A(n){return tE(n).then(e=>e.persistence)}function Py(n){return tE(n).then(e=>e.localStore)}function Ny(n){return eg(n).then(e=>e.remoteStore)}function rE(n){return eg(n).then(e=>e.syncEngine)}function zh(n){return LT.apply(this,arguments)}function LT(){return LT=(0,he.Z)(function*(n){const e=yield eg(n),t=e.eventManager;return t.onListen=NA.bind(null,e.syncEngine),t.onUnlisten=_T.bind(null,e.syncEngine),t}),LT.apply(this,arguments)}function WA(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,a,l,d,f){const _=new Xw({next:D=>{a.enqueueAndForget(()=>Lw(i,T));const P=D.docs.has(l);!P&&D.fromCache?f.reject(new ke(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&D.fromCache&&d&&"server"===d.source?f.reject(new ke(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(D)},error:D=>f.reject(D)}),T=new Ns(vh(l.path),_,{includeMetadataChanges:!0,Cu:!0});return Ow(i,T)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}function zA(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,a,l,d,f){const _=new Xw({next:D=>{a.enqueueAndForget(()=>Lw(i,T)),D.fromCache&&"server"===d.source?f.reject(new ke(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(D)},error:D=>f.reject(D)}),T=new Ns(l,_,{includeMetadataChanges:!0,Cu:!0});return Ow(i,T)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}const ZA=new Map;function UT(n,e,t){if(!t)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YA(n,e,t,r){if(!0===e&&!0===r)throw new ke(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function s(n){if(!We.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o(n){if(We.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function u(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function c(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=u(n);throw new ke(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function h(n,e){if(e<=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class p{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,YA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p({}),this._settingsFrozen=!1,e instanceof Pa?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new dh;switch(t.type){case"gapi":const r=t.client;return Ft(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Ob(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ZA.get(e);t&&(je("ComponentProvider","Removing Datastore"),ZA.delete(e),t.terminate())}(this),Promise.resolve()}}class I{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new R(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new I(this.firestore,e,this._key)}}class A{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new A(this.firestore,e,this._query)}}class R extends A{constructor(e,t,r){super(e,t,vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new I(this.firestore,null,new We(e))}withConverter(e){return new R(this.firestore,e,this._path)}}function B(n,e,...t){if(n=(0,k.m9)(n),UT("collection","path",e),n instanceof v){const r=dn.fromString(e,...t);return o(r),new R(n,null,r)}{if(!(n instanceof I||n instanceof R))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return o(r),new R(n.firestore,null,r)}}function J(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=Fb.R()),UT("doc","path",e),n instanceof v){const r=dn.fromString(e,...t);return s(r),new I(n,null,new We(r))}{if(!(n instanceof I||n instanceof R))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return s(r),new I(n.firestore,n instanceof R?n.converter:null,new We(r))}}function Ee(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof I||n instanceof R)&&(e instanceof I||e instanceof R)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Be(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof A&&e instanceof A&&n.firestore===e.firestore&&Eh(n._query,e._query)&&n.converter===e.converter}class Ze{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new fy(this,"async_queue_retry"),this.qa=()=>{const t=Hh();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Hh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Hh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Ii;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,he.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Kc(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=kw.createAndSchedule(this,e,t,r,a=>this.ja(a));return this.Fa.push(i),i}Ka(){this.$a&&ht()}verifyOperationInProgress(){}Wa(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function lt(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ae{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _t extends v{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Ze,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||My(this),this._firestoreClient.terminate()}}function Gn(n){return n._firestoreClient||My(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function My(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Fm(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new HA(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ky(n,e,t){const r=new Ii;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield FT(n,t),yield eE(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===fe.FAILED_PRECONDITION||a.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function mN(n){if(n._initialized||n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nl(Rr.fromBase64String(e))}catch(t){throw new ke(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nl(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ng{constructor(e){this._methodName=e}}class VT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const UF=/^__.*__$/;class BF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Th(e,this.data,t,this.fieldTransforms)}}class yN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _N(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class jT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new jT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return GT(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(_N(this.Xa)&&UF.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class VF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||hy(e)}ac(e,t,r,i=!1){return new jT({Xa:e,methodName:t,uc:r,path:wr.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function rg(n){const e=n._freezeSettings(),t=hy(n._databaseId);return new VF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HT(n,e,t,r,i,a={}){const l=n.ac(a.merge||a.mergeFields?2:0,e,t,i);eR("Data must be an object, but it was:",l,r);const d=EN(r,l);let f,_;if(a.merge)f=new Bc(l.fieldMask),_=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const D of a.mergeFields){const P=tR(e,D,t);if(!l.contains(P))throw new ke(fe.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);IN(T,P)||T.push(P)}f=new Bc(T),_=l.fieldTransforms.filter(D=>f.covers(D.field))}else f=null,_=l.fieldTransforms;return new BF(new Mi(d),f,_)}class cE extends ng{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cE}}function vN(n,e,t){return new jT({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class QA extends ng{_toFieldTransform(e){return new Ep(e.path,new bh)}isEqual(e){return e instanceof QA}}class jF extends ng{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=vN(this,e,!0),r=this.cc.map(a=>ig(a,t)),i=new Wc(r);return new Ep(e.path,i)}isEqual(e){return this===e}}class HF extends ng{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=vN(this,e,!0),r=this.cc.map(a=>ig(a,t)),i=new zc(r);return new Ep(e.path,i)}isEqual(e){return this===e}}class $F extends ng{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Ih(e.M,Zb(e.M,this.hc));return new Ep(e.path,t)}isEqual(e){return this===e}}function JA(n,e,t,r){const i=n.ac(1,e,t);eR("Data must be an object, but it was:",i,r);const a=[],l=Mi.empty();bu(r,(f,_)=>{const T=$T(e,f,t);_=(0,k.m9)(_);const D=i.sc(T);if(_ instanceof cE)a.push(T);else{const P=ig(_,D);null!=P&&(a.push(T),l.set(T,P))}});const d=new Bc(a);return new yN(l,d,i.fieldTransforms)}function XA(n,e,t,r,i,a){const l=n.ac(1,e,t),d=[tR(e,r,t)],f=[i];if(a.length%2!=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)d.push(tR(e,a[P])),f.push(a[P+1]);const _=[],T=Mi.empty();for(let P=d.length-1;P>=0;--P)if(!IN(_,d[P])){const O=d[P];let V=f[P];V=(0,k.m9)(V);const Q=l.sc(O);if(V instanceof cE)_.push(O);else{const ve=ig(V,Q);null!=ve&&(_.push(O),T.set(O,ve))}}const D=new Bc(_);return new yN(T,D,l.fieldTransforms)}function wN(n,e,t,r=!1){return ig(t,n.ac(r?4:3,e))}function ig(n,e){if(bN(n=(0,k.m9)(n)))return eR("Unsupported field value:",e,n),EN(n,e);if(n instanceof ng)return function(t,r){if(!_N(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=ig(l,r.ic(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ar.fromDate(t);return{timestampValue:Rh(r.M,i)}}if(t instanceof Ar){const i=new Ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Rh(r.M,i)}}if(t instanceof VT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nl)return{bytesValue:hI(r.M,t._byteString)};if(t instanceof I){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${u(t)}`)}(n,e)}function EN(n,e){const t={};return SS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bu(n,(r,i)=>{const a=ig(i,e.tc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function bN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ar||n instanceof VT||n instanceof Nl||n instanceof I||n instanceof ng)}function eR(n,e,t){if(!bN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=u(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function tR(n,e,t){if((e=(0,k.m9)(e))instanceof od)return e._internalPath;if("string"==typeof e)return $T(n,e);throw GT("Field path arguments must be of type string or ",n,!1,void 0,t)}const GF=new RegExp("[~\\*/\\[\\]]");function $T(n,e,t){if(e.search(GF)>=0)throw GT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new od(...e.split("."))._internalPath}catch(r){throw GT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new ke(fe.INVALID_ARGUMENT,d+n+f)}function IN(n,e){return n.some(t=>t.isEqual(e))}class dE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new I(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qF extends dE{data(){return super.data()}}function qT(n,e){return"string"==typeof e?$T(n,e):e instanceof od?e._internalPath:e._delegate._internalPath}class sg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ad extends dE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hE extends ad{data(e={}){return super.data(e)}}class Kh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hE(this._firestore,this._userDataWriter,r.key,r,new sg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new hE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new sg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new hE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new sg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return 0!==l.type&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),_=a.indexOf(l.doc.key)),{type:WF(l.type),doc:d,oldIndex:f,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function WF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function TN(n,e){return n instanceof ad&&e instanceof ad?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kh&&e instanceof Kh&&n._firestore===e._firestore&&Be(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CN(n){if(vp(n)&&0===n.explicitOrderBy.length)throw new ke(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fE{}function Zh(n,...e){for(const t of e)n=t._apply(n);return n}class zF extends fE{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=rg(e.firestore),r=function(i,a,l,d,f,_,T){let D;if(f.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){PN(T,_);const O=[];for(const V of T)O.push(xN(d,i,V));D={arrayValue:{values:O}}}else D=xN(d,i,T)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||PN(T,_),D=wN(l,"where",T,"in"===_||"not-in"===_);const P=$n.create(f,_,D);return function(O,V){if(V.S()){const ve=Av(O);if(null!==ve&&!ve.isEqual(V.field))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ve.toString()}' and '${V.field.toString()}'`);const He=wh(O);null!==He&&NN(0,V.field,He)}const Q=function(ve,He){for(const Qe of ve.filters)if(He.indexOf(Qe.op)>=0)return Qe.op;return null}(O,function(ve){switch(ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(V.op));if(null!==Q)throw new ke(fe.INVALID_ARGUMENT,Q===V.op?`Invalid query. You cannot use more than one '${V.op.toString()}' filter.`:`Invalid query. You cannot use '${V.op.toString()}' filters with '${Q.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new A(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Tu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class ZF extends fE{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new yh(i,a);return function(d,f){if(null===wh(d)){const _=Av(d);null!==_&&NN(0,_,f.field)}}(r,l),l}(e._query,this.lc,this._c);return new A(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Tu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DN extends fE{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new A(e.firestore,e.converter,wp(e._query,this.wc,this.mc))}}class SN extends fE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=RN(e,this.type,this.gc,this.yc);return new A(e.firestore,e.converter,(i=t,new Tu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class AN extends fE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=RN(e,this.type,this.gc,this.yc);return new A(e.firestore,e.converter,(i=t,new Tu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function RN(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof dE)return function(i,a,l,d,f){if(!d)throw new ke(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const _=[];for(const T of qc(i))if(T.field.isKeyField())_.push(Hc(a,d.key));else{const D=d.data.field(T.field);if(Lb(D))throw new ke(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const P=T.field.canonicalString();throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}_.push(D)}return new _l(_,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=rg(n.firestore);return function(a,l,d,f,_,T){const D=a.explicitOrderBy;if(_.length>D.length)throw new ke(fe.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let O=0;O<_.length;O++){const V=_[O];if(D[O].field.isKeyField()){if("string"!=typeof V)throw new ke(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof V}`);if(!jm(a)&&-1!==V.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${V}' contains a slash.`);const Q=a.path.child(dn.fromString(V));if(!We.isDocumentKey(Q))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const ve=new We(Q);P.push(Hc(l,ve))}else{const Q=wN(d,f,V);P.push(Q)}}return new _l(P,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function xN(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jm(e)&&-1!==t.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!We.isDocumentKey(r))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hc(n,new We(r))}if(t instanceof I)return Hc(n,t._key);throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u(t)}.`)}function PN(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NN(n,e,t){if(!t.isEqual(e))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nR{convertValue(e,t="none"){switch(jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Iu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return bu(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new VT(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ub(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const t=$o(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);Ft(bI(r));const i=new Pa(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||Vr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function WT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rL extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new I(this.firestore,null,t)}}class MN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rg(e)}set(e,t,r){this._verifyNotCommitted();const i=Yh(e,this._firestore),a=WT(i.converter,t,r),l=HT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,jr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Yh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof od?XA(this._dataReader,"WriteBatch.update",a._key,t,r,i):JA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,jr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yh(e,this._firestore);return this._mutations=this._mutations.concat(new Tp(t._key,jr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new ke(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class og extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new I(this.firestore,null,t)}}function kN(n,e,t){n=c(n,I);const r=c(n.firestore,_t),i=WT(n.converter,e,t);return Oy(r,[HT(rg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,jr.none())])}function ON(n,e,t,...r){n=c(n,I);const i=c(n.firestore,_t),a=rg(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof od?XA(a,"updateDoc",n._key,e,t,r):JA(a,"updateDoc",n._key,e),Oy(i,[l.toMutation(n._key,jr.exists(!0))])}function FN(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||lt(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(lt(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let f,_,T;if(n instanceof I)_=c(n.firestore,_t),T=vh(n._key.path),f={next:D=>{e[l]&&e[l](rR(_,n,D))},error:e[l+1],complete:e[l+2]};else{const D=c(n,A);_=c(D.firestore,_t),T=D._query;const P=new og(_);f={next:O=>{e[l]&&e[l](new Kh(_,P,D,O))},error:e[l+1],complete:e[l+2]},CN(n._query)}return function(D,P,O,V){const Q=new Xw(V),ve=new Ns(P,Q,O);return D.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return Ow(yield zh(D),ve)})),()=>{Q.Ia(),D.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return Lw(yield zh(D),ve)}))}}(Gn(_),T,d,f)}function Oy(n,e){return function(t,r){const i=new Ii;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function MA(n,e,t){return vT.apply(this,arguments)}(yield rE(t),r,i)})),i.promise}(Gn(n),e)}function rR(n,e,t){const r=t.docs.get(e._key),i=new og(n);return new ad(n,i,e._key,r,new sg(t.hasPendingWrites,t.fromCache),e.converter)}class fL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rg(e)}get(e){const t=Yh(e,this._firestore),r=new rL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new dE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new dE(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Yh(e,this._firestore),a=WT(i.converter,t,r),l=HT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Yh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof od?XA(this._dataReader,"Transaction.update",a._key,t,r,i):JA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Yh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yh(e,this._firestore),r=new og(this._firestore);return super.get(e).then(i=>new ad(this._firestore,r,t._key,i._document,new sg(!1,!1),t.converter))}}function iR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function UN(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function BN(){if(!function pv(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ch=Zi.SDK_VERSION,(0,Zi._registerComponent)(new io.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new _t(i,new kb(t.getProvider("auth-internal")),new TS(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Zi.registerVersion)(Nb,"3.4.8",n),(0,Zi.registerVersion)(Nb,"3.4.8","esm2017")}();class pE{constructor(e){this._delegate=e}static fromBase64String(e){return BN(),new pE(Nl.fromBase64String(e))}static fromUint8Array(e){return UN(),new pE(Nl.fromUint8Array(e))}toBase64(){return BN(),this._delegate.toBase64()}toUint8Array(){return UN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sR(n){return function bL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class IL{enableIndexedDbPersistence(e,t){return function iE(n,e){mN(n=c(n,_t));const t=Gn(n),r=n._freezeSettings(),i=new kT;return ky(t,i,new Xp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sE(n){mN(n=c(n,_t));const e=Gn(n),t=n._freezeSettings(),r=new kT;return ky(e,r,new cN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oE(n){if(n._initialized&&!n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!uo.vt())return Promise.resolve();const i=r+"main";yield uo.delete(i)}),function(r){return t.apply(this,arguments)})(pw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function E(n,e,t,r={}){var i;const a=(n=c(n,v))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Lc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=li.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ke(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new li(f)}n._authCredentials=new bS(new Mb(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function uE(n){return function dN(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield $A(n),t=yield Ny(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.fu.delete(0),rd(i)}(t)}))}(Gn(n=c(n,_t)))}(this._delegate)}disableNetwork(){return function lE(n){return function GA(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield $A(n),t=yield Ny(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(i){const a=rt(i);a.fu.add(0),yield $h(a),a.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Gn(n=c(n,_t)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aE(n){return function(e){const t=new Ii;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function OA(n,e){return Ww.apply(this,arguments)}(yield rE(e),t)})),t.promise}(Gn(n=c(n,_t)))}(this._delegate)}onSnapshotsInSync(e){return function hL(n,e){return function fN(n,e){const t=new Xw(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield zh(n),i=t,rt(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield zh(n),i=t,void rt(r).Eu.delete(i);var r,i}))}}(Gn(n=c(n,_t)),lt(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fy(this,B(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ba(this,J(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ks(this,function W(n,e){if(n=c(n,v),UT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new A(n,null,(t=e,new Tu(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pL(n,e){return function pN(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const r=yield(i=n,eg(i).then(a=>a.datastore));var i;new jA(n.asyncQueue,r,e,t).run()})),t.promise}(Gn(n=c(n,_t)),t=>e(new fL(n,t)))}(this._delegate,t=>e(new jN(this,t)))}batch(){return Gn(this._delegate),new HN(new MN(this._delegate,e=>Oy(this._delegate,e)))}loadBundle(e){return function FF(n,e){const t=Gn(n=c(n,_t)),r=new Ae;return function KA(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,f=function(f,_){if(f instanceof Uint8Array)return BA(f,_);if(f instanceof ArrayBuffer)return BA(new Uint8Array(f),_);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new OT(f,l);var f}(t,hy(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function Jw(n,e,t){const r=rt(n);var i;(i=(0,he.Z)(function*(a,l,d){try{const f=yield l.getMetadata();if(yield function(P,O){const V=rt(P),Q=Er(O.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",ve=>V._s.getBundleMetadata(ve,O.id)).then(ve=>!!ve&&ve.createTime.compareTo(Q)>=0)}(a.localStore,f))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=f).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress(mT(f));const _=new RA(f,a.localStore,l.M);let T=yield l.da();for(;T;){const P=yield _.ku(T);P&&d._updateProgress(P),T=yield l.da()}const D=yield _.complete();return yield Ru(a,D.Fu,void 0),yield function(P,O){const V=rt(P);return V.persistence.runTransaction("Save bundle","readwrite",Q=>V._s.saveBundleMetadata(Q,O))}(a.localStore,f),d._completeWith(D.progress),Promise.resolve(D.Ou)}catch(f){return Lc("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var P}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rE(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function LF(n,e){return function gN(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield Py(n),e)}))}(Gn(n=c(n,_t)),e).then(t=>t?new A(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ks(this,t):null)}}class zT extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new pE(new Nl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ba.forKey(t,this.firestore,null)}}class jN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}get(e){const t=ug(e);return this._delegate.get(t).then(r=>new gE(this._firestore,new ad(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ug(e);return r?(iR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=ug(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}}class HN{constructor(e){this._delegate=e}set(e,t,r){const i=ug(e);return r?(iR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=ug(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ag{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ag.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new ag(e,new zT(e),t),i.set(t,a)),a}}ag.INSTANCES=new WeakMap;class Ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ba(t,new I(t._delegate,r,new We(e)))}static forKey(e,t,r){return new Ba(t,new I(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fy(this.firestore,B(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof I&&Ee(this._delegate,e)}set(e,t){t=iR("DocumentReference.set",t);try{return t?kN(this._delegate,e,t):kN(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ON(this._delegate,e):ON(this._delegate,e,t,...r)}catch(i){throw Ms(i,"updateDoc()","DocumentReference.update()")}}delete(){return function cL(n){return Oy(c(n.firestore,_t),[new Tp(n._key,jr.none())])}(this._delegate)}onSnapshot(...e){const t=$N(e),r=GN(e,i=>new gE(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return FN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sL(n){n=c(n,I);const e=c(n.firestore,_t),t=Gn(e),r=new og(e);return function qA(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,a,l){try{const d=yield function(f,_){const T=rt(f);return T.persistence.runTransaction("read document","readonly",D=>T.ci.Ls(D,_))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new ke(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=qh(d,`Failed to get document '${a} from cache`);l.reject(f)}}),function(i,a,l){return r.apply(this,arguments)})(yield Py(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ad(e,r,n._key,i,new sg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function oL(n){n=c(n,I);const e=c(n.firestore,_t);return WA(Gn(e),n._key,{source:"server"}).then(t=>rR(e,n,t))}(this._delegate):function iL(n){n=c(n,I);const e=c(n.firestore,_t);return WA(Gn(e),n._key).then(t=>rR(e,n,t))}(this._delegate),t.then(r=>new gE(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ba(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function $N(n){for(const e of n)if("object"==typeof e&&!sR(e))return e;return{}}function GN(n,e){var t,r;let i;return i=sR(n[0])?n[0]:sR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class gE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return TN(this._delegate,e._delegate)}}class mE extends gE{data(e){const t=this._delegate.data(e);return function QP(n,e){n||ht()}(void 0!==t),t}}class ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}where(e,t,r){try{return new ks(this.firestore,Zh(this._delegate,function KF(n,e,t){const r=e,i=qT("where",n);return new zF(i,r,t)}(e,t,r)))}catch(i){throw Ms(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ks(this.firestore,Zh(this._delegate,function YF(n,e="asc"){const t=e,r=qT("orderBy",n);return new ZF(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ks(this.firestore,Zh(this._delegate,function QF(n){return h("limit",n),new DN("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ks(this.firestore,Zh(this._delegate,function JF(n){return h("limitToLast",n),new DN("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ks(this.firestore,Zh(this._delegate,function XF(...n){return new SN("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ks(this.firestore,Zh(this._delegate,function eL(...n){return new SN("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ks(this.firestore,Zh(this._delegate,function tL(...n){return new AN("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ks(this.firestore,Zh(this._delegate,function nL(...n){return new AN("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return Be(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function uL(n){n=c(n,A);const e=c(n.firestore,_t),t=Gn(e),r=new og(e);return function hN(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,a,l){try{const d=yield jp(i,a,!0),f=new jw(a,d.li),_=f.Gu(d.documents),T=f.applyChanges(_,!1);l.resolve(T.snapshot)}catch(d){const f=qh(d,`Failed to execute query '${a} against cache`);l.reject(f)}}),function(i,a,l){return r.apply(this,arguments)})(yield Py(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Kh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function lL(n){n=c(n,A);const e=c(n.firestore,_t),t=Gn(e),r=new og(e);return zA(t,n._query,{source:"server"}).then(i=>new Kh(e,r,n,i))}(this._delegate):function aL(n){n=c(n,A);const e=c(n.firestore,_t),t=Gn(e),r=new og(e);return CN(n._query),zA(t,n._query).then(i=>new Kh(e,r,n,i))}(this._delegate),t.then(r=>new oR(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$N(e),r=GN(e,i=>new oR(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return FN(this._delegate,t,r)}withConverter(e){return new ks(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}class CL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mE(this._firestore,r))})}isEqual(e){return TN(this._delegate,e._delegate)}}class Fy extends ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ba(this.firestore,e):null}doc(e){try{return new Ba(this.firestore,void 0===e?J(this._delegate):J(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function dL(n,e){const t=c(n.firestore,_t),r=J(n),i=WT(n.converter,e);return Oy(t,[HT(rg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,jr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ba(this.firestore,t))}isEqual(e){return Ee(this._delegate,e._delegate)}withConverter(e){return new Fy(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}function ug(n){return c(n,I)}class aR{constructor(...e){this._delegate=new od(...e)}static documentId(){return new aR(wr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof od&&this._delegate._internalPath.isEqual(e._internalPath)}}class lg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mL(){return new QA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lg(e)}static delete(){const e=function gL(){return new cE("deleteField")}();return e._methodName="FieldValue.delete",new lg(e)}static arrayUnion(...e){const t=function yL(...n){return new jF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lg(t)}static arrayRemove(...e){const t=function _L(...n){return new HF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lg(t)}static increment(e){const t=function vL(n){return new $F("increment",n)}(e);return t._methodName="FieldValue.increment",new lg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DL={Firestore:VN,GeoPoint:VT,Timestamp:Ar,Blob:pE,Transaction:jN,WriteBatch:HN,DocumentReference:Ba,DocumentSnapshot:gE,Query:ks,QueryDocumentSnapshot:mE,QuerySnapshot:oR,CollectionReference:Fy,FieldPath:aR,FieldValue:lg,setLogLevel:function TL(n){!function ES(n){Eu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function AL(n){(function SL(n,e){n.INTERNAL.registerComponent(new io.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},DL)))})(n,(e,t)=>new VN(e,t,new IL)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(k_.Z);var uR=L(6451),KT=L(5363),RL=L(6063);class xL extends bs.x{constructor(e=1/0,t=1/0,r=RL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=l;f+=2)d=f;d&&r.splice(0,d+1)}}}var qN=L(3099);function WN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,qN.B)({connector:()=>new xL(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function zN(n,e){return(0,_a.m)(e)?kn(()=>n,e):kn(()=>n)}var lR=L(9468);L(5867);const ZN=new Map,OL={activated:!1,tokenObservers:[]},FL={initialized:!1,enabled:!1};function Oi(n){return ZN.get(n)||OL}function Pu(n,e){ZN.set(n,e)}function YT(){return FL}class jL{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function HL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Os=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function QN(n){if(!Oi(n).activated)throw Os.create("use-before-activation",{appName:n.name})}function fR(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,a)}catch(D){throw Os.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==l.status)throw Os.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(D){throw Os.create("fetch-parse-error",{originalErrorMessage:D.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Os.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const _=1e3*Number(f[1]),T=Date.now();return{token:d.token,expireTimeMillis:T+_,issuedAtTimeMillis:T}}),pR.apply(this,arguments)}function zL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const yE="firebase-app-check-store";let XT=null;function XN(){return XT||(XT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Os.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yE,{keyPath:"compositeKey"})}}catch(t){e(Os.create("storage-open",{originalErrorMessage:t.message}))}}),XT)}function gR(){return gR=(0,he.Z)(function*(n,e){const r=(yield XN()).transaction(yE,"readwrite"),a=r.objectStore(yE).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=f=>{l()},r.onerror=f=>{var _;d(Os.create("storage-set",{originalErrorMessage:null===(_=f.target.error)||void 0===_?void 0:_.message}))}})}),gR.apply(this,arguments)}const _E=new Uo.Yd("@firebase/app-check");function rM(n,e){return(0,k.hl)()?function QL(n,e){return function eM(n,e){return gR.apply(this,arguments)}(function nM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_E.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function iM(){return YT().enabled}function sM(){return vR.apply(this,arguments)}function vR(){return vR=(0,he.Z)(function*(){const n=YT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),vR.apply(this,arguments)}const rU={error:"UNKNOWN_ERROR"};function iU(n){return k.US.encodeString(JSON.stringify(n),!1)}function eC(n){return wR.apply(this,arguments)}function wR(){return wR=(0,he.Z)(function*(n,e=!1){const t=n.app;QN(t);const r=Oi(t);let a,i=r.token;if(!i){const f=yield r.cachedTokenPromise;f&&tC(f)&&(i=f)}if(!e&&i&&tC(i))return{token:i.token};let d,l=!1;if(iM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fR(zL(t,yield sM()),n.heartbeatServiceProvider).then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0);const f=yield r.exchangeTokenPromise;return yield rM(t,f),Pu(t,Object.assign(Object.assign({},r),{token:f})),{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(f=>(r.exchangeTokenPromise=void 0,f)),l=!0),i=yield r.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?_E.warn(f.message):_E.error(f),a=f}return i?(d={token:i.token},Pu(t,Object.assign(Object.assign({},r),{token:i})),yield rM(t,i)):d=oU(a),l&&aM(t,d),d}),wR.apply(this,arguments)}function bR(n,e){const t=Oi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Pu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function oM(n){const{app:e}=n,t=Oi(e);let r=t.tokenRefresher;r||(r=function sU(n){const{app:e}=n;return new jL((0,he.Z)(function*(){let r;if(r=Oi(e).token?yield eC(n,!0):yield eC(n),r.error)throw r.error}),()=>!0,()=>{const t=Oi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Pu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function aM(n,e){const t=Oi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function tC(n){return n.expireTimeMillis-Date.now()>0}function oU(n){return{token:iU(rU),error:n}}class aU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Oi(this.app);for(const t of e)bR(this.app,t.next);return Promise.resolve()}}const gM="app-check-internal";!function EU(){(0,Zi._registerComponent)(new io.wA("app-check",n=>function uU(n,e){return new aU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gM).initialize()})),(0,Zi._registerComponent)(new io.wA(gM,n=>function lU(n){return{getToken:e=>eC(n,e),addTokenListener:e=>function ER(n,e,t,r){const{app:i}=n,a=Oi(i),l={next:t,error:r,type:e};if(Pu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&tC(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),oM(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>oM(n))}(n,"INTERNAL",e),removeTokenListener:e=>bR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zi.registerVersion)("@firebase/app-check","0.5.7")}();class vE{constructor(){return(0,gn.vb)("app-check")}}"undefined"!=typeof window&&window;var rC=L(127);const SR=new g.OlP("angularfire2.auth.use-emulator"),AR=new g.OlP("angularfire2.auth.settings"),RR=new g.OlP("angularfire2.auth.tenant-id"),xR=new g.OlP("angularfire2.auth.langugage-code"),PR=new g.OlP("angularfire2.auth.use-device-language"),NR=new g.OlP("angularfire.auth.persistence"),MR=(n,e,t,r,i,a,l,d)=>(0,Br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,a&&f.useDeviceLanguage(),l)for(const[_,T]of Object.entries(l))f.settings[_]=T;return d&&f.setPersistence(d),f},[t,r,i,a,l,d]);let wE=(()=>{class n{constructor(t,r,i,a,l,d,f,_,T,D,P,O){const V=new bs.x,Q=yt(void 0).pipe((0,KT.Q)(l.outsideAngular),kn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,St.U)(()=>(0,Br.on)(t,a,r)),(0,St.U)(ve=>MR(ve,a,d,_,T,D,f,P)),WN({bufferSize:1,refCount:!1}));if(sa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yt(null);else{Q.pipe(Do()).subscribe();const He=Q.pipe(kn(ze=>ze.getRedirectResult().then(Nt=>Nt,()=>null)),gn.iC,WN({bufferSize:1,refCount:!1})),Qe=Q.pipe(kn(ze=>new dr.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>ze.onAuthStateChanged(kt=>Nt.next(kt),kt=>Nt.error(kt),()=>Nt.complete()))})))),et=Q.pipe(kn(ze=>new dr.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>ze.onIdTokenChanged(kt=>Nt.next(kt),kt=>Nt.error(kt),()=>Nt.complete()))}))));this.authState=He.pipe(zN(Qe),(0,lR.R)(l.outsideAngular),(0,KT.Q)(l.insideAngular)),this.user=He.pipe(zN(et),(0,lR.R)(l.outsideAngular),(0,KT.Q)(l.insideAngular)),this.idToken=this.user.pipe(kn(ze=>ze?(0,Sn.D)(ze.getIdToken()):yt(null))),this.idTokenResult=this.user.pipe(kn(ze=>ze?(0,Sn.D)(ze.getIdTokenResult()):yt(null))),this.credential=(0,uR.T)(He,V,this.authState.pipe(as(ze=>!ze))).pipe((0,St.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,lR.R)(l.outsideAngular),(0,KT.Q)(l.insideAngular))}return(0,Br.pX)(this,Q,a,{spy:{apply:(ve,He,Qe)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&Qe.then(et=>V.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Br.Dh),g.LFG(Br.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gn.HU),g.LFG(SR,8),g.LFG(AR,8),g.LFG(RR,8),g.LFG(xR,8),g.LFG(PR,8),g.LFG(NR,8),g.LFG(vE,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),SU=(()=>{class n{constructor(){rC.Z.registerVersion("angularfire",gn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[wE]}),n})();function yM(n,e){return function AU(n,e=$f.z){return new dr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function kR(n,e){return yM(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function iC(n,e){return kR(n,e).pipe(qi(void 0),N0(),(0,St.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const f=i.find(T=>T.doc.ref.isEqual(l.ref)),_=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function _M(n,e,t){return iC(n,t).pipe(ii((r,i)=>function xU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return OR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return OR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),M_(),(0,St.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function OR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function vM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class wM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=iC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(qi(void 0),N0(),as(([r,i])=>i.length>0||!r),(0,St.U)(([r,i])=>i),gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vM(e);return _M(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return kR(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(gn.iC)}add(e){return this.ref.add(e)}doc(e){return new EM(this.ref.doc(e),this.afs)}}class EM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=TM(r,t);return new wM(i,a,this.afs)}snapshotChanges(){return function RU(n,e){return yM(n,e).pipe(qi(void 0),N0(),(0,St.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Sn.D)(this.ref.get(e)).pipe(gn.iC)}}class NU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?iC(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),as(t=>t.length>0),gn.iC):iC(this.query,this.afs.schedulers.outsideAngular).pipe(gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vM(e);return _M(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return kR(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),gn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(gn.iC)}}const bM=new g.OlP("angularfire2.enableFirestorePersistence"),IM=new g.OlP("angularfire2.firestore.persistenceSettings"),MU=new g.OlP("angularfire2.firestore.settings"),kU=new g.OlP("angularfire2.firestore.use-emulator");function TM(n,e=(t=>t)){return{query:e(n),ref:n}}let CM=(()=>{class n{constructor(t,r,i,a,l,d,f,_,T,D,P,O,V,Q,ve,He,Qe){this.schedulers=f;const et=(0,Br.on)(t,d,r),ze=T;D&&MR(et,d,P,V,Q,ve,O,He),[this.firestore,this.persistenceEnabled$]=(0,Br.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Nt=d.runOutsideAngular(()=>et.firestore());if(a&&Nt.settings(a),ze&&Nt.useEmulator(...ze),i&&!sa(l)){const kt=()=>{try{return(0,Sn.D)(Nt.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(fn){return"undefined"!=typeof console&&console.warn(fn),yt(!1)}};return[Nt,d.runOutsideAngular(kt)]}return[Nt,yt(!1)]},[a,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=TM(i,r),d=this.schedulers.ngZone.run(()=>a);return new wM(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new NU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new EM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Br.Dh),g.LFG(Br.xv,8),g.LFG(bM,8),g.LFG(MU,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gn.HU),g.LFG(IM,8),g.LFG(kU,8),g.LFG(wE,8),g.LFG(SR,8),g.LFG(AR,8),g.LFG(RR,8),g.LFG(xR,8),g.LFG(PR,8),g.LFG(NR,8),g.LFG(vE,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OU=(()=>{class n{constructor(){rC.Z.registerVersion("angularfire",gn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:bM,useValue:!0},{provide:IM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[CM]}),n})(),cg=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new GD.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(CM),g.LFG(wE),g.LFG(Ki),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cg))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),g._uU(4,"Sign In"),g.qZA(),g.TgZ(5,"div",3),g._UZ(6,"input",4,5),g.qZA(),g.TgZ(8,"div",3),g._UZ(9,"input",6,7),g.qZA(),g.TgZ(11,"div",3)(12,"input",8),g.NdJ("click",function(){g.CHM(i);const l=g.MAs(7),d=g.MAs(10);return r.authService.SignIn(l.value,d.value)}),g.qZA()(),g.TgZ(13,"div",3)(14,"span",9)(15,"span",10),g._uU(16,"Or"),g.qZA()()(),g.TgZ(17,"div",3)(18,"button",11),g.NdJ("click",function(){return r.authService.GoogleAuth()}),g._UZ(19,"i",12),g._uU(20," Log in with Google "),g.qZA()(),g.TgZ(21,"div",13)(22,"span",14),g._uU(23,"Forgot Password?"),g.qZA()()(),g.TgZ(24,"div",15)(25,"span"),g._uU(26,"Don't have an account?"),g.TgZ(27,"span",16),g._uU(28," Sign Up"),g.qZA()()()()()}},directives:[bc],styles:[""]}),n})(),LU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cg))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),g._uU(4,"Sign Up"),g.qZA(),g.TgZ(5,"div",3),g._UZ(6,"input",4,5),g.qZA(),g.TgZ(8,"div",3),g._UZ(9,"input",6,7),g.qZA(),g.TgZ(11,"div",3)(12,"input",8),g.NdJ("click",function(){g.CHM(i);const l=g.MAs(7),d=g.MAs(10);return r.authService.SignUp(l.value,d.value)}),g.qZA()(),g.TgZ(13,"div",3)(14,"span",9)(15,"span",10),g._uU(16,"Or"),g.qZA()()(),g.TgZ(17,"div",3)(18,"button",11),g.NdJ("click",function(){return r.authService.GoogleAuth()}),g._UZ(19,"i",12),g._uU(20," Continue with Google "),g.qZA()()(),g.TgZ(21,"div",13)(22,"span"),g._uU(23,"Already have an account? "),g.TgZ(24,"span",14),g._uU(25,"Log In"),g.qZA()()()()()}},directives:[bc],styles:[""]}),n})();function UU(n,e){if(1&n&&(g.TgZ(0,"div",4)(1,"div",18)(2,"div",19),g._UZ(3,"img",20),g.TgZ(4,"div",21)(5,"h1"),g._uU(6,"Hello: "),g.TgZ(7,"strong"),g._uU(8),g.qZA()(),g.TgZ(9,"p"),g._uU(10,"User ID: "),g.TgZ(11,"strong"),g._uU(12),g.qZA()(),g.TgZ(13,"p"),g._uU(14,"Email: "),g.TgZ(15,"strong"),g._uU(16),g.qZA()(),g.TgZ(17,"p"),g._uU(18,"Email Verified: "),g.TgZ(19,"strong"),g._uU(20),g.qZA()()()()()()),2&n){const t=e.ngIf;g.xp6(3),g.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",g.LSH),g.s9C("alt",t.displayName),g.xp6(5),g.Oqu(t.displayName?t.displayName:"User"),g.xp6(4),g.Oqu(t.uid),g.xp6(4),g.Oqu(t.email),g.xp6(4),g.Oqu(t.emailVerified)}}let BU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cg))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/sanjit-logo.png","alt","Sanjit Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0)(1,"a",1),g._UZ(2,"img",2),g.qZA()(),g.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),g._UZ(10,"i",10),g._uU(11,"User Profile "),g.qZA()(),g.TgZ(12,"li",8)(13,"a",11),g.NdJ("click",function(){return r.authService.SignOut()}),g._UZ(14,"i",12),g._uU(15,"Log out "),g.qZA()()()()(),g.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),g._uU(20,"User Profile"),g.qZA()(),g.YNc(21,UU,21,6,"div",17),g.qZA()()()()),2&t&&(g.xp6(21),g.Q6J("ngIf",r.authService.userData))},directives:[Yr],styles:[""]}),n})(),VU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cg))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),g._uU(4,"Reset Password"),g.qZA(),g.TgZ(5,"p",3),g._uU(6,"Please enter your email address to request a password reset."),g.qZA(),g.TgZ(7,"div",4),g._UZ(8,"input",5,6),g.qZA(),g.TgZ(10,"div",4)(11,"input",7),g.NdJ("click",function(){g.CHM(i);const l=g.MAs(9);return r.authService.ForgotPassword(l.value)}),g.qZA()()(),g.TgZ(12,"div",8)(13,"span"),g._uU(14,"Go back to ? "),g.TgZ(15,"span",9),g._uU(16,"Log In"),g.qZA()()()()()}},directives:[bc],styles:[""]}),n})();function jU(n,e){if(1&n&&(g.TgZ(0,"div",4)(1,"p",9),g._uU(2,"We have sent a confirmation email to "),g.TgZ(3,"strong"),g._uU(4),g.qZA(),g._uU(5,"."),g.qZA(),g.TgZ(6,"p",9),g._uU(7,"Please check your email and click on the link to verfiy your email address."),g.qZA()()),2&n){const t=e.ngIf;g.xp6(4),g.Oqu(t.email)}}let HU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cg))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),g._uU(4,"Thank You for Registering"),g.qZA(),g.YNc(5,jU,8,1,"div",3),g.TgZ(6,"div",4)(7,"button",5),g.NdJ("click",function(){return r.authService.SendVerificationMail()}),g._UZ(8,"i",6),g._uU(9," Resend Verification Email "),g.qZA()()(),g.TgZ(10,"div",7)(11,"span"),g._uU(12,"Go back to?"),g.TgZ(13,"span",8),g._uU(14," Sign in"),g.qZA()()()()()),2&t&&(g.xp6(5),g.Q6J("ngIf",r.authService.userData))},directives:[Yr,bc],styles:[""]}),n})(),$U=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(cg),g.LFG(Ki))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class DM{}class SM{}class ud{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ud?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ud;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ud?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===a.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class qU{encodeKey(e){return AM(e)}encodeValue(e){return AM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zU=/%(\d[a-f0-9])/gi,KU={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function AM(n){return encodeURIComponent(n).replace(zU,(e,t)=>{var r;return null!==(r=KU[t])&&void 0!==r?r:e})}function RM(n){return`${n}`}class Qh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,d]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],f=t.get(l)||[];f.push(d),t.set(l,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Qh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(RM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(RM(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ZU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function xM(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function PM(n){return"undefined"!=typeof Blob&&n instanceof Blob}function NM(n){return"undefined"!=typeof FormData&&n instanceof FormData}class EE{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function YU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ud),this.context||(this.context=new ZU),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new Qh,this.urlWithParams=t}serializeBody(){return null===this.body?null:xM(this.body)||PM(this.body)||NM(this.body)||function QU(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||NM(this.body)?null:PM(this.body)?this.body.type||null:xM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,T=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((P,O)=>P.set(O,e.setHeaders[O]),_)),e.setParams&&(T=Object.keys(e.setParams).reduce((P,O)=>P.set(O,e.setParams[O]),T)),new EE(r,i,l,{params:T,headers:_,context:D,reportProgress:f,responseType:a,withCredentials:d})}}var di=(()=>((di=di||{})[di.Sent=0]="Sent",di[di.UploadProgress=1]="UploadProgress",di[di.ResponseHeader=2]="ResponseHeader",di[di.DownloadProgress=3]="DownloadProgress",di[di.Response=4]="Response",di[di.User=5]="User",di))();class FR{constructor(e,t=200,r="OK"){this.headers=e.headers||new ud,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class LR extends FR{constructor(e={}){super(e),this.type=di.ResponseHeader}clone(e={}){return new LR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sC extends FR{constructor(e={}){super(e),this.type=di.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new sC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class MM extends FR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function UR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let kM=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof EE)a=t;else{let f,_;f=i.headers instanceof ud?i.headers:new ud(i.headers),i.params&&(_=i.params instanceof Qh?i.params:new Qh({fromObject:i.params})),a=new EE(t,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=yt(a).pipe(Co(f=>this.handler.handle(f)));if(t instanceof EE||"events"===i.observe)return l;const d=l.pipe(as(f=>f instanceof sC));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return d.pipe((0,St.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,St.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,St.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,St.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Qh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,UR(i,r))}post(t,r,i={}){return this.request("POST",t,UR(i,r))}put(t,r,i={}){return this.request("PUT",t,UR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(DM))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class OM{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const FM=new g.OlP("HTTP_INTERCEPTORS");let JU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const XU=/^\)\]\}',?\n/;let LM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new dr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((O,V)=>i.setRequestHeader(O,V.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const a=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const O=i.statusText||"OK",V=new ud(i.getAllResponseHeaders()),Q=function eB(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new LR({headers:V,status:i.status,statusText:O,url:Q}),l},f=()=>{let{headers:O,status:V,statusText:Q,url:ve}=d(),He=null;204!==V&&(He=void 0===i.response?i.responseText:i.response),0===V&&(V=He?200:0);let Qe=V>=200&&V<300;if("json"===t.responseType&&"string"==typeof He){const et=He;He=He.replace(XU,"");try{He=""!==He?JSON.parse(He):null}catch(ze){He=et,Qe&&(Qe=!1,He={error:ze,text:He})}}Qe?(r.next(new sC({body:He,headers:O,status:V,statusText:Q,url:ve||void 0})),r.complete()):r.error(new MM({error:He,headers:O,status:V,statusText:Q,url:ve||void 0}))},_=O=>{const{url:V}=d(),Q=new MM({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:V||void 0});r.error(Q)};let T=!1;const D=O=>{T||(r.next(d()),T=!0);let V={type:di.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(V.total=O.total),"text"===t.responseType&&!!i.responseText&&(V.partialText=i.responseText),r.next(V)},P=O=>{let V={type:di.UploadProgress,loaded:O.loaded};O.lengthComputable&&(V.total=O.total),r.next(V)};return i.addEventListener("load",f),i.addEventListener("error",_),i.addEventListener("timeout",_),i.addEventListener("abort",_),t.reportProgress&&(i.addEventListener("progress",D),null!==a&&i.upload&&i.upload.addEventListener("progress",P)),i.send(a),r.next({type:di.Sent}),()=>{i.removeEventListener("error",_),i.removeEventListener("abort",_),i.removeEventListener("load",f),i.removeEventListener("timeout",_),t.reportProgress&&(i.removeEventListener("progress",D),null!==a&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(In))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const BR=new g.OlP("XSRF_COOKIE_NAME"),VR=new g.OlP("XSRF_HEADER_NAME");class UM{}let tB=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=za(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(g.Lbi),g.LFG(BR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),jR=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(UM),g.LFG(VR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),nB=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(FM,[]);this.chain=r.reduceRight((i,a)=>new OM(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(SM),g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),rB=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:jR,useClass:JU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:BR,useValue:t.cookieName}:[],t.headerName?{provide:VR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[jR,{provide:FM,useExisting:jR,multi:!0},{provide:UM,useClass:tB},{provide:BR,useValue:"XSRF-TOKEN"},{provide:VR,useValue:"X-XSRF-TOKEN"}]}),n})(),iB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[kM,{provide:DM,useClass:nB},LM,{provide:SM,useExisting:LM}],imports:[[rB.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),BM=(()=>{class n{constructor(t){this.http=t}getProfile(){return this.http.get("assets/profile.json").toPromise()}getTopSkills(){return this.http.get("assets/top-skills.json").toPromise()}getFeaturedProjects(){return this.http.get("assets/projects.json").toPromise()}getWorkHistory(){return this.http.get("assets/work-experience.json").toPromise()}getBase64CV(){return this.http.get("assets/media/base64/CV.json").toPromise()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(kM))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sB(n,e){if(1&n&&(g.ynx(0),g.TgZ(1,"a",23)(2,"span",24),g._UZ(3,"i",25),g.qZA(),g._uU(4),g.qZA(),g._UZ(5,"br"),g.BQk()),2&n){const t=e.$implicit;g.xp6(1),g.Q6J("href",null==t?null:t.link,g.LSH),g.xp6(2),g.Q6J("ngClass",null==t?null:t.icon),g.xp6(1),g.Oqu(null==t?null:t.name)}}function oB(n,e){if(1&n&&(g.ynx(0),g.TgZ(1,"h5"),g._uU(2),g.qZA(),g.TgZ(3,"p")(4,"small"),g._uU(5),g.qZA()(),g.BQk()),2&n){const t=e.$implicit;g.xp6(2),g.Oqu(null==t?null:t.title),g.xp6(3),g.Oqu(null==t?null:t.meta)}}function aB(n,e){if(1&n&&(g.TgZ(0,"a",26),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.xp6(1),g.Oqu(t)}}function uB(n,e){if(1&n&&(g.TgZ(0,"a",26),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.xp6(1),g.Oqu(t)}}function lB(n,e){if(1&n&&(g.TgZ(0,"div",27)(1,"p")(2,"small"),g._uU(3),g.qZA()(),g.TgZ(4,"h5"),g._uU(5),g.qZA(),g._UZ(6,"p",18),g.YNc(7,uB,2,1,"a",20),g._UZ(8,"hr",28),g.qZA()),2&n){const t=e.$implicit;g.xp6(3),g.Oqu(null==t?null:t.date),g.xp6(2),g.Oqu(null==t?null:t.title),g.xp6(1),g.Q6J("innerHTML",null==t?null:t.description,g.oJD),g.xp6(1),g.Q6J("ngForOf",null==t?null:t.stack)}}const cB=function(n,e){return{"rh-preview-image":n,"rh-preview-image-mobile":e}},dB=function(n){return{"background-image":n}};function hB(n,e){if(1&n&&(g.TgZ(0,"div",29)(1,"div",30)(2,"div",31),g._UZ(3,"div",32),g.qZA(),g.TgZ(4,"div",33)(5,"div",8)(6,"h5",34),g._uU(7),g.qZA(),g._UZ(8,"p",18),g.qZA()()()()),2&n){const t=e.$implicit,r=g.oxw();g.xp6(3),g.Q6J("ngClass",g.WLB(4,cB,!r.showMobileImages,r.showMobileImages))("ngStyle",g.VKq(7,dB,"url("+(null==t?null:t.preview)+")")),g.xp6(4),g.Oqu(null==t?null:t.name),g.xp6(1),g.Q6J("innerHTML",null==t?null:t.description,g.oJD)}}let VM=(()=>{class n{constructor(t){this.dataApi=t,this.showMobileImages=!1}onresize(t){console.log("WINDOW_RESIZE_EVENT",t),this.checkWindowSize()}checkWindowSize(){this.showMobileImages=window.innerWidth<=768}ngOnInit(){var t=this;return(0,he.Z)(function*(){t.checkWindowSize(),t.skills=yield t.dataApi.getTopSkills(),console.log("SKILLS",t.skills),t.featuredProjects=yield t.dataApi.getFeaturedProjects(),console.log("PROJECTS",t.featuredProjects),t.workExperience=yield t.dataApi.getWorkHistory(),console.log("WORK",t.workExperience),t.profile=yield t.dataApi.getProfile(),console.log("PROFILE",t.profile)})()}downloadResume(){var t=this;return(0,he.Z)(function*(){const r=yield t.dataApi.getBase64CV(),i=atob(r.resume),a=new Array(i.length);for(let _=0;_<i.length;_++)a[_]=i.charCodeAt(_);const l=new Uint8Array(a),d=new Blob([l],{type:"application/pdf;base64"}),f=document.createElement("a");f.href=URL.createObjectURL(d),f.setAttribute("download",`${t.profile.name} CV.pdf`.replace(/\s/g,"")),f.click()})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(BM))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],hostBindings:function(t,r){1&t&&g.NdJ("resize",function(a){return r.onresize(a)},!1,g.Jf7)},decls:76,vars:9,consts:[[1,"rh-bg"],[1,"container","mb-4"],[1,"row"],[1,"col-lg-4"],[1,"sticky-top"],[1,"row","mt-3"],[1,"col-lg-12"],[1,"card","rh-card"],[1,"card-body"],[1,"m-0","mb-3"],[1,"col-lg-3"],["alt","...",1,"rh-profile-img",3,"src"],[1,"col-lg-9","my-auto","rh-profile-info"],[1,"m-0"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","mt-1",3,"click"],[1,"ml-2"],[1,"fas","fa-cloud-download-alt"],[1,"card-text",2,"white-space","pre-wrap",3,"innerHTML"],[1,"col-lg-8"],["class","mr-1 rh-skill",4,"ngFor","ngForOf"],["class","mb-2",4,"ngFor","ngForOf"],["class","card mb-3",4,"ngFor","ngForOf"],[3,"href"],[1,"mr-2"],["aria-hidden","true",3,"ngClass"],[1,"mr-1","rh-skill"],[1,"mb-2"],[1,"m-0","mt-3"],[1,"card","mb-3"],[1,"row","no-gutters"],[1,"col-md-4"],[3,"ngClass","ngStyle"],[1,"col-md-8"],[1,"card-title"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h5"),g._uU(10," Personal Information"),g.qZA(),g._UZ(11,"hr",9),g.TgZ(12,"div",2)(13,"div",10),g._UZ(14,"img",11),g.qZA(),g.TgZ(15,"div",12)(16,"h5"),g._uU(17),g.qZA(),g.TgZ(18,"p",13),g._uU(19),g.qZA(),g.YNc(20,sB,6,3,"ng-container",14),g.TgZ(21,"button",15),g.NdJ("click",function(){return r.downloadResume()}),g._uU(22,"Resume"),g.TgZ(23,"span",16),g._UZ(24,"i",17),g.qZA()()()()()()()(),g.TgZ(25,"div",5)(26,"div",6)(27,"div",7)(28,"div",8)(29,"h5"),g._uU(30,"About Me"),g.qZA(),g._UZ(31,"hr",9),g.TgZ(32,"div",2)(33,"div",6),g._UZ(34,"p",18),g.qZA()()()()()()()(),g.TgZ(35,"div",19)(36,"div",5)(37,"div",6)(38,"div",7)(39,"div",8)(40,"h5"),g._uU(41,"Education"),g.qZA(),g._UZ(42,"hr",9),g.TgZ(43,"div",2)(44,"div",6),g.YNc(45,oB,6,2,"ng-container",14),g.qZA()()()()()(),g.TgZ(46,"div",5)(47,"div",6)(48,"div",7)(49,"div",8)(50,"h5"),g._uU(51," My Top Skills"),g.qZA(),g._UZ(52,"hr",9),g.TgZ(53,"div",2)(54,"div",6),g.YNc(55,aB,2,1,"a",20),g.qZA()()()()()(),g.TgZ(56,"div",5)(57,"div",6)(58,"div",7)(59,"div",8)(60,"h5"),g._uU(61," Work History"),g.qZA(),g._UZ(62,"hr",9),g.TgZ(63,"div",2)(64,"div",6),g.YNc(65,lB,9,4,"div",21),g.qZA()()()()()(),g.TgZ(66,"div",5)(67,"div",6)(68,"div",7)(69,"div",8)(70,"h5"),g._uU(71," Featured Projects | Work"),g.qZA(),g._UZ(72,"hr",9),g.TgZ(73,"div",2)(74,"div",6),g.YNc(75,hB,9,9,"div",22),g.qZA()()()()()()()()()()),2&t&&(g.xp6(14),g.Q6J("src",null==r.profile?null:r.profile.avatar,g.LSH),g.xp6(3),g.Oqu(null==r.profile?null:r.profile.name),g.xp6(2),g.hij("",null==r.profile?null:r.profile.location," "),g.xp6(1),g.Q6J("ngForOf",null==r.profile?null:r.profile.socials),g.xp6(14),g.Q6J("innerHTML",null==r.profile?null:r.profile.about,g.oJD),g.xp6(11),g.Q6J("ngForOf",null==r.profile?null:r.profile.education),g.xp6(10),g.Q6J("ngForOf",null==r.skills?null:r.skills.top_skills),g.xp6(10),g.Q6J("ngForOf",null==r.workExperience?null:r.workExperience.work),g.xp6(10),g.Q6J("ngForOf",null==r.featuredProjects?null:r.featuredProjects.projects))},directives:[Cr,ns,Bu],styles:[""]}),n})();const fB=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"home",component:VM},{path:"sign-in",component:FU},{path:"register-user",component:LU},{path:"dashboard",component:BU,canActivate:[$U]},{path:"forgot-password",component:VU},{path:"verify-email-address",component:HU}];let pB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Hf.forRoot(fB)],Hf]}),n})(),gB=(()=>{class n{constructor(){this.title="sanjit-majumdar"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[yc],styles:[""]}),n})();const jM="firebasestorage.googleapis.com",HM="storageBucket";class Gr extends k.ZR{constructor(e,t){super(HR(e),`Firebase Storage: ${t} (${HR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}_codeEquals(e){return HR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function HR(n){return"storage/"+n}function $R(){return new Gr("unknown","An unknown error occurred, please check the error payload for server response.")}function $M(){return new Gr("canceled","User canceled the upload/download.")}function GM(){return new Gr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ly(n){return new Gr("invalid-argument",n)}function qM(){return new Gr("app-deleted","The Firebase app was deleted.")}function WM(n){return new Gr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bE(n,e){return new Gr("invalid-format","String does not match format '"+n+"': "+e)}function IE(n){throw new Gr("internal-error","Internal error: "+n)}class ps{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ps.makeFromUrl(e,t)}catch(i){return new ps(e,"")}if(""===r.path)return r;throw function DB(n){return new Gr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(ze){ze.path_=decodeURIComponent(ze.path)}const D=t.replace(/[.]/g,"\\."),et=[{regex:d,indices:{bucket:1,path:3},postModify:function a(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===jM?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let ze=0;ze<et.length;ze++){const Nt=et[ze],kt=Nt.regex.exec(e);if(kt){let Nr=kt[Nt.indices.path];Nr||(Nr=""),r=new ps(kt[Nt.indices.bucket],Nr),Nt.postModify(r);break}}if(null==r)throw function CB(n){return new Gr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class xB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oC(n){return"string"==typeof n||n instanceof String}function zM(n){return GR()&&n instanceof Blob}function GR(){return"undefined"!=typeof Blob}function qR(n,e,t,r){if(r<e)throw Ly(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ly(`Invalid value for '${n}'. Expected ${t} or less.`)}function ld(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function KM(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Jh||(Jh={})),Jh))();class FB{constructor(e,t,r,i,a,l,d,f,_,T,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=_,this.progressCallback_=T,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,O)=>{this.resolve_=P,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function MB(n){return void 0!==n}(f)?a():a(f)}catch(f){l(f)}else if(null!==d){const f=$R();f.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,f):f)}else l(i.canceled?this.appDelete_?qM():$M():function TB(){return new Gr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new aC(!1,null,!0)):this.backoffId_=function PB(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function f(){return 2===d}let _=!1;function T(...ve){_||(_=!0,e.apply(null,ve))}function D(ve){i=setTimeout(()=>{i=null,n(O,f())},ve)}function P(){a&&clearTimeout(a)}function O(ve,...He){if(_)return void P();if(ve)return P(),void T.call(null,ve,...He);if(f()||l)return P(),void T.call(null,ve,...He);let et;r<64&&(r*=2),1===d?(d=2,et=0):et=1e3*(r+Math.random()),D(et)}let V=!1;function Q(ve){V||(V=!0,P(),!_&&(null!==i?(ve||(d=2),clearTimeout(i),D(0)):ve||(d=1)))}return D(0),a=setTimeout(()=>{l=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new aC(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Jh.NO_ERROR,f=a.getStatus();if(!d||this.isRetryStatusCode_(f)){const T=a.getErrorCode()===Jh.ABORT;return void r(!1,new aC(!1,null,T))}const _=-1!==this.successCodes_.indexOf(f);r(!0,new aC(_,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function NB(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class aC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function $B(...n){const e=function HB(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(GR())return new Blob(n);throw new Gr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class WR{constructor(e,t){this.data=e,this.contentType=t||null}}function zR(n,e){switch(n){case zo.RAW:return new WR(ZM(e));case zo.BASE64:case zo.BASE64URL:return new WR(YM(n,e));case zo.DATA_URL:return new WR(function zB(n){const e=new QM(n);return e.base64?YM(zo.BASE64,e.rest):function WB(n){let e;try{e=decodeURIComponent(n)}catch(t){throw bE(zo.DATA_URL,"Malformed data URL.")}return ZM(e)}(e.rest)}(e),function KB(n){return new QM(n).contentType}(e))}throw $R()}function ZM(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function YM(n,e){switch(n){case zo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw bE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw bE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function qB(n){return atob(n)}(e)}catch(i){throw bE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class QM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw bE(zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function ZB(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ml{constructor(e,t){let r=0,i="";zM(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(zM(this.data_)){const i=function GB(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ml(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ml(r,!0)}}static getBlob(...e){if(GR()){const t=e.map(r=>r instanceof Ml?r.data_:r);return new Ml($B.apply(null,t))}{const t=e.map(l=>oC(l)?zR(zo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new Ml(i,!0)}}uploadData(){return this.data_}}function KR(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function OB(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function JM(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function JB(n,e){return e}class Fs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||JB}}let uC=null;function TE(){if(uC)return uC;const n=[];n.push(new Fs("bucket")),n.push(new Fs("generation")),n.push(new Fs("metageneration")),n.push(new Fs("name","fullPath",!0));const t=new Fs("name");t.xform=function e(a,l){return function XB(n){return!oC(n)||n.length<2?n:JM(n)}(l)},n.push(t);const i=new Fs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Fs("timeCreated")),n.push(new Fs("updated")),n.push(new Fs("md5Hash",null,!0)),n.push(new Fs("cacheControl",null,!0)),n.push(new Fs("contentDisposition",null,!0)),n.push(new Fs("contentEncoding",null,!0)),n.push(new Fs("contentLanguage",null,!0)),n.push(new Fs("contentType",null,!0)),n.push(new Fs("metadata","customMetadata",!0)),uC=n,uC}function XM(n,e,t){const r=KR(e);return null===r?null:function tV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function eV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ps(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function ZR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const ek="prefixes";class kl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ol(n){if(!n)throw $R()}function lC(n,e){return function t(r,i){const a=XM(n,i,e);return Ol(null!==a),a}}function Uy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function bB(){return new Gr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function EB(){return new Gr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function wB(n){return new Gr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function IB(n){return new Gr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function CE(n){const e=Uy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function vB(n){return new Gr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function nk(n,e,t){const i=ld(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new kl(i,"GET",lC(n,t),l);return d.errorHandler=CE(e),d}function aV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=ld(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,T=new kl(d,"GET",function sV(n,e){return function t(r,i){const a=function iV(n,e,t){const r=KR(t);return null===r?null:function rV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[ek])for(const i of t[ek]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ps(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ps(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ol(null!==a),a}}(n,e.bucket),_);return T.urlParams=a,T.errorHandler=Uy(e),T}function ik(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function dV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class cC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function YR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Ol(!1)}return Ol(!!t&&-1!==(e||["active"]).indexOf(t)),t}const gV={STATE_CHANGED:"state_changed"},Ls={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QR(n){switch(n){case"running":case"pausing":case"canceling":return Ls.RUNNING;case"paused":return Ls.PAUSED;case"success":return Ls.SUCCESS;case"canceled":return Ls.CANCELED;default:return Ls.ERROR}}class mV{constructor(e,t,r){if(function kB(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function By(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class _V extends class yV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw IE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw IE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw IE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw IE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw IE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Nu(){return new _V}class uk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=TE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function hV(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=ik(e,r,i),d={name:l.fullPath},f=ld(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=ZR(l,t),V=new kl(f,"POST",function O(Q){let ve;YR(Q);try{ve=Q.getResponseHeader("X-Goog-Upload-URL")}catch(He){Ol(!1)}return Ol(oC(ve)),ve},n.maxUploadRetryTime);return V.urlParams=d,V.headers=T,V.body=D,V.errorHandler=Uy(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function fV(n,e,t,r){const f=new kl(t,"POST",function a(_){const T=YR(_,["active","final"]);let D=null;try{D=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){Ol(!1)}D||Ol(!1);const P=Number(D);return Ol(!isNaN(P)),new cC(P,r.size(),"final"===T)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Uy(e),f}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Nu,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new cC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function pV(n,e,t,r,i,a,l,d){const f=new cC(0,0);if(l?(f.current=l.current,f.total=l.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function AB(){return new Gr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=f.total-f.current;let T=_;i>0&&(T=Math.min(T,i));const D=f.current,V={"X-Goog-Upload-Command":T===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},Q=r.slice(D,D+T);if(null===Q)throw GM();const et=new kl(t,"POST",function ve(ze,Nt){const kt=YR(ze,["active","final"]),fn=f.current+T,Nr=r.size();let Qo;return Qo="final"===kt?lC(e,a)(ze,Nt):null,new cC(fn,Nr,"final"===kt,Qo)},e.maxUploadRetryTime);return et.headers=V,et.body=Q.uploadData(),et.progressCallback=d||null,et.errorHandler=Uy(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Nu,i,a);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=nk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function sk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let et="";for(let ze=0;ze<2;ze++)et+=Math.random().toString().slice(2);return et}();l["Content-Type"]="multipart/related; boundary="+f;const _=ik(e,r,i),T=ZR(_,t),O=Ml.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+f+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===O)throw GM();const V={name:_.fullPath},Q=ld(a,n.host,n._protocol),He=n.maxUploadRetryTime,Qe=new kl(Q,"POST",lC(n,t),He);return Qe.urlParams=V,Qe.headers=l,Qe.body=O.uploadData(),Qe.errorHandler=Uy(e),Qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=$M(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=QR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new mV(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(QR(this._state)){case Ls.SUCCESS:By(this._resolve.bind(null,this.snapshot))();break;case Ls.CANCELED:case Ls.ERROR:By(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(QR(this._state)){case Ls.RUNNING:case Ls.PAUSED:e.next&&By(e.next.bind(e,this.snapshot))();break;case Ls.SUCCESS:e.complete&&By(e.complete.bind(e))();break;default:e.error&&By(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class dg{constructor(e,t){this._service=e,this._location=t instanceof ps?t:ps.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new dg(e,t)}get root(){const e=new ps(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JM(this._location.path)}get storage(){return this._service}get parent(){const e=function YB(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ps(this._location.bucket,e);return new dg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw WM(e)}}function ck(n,e,t){return JR.apply(this,arguments)}function JR(){return JR=(0,he.Z)(function*(n,e,t){const i=yield dk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield ck(n,e,i.nextPageToken))}),JR.apply(this,arguments)}function dk(n,e){null!=e&&"number"==typeof e.maxResults&&qR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=aV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Nu)}function xV(n){n._throwIfRoot("getDownloadURL");const e=function uV(n,e,t){const i=ld(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new kl(i,"GET",function oV(n,e){return function t(r,i){const a=XM(n,i,e);return Ol(null!==a),function nV(n,e,t,r){const i=KR(e);if(null===i||!oC(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(_=>{const D=n.fullPath;return ld("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+KM({alt:"media",token:_})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=CE(e),d}(n.storage,n._location,TE());return n.storage.makeRequestWithTokens(e,Nu).then(t=>{if(null===t)throw function RB(){return new Gr("no-download-url","The given file does not have any download URLs.")}();return t})}function hk(n,e){const t=function QB(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ps(n._location.bucket,t);return new dg(n.storage,r)}function fk(n,e){if(n instanceof XR){const t=n;if(null==t._bucket)throw function SB(){return new Gr("no-default-bucket","No default bucket found. Did you set the '"+HM+"' property when initializing the app?")}();const r=new dg(t,t._bucket);return null!=e?fk(r,e):r}return void 0!==e?hk(n,e):n}function kV(n,e){if(e&&function NV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof XR)return function MV(n,e){return new dg(n,e)}(n,e);throw Ly("To use ref(service, url), the first argument must be a Storage instance.")}return fk(n,e)}function pk(n,e){const t=null==e?void 0:e[HM];return null==t?null:ps.makeFromBucketSpec(t,n)}class XR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=jM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ps.makeFromBucketSpec(i,this._host):pk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ps.makeFromBucketSpec(this._url,e):pk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,he.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,he.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new xB(qM());{const a=function jB(n,e,t,r,i,a){const l=KM(n.urlParams),d=n.url+l,f=Object.assign({},n.headers);return function BB(n,e){e&&(n["X-Firebase-GMPID"]=e)}(f,e),function LB(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(f,t),function UB(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(f,a),function VB(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(f,r),new FB(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,he.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const gk="@firebase/storage";function _k(n,e){return kV(n=(0,k.m9)(n),e)}function qV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new XR(t,r,i,e,Zi.SDK_VERSION)}!function WV(){(0,Zi._registerComponent)(new io.wA("storage",qV,"PUBLIC").setMultipleInstances(!0)),(0,Zi.registerVersion)(gk,"0.9.5",""),(0,Zi.registerVersion)(gk,"0.9.5","esm2017")}();class dC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class vk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new dC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new dC(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new dC(l,this,this._ref)):{next:t.next?l=>t.next(new dC(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class wk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new cd(e,this._service))}get items(){return this._delegate.items.map(e=>new cd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class cd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function $V(n,e){return hk(n,e)}(this._delegate,e);return new cd(t,this.storage)}get root(){return new cd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new cd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new vk(function FV(n,e,t){return function CV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new uk(n,new Ml(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=zo.RAW,r){this._throwIfRoot("putString");const i=zR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new vk(new uk(this._delegate,new Ml(i.data,!0),a),this)}listAll(){return function VV(n){return function SV(n){const e={prefixes:[],items:[]};return ck(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new wk(e,this.storage))}list(e){return function BV(n,e){return dk(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new wk(t,this.storage))}getMetadata(){return function LV(n){return function AV(n){n._throwIfRoot("getMetadata");const e=nk(n.storage,n._location,TE());return n.storage.makeRequestWithTokens(e,Nu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function UV(n,e){return function RV(n,e){n._throwIfRoot("updateMetadata");const t=function lV(n,e,t,r){const a=ld(e.fullServerUrl(),n.host,n._protocol),d=ZR(t,r),_=n.maxOperationRetryTime,T=new kl(a,"PATCH",lC(n,r),_);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=d,T.errorHandler=CE(e),T}(n.storage,n._location,e,TE());return n.storage.makeRequestWithTokens(t,Nu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function jV(n){return xV(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function HV(n){return function PV(n){n._throwIfRoot("deleteObject");const e=function cV(n,e){const r=ld(e.fullServerUrl(),n.host,n._protocol),d=new kl(r,"DELETE",function l(f,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=CE(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Nu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw WM(e)}}class Ek{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(bk(e))throw Ly("ref() expected a child path but got a URL, use refFromURL instead.");return new cd(_k(this._delegate,e),this)}refFromURL(e){if(!bk(e))throw Ly("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ps.makeFromUrl(e,this._delegate.host)}catch(t){throw Ly("refFromUrl() expected a valid full URL but got an invalid one.")}return new cd(_k(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function GV(n,e,t,r={}){!function OV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function bk(n){return/^[A-Za-z]+:\/\//.test(n)}function YV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Ek(t,r)}function Ik(n){const e=function JV(n){return new dr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function mB(n,e=$f.z){return(0,hr.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const _=a;a=null,r.next(_)}};function f(){const _=l+n,T=e.now();if(T<_)return i=this.schedule(void 0,_-T),void r.add(i);d()}t.subscribe((0,An.x)(r,_=>{a=_,l=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,St.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function hC(n){return{getDownloadURL:()=>yt(void 0).pipe(gn.fc,kn(()=>n.getDownloadURL()),gn.iC),getMetadata:()=>yt(void 0).pipe(gn.fc,kn(()=>n.getMetadata()),gn.iC),delete:()=>(0,Sn.D)(n.delete()),child:e=>hC(n.child(e)),updateMetadata:e=>(0,Sn.D)(n.updateMetadata(e)),put:(e,t)=>Ik(n.put(e,t)),putString:(e,t,r)=>Ik(n.putString(e,t,r)),list:e=>(0,Sn.D)(n.list(e)),listAll:()=>(0,Sn.D)(n.listAll())}}!function QV(n){const e={TaskState:Ls,TaskEvent:gV,StringFormat:zo,Storage:Ek,Reference:cd};n.INTERNAL.registerComponent(new io.wA("storage-compat",YV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(k_.Z);const XV=new g.OlP("angularfire2.storageBucket"),e2=new g.OlP("angularfire2.storage.maxUploadRetryTime"),t2=new g.OlP("angularfire2.storage.maxOperationRetryTime"),n2=new g.OlP("angularfire2.storage.use-emulator");let r2=(()=>{class n{constructor(t,r,i,a,l,d,f,_,T,D){const P=(0,Br.on)(t,l,r);this.storage=(0,Br.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const O=l.runOutsideAngular(()=>P.storage(i||void 0)),V=T;return V&&O.useEmulator(...V),f&&O.setMaxUploadRetryTime(f),_&&O.setMaxOperationRetryTime(_),O},[f,_])}ref(t){return hC(this.storage.ref(t))}refFromURL(t){return hC(this.storage.refFromURL(t))}upload(t,r,i){return hC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Br.Dh),g.LFG(Br.xv,8),g.LFG(XV,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gn.HU),g.LFG(e2,8),g.LFG(t2,8),g.LFG(n2,8),g.LFG(vE,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),i2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),s2=(()=>{class n{constructor(){rC.Z.registerVersion("angularfire",gn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[r2],imports:[i2]}),n})();var o2=L(5032);const Tk="@firebase/database";let ex="";function Dk(n){ex=n}class l2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class c2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Sk=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l2(e)}}catch(e){}return new c2},hg=Sk("localStorage"),tx=Sk("sessionStorage"),Vy=new Uo.Yd("@firebase/database"),Ak=function(){let n=1;return function(){return n++}}(),Rk=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},DE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=DE.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let fg=null,xk=!0;const Pk=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Vy.logLevel=Uo.in.VERBOSE,fg=Vy.log.bind(Vy),e&&tx.set("logging_enabled",!0)):"function"==typeof n?fg=n:(fg=null,tx.remove("logging_enabled"))},Fi=function(...n){if(!0===xk&&(xk=!1,null===fg&&!0===tx.get("logging_enabled")&&Pk(!0)),fg){const e=DE.apply(null,n);fg(e)}},SE=function(n){return function(...e){Fi(n,...e)}},nx=function(...n){const e="FIREBASE INTERNAL ERROR: "+DE(...n);Vy.error(e)},Fl=function(...n){const e=`FIREBASE FATAL ERROR: ${DE(...n)}`;throw Vy.error(e),new Error(e)},Us=function(...n){const e="FIREBASE WARNING: "+DE(...n);Vy.warn(e)},fC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},dd="[MIN_NAME]",Ll="[MAX_NAME]",pg=function(n,e){if(n===e)return 0;if(n===dd||e===Ll)return-1;if(e===dd||n===Ll)return 1;{const t=pC(n),r=pC(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},f2=function(n,e){return n===e?0:n<e?-1:1},AE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},rx=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=rx(n[e[r]]);return t+="}",t},Nk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Mk=function(n){(0,k.hu)(!fC(n),"Invalid JSON number");const r=1023;let i,a,l,d,f;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(f=52;f;f-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(f=11;f;f-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(i?1:0),_.reverse();const T=_.join("");let D="";for(f=0;f<64;f+=8){let P=parseInt(T.substr(f,8),2).toString(16);1===P.length&&(P="0"+P),D+=P}return D.toLowerCase()},y2=new RegExp("^-?(0*)\\d{1,10}$"),kk=-2147483648,ix=2147483647,pC=function(n){if(y2.test(n)){const e=Number(n);if(e>=kk&&e<=ix)return e}return null},jy=function(n){try{n()}catch(e){setTimeout(()=>{throw Us("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},RE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class v2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class w2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Fi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Us(e)}}let xE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Bk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jk="websocket",Hk="long_polling";class ox{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function $k(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===jk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Hk)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function b2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Li(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class I2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const ax={},ux={};function lx(n){const e=n.toString();return ax[e]||(ax[e]=new I2),ax[e]}class C2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&jy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Hy{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SE(e),this.stats_=lx(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),$k(t,Hk,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new C2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cx((...a)=>{const[l,d,f,_,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=f;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Bk.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hy.forceAllow_=!0}static forceDisallow(){Hy.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!Hy.forceAllow_&&(Hy.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=Nk(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ak(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=cx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Fi("frame writing exception"),d.stack&&Fi(d.stack),Fi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Fi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let PE=null;"undefined"!=typeof MozWebSocket?PE=MozWebSocket:"undefined"!=typeof WebSocket&&(PE=WebSocket);let NE=(()=>{class n{constructor(t,r,i,a,l,d,f){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SE(this.connId),this.stats_=lx(r),this.connURL=n.connectionURL_(r,d,f,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&Bk.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),$k(t,jk,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hg.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${ex}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(a.proxy={origin:d}),this.mySock=new PE(this.connURL,[],a)}else this.mySock=new PE(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==PE&&!n.forceDisallow_}static previouslyFailed(){return hg.isInMemoryStorage||!0===hg.get("previous_websocket_failure")}markConnectionHealthy(){hg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Nk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class dx{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Hy,NE]}initTransports_(e){const t=NE&&NE.isAvailable();let r=t&&!NE.previouslyFailed();if(e.webSocketOnly&&(t||Us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[NE];else{const i=this.transports_=[];for(const a of dx.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class nO{constructor(e,t,r,i,a,l,d,f,_,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SE("c:"+this.id+":"),this.transportManager_=new dx(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=RE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=AE("t",e),r=AE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=AE("t",e),r=AE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=AE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),RE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):RE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class rO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class iO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class mC extends iO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mC}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Dn(){return new Nn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Xh(n){return n.pieces_.length-n.pieceNum_}function Jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function fx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ME(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function aO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function br(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Nn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function Bs(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return Bs(Jn(n),Jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function z2(n,e){const t=ME(n,0),r=ME(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=pg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function px(n,e){if(Xh(n)!==Xh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Va(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Xh(n)>Xh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class K2{constructor(e,t){this.errorPrefix_=t,this.parts_=ME(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);uO(this)}}function uO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gg(n))}function gg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class gx extends iO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gx}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kE=1e3;let _C,mg=(()=>{class n extends rO{constructor(t,r,i,a,l,d,f,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=SE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&mC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:d=>{const f=d.d;"ok"===d.s?(this.onDataUpdate_(i.p,f,!1,null),r.resolve(f)):r.reject(f)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[l];void 0===d||a!==d||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const f={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,f=>{const _=f.d,T=f.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",f),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nx("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,he.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,_=null;const T=function(){_?_.close():(f=!0,a())};t.realtime_={close:T,sendRequest:function(O){(0,k.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(O)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,V]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);f?Fi("getToken() completed but was canceled"):(Fi("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=V&&V.token,_=new nO(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Q=>{Us(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),f||(t.repoInfo_.nodeAdmin&&Us(O),T())}}})()}interrupt(t){Fi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Fi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>rx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Nn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Fi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Fi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ex.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=mC.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new un(e,t)}}class yC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new un(dd,e),i=new un(dd,t);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class dO extends yC{static get __EMPTY_NODE(){return _C}static set __EMPTY_NODE(e){_C=e}compare(e,t){return pg(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return un.MIN}maxPost(){return new un(Ll,_C)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new un(e,_C)}toString(){return".key"}}const Ul=new dO;class vC{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yx,Mu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ho.EMPTY_NODE,this.right=null!=l?l:ho.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ho.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ho.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ho{constructor(e,t=ho.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ho(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Mu.BLACK,null,null))}remove(e){return new ho(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new vC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new vC(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new vC(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new vC(this.root_,null,this.comparator_,!0,e)}}function rj(n,e){return pg(n.name,e.name)}function mx(n,e){return pg(n,e)}ho.EMPTY_NODE=new class nj{copy(e,t,r,i,a){return this}insert(e,t,r){return new Mu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hO=function(n){return"number"==typeof n?"number:"+Mk(n):"string:"+n},fO=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===yx||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===yx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pO,gO,mO,$y=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),fO(this.priorityNode_)}static set __childrenNodeConstructor(t){pO=t}static get __childrenNodeConstructor(){return pO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Xh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+hO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Mk(this.value_):this.value_,this.lazyHash_=Rk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const or=new class aj extends yC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?pg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return un.MIN}maxPost(){return new un(Ll,new $y("[PRIORITY-POST]",mO))}makePost(e,t){const r=gO(e);return new un(t,new $y("[PRIORITY-POST]",r))}toString(){return".priority"}},uj=Math.log(2);class lj{constructor(e){this.count=parseInt(Math.log(e+1)/uj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wC=function(n,e,t,r){n.sort(e);const i=function(f,_){const T=_-f;let D,P;if(0===T)return null;if(1===T)return D=n[f],P=t?t(D):D,new Mu(P,D.node,Mu.BLACK,null,null);{const O=parseInt(T/2,10)+f,V=i(f,O),Q=i(O+1,_);return D=n[O],P=t?t(D):D,new Mu(P,D.node,Mu.BLACK,V,Q)}},d=function(f){let _=null,T=null,D=n.length;const P=function(V,Q){const ve=D-V,He=D;D-=V;const Qe=i(ve+1,He),et=n[ve],ze=t?t(et):et;O(new Mu(ze,et.node,Q,null,Qe))},O=function(V){_?(_.left=V,_=V):(T=V,_=V)};for(let V=0;V<f.count;++V){const Q=f.nextBitIsOne(),ve=Math.pow(2,f.count-(V+1));Q?P(ve,Mu.BLACK):(P(ve,Mu.BLACK),P(ve,Mu.RED))}return T}(new lj(n.length));return new ho(r||e,d)};let _x;const Gy={};class hd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Gy&&or,"ChildrenNode.ts has not been loaded"),_x=_x||new hd({".priority":Gy},{".priority":or}),_x}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ho?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Ul,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(un.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?wC(r,e.getCompare()):Gy;const f=e.toString(),_=Object.assign({},this.indexSet_);_[f]=e;const T=Object.assign({},this.indexes_);return T[f]=d,new hd(T,_)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===Gy){if(l.isDefinedOn(e.node)){const d=[],f=t.getIterator(un.Wrap);let _=f.getNext();for(;_;)_.name!==e.name&&d.push(_),_=f.getNext();return d.push(e),wC(d,l.getCompare())}return Gy}{const d=t.get(e.name);let f=i;return d&&(f=f.remove(new un(e.name,d))),f.insert(e,e.node)}});return new hd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===Gy)return i;{const a=t.get(e.name);return a?i.remove(new un(e.name,a)):i}});return new hd(r,this.indexSet_)}}let OE,Qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fO(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return OE||(OE=new n(new ho(mx),null,hd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||OE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?OE:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new un(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?OE:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,k.hu)(".priority"!==sn(t)||1===Xh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Jn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(or,(d,f)=>{r[d]=f.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+hO(this.getPriority().val())+":"),this.forEachChild(or,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Rk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new un(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new un(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new un(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,un.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,un.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===FE?-1:0}withIndex(t){if(t===Ul||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ul||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(or),a=r.getIterator(or);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ul?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const FE=new class cj extends Qt{constructor(){super(new ho(mx),Qt.EMPTY_NODE,hd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qt.EMPTY_NODE}isEmpty(){return!1}};function Pr(n,e=null){if(null===n)return Qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new $y(n,Pr(e));if(n instanceof Array){let t=Qt.EMPTY_NODE;return Li(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Pr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Pr(e))}{const t=[];let r=!1;if(Li(n,(l,d)=>{if("."!==l.substring(0,1)){const f=Pr(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new un(l,f)))}}),0===t.length)return Qt.EMPTY_NODE;const a=wC(t,rj,l=>l.name,mx);if(r){const l=wC(t,or.getCompare());return new Qt(a,Pr(e),new hd({".priority":l},{".priority":or}))}return new Qt(a,Pr(e),hd.Default)}}Object.defineProperties(un,{MIN:{value:new un(dd,Qt.EMPTY_NODE)},MAX:{value:new un(Ll,FE)}}),dO.__EMPTY_NODE=Qt.EMPTY_NODE,$y.__childrenNodeConstructor=Qt,function ij(n){yx=n}(FE),function oj(n){mO=n}(FE),function sj(n){gO=n}(Pr);class vx extends yC{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?pg(e.name,t.name):a}makePost(e,t){const r=Pr(e),i=Qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(t,i)}maxPost(){const e=Qt.EMPTY_NODE.updateChild(this.indexPath_,FE);return new un(Ll,e)}toString(){return ME(this.indexPath_,0).join("/")}}const wx=new class hj extends yC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?pg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,t){const r=Pr(e);return new un(t,r)}toString(){return".value"}},qy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fj=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=qy.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=qy.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),vO=function(n){if(n===""+ix)return"-";const e=pC(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ll;const a=qy.charAt(qy.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},wO=function(n){if(n===""+kk)return dd;const e=pC(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ix:(delete t[t.length-1],t.join("")):(t[t.length-1]=qy.charAt(qy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function EO(n){return{type:"value",snapshotNode:n}}function Wy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function LE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function UE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class bx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(LE(t,d)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Wy(t,r)):l.trackChildChange(UE(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(or,(i,a)=>{t.hasChild(i)||r.trackChildChange(LE(i,a))}),t.isLeafNode()||t.forEachChild(or,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(UE(i,a,l))}else r.trackChildChange(Wy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class BE{constructor(e){this.indexedFilter_=new bx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=BE.getStartPost_(e),this.endPost_=BE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new un(t,r))||(r=Qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Qt.EMPTY_NODE);const a=this;return t.forEachChild(or,(l,d)=>{a.matches(new un(l,d))||(i=i.updateImmediateChild(l,Qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class gj{constructor(e){this.rangedFilter_=new BE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new un(t,r))||(r=Qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Qt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let a,l,d,f;if(i=t.withIndex(this.index_),i=i.updatePriority(Qt.EMPTY_NODE),this.reverse_){f=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(P,O)=>D(O,P)}else f=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,T=!1;for(;f.hasNext();){const D=f.getNext();!T&&d(a,D)<=0&&(T=!0),T&&_<this.limit_&&d(D,l)<=0?_++:i=i.updateImmediateChild(D.name,Qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const D=this.index_.getCompare();l=(P,O)=>D(O,P)}else l=this.index_.getCompare();const d=e;(0,k.hu)(d.numChildren()===this.limit_,"");const f=new un(t,r),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),T=this.rangedFilter_.matches(f);if(d.hasChild(t)){const D=d.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=P&&(P.name===t||d.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const O=null==P?1:l(P,f);if(T&&!r.isEmpty()&&O>=0)return null!=a&&a.trackChildChange(UE(t,r,D)),d.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(LE(t,D));const Q=d.updateImmediateChild(t,Qt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(Wy(P.name,P.node)),Q.updateImmediateChild(P.name,P.node)):Q}}return r.isEmpty()?e:T&&l(_,f)>=0?(null!=a&&(a.trackChildChange(LE(_.name,_.node)),a.trackChildChange(Wy(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(_.name,Qt.EMPTY_NODE)):e}}class EC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=or}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ll}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===or}copy(){const e=new EC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ix(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Tx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function bC(n,e){const t=n.copy();return t.index_=e,t}function bO(n){const e={};if(n.isDefault())return e;let t;return n.index_===or?t="$priority":n.index_===wx?t="$value":n.index_===Ul?t="$key":((0,k.hu)(n.index_ instanceof vx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function IO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==or&&(e.i=n.index_.toString()),e}class IC extends rO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=SE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=IC.getListenId_(e,r),d={};this.listens_[l]=d;const f=bO(e._queryParams);this.restRequest_(a+".json",f,(_,T)=>{let D=T;if(404===_&&(D=null,_=null),null===_&&this.onDataUpdate_(a,D,!1,r),(0,k.DV)(this.listens_,l)===d){let P;P=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(P,null)}})}unlisten(e,t){const r=IC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=bO(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,k.cI)(d.responseText)}catch(_){Us("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&Us("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class Ej{constructor(){this.rootNode_=Qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function TC(){return{value:null,children:new Map}}function zy(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,TC()),zy(n.children.get(r),e=Jn(e),t)}}function Cx(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(or,(r,i)=>{zy(n,new Nn(r),i)}),Cx(n,e)}}if(n.children.size>0){const t=sn(e);return e=Jn(e),n.children.has(t)&&Cx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Dx(n,e,t){null!==n.value?t(e,n.value):function bj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Dx(i,new Nn(e.toString()+"/"+r),t)})}class Ij{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Li(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Dj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ij(e);const r=1e4+2e4*Math.random();RE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Li(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),RE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ja=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ja||(ja={})),ja))();function Rx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class CC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ja.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new CC(Dn(),t,this.revert)}}return(0,k.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new CC(Jn(this.path),this.affectedTree,this.revert)}}class VE{constructor(e,t){this.source=e,this.path=t,this.type=ja.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new VE(this.source,Dn()):new VE(this.source,Jn(this.path))}}class yg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ja.OVERWRITE}operationForChild(e){return on(this.path)?new yg(this.source,Dn(),this.snap.getImmediateChild(e)):new yg(this.source,Jn(this.path),this.snap)}}class Ky{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ja.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new yg(this.source,Dn(),t.value):new Ky(this.source,Dn(),t)}return(0,k.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ky(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ef{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Sj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jE(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,f)=>function xj(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new un(e.childName,e.snapshotNode),i=new un(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),l.forEach(d=>{const f=function Rj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(_=>{_.respondsTo(d.type)&&e.push(_.createEvent(f,n.query_))})})}function DC(n,e){return{eventCache:n,serverCache:e}}function HE(n,e,t,r){return DC(new ef(e,t,r),n.serverCache)}function CO(n,e,t,r){return DC(n.eventCache,new ef(e,t,r))}function SC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function _g(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xx;class ar{constructor(e,t=(()=>(xx||(xx=new ho(f2)),xx))()){this.value=e,this.children=t}static fromObject(e){let t=new ar(null);return Li(e,(r,i)=>{t=t.set(new Nn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Dn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Jn(e),t);return null!=a?{path:br(new Nn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Jn(e)):new ar(null)}}set(e,t){if(on(e))return new ar(t,this.children);{const r=sn(e),a=(this.children.get(r)||new ar(null)).set(Jn(e),t),l=this.children.insert(r,a);return new ar(this.value,l)}}remove(e){if(on(e))return this.children.isEmpty()?new ar(null):new ar(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Jn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new ar(null):new ar(this.value,a)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Jn(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),a=(this.children.get(r)||new ar(null)).setTree(Jn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new ar(this.value,l)}}fold(e){return this.fold_(Dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(br(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const a=sn(e),l=this.children.get(a);return l?l.findOnPath_(Jn(e),br(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Dn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),a=this.children.get(i);return a?a.foreachOnPath_(Jn(e),br(t,i),r):new ar(null)}}foreach(e){this.foreach_(Dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(br(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ku{constructor(e){this.writeTree_=e}static empty(){return new ku(new ar(null))}}function $E(n,e,t){if(on(e))return new ku(new ar(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Bs(i,e);return a=a.updateChild(l,t),new ku(n.writeTree_.set(i,a))}{const i=new ar(t),a=n.writeTree_.setTree(e,i);return new ku(a)}}}function Px(n,e,t){let r=n;return Li(t,(i,a)=>{r=$E(r,br(e,i),a)}),r}function DO(n,e){if(on(e))return ku.empty();{const t=n.writeTree_.setTree(e,new ar(null));return new ku(t)}}function Nx(n,e){return null!=vg(n,e)}function vg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Bs(t.path,e)):null}function SO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(or,(r,i)=>{e.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new un(r,i.value))}),e}function tf(n,e){if(on(e))return n;{const t=vg(n,e);return new ku(null!=t?new ar(t):n.writeTree_.subtree(e))}}function Mx(n){return n.writeTree_.isEmpty()}function Zy(n,e){return AO(Dn(),n.writeTree_,e)}function AO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=AO(br(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(br(n,".priority"),r)),t}}function AC(n,e){return MO(e,n)}function Fj(n,e){if(n.snap)return Va(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Va(br(n.path,t),e))return!0;return!1}function Uj(n){return n.visible}function RO(n,e,t){let r=ku.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)Va(t,l)?(d=Bs(t,l),r=$E(r,d,a.snap)):Va(l,t)&&(d=Bs(l,t),r=$E(r,Dn(),a.snap.getChild(d)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Va(t,l))d=Bs(t,l),r=Px(r,d,a.children);else if(Va(l,t))if(d=Bs(l,t),on(d))r=Px(r,Dn(),a.children);else{const f=(0,k.DV)(a.children,sn(d));if(f){const _=f.getChild(Jn(d));r=$E(r,Dn(),_)}}}}}return r}function xO(n,e,t,r,i){if(r||i){const a=tf(n.visibleWrites,e);return!i&&Mx(a)?t:i||null!=t||Nx(a,Dn())?Zy(RO(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(Va(_.path,e)||Va(e,_.path))},e),t||Qt.EMPTY_NODE):null}{const a=vg(n.visibleWrites,e);if(null!=a)return a;{const l=tf(n.visibleWrites,e);return Mx(l)?t:null!=t||Nx(l,Dn())?Zy(l,t||Qt.EMPTY_NODE):null}}}function RC(n,e,t,r){return xO(n.writeTree,n.treePath,e,t,r)}function kx(n,e){return function Bj(n,e,t){let r=Qt.EMPTY_NODE;const i=vg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(or,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=tf(n.visibleWrites,e);return t.forEachChild(or,(l,d)=>{const f=Zy(tf(a,new Nn(l)),d);r=r.updateImmediateChild(l,f)}),SO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return SO(tf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function PO(n,e,t,r){return function Vj(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=br(e,t);if(Nx(n.visibleWrites,a))return null;{const l=tf(n.visibleWrites,a);return Mx(l)?i.getChild(t):Zy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function xC(n,e){return function Hj(n,e){return vg(n.visibleWrites,e)}(n.writeTree,br(n.treePath,e))}function Ox(n,e,t){return function jj(n,e,t,r){const i=br(e,t),a=vg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Zy(tf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function NO(n,e){return MO(br(n.treePath,e),n.writeTree)}function MO(n,e){return{treePath:n,writeTree:e}}class Wj{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,UE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,LE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Wy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,UE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const kO=new class zj{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Fx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ef(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ox(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:_g(this.viewCache_),a=function qj(n,e,t,r,i,a){return function $j(n,e,t,r,i,a,l){let d;const f=tf(n.visibleWrites,e),_=vg(f,Dn());if(null!=_)d=_;else{if(null==t)return[];d=Zy(f,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const T=[],D=l.getCompare(),P=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let O=P.getNext();for(;O&&T.length<i;)0!==D(O,r)&&T.push(O),O=P.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function OO(n,e,t,r,i,a){const l=e.eventCache;if(null!=xC(r,t))return e;{let d,f;if(on(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=_g(e),D=kx(r,_ instanceof Qt?_:Qt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const _=RC(r,_g(e));d=n.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const _=sn(t);if(".priority"===_){(0,k.hu)(1===Xh(t),"Can't have a priority with additional path components");const T=l.getNode();f=e.serverCache.getNode();const D=PO(r,t,T,f);d=null!=D?n.filter.updatePriority(T,D):l.getNode()}else{const T=Jn(t);let D;if(l.isCompleteForChild(_)){f=e.serverCache.getNode();const P=PO(r,t,l.getNode(),f);D=null!=P?l.getNode().getImmediateChild(_).updateChild(T,P):l.getNode().getImmediateChild(_)}else D=Ox(r,_,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),_,D,T,i,a):l.getNode()}}return HE(e,d,l.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function PC(n,e,t,r,i,a,l,d){const f=e.serverCache;let _;const T=l?n.filter:n.filter.getIndexedFilter();if(on(t))_=T.updateFullNode(f.getNode(),r,null);else if(T.filtersNodes()&&!f.isFiltered()){const O=f.getNode().updateChild(t,r);_=T.updateFullNode(f.getNode(),O,null)}else{const O=sn(t);if(!f.isCompleteForPath(t)&&Xh(t)>1)return e;const V=Jn(t),ve=f.getNode().getImmediateChild(O).updateChild(V,r);_=".priority"===O?T.updatePriority(f.getNode(),ve):T.updateChild(f.getNode(),O,ve,V,kO,null)}const D=CO(e,_,f.isFullyInitialized()||on(t),T.filtersNodes());return OO(n,D,t,i,new Fx(i,D,a),d)}function Lx(n,e,t,r,i,a,l){const d=e.eventCache;let f,_;const T=new Fx(i,e,a);if(on(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,l),f=HE(e,_,!0,n.filter.filtersNodes());else{const D=sn(t);if(".priority"===D)_=n.filter.updatePriority(e.eventCache.getNode(),r),f=HE(e,_,d.isFullyInitialized(),d.isFiltered());else{const P=Jn(t),O=d.getNode().getImmediateChild(D);let V;if(on(P))V=r;else{const Q=T.getCompleteChild(D);V=null!=Q?".priority"===fx(P)&&Q.getChild(aO(P)).isEmpty()?Q:Q.updateChild(P,r):Qt.EMPTY_NODE}f=O.equals(V)?e:HE(e,n.filter.updateChild(d.getNode(),D,V,P,T,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function FO(n,e){return n.eventCache.isCompleteForChild(e)}function LO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ux(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,f=e;_=on(t)?r:new ar(null).setTree(t,r);const T=e.serverCache.getNode();return _.children.inorderTraversal((D,P)=>{if(T.hasChild(D)){const V=LO(0,e.serverCache.getNode().getImmediateChild(D),P);f=PC(n,f,new Nn(D),V,i,a,l,d)}}),_.children.inorderTraversal((D,P)=>{const O=!e.serverCache.isCompleteForChild(D)&&void 0===P.value;if(!T.hasChild(D)&&!O){const Q=LO(0,e.serverCache.getNode().getImmediateChild(D),P);f=PC(n,f,new Nn(D),Q,i,a,l,d)}}),f}class nH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new bx(r.getIndex()),a=function mj(n){return n.loadsAllData()?new bx(n.getIndex()):n.hasLimit()?new gj(n):new BE(n)}(r);this.processor_=function Kj(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,f=i.updateFullNode(Qt.EMPTY_NODE,l.getNode(),null),_=a.updateFullNode(Qt.EMPTY_NODE,d.getNode(),null),T=new ef(f,l.isFullyInitialized(),i.filtersNodes()),D=new ef(_,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=DC(D,T),this.eventGenerator_=new Sj(this.query_)}get query(){return this.query_}}function sH(n,e){const t=_g(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function UO(n){return 0===n.eventRegistrations_.length}function BO(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function VO(n,e,t,r){e.type===ja.MERGE&&null!==e.source.queryId&&((0,k.hu)(_g(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(SC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Yj(n,e,t,r,i){const a=new Wj;let l,d;if(t.type===ja.OVERWRITE){const _=t;_.source.fromUser?l=Lx(n,e,_.path,_.snap,r,i,a):((0,k.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered()&&!on(_.path),l=PC(n,e,_.path,_.snap,r,i,d,a))}else if(t.type===ja.MERGE){const _=t;_.source.fromUser?l=function Jj(n,e,t,r,i,a,l){let d=e;return r.foreach((f,_)=>{const T=br(t,f);FO(e,sn(T))&&(d=Lx(n,d,T,_,i,a,l))}),r.foreach((f,_)=>{const T=br(t,f);FO(e,sn(T))||(d=Lx(n,d,T,_,i,a,l))}),d}(n,e,_.path,_.children,r,i,a):((0,k.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered(),l=Ux(n,e,_.path,_.children,r,i,d,a))}else if(t.type===ja.ACK_USER_WRITE){const _=t;l=_.revert?function tH(n,e,t,r,i,a){let l;if(null!=xC(r,t))return e;{const d=new Fx(r,e,i),f=e.eventCache.getNode();let _;if(on(t)||".priority"===sn(t)){let T;if(e.serverCache.isFullyInitialized())T=RC(r,_g(e));else{const D=e.serverCache.getNode();(0,k.hu)(D instanceof Qt,"serverChildren would be complete if leaf node"),T=kx(r,D)}T=T,_=n.filter.updateFullNode(f,T,a)}else{const T=sn(t);let D=Ox(r,T,e.serverCache);null==D&&e.serverCache.isCompleteForChild(T)&&(D=f.getImmediateChild(T)),_=null!=D?n.filter.updateChild(f,T,D,Jn(t),d,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(f,T,Qt.EMPTY_NODE,Jn(t),d,a):f,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=RC(r,_g(e)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=xC(r,Dn()),HE(e,_,l,n.filter.filtersNodes())}}(n,e,_.path,r,i,a):function Xj(n,e,t,r,i,a,l){if(null!=xC(i,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(on(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return PC(n,e,t,f.getNode().getChild(t),i,a,d,l);if(on(t)){let _=new ar(null);return f.getNode().forEachChild(Ul,(T,D)=>{_=_.set(new Nn(T),D)}),Ux(n,e,t,_,i,a,d,l)}return e}{let _=new ar(null);return r.foreach((T,D)=>{const P=br(t,T);f.isCompleteForPath(P)&&(_=_.set(T,f.getNode().getChild(P)))}),Ux(n,e,t,_,i,a,d,l)}}(n,e,_.path,_.affectedTree,r,i,a)}else{if(t.type!==ja.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function eH(n,e,t,r,i){const a=e.serverCache;return OO(n,CO(e,a.getNode(),a.isFullyInitialized()||on(t),a.isFiltered()),t,r,kO,i)}(n,e,t.path,r,a)}const f=a.getChanges();return function Qj(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=SC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(EO(SC(e)))}}(e,l,f),{viewCache:l,changes:f}}(n.processor_,i,e,t,r);return function Zj(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,jO(n,a.changes,a.viewCache.eventCache.getNode(),null)}function jO(n,e,t,r){return function Aj(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function pj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),jE(n,i,"child_removed",e,r,t),jE(n,i,"child_added",e,r,t),jE(n,i,"child_moved",a,r,t),jE(n,i,"child_changed",e,r,t),jE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let NC,kC;class HO{constructor(){this.views=new Map}}function Bx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),VO(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(VO(l,e,t,r));return a}}function $O(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=RC(t,i?r:null),f=!1;d?f=!0:r instanceof Qt?(d=kx(t,r),f=!1):(d=Qt.EMPTY_NODE,f=!1);const _=DC(new ef(d,f,!1),new ef(r,i,!1));return new nH(e,_)}return l}function GO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function nf(n,e){let t=null;for(const r of n.views.values())t=t||sH(r,e);return t}function qO(n,e){return e._queryParams.loadsAllData()?MC(n):n.views.get(e._queryIdentifier)}function WO(n,e){return null!=qO(n,e)}function rf(n){return null!=MC(n)}function MC(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let gH=1;class zO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ar(null),this.pendingWriteTree_=function Gj(){return{visibleWrites:ku.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Vx(n,e,t,r,i){return function Nj(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=$E(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Yy(n,new yg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function sf(n,e,t=!1){const r=function kj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Oj(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&Fj(d,r.path)?i=!1:Va(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function Lj(n){n.visibleWrites=RO(n.allWrites,Uj,Dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=DO(n.visibleWrites,r.path):Li(r.children,f=>{n.visibleWrites=DO(n.visibleWrites,br(r.path,f))}),!0))}(n.pendingWriteTree_,e)){let a=new ar(null);return null!=r.snap?a=a.set(Dn(),!0):Li(r.children,l=>{a=a.set(new Nn(l),!0)}),Yy(n,new CC(r.path,a,t))}return[]}function GE(n,e,t){return Yy(n,new yg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function jx(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||WO(a,e))){const d=function hH(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=rf(n);if("default"===i)for(const[f,_]of n.views.entries())l=l.concat(BO(_,t,r)),UO(_)&&(n.views.delete(f),_.query._queryParams.loadsAllData()||a.push(_.query));else{const f=n.views.get(i);f&&(l=l.concat(BO(f,t,r)),UO(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||a.push(f.query)))}return d&&!rf(n)&&a.push(new(function lH(){return(0,k.hu)(NC,"Reference.ts has not been loaded"),NC}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function cH(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const f=d.removed;l=d.events;const _=-1!==f.findIndex(D=>D._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(D,P)=>rf(P));if(_&&!T){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const P=function IH(n){return n.fold((e,t,r)=>{if(t&&rf(t))return[MC(t)];{let i=[];return t&&(i=GO(t)),Li(r,(a,l)=>{i=i.concat(l)}),i}})}(D);for(let O=0;O<P.length;++O){const V=P[O],Q=V.query,ve=QO(n,V);n.listenProvider_.startListening(qE(Q),FC(n,Q),ve.hashFn,ve.onComplete)}}}!T&&f.length>0&&!r&&(_?n.listenProvider_.stopListening(qE(e),null):f.forEach(D=>{const P=n.queryToTagMap.get(LC(D));n.listenProvider_.stopListening(qE(D),P)})),function TH(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=LC(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,f)}return l}function KO(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(D,P)=>{const O=Bs(D,r);i=i||nf(P,O),a=a||rf(P)});let d,l=n.syncPointTree_.get(r);l?(a=a||rf(l),i=i||nf(l,Dn())):(l=new HO,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?d=!0:(d=!1,i=Qt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,O)=>{const V=nf(O,Dn());V&&(i=i.updateImmediateChild(P,V))}));const f=WO(l,e);if(!f&&!e._queryParams.loadsAllData()){const D=LC(e);(0,k.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const P=function CH(){return gH++}();n.queryToTagMap.set(D,P),n.tagToQueryMap.set(P,D)}let T=function dH(n,e,t,r,i,a){const l=$O(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function oH(n,e){n.eventRegistrations_.push(e)}(l,t),function aH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(or,(a,l)=>{r.push(Wy(a,l))}),t.isFullyInitialized()&&r.push(EO(t.getNode())),jO(n,r,t.getNode(),e)}(l,t)}(l,e,t,AC(n.pendingWriteTree_,r),i,d);if(!f&&!a){const D=qO(l,e);T=T.concat(function DH(n,e,t){const r=e._path,i=FC(n,e),a=QO(n,t),l=n.listenProvider_.startListening(qE(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!rf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((_,T,D)=>{if(!on(_)&&T&&rf(T))return[MC(T).query];{let P=[];return T&&(P=P.concat(GO(T).map(O=>O.query))),Li(D,(O,V)=>{P=P.concat(V)}),P}});for(let _=0;_<f.length;++_){const T=f[_];n.listenProvider_.stopListening(qE(T),FC(n,T))}}return l}(n,e,D))}return T}function OC(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const _=nf(d,Bs(l,e));if(_)return _});return xO(i,e,a,t,!0)}function Yy(n,e){return ZO(e,n.syncPointTree_,null,AC(n.pendingWriteTree_,Dn()))}function ZO(n,e,t,r){if(on(n.path))return YO(n,e,t,r);{const i=e.get(Dn());null==t&&null!=i&&(t=nf(i,Dn()));let a=[];const l=sn(n.path),d=n.operationForChild(l),f=e.children.get(l);if(f&&d){const _=t?t.getImmediateChild(l):null,T=NO(r,l);a=a.concat(ZO(d,f,_,T))}return i&&(a=a.concat(Bx(i,n,r,t))),a}}function YO(n,e,t,r){const i=e.get(Dn());null==t&&null!=i&&(t=nf(i,Dn()));let a=[];return e.children.inorderTraversal((l,d)=>{const f=t?t.getImmediateChild(l):null,_=NO(r,l),T=n.operationForChild(l);T&&(a=a.concat(YO(T,d,f,_)))}),i&&(a=a.concat(Bx(i,n,r,t))),a}function QO(n,e){const t=e.query,r=FC(n,t);return{hashFn:()=>(function rH(n){return n.viewCache_.serverCache.getNode()}(e)||Qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function vH(n,e,t){const r=Hx(n,t);if(r){const i=$x(r),a=i.path,l=i.queryId,d=Bs(a,e);return Gx(n,a,new VE(Rx(l),d))}return[]}(n,t._path,r):function _H(n,e){return Yy(n,new VE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function m2(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return jx(n,t,null,a)}}}}function FC(n,e){const t=LC(e);return n.queryToTagMap.get(t)}function LC(n){return n._path.toString()+"$"+n._queryIdentifier}function Hx(n,e){return n.tagToQueryMap.get(e)}function $x(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function Gx(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),Bx(r,t,AC(n.pendingWriteTree_,e),null)}function qE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function pH(){return(0,k.hu)(kC,"Reference.ts has not been loaded"),kC}())(n._repo,n._path):n}class qx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qx(t)}node(){return this.node_}}class Wx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=br(this.path_,e);return new Wx(this.syncTree_,t)}node(){return OC(this.syncTree_,this.path_)}}const JO=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?AH(n[".sv"],e,t):"object"==typeof n[".sv"]?RH(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},AH=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},RH=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},XO=function(n,e,t,r){return Kx(e,new Wx(t,n),r)},zx=function(n,e,t){return Kx(n,new qx(e),t)};function Kx(n,e,t){const r=n.getPriority().val(),i=JO(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=JO(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new $y(d,Pr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new $y(i))),l.forEachChild(or,(d,f)=>{const _=Kx(f,e.getImmediateChild(d),t);_!==f&&(a=a.updateImmediateChild(d,_))}),a}}class Zx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function UC(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,i=sn(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new Zx(i,r,a),t=Jn(t),i=sn(t)}return r}function wg(n){return n.node.value}function Yx(n,e){n.node.value=e,Qx(n)}function e1(n){return n.node.childCount>0}function BC(n,e){Li(n.node.children,(t,r)=>{e(new Zx(t,n,r))})}function t1(n,e,t,r){t&&!r&&e(n),BC(n,i=>{t1(i,e,!0,r)}),t&&r&&e(n)}function WE(n){return new Nn(null===n.parent?n.name:WE(n.parent)+"/"+n.name)}function Qx(n){null!==n.parent&&function NH(n,e,t){const r=function xH(n){return void 0===wg(n)&&!e1(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Qx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Qx(n))}(n.parent,n.name,n)}const MH=/[\[\].#$\/\u0000-\u001F\u007F]/,kH=/[\[\].#$\u0000-\u001F\u007F]/,Jx=10485760,VC=function(n){return"string"==typeof n&&0!==n.length&&!MH.test(n)},n1=function(n){return"string"==typeof n&&0!==n.length&&!kH.test(n)},zE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!fC(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Bl=function(n,e,t,r){r&&void 0===e||KE((0,k.gK)(n,"value"),e,t)},KE=function(n,e,t){const r=t instanceof Nn?new K2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+gg(r));if("function"==typeof e)throw new Error(n+"contains a function "+gg(r)+" with contents = "+e.toString());if(fC(e))throw new Error(n+"contains "+e.toString()+" "+gg(r));if("string"==typeof e&&e.length>Jx/3&&(0,k.ug)(e)>Jx)throw new Error(n+"contains a string greater than "+Jx+" utf8 bytes "+gg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Li(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!VC(l)))throw new Error(n+" contains an invalid key ("+l+") "+gg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Z2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),uO(n)})(r,l),KE(n,d,r),function Y2(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+gg(r)+" in addition to actual children.")}},r1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Li(e,(l,d)=>{const f=new Nn(l);if(KE(i,d,br(t,f)),".priority"===fx(f)&&!zE(d))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=ME(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!VC(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(z2);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Va(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Xx=function(n,e,t){if(!t||void 0!==e){if(fC(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zE(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ZE=function(n,e,t,r){if(!(r&&void 0===t||VC(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},YE=function(n,e,t,r){if(!(r&&void 0===t||n1(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ha=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},i1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!VC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),n1(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class UH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!px(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function eP(n,e,t){jC(n,t),s1(n,r=>px(r,e))}function $a(n,e,t){jC(n,t),s1(n,r=>Va(r,e)||Va(e,r))}function s1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(BH(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function BH(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();fg&&Fi("event: "+t.toString()),jy(r)}}}const o1="repo_interrupt";class jH{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=TC(),this.transactionQueueTree_=new Zx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function a1(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function QE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:a1(n)})}function u1(n,e,t,r,i){n.dataUpdateCount++;const a=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const f=(0,k.UI)(t,_=>Pr(_));l=function EH(n,e,t,r){const i=Hx(n,r);if(i){const a=$x(i),l=a.path,d=a.queryId,f=Bs(l,e),_=ar.fromObject(t);return Gx(n,l,new Ky(Rx(d),f,_))}return[]}(n.serverSyncTree_,a,f,i)}else{const f=Pr(t);l=function wH(n,e,t,r){const i=Hx(n,r);if(null!=i){const a=$x(i),l=a.path,d=a.queryId,f=Bs(l,e);return Gx(n,l,new yg(Rx(d),f,t))}return[]}(n.serverSyncTree_,a,f,i)}else if(r){const f=(0,k.UI)(t,_=>Pr(_));l=function yH(n,e,t){const r=ar.fromObject(t);return Yy(n,new Ky({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,f)}else{const f=Pr(t);l=GE(n.serverSyncTree_,a,f)}let d=a;l.length>0&&(d=Jy(n,a)),$a(n.eventQueue_,d,l)}function l1(n,e){tP(n,"connected",e),!1===e&&function WH(n){Qy(n,"onDisconnectEvents");const e=QE(n),t=TC();Dx(n.onDisconnect_,Dn(),(i,a)=>{const l=XO(i,a,n.serverSyncTree_,e);zy(t,i,l)});let r=[];Dx(t,Dn(),(i,a)=>{r=r.concat(GE(n.serverSyncTree_,i,a));const l=sP(n,i);Jy(n,l)}),n.onDisconnect_=TC(),$a(n.eventQueue_,Dn(),r)}(n)}function tP(n,e,t){const r=new Nn("/.info/"+e),i=Pr(t);n.infoData_.updateSnapshot(r,i);const a=GE(n.infoSyncTree_,r,i);$a(n.eventQueue_,r,a)}function HC(n){return n.nextWriteId_++}function nP(n,e,t,r,i){Qy(n,"set",{path:e.toString(),value:t,priority:r});const a=QE(n),l=Pr(t,r),d=OC(n.serverSyncTree_,e),f=zx(l,d,a),_=HC(n),T=Vx(n.serverSyncTree_,e,f,_,!0);jC(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(P,O)=>{const V="ok"===P;V||Us("set at "+e+" failed: "+P);const Q=sf(n.serverSyncTree_,_,!V);$a(n.eventQueue_,e,Q),af(0,i,P,O)});const D=sP(n,e);Jy(n,D),$a(n.eventQueue_,D,[])}function zH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Cx(n.onDisconnect_,e),af(0,t,r,i)})}function c1(n,e,t,r){const i=Pr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&zy(n.onDisconnect_,e,i),af(0,r,a,l)})}function rP(n,e,t){let r;r=".info"===sn(e._path)?jx(n.infoSyncTree_,e,t):jx(n.serverSyncTree_,e,t),eP(n.eventQueue_,e._path,r)}function d1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(o1)}function Qy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Fi(t,...e)}function af(n,e,t,r){e&&jy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function iP(n,e,t){return OC(n.serverSyncTree_,e,t)||Qt.EMPTY_NODE}function $C(n,e=n.transactionQueueTree_){if(e||GC(n,e),wg(e)){const t=f1(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function XH(n,e,t){const r=t.map(_=>_.currentWriteId),i=iP(n,e,r);let a=i;const l=i.hash();for(let _=0;_<t.length;_++){const T=t[_];(0,k.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const D=Bs(e,T.path);a=a.updateChild(D,T.currentOutputSnapshotRaw)}const d=a.val(!0),f=e;n.server_.put(f.toString(),d,_=>{Qy(n,"transaction put response",{path:f.toString(),status:_});let T=[];if("ok"===_){const D=[];for(let P=0;P<t.length;P++)t[P].status=2,T=T.concat(sf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&D.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();GC(n,UC(n.transactionQueueTree_,e)),$C(n,n.transactionQueueTree_),$a(n.eventQueue_,e,T);for(let P=0;P<D.length;P++)jy(D[P])}else{if("datastale"===_)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Us("transaction at "+f.toString()+" failed: "+_);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=_}Jy(n,e)}},l)}(n,WE(e),t)}else e1(e)&&BC(e,t=>{$C(n,t)})}function Jy(n,e){const t=h1(n,e),r=WE(t);return function e$(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],_=Bs(t,f.path);let D,T=!1;if((0,k.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)T=!0,D=f.abortReason,i=i.concat(sf(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)T=!0,D="maxretry",i=i.concat(sf(n.serverSyncTree_,f.currentWriteId,!0));else{const P=iP(n,f.path,l);f.currentInputSnapshot=P;const O=e[d].update(P.val());if(void 0!==O){KE("transaction failed: Data returned ",O,f.path);let V=Pr(O);"object"==typeof O&&null!=O&&(0,k.r3)(O,".priority")||(V=V.updatePriority(P.getPriority()));const ve=f.currentWriteId,He=QE(n),Qe=zx(V,P,He);f.currentOutputSnapshotRaw=V,f.currentOutputSnapshotResolved=Qe,f.currentWriteId=HC(n),l.splice(l.indexOf(ve),1),i=i.concat(Vx(n.serverSyncTree_,f.path,Qe,f.currentWriteId,f.applyLocally)),i=i.concat(sf(n.serverSyncTree_,ve,!0))}else T=!0,D="nodata",i=i.concat(sf(n.serverSyncTree_,f.currentWriteId,!0))}$a(n.eventQueue_,t,i),i=[],T&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}GC(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)jy(r[d]);$C(n,n.transactionQueueTree_)}(n,f1(n,t),r),r}function h1(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===wg(r);)r=UC(r,t),t=sn(e=Jn(e));return r}function f1(n,e){const t=[];return p1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function p1(n,e,t){const r=wg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);BC(e,i=>{p1(n,i,t)})}function GC(n,e){const t=wg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Yx(e,t.length>0?t:void 0)}BC(e,r=>{GC(n,r)})}function sP(n,e){const t=WE(h1(n,e)),r=UC(n.transactionQueueTree_,e);return function PH(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{oP(n,i)}),oP(n,r),t1(r,i=>{oP(n,i)}),t}function oP(n,e){const t=wg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(sf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Yx(e,void 0):t.length=a+1,$a(n.eventQueue_,WE(e),i);for(let l=0;l<r.length;l++)jy(r[l])}}const aP=function(n,e){const t=r$(n),r=t.namespace;return"firebase.com"===t.domain&&Fl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Fl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ox(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Nn(t.pathString)}},r$=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",f=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let T=n.indexOf("/");-1===T&&(T=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(T,D)),T<D&&(i=function t$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,D)));const P=function n$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Us(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));_=e.indexOf(":"),_>=0?(l="https"===d||"wss"===d,f=parseInt(e.substring(_+1),10)):_=e.length;const O=e.slice(0,_);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const V=e.indexOf(".");r=e.substring(0,V).toLowerCase(),t=e.substring(V+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class g1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class m1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class y1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class _1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return zH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ha("OnDisconnect.remove",this._path);const e=new k.BH;return c1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ha("OnDisconnect.set",this._path),Bl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return c1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ha("OnDisconnect.setWithPriority",this._path),Bl("OnDisconnect.setWithPriority",e,this._path,!1),Xx("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function KH(n,e,t,r,i){const a=Pr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,d)=>{"ok"===l&&zy(n.onDisconnect_,e,a),af(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ha("OnDisconnect.update",this._path),r1("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function ZH(n,e,t,r){if((0,k.xb)(t))return Fi("onDisconnect().update() called with empty data.  Don't do anything."),void af(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Li(t,(l,d)=>{const f=Pr(d);zy(n.onDisconnect_,br(e,l),f)}),af(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:fx(this._path)}get ref(){return new Ga(this._repo,this._path)}get _queryIdentifier(){const e=IO(this._queryParams),t=rx(e);return"{}"===t?"default":t}get _queryObject(){return IO(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof fo))return!1;const t=this._repo===e._repo,r=px(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function W2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function qC(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function uf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ul){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==dd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ll)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===or){if(null!=e&&!zE(e)||null!=t&&!zE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof vx||n.getIndex()===wx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function WC(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ga extends fo{constructor(e,t){super(e,t,new EC,!1)}get parent(){const e=aO(this._path);return null===e?null:new Ga(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Eg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=bg(this.ref,e);return new Eg(this._node.getChild(t),r,or)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Eg(i,bg(this.ref,r),or)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function v1(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?bg(n._root,e):n._root}function w1(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=aP(e,n._repo.repoInfo_.nodeAdmin);i1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Fl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),v1(n,t.path.toString())}function bg(n,e){return null===sn((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),YE("child","path",t,!1)):YE("child","path",e,!1),new Ga(n._repo,br(n._path,e));var t}function uP(n,e){n=(0,k.m9)(n),Ha("set",n._path),Bl("set",e,n._path,!1);const t=new k.BH;return nP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function u$(n,e){r1("update",e,n._path,!1);const t=new k.BH;return function qH(n,e,t,r){Qy(n,"update",{path:e.toString(),value:t});let i=!0;const a=QE(n),l={};if(Li(t,(d,f)=>{i=!1,l[d]=XO(br(e,d),Pr(f),n.serverSyncTree_,a)}),i)Fi("update() called with empty data.  Don't do anything."),af(0,r,"ok",void 0);else{const d=HC(n),f=function mH(n,e,t,r){!function Mj(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Px(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=ar.fromObject(t);return Yy(n,new Ky({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);jC(n.eventQueue_,f),n.server_.merge(e.toString(),t,(_,T)=>{const D="ok"===_;D||Us("update at "+e+" failed: "+_);const P=sf(n.serverSyncTree_,d,!D),O=P.length>0?Jy(n,e):e;$a(n.eventQueue_,O,P),af(0,r,_,T)}),Li(t,_=>{const T=sP(n,br(e,_));Jy(n,T)}),$a(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function l$(n){return function GH(n,e){const t=function bH(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,T)=>{const D=Bs(_,t);r=r||nf(T,D)});let i=n.syncPointTree_.get(t);i?r=r||nf(i,Dn()):(i=new HO,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new ef(r,!0,!1):null;return function iH(n){return SC(n.viewCache_)}($O(i,e,AC(n.pendingWriteTree_,e._path),a?l.getNode():Qt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Pr(r).withIndex(e._queryParams.getIndex()),a=GE(n.serverSyncTree_,e._path,i);return eP(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Qy(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Eg(e,new Ga(n._repo,n._path),n._queryParams.getIndex()))}class zC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new g1("value",this,new Eg(e.snapshotNode,new Ga(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new m1(this,e,t):null}matches(e){return e instanceof zC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class KC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new m1(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=bg(new Ga(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new g1(e.type,this,new Eg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof KC&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function JE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const f=t,_=(T,D)=>{rP(n._repo,n,d),f(T,D)};_.userCallback=t.userCallback,_.context=t.context,t=_}const l=new y1(t,a||void 0),d="value"===e?new zC(l):new KC(e,l);return function YH(n,e,t){let r;r=".info"===sn(e._path)?KO(n.infoSyncTree_,e,t):KO(n.serverSyncTree_,e,t),eP(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>rP(n._repo,n,d)}function lP(n,e,t,r){return JE(n,"value",e,t,r)}function E1(n,e,t,r){return JE(n,"child_added",e,t,r)}function b1(n,e,t,r){return JE(n,"child_changed",e,t,r)}function I1(n,e,t,r){return JE(n,"child_moved",e,t,r)}function T1(n,e,t,r){return JE(n,"child_removed",e,t,r)}function C1(n,e,t){let r=null;const i=t?new y1(t):null;"value"===e?r=new zC(i):e&&(r=new KC(e,i)),rP(n._repo,n,r)}class Ou{}class D1 extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("endAt",this._value,e._path,!0);const t=Tx(e._queryParams,this._value,this._key);if(WC(t),uf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class d$ extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("endBefore",this._value,e._path,!1);const t=function wj(n,e,t){let r,i;return n.index_===Ul?("string"==typeof e&&(e=wO(e)),i=Tx(n,e,t)):(r=null==t?dd:wO(t),i=Tx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(WC(t),uf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class S1 extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("startAt",this._value,e._path,!0);const t=Ix(e._queryParams,this._value,this._key);if(WC(t),uf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class p$ extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bl("startAfter",this._value,e._path,!1);const t=function vj(n,e,t){let r;if(n.index_===Ul)"string"==typeof e&&(e=vO(e)),r=Ix(n,e,t);else{let i;i=null==t?Ll:vO(t),r=Ix(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(WC(t),uf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class m$ extends Ou{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function yj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class _$ extends Ou{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function _j(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class w$ extends Ou{constructor(e){super(),this._path=e}_apply(e){qC(e,"orderByChild");const t=new Nn(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new vx(t),i=bC(e._queryParams,r);return uf(i),new fo(e._repo,e._path,i,!0)}}class b$ extends Ou{_apply(e){qC(e,"orderByKey");const t=bC(e._queryParams,Ul);return uf(t),new fo(e._repo,e._path,t,!0)}}class T$ extends Ou{_apply(e){qC(e,"orderByPriority");const t=bC(e._queryParams,or);return uf(t),new fo(e._repo,e._path,t,!0)}}class D$ extends Ou{_apply(e){qC(e,"orderByValue");const t=bC(e._queryParams,wx);return uf(t),new fo(e._repo,e._path,t,!0)}}class A$ extends Ou{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Bl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new D1(this._value,this._key)._apply(new S1(this._value,this._key)._apply(e))}}function Fu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function uH(n){(0,k.hu)(!NC,"__referenceConstructor has already been defined"),NC=n})(Ga),function fH(n){(0,k.hu)(!kC,"__referenceConstructor has already been defined"),kC=n}(Ga);const cP={};function R1(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Fl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,_,l=aP(a,i),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(f=!0,a=`http://${_}?ns=${d.namespace}`,l=aP(a,i),d=l.repoInfo):f=!l.repoInfo.secure;const T=i&&f?new xE(xE.OWNER):new w2(n.name,n.options,e);i1("Invalid Firebase Database URL",l),on(l.path)||Fl("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function M$(n,e,t,r){let i=cP[e.name];i||(i={},cP[e.name]=i);let a=i[n.toURLString()];return a&&Fl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new jH(n,false,t,r),i[n.toURLString()]=a,a}(d,n,T,new v2(n.name,t));return new O$(D,n)}class O${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function HH(n,e,t){if(n.stats_=lx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new IC(n.repoInfo_,(r,i,a,l)=>{u1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>l1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new mg(n.repoInfo_,e,(r,i,a,l)=>{u1(n,r,i,a,l)},r=>{l1(n,r)},r=>{!function $H(n,e){Li(e,(t,r)=>{tP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function T2(n,e){const t=n.toString();return ux[t]||(ux[t]=e()),ux[t]}(n.repoInfo_,()=>new Dj(n.stats_,n.server_)),n.infoData_=new Ej,n.infoSyncTree_=new zO({startListening:(r,i,a,l)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=GE(n.infoSyncTree_,r._path,f),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),tP(n,"connected",!1),n.serverSyncTree_=new zO({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,f)=>{const _=l(d,f);$a(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ga(this._repo,Dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N$(n,e){const t=cP[e];(!t||t[n.key]!==n)&&Fl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),d1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Fl("Cannot call "+e+" on a deleted database.")}}function B$(n,e){Pk(n,e)}const j$={".sv":"timestamp"};class G${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}mg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},mg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function V$(n){Dk(Zi.SDK_VERSION),(0,Zi._registerComponent)(new io.wA("database",(e,{instanceIdentifier:t})=>R1(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Zi.registerVersion)(Tk,"0.12.8",n),(0,Zi.registerVersion)(Tk,"0.12.8","esm2017")}();const K$=new Uo.Yd("@firebase/database-compat"),x1=function(n){K$.warn("FIREBASE WARNING: "+n)};class Q${constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,x1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class J${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class lf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),YE("DataSnapshot.child","path",e,!1),new lf(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),YE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new lf(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ko(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Qi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Qi.getCancelAndContextArgs_("Query.on",r,i),d=(_,T)=>{t.call(l.context,new lf(this.database,_),T)};d.userCallback=t,d.context=l.context;const f=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return lP(this._delegate,d,f),t;case"child_added":return E1(this._delegate,d,f),t;case"child_removed":return T1(this._delegate,d,f),t;case"child_changed":return b1(this._delegate,d,f),t;case"child_moved":return I1(this._delegate,d,f),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,C1(this._delegate,e,i)}else C1(this._delegate,e)}get(){return l$(this._delegate).then(e=>new lf(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Qi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,d=(_,T)=>{const D=new lf(this.database,_);t&&t.call(a.context,D,T),l.resolve(D)};d.userCallback=t,d.context=a.context;const f=_=>{a.cancel&&a.cancel.call(a.context,_),l.reject(_)};switch(e){case"value":lP(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":E1(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":T1(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":b1(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":I1(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Qi(this.database,Fu(this._delegate,function y$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new m$(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Qi(this.database,Fu(this._delegate,function v$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _$(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Qi(this.database,Fu(this._delegate,function E$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return YE("orderByChild","path",n,!1),new w$(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Qi(this.database,Fu(this._delegate,function I$(){return new b$}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Qi(this.database,Fu(this._delegate,function C$(){return new T$}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Qi(this.database,Fu(this._delegate,function S$(){return new D$}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Qi(this.database,Fu(this._delegate,function f$(n=null,e){return ZE("startAt","key",e,!0),new S1(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Qi(this.database,Fu(this._delegate,function g$(n,e){return ZE("startAfter","key",e,!0),new p$(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Qi(this.database,Fu(this._delegate,function c$(n,e){return ZE("endAt","key",e,!0),new D1(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Qi(this.database,Fu(this._delegate,function h$(n,e){return ZE("endBefore","key",e,!0),new d$(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Qi(this.database,Fu(this._delegate,function R$(n,e){return ZE("equalTo","key",e,!0),new A$(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Qi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ko(this.database,new Ga(this._delegate._repo,this._delegate._path))}}class Ko extends Qi{constructor(e,t){super(e,new fo(t._repo,t._path,new EC,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ko(this.database,bg(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ko(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Ko(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=uP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,x1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ha("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=u$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function a$(n,e,t){if(Ha("setWithPriority",n._path),Bl("setWithPriority",e,n._path,!1),Xx("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return nP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function s$(n){return Ha("remove",n._path),uP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function q$(n,e,t){var r;if(n=(0,k.m9)(n),Ha("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,d=lP(n,()=>{});return function JH(n,e,t,r,i,a){Qy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Ak(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=iP(n,e,void 0);l.currentInputSnapshot=d;const f=l.update(d.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{KE("transaction failed: Data returned ",f,l.path),l.status=0;const _=UC(n.transactionQueueTree_,e),T=wg(_)||[];let D;T.push(l),Yx(_,T),"object"==typeof f&&null!==f&&(0,k.r3)(f,".priority")?(D=(0,k.DV)(f,".priority"),(0,k.hu)(zE(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(OC(n.serverSyncTree_,e)||Qt.EMPTY_NODE).getPriority().val();const P=QE(n),O=Pr(f,D),V=zx(O,d,P);l.currentOutputSnapshotRaw=O,l.currentOutputSnapshotResolved=V,l.currentWriteId=HC(n);const Q=Vx(n.serverSyncTree_,e,V,l.currentWriteId,l.applyLocally);$a(n.eventQueue_,e,Q),$C(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,_,T)=>{let D=null;f?a.reject(f):(D=new Eg(T,new Ga(n._repo,n._path),or),a.resolve(new G$(_,D)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new J$(a.committed,new lf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function o$(n,e){n=(0,k.m9)(n),Ha("setPriority",n._path),Xx("setPriority",e,!1);const t=new k.BH;return nP(n._repo,br(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function i$(n,e){n=(0,k.m9)(n),Ha("push",n._path),Bl("push",e,n._path,!0);const t=a1(n._repo),r=fj(t),i=bg(n,r),a=bg(n,r);let l;return l=null!=e?uP(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ko(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Ko(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ha("Reference.onDisconnect",this._delegate._path),new Q$(new _1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class XE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function F$(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Fl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new xE(xE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new xE(l)}!function P$(n,e,t,r){n.repoInfo_=new ox(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Ko){const t=w1(this._delegate,e.toString());return new Ko(this,t)}{const t=v1(this._delegate,e);return new Ko(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=w1(this._delegate,e);return new Ko(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function L$(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),d1(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function U$(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function QH(n){n.persistentConnection_&&n.persistentConnection_.resume(o1)}(n._repo)}(this._delegate)}}XE.ServerValue={TIMESTAMP:function H$(){return j$}(),increment:n=>function $$(n){return{".sv":{increment:n}}}(n)};var eG=Object.freeze({__proto__:null,initStandalone:function X$({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Dk(t);const l=new io.zt("auth-internal",new io.H0("database-standalone"));return l.setComponent(new io.wA("auth-internal",()=>r,"PRIVATE")),{instance:new XE(R1(n,l,void 0,e,a),n),namespace:i}}});const tG=XE.ServerValue;function P1(n){return null==n}function N1(n){return"function"==typeof n.set}function M1(n,e){return N1(e)?e:n.ref(e)}function k1(n,e){if(function rG(n){return"string"==typeof n}(n))return e.stringCase();if(N1(n))return e.firebaseCase();if(function iG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function e0(n,e,t="on",r=$f.z){return new dr.y(i=>{let a=null;return a=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,St.U)(i=>{const{snapshot:a,prevKey:l}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:l,key:d}}),(0,qN.B)())}function O1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function aG(n,e){const{payload:t,prevKey:r,key:i}=e,a=O1(n,i),l=function oG(n,e){if(P1(e))return 0;{const t=O1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const _={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,_],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(f=>f.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function F1(n){return(P1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function L1(n,e,t){return function sG(n,e,t){return e0(n,"value","once",t).pipe(kn(r=>{const i=[yt(r)];return e.forEach(a=>i.push(e0(n,a,"on",t))),(0,uR.T)(...i).pipe(ii(aG,[]))}),M_())}(n,e=F1(e),t)}function U1(n,e,t){const r=(e=F1(e)).map(i=>e0(n,i,"on",t));return(0,uR.T)(...r)}function B1(n,e){return function(r,i){return k1(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function dG(n){return function(t){return t?k1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function V1(n,e){return function(){return e0(n,"value","on",e)}}!function nG(n){n.INTERNAL.registerComponent(new io.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new XE(i,r)},"PUBLIC").setServiceProps({Reference:Ko,Query:Qi,Database:XE,DataSnapshot:lf,enableLogging:B$,INTERNAL:eG,ServerValue:tG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(k_.Z);const pG=new g.OlP("angularfire2.realtimeDatabaseURL"),gG=new g.OlP("angularfire2.database.use-emulator");let j1=(()=>{class n{constructor(t,r,i,a,l,d,f,_,T,D,P,O,V,Q,ve){this.schedulers=d;const He=f,Qe=(0,Br.on)(t,l,r);_&&MR(Qe,l,T,P,O,V,D,Q),this.database=(0,Br.cc)(`${Qe.name}.database.${i}`,"AngularFireDatabase",Qe.name,()=>{const et=l.runOutsideAngular(()=>Qe.database(i||void 0));return He&&et.useEmulator(...He),et},[He])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>M1(this.database,t));let a=i;return r&&(a=r(i)),function hG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:B1(r,"update"),set:B1(r,"set"),push:i=>r.push(i),remove:dG(r),snapshotChanges:i=>L1(n,i,t).pipe(gn.iC),stateChanges:i=>U1(n,i,t).pipe(gn.iC),auditTrail:i=>function uG(n,e,t){return function cG(n,e,t){return function lG(n,e){return e0(n,"value","on",e).pipe((0,St.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function a2(...n){const e=(0,Ur.jO)(n);return(0,hr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),d=!1;for(let f=0;f<i;f++)(0,to.Xf)(n[f]).subscribe((0,An.x)(r,_=>{a[f]=_,!d&&!l[f]&&(l[f]=!0,(d=l.every(Gi.y))&&(l=null))},o2.Z));t.subscribe((0,An.x)(r,f=>{if(d){const _=[f,...a];r.next(e?e(..._):_)}}))})}(e),(0,St.U)(([i,a])=>{const l=i.lastKeyToLoad,d=a.map(f=>f.key);return{actions:a,lastKeyToLoad:l,loadedKeys:d}}),function u2(n){return(0,hr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,An.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,St.U)(i=>i.actions))}(n,U1(n,e).pipe(ii((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(gn.iC),valueChanges:(i,a)=>L1(n,i,t).pipe((0,St.U)(d=>d.map(f=>a&&a.idField?Object.assign(Object.assign({},f.payload.val()),{[a.idField]:f.key}):f.payload.val())),gn.iC)}}(a,this)}object(t){return function fG(n,e){return{query:n,snapshotChanges:()=>V1(n,e.schedulers.outsideAngular)().pipe(gn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>V1(n,e.schedulers.outsideAngular)().pipe(gn.iC,(0,St.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>M1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Br.Dh),g.LFG(Br.xv,8),g.LFG(pG,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(gn.HU),g.LFG(gG,8),g.LFG(wE,8),g.LFG(SR,8),g.LFG(AR,8),g.LFG(RR,8),g.LFG(xR,8),g.LFG(PR,8),g.LFG(NR,8),g.LFG(vE,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mG=(()=>{class n{constructor(){rC.Z.registerVersion("angularfire",gn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[j1]}),n})();const H1_firebase={apiKey:"AIzaSyBimAReq_Vyf35vA3f8YCQ9RTeGm7wEk_U",authDomain:"sanjit-majumdar.firebaseapp.com",databaseURL:"https://sanjit-majumdar-default-rtdb.firebaseio.com",projectId:"sanjit-majumdar",storageBucket:"sanjit-majumdar.appspot.com",messagingSenderId:"555328498816",appId:"1:555328498816:web:80fbc114d0c43960ae4a65",measurementId:"G-5XQLMFS1NN"};class $1{}const fd="*";function G1(n,e=null){return{type:2,steps:n,options:e}}function q1(n){return{type:6,styles:n,offset:null}}function W1(n){Promise.resolve(null).then(n)}class t0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){W1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class z1{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?W1(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++r==a&&this._onDestroy()}),l.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const hn=!1;function K1(n){return new g.vHH(3e3,hn)}function QG(){return"undefined"!=typeof window&&void 0!==window.document}function hP(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function cf(n){switch(n.length){case 0:return new t0;case 1:return n[0];default:return new z1(n)}}function Z1(n,e,t,r,i={},a={}){const l=[],d=[];let f=-1,_=null;if(r.forEach(T=>{const D=T.offset,P=D==f,O=P&&_||{};Object.keys(T).forEach(V=>{let Q=V,ve=T[V];if("offset"!==V)switch(Q=e.normalizePropertyName(Q,l),ve){case"!":ve=i[V];break;case fd:ve=a[V];break;default:ve=e.normalizeStyleValue(V,Q,ve,l)}O[Q]=ve}),P||d.push(O),_=O,f=D}),l.length)throw function VG(n){return new g.vHH(3502,hn)}();return d}function fP(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&pP(t,"start",n)));break;case"done":n.onDone(()=>r(t&&pP(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&pP(t,"destroy",n)))}}function pP(n,e,t){const r=t.totalTime,a=gP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),l=n._data;return null!=l&&(a._data=l),a}function gP(n,e,t,r,i="",a=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!l}}function Zo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function Y1(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let mP=(n,e)=>!1,Q1=(n,e,t)=>[],J1=null;function yP(n){const e=n.parentNode||n.host;return e===J1?null:e}(hP()||"undefined"!=typeof Element)&&(QG()?(J1=(()=>document.documentElement)(),mP=(n,e)=>{for(;e;){if(e===n)return!0;e=yP(e)}return!1}):mP=(n,e)=>n.contains(e),Q1=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ig=null,X1=!1;function eF(n){Ig||(Ig=function XG(){return"undefined"!=typeof document?document.body:null}()||{},X1=!!Ig.style&&"WebkitAppearance"in Ig.style);let e=!0;return Ig.style&&!function JG(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ig.style,!e&&X1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ig.style)),e}const tF=mP,nF=Q1;let rF=(()=>{class n{validateStyleProperty(t){return eF(t)}matchesElement(t,r){return!1}containsElement(t,r){return tF(t,r)}getParentElement(t){return yP(t)}query(t,r,i){return nF(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,l,d=[],f){return new t0(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),_P=(()=>{class n{}return n.NOOP=new rF,n})();const vP="ng-enter",YC="ng-leave",QC="ng-trigger",JC=".ng-trigger",sF="ng-animating",wP=".ng-animating";function Tg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EP(parseFloat(e[1]),e[2])}function EP(n,e){return"s"===e?1e3*n:n}function XC(n,e,t){return n.hasOwnProperty("duration")?n:function nq(n,e,t){let i,a=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(K1()),{duration:0,delay:0,easing:""};i=EP(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(a=EP(parseFloat(f),d[4]));const _=d[5];_&&(l=_)}else i=n;if(!t){let d=!1,f=e.length;i<0&&(e.push(function _G(){return new g.vHH(3100,hn)}()),d=!0),a<0&&(e.push(function vG(){return new g.vHH(3101,hn)}()),d=!0),d&&e.splice(f,0,K1())}return{duration:i,delay:a,easing:l}}(n,e,t)}function Xy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function df(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Xy(n,t);return t}function aF(n,e,t){return t?e+":"+t+";":""}function uF(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=aF(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=aF(0,sq(t),n.style[t]));n.setAttribute("style",e)}function Vl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=IP(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),hP()&&uF(n))}function Cg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=IP(t);n.style[r]=""}),hP()&&uF(n))}function n0(n){return Array.isArray(n)?1==n.length?n[0]:G1(n):n}const bP=new RegExp("{{\\s*(.+?)\\s*}}","g");function lF(n){let e=[];if("string"==typeof n){let t;for(;t=bP.exec(n);)e.push(t[1]);bP.lastIndex=0}return e}function eD(n,e,t){const r=n.toString(),i=r.replace(bP,(a,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(function EG(n){return new g.vHH(3003,hn)}()),d=""),d.toString()});return i==r?n:i}function tD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const iq=/-+([a-z0-9])/g;function IP(n){return n.replace(iq,(...e)=>e[1].toUpperCase())}function sq(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function bG(n){return new g.vHH(3004,hn)}()}}function cF(n,e){return window.getComputedStyle(n)[e]}function dq(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function hq(n,e,t){if(":"==n[0]){const f=function fq(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function FG(n){return new g.vHH(3016,hn)}()),"* => *"}}(n,t);if("function"==typeof f)return void e.push(f);n=f}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function OG(n){return new g.vHH(3015,hn)}()),e;const i=r[1],a=r[2],l=r[3];e.push(dF(i,l));"<"==a[0]&&!("*"==i&&"*"==l)&&e.push(dF(l,i))}(r,t,e)):t.push(n),t}const sD=new Set(["true","1"]),oD=new Set(["false","0"]);function dF(n,e){const t=sD.has(n)||oD.has(n),r=sD.has(e)||oD.has(e);return(i,a)=>{let l="*"==n||n==i,d="*"==e||e==a;return!l&&t&&"boolean"==typeof i&&(l=i?sD.has(n):oD.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?sD.has(e):oD.has(e)),l&&d}}const pq=new RegExp("s*:selfs*,?","g");function TP(n,e,t,r){return new gq(n).build(e,t,r)}class gq{constructor(e){this._driver=e}build(e,t,r){const i=new _q(t);this._resetContextStyleTimingState(i);const a=Yo(this,n0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function TG(){return new g.vHH(3006,hn)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,_=f.name;_.toString().split(/\s*,\s*/).forEach(T=>{f.name=T,a.push(this.visitState(f,t))}),f.name=_}else if(1==d.type){const f=this.visitTransition(d,t);r+=f.queryCount,i+=f.depCount,l.push(f)}else t.errors.push(function CG(){return new g.vHH(3007,hn)}())}),{type:7,name:e.name,states:a,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,l=i||{};r.styles.forEach(d=>{if(aD(d)){const f=d;Object.keys(f).forEach(_=>{lF(f[_]).forEach(T=>{l.hasOwnProperty(T)||a.add(T)})})}}),a.size&&(tD(a.values()),t.errors.push(function DG(n,e){return new g.vHH(3008,hn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Yo(this,n0(e.animation),t);return{type:1,matchers:dq(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Dg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Yo(this,r,t)),options:Dg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(l=>{t.currentTime=r;const d=Yo(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:Dg(e.options)}}visitAnimate(e,t){const r=function wq(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return CP(XC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=CP(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=XC(t,e);return CP(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:q1({});if(5==a.type)i=this.visitKeyframes(a,t);else{let l=e.styles,d=!1;if(!l){d=!0;const _={};r.easing&&(_.easing=r.easing),l=q1(_)}t.currentTime+=r.duration+r.delay;const f=this.visitStyle(l,t);f.isEmptyStep=d,i=f}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==fd?r.push(l):t.errors.push(function SG(n){return new g.vHH(3002,hn)}()):r.push(l)}):r.push(e.styles);let i=!1,a=null;return r.forEach(l=>{if(aD(l)){const d=l,f=d.easing;if(f&&(a=f,delete d.easing),!i)for(let _ in d)if(d[_].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void t.unsupportedCSSPropertiesFound.add(d);const f=t.collectedStyles[t.currentQuerySelector],_=f[d];let T=!0;_&&(a!=i&&a>=_.startTime&&i<=_.endTime&&(t.errors.push(function AG(n,e,t,r,i){return new g.vHH(3010,hn)}()),T=!1),a=_.startTime),T&&(f[d]={startTime:a,endTime:i}),t.options&&function rq(n,e,t){const r=e.params||{},i=lF(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function wG(n){return new g.vHH(3001,hn)}())})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function RG(){return new g.vHH(3011,hn)}()),r;let a=0;const l=[];let d=!1,f=!1,_=0;const T=e.steps.map(He=>{const Qe=this._makeStyleAst(He,t);let et=null!=Qe.offset?Qe.offset:function vq(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(aD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(aD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Qe.styles),ze=0;return null!=et&&(a++,ze=Qe.offset=et),f=f||ze<0||ze>1,d=d||ze<_,_=ze,l.push(ze),Qe});f&&t.errors.push(function xG(){return new g.vHH(3012,hn)}()),d&&t.errors.push(function PG(){return new g.vHH(3200,hn)}());const D=e.steps.length;let P=0;a>0&&a<D?t.errors.push(function NG(){return new g.vHH(3202,hn)}()):0==a&&(P=1/(D-1));const O=D-1,V=t.currentTime,Q=t.currentAnimateTimings,ve=Q.duration;return T.forEach((He,Qe)=>{const et=P>0?Qe==O?1:P*Qe:l[Qe],ze=et*ve;t.currentTime=V+Q.delay+ze,Q.duration=ze,this._validateStyleAst(He,t),He.offset=et,r.styles.push(He)}),r}visitReference(e,t){return{type:8,animation:Yo(this,n0(e.animation),t),options:Dg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Dg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Dg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function mq(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(pq,"")),n=n.replace(/@\*/g,JC).replace(/@\w+/g,t=>JC+"-"+t.substr(1)).replace(/:animating/g,wP),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Zo(t.collectedStyles,t.currentQuerySelector,{});const d=Yo(this,n0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:Dg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function MG(){return new g.vHH(3013,hn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:XC(e.timings,t.errors,!0);return{type:12,animation:Yo(this,n0(e.animation),t),timings:r,options:null}}}class _q{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function aD(n){return!Array.isArray(n)&&"object"==typeof n}function Dg(n){return n?(n=Xy(n)).params&&(n.params=function yq(n){return n?Xy(n):null}(n.params)):n={},n}function CP(n,e,t){return{duration:n,delay:e,easing:t}}function DP(n,e,t,r,i,a,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:l,subTimeline:d}}class uD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Iq=new RegExp(":enter","g"),Cq=new RegExp(":leave","g");function SP(n,e,t,r,i,a={},l={},d,f,_=[]){return(new Dq).buildKeyframes(n,e,t,r,i,a,l,d,f,_)}class Dq{buildKeyframes(e,t,r,i,a,l,d,f,_,T=[]){_=_||new uD;const D=new AP(e,t,_,i,a,T,[]);D.options=f,D.currentTimeline.setStyles([l],null,D.errors,f),Yo(this,r,D);const P=D.timelines.filter(O=>O.containsAnimation());if(Object.keys(d).length){let O;for(let V=P.length-1;V>=0;V--){const Q=P[V];if(Q.element===t){O=Q;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([d],null,D.errors,f)}return P.length?P.map(O=>O.buildKeyframes()):[DP(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const l=null!=r.duration?Tg(r.duration):null,d=null!=r.delay?Tg(r.delay):null;return 0!==l&&e.forEach(f=>{const _=t.appendInstructionToTimeline(f,l,d);a=Math.max(a,_.duration+_.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Yo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=lD);const l=Tg(a.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Yo(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Tg(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),Yo(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return XC(t.params?eD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*a),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Tg(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=lD);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((_,T)=>{t.currentQueryIndex=T;const D=t.createSubContext(e.options,_);a&&D.delayNextStep(a),_===t.element&&(f=D.currentTimeline),Yo(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),d=l*(t.currentQueryTotal-1);let f=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":f=d-f;break;case"full":f=r.currentStaggerTime}const T=t.currentTimeline;f&&T.delayNextStep(f);const D=T.currentTime;Yo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const lD={};class AP{constructor(e,t,r,i,a,l,d,f){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new cD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Tg(r.duration)),null!=r.delay&&(i.delay=Tg(r.delay));const a=r.params;if(a){let l=i.params;l||(l=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=eD(a[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new AP(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=lD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new Sq(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(Iq,"."+this._enterClassName)).replace(Cq,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),d.push(..._)}return!a&&0==d.length&&l.push(function kG(n){return new g.vHH(3014,hn)}()),d}}class cD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new cD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||fd,this._currentKeyframe[t]=fd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},l=function Aq(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=fd})):df(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const f=eD(l[d],a,r);this._pendingStyles[d]=f,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:fd),this._updateStyle(d,f)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,f)=>{const _=df(d,!0);Object.keys(_).forEach(T=>{const D=_[T];"!"==D?e.add(T):D==fd&&t.add(T)}),r||(_.offset=f/this.duration),i.push(_)});const a=e.size?tD(e.values()):[],l=t.size?tD(t.values()):[];if(r){const d=i[0],f=Xy(d);d.offset=0,f.offset=1,i=[d,f]}return DP(this.element,i,a,l,this.duration,this.startTime,this.easing,!1)}}class Sq extends cD{constructor(e,t,r,i,a,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=r+t,d=t/l,f=df(e[0],!1);f.offset=0,a.push(f);const _=df(e[0],!1);_.offset=pF(d),a.push(_);const T=e.length-1;for(let D=1;D<=T;D++){let P=df(e[D],!1);P.offset=pF((t+P.offset*r)/l),a.push(P)}r=l,t=0,i="",e=a}return DP(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function pF(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class RP{}class Rq extends RP{normalizePropertyName(e,t){return IP(e)}normalizeStyleValue(e,t,r,i){let a="";const l=r.toString().trim();if(xq[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function IG(n,e){return new g.vHH(3005,hn)}())}return l+a}}const xq=(()=>function Pq(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function gF(n,e,t,r,i,a,l,d,f,_,T,D,P){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:l,timelines:d,queriedElements:f,preStyleProps:_,postStyleProps:T,totalTime:D,errors:P}}const xP={};class mF{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Nq(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],l=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):l}build(e,t,r,i,a,l,d,f,_,T){const D=[],P=this.ast.options&&this.ast.options.params||xP,V=this.buildStyles(r,d&&d.params||xP,D),Q=f&&f.params||xP,ve=this.buildStyles(i,Q,D),He=new Set,Qe=new Map,et=new Map,ze="void"===i,Nt={params:Object.assign(Object.assign({},P),Q)},kt=T?[]:SP(e,t,this.ast.animation,a,l,V,ve,Nt,_,D);let fn=0;if(kt.forEach(Qo=>{fn=Math.max(Qo.duration+Qo.delay,fn)}),D.length)return gF(t,this._triggerName,r,i,ze,V,ve,[],[],Qe,et,fn,D);kt.forEach(Qo=>{const pd=Qo.element,NF=Zo(Qe,pd,{});Qo.preStyleProps.forEach(Sg=>NF[Sg]=!0);const s0=Zo(et,pd,{});Qo.postStyleProps.forEach(Sg=>s0[Sg]=!0),pd!==t&&He.add(pd)});const Nr=tD(He.values());return gF(t,this._triggerName,r,i,ze,V,ve,kt,Nr,Qe,et,fn)}}class Mq{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Xy(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!=l&&(i[a]=l)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const l=a;Object.keys(l).forEach(d=>{let f=l[d];f.length>1&&(f=eD(f,i,t));const _=this.normalizer.normalizePropertyName(d,t);f=this.normalizer.normalizeStyleValue(d,_,f,t),r[_]=f})}}),r}}class Oq{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new Mq(i.style,i.options&&i.options.params||{},r)}),yF(this.states,"true","1"),yF(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new mF(e,i,this.states))}),this.fallbackTransition=function Fq(n,e,t){return new mF(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function yF(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Lq=new uD;class Uq{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],a=TP(this._driver,t,r,[]);if(r.length)throw function jG(n){return new g.vHH(3503,hn)}();this._animations[e]=a}_buildPlayer(e,t,r){const i=e.element,a=Z1(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let l;const d=new Map;if(a?(l=SP(this._driver,t,a,vP,YC,{},{},r,Lq,i),l.forEach(T=>{const D=Zo(d,T.element,{});T.postStyleProps.forEach(P=>D[P]=null)})):(i.push(function HG(){return new g.vHH(3300,hn)}()),l=[]),i.length)throw function $G(n){return new g.vHH(3504,hn)}();d.forEach((T,D)=>{Object.keys(T).forEach(P=>{T[P]=this._driver.computeStyle(D,P,fd)})});const _=cf(l.map(T=>{const D=d.get(T.element);return this._buildPlayer(T,{},D)}));return this._playersById[e]=_,_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function GG(n){return new g.vHH(3301,hn)}();return t}listen(e,t,r,i){const a=gP(t,"","","");return fP(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const _F="ng-animate-queued",PP="ng-animate-disabled",$q=[],vF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Gq={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qa="__ng_removed";class NP{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Kq(n){return null!=n?n:null}(r?e.value:e),r){const a=Xy(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const r0="void",MP=new NP(r0);class qq{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function qG(n,e){return new g.vHH(3302,hn)}();if(null==r||0==r.length)throw function WG(n){return new g.vHH(3303,hn)}();if(!function Zq(n){return"start"==n||"done"==n}(r))throw function zG(n,e){return new g.vHH(3400,hn)}();const a=Zo(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};a.push(l);const d=Zo(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Wa(e,QC),Wa(e,QC+"-"+t),d[t]=MP),()=>{this._engine.afterFlush(()=>{const f=a.indexOf(l);f>=0&&a.splice(f,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function KG(n){return new g.vHH(3401,hn)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),l=new kP(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Wa(e,QC),Wa(e,QC+"-"+t),this._engine.statesByElement.set(e,d={}));let f=d[t];const _=new NP(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&f&&_.absorbOptions(f.options),d[t]=_,f||(f=MP),_.value!==r0&&f.value===_.value){if(!function Jq(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(f.params,_.params)){const Q=[],ve=a.matchStyles(f.value,f.params,Q),He=a.matchStyles(_.value,_.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Cg(e,ve),Vl(e,He)})}return}const P=Zo(this._engine.playersByElement,e,[]);P.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==t&&Q.queued&&Q.destroy()});let O=a.matchTransition(f.value,_.value,e,_.params),V=!1;if(!O){if(!i)return;O=a.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:f,toState:_,player:l,isFallbackTransition:V}),V||(Wa(e,_F),l.onStart(()=>{e_(e,_F)})),l.onDone(()=>{let Q=this.players.indexOf(l);Q>=0&&this.players.splice(Q,1);const ve=this._engine.playersByElement.get(e);if(ve){let He=ve.indexOf(l);He>=0&&ve.splice(He,1)}}),this.players.push(l),P.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,JC,!0);r.forEach(i=>{if(i[qa])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const d=[];if(Object.keys(a).forEach(f=>{if(l.set(f,a[f].value),this._triggers[f]){const _=this.trigger(e,f,r0,i);_&&d.push(_)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&cf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const l=a.name;if(i.has(l))return;i.add(l);const f=this._triggers[l].fallbackTransition,_=r[l]||MP,T=new NP(r0),D=new kP(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:f,fromState:_,toState:T,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[qa];(!a||a===vF)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Wa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,l=this._elementListeners.get(a);l&&l.forEach(d=>{if(d.name==r.triggerName){const f=gP(a,r.triggerName,r.fromState.value,r.toState.value);f._data=e,fP(r.player,d.phase,f,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Wq{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new qq(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,a=r.length-1;if(a>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const f=i.get(d);if(f){const _=r.indexOf(f);r.splice(_+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=a;d>=0;d--)if(this.driver.containsElement(r[d].hostElement,t)){r.splice(d+1,0,e),l=!0;break}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const l=r[i[a]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(dD(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!dD(t))return;const a=t[qa];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wa(e,PP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),e_(e,PP))}removeNode(e,t,r,i){if(dD(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[qa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return dD(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,JC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,wP,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return cf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[qa];if(r&&r.setForRemoval){if(e[qa]=vF,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(PP))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Wa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?cf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function ZG(n){return new g.vHH(3402,hn)}()}_flushAnimations(e,t){const r=new uD,i=[],a=new Map,l=[],d=new Map,f=new Map,_=new Map,T=new Set;this.disabledNodes.forEach(vt=>{T.add(vt);const Rt=this.driver.query(vt,".ng-animate-queued",!0);for(let Lt=0;Lt<Rt.length;Lt++)T.add(Rt[Lt])});const D=this.bodyNode,P=Array.from(this.statesByElement.keys()),O=bF(P,this.collectedEnterElements),V=new Map;let Q=0;O.forEach((vt,Rt)=>{const Lt=vP+Q++;V.set(Rt,Lt),vt.forEach(En=>Wa(En,Lt))});const ve=[],He=new Set,Qe=new Set;for(let vt=0;vt<this.collectedLeaveElements.length;vt++){const Rt=this.collectedLeaveElements[vt],Lt=Rt[qa];Lt&&Lt.setForRemoval&&(ve.push(Rt),He.add(Rt),Lt.hasAnimation?this.driver.query(Rt,".ng-star-inserted",!0).forEach(En=>He.add(En)):Qe.add(Rt))}const et=new Map,ze=bF(P,Array.from(He));ze.forEach((vt,Rt)=>{const Lt=YC+Q++;et.set(Rt,Lt),vt.forEach(En=>Wa(En,Lt))}),e.push(()=>{O.forEach((vt,Rt)=>{const Lt=V.get(Rt);vt.forEach(En=>e_(En,Lt))}),ze.forEach((vt,Rt)=>{const Lt=et.get(Rt);vt.forEach(En=>e_(En,Lt))}),ve.forEach(vt=>{this.processLeaveNode(vt)})});const Nt=[],kt=[];for(let vt=this._namespaceList.length-1;vt>=0;vt--)this._namespaceList[vt].drainQueuedTransitions(t).forEach(Lt=>{const En=Lt.player,Ui=Lt.element;if(Nt.push(En),this.collectedEnterElements.length){const Vs=Ui[qa];if(Vs&&Vs.setForMove){if(Vs.previousTriggersValues&&Vs.previousTriggersValues.has(Lt.triggerName)){const Ag=Vs.previousTriggersValues.get(Lt.triggerName),ff=this.statesByElement.get(Lt.element);ff&&ff[Lt.triggerName]&&(ff[Lt.triggerName].value=Ag)}return void En.destroy()}}const jl=!D||!this.driver.containsElement(D,Ui),Jo=et.get(Ui),hf=V.get(Ui),Mr=this._buildInstruction(Lt,r,hf,Jo,jl);if(Mr.errors&&Mr.errors.length)return void kt.push(Mr);if(jl)return En.onStart(()=>Cg(Ui,Mr.fromStyles)),En.onDestroy(()=>Vl(Ui,Mr.toStyles)),void i.push(En);if(Lt.isFallbackTransition)return En.onStart(()=>Cg(Ui,Mr.fromStyles)),En.onDestroy(()=>Vl(Ui,Mr.toStyles)),void i.push(En);const OF=[];Mr.timelines.forEach(Vs=>{Vs.stretchStartingKeyframe=!0,this.disabledNodes.has(Vs.element)||OF.push(Vs)}),Mr.timelines=OF,r.append(Ui,Mr.timelines),l.push({instruction:Mr,player:En,element:Ui}),Mr.queriedElements.forEach(Vs=>Zo(d,Vs,[]).push(En)),Mr.preStyleProps.forEach((Vs,Ag)=>{const ff=Object.keys(Vs);if(ff.length){let Rg=f.get(Ag);Rg||f.set(Ag,Rg=new Set),ff.forEach(FP=>Rg.add(FP))}}),Mr.postStyleProps.forEach((Vs,Ag)=>{const ff=Object.keys(Vs);let Rg=_.get(Ag);Rg||_.set(Ag,Rg=new Set),ff.forEach(FP=>Rg.add(FP))})});if(kt.length){const vt=[];kt.forEach(Rt=>{vt.push(function YG(n,e){return new g.vHH(3505,hn)}())}),Nt.forEach(Rt=>Rt.destroy()),this.reportError(vt)}const fn=new Map,Nr=new Map;l.forEach(vt=>{const Rt=vt.element;r.has(Rt)&&(Nr.set(Rt,Rt),this._beforeAnimationBuild(vt.player.namespaceId,vt.instruction,fn))}),i.forEach(vt=>{const Rt=vt.element;this._getPreviousPlayers(Rt,!1,vt.namespaceId,vt.triggerName,null).forEach(En=>{Zo(fn,Rt,[]).push(En),En.destroy()})});const Qo=ve.filter(vt=>TF(vt,f,_)),pd=new Map;EF(pd,this.driver,Qe,_,fd).forEach(vt=>{TF(vt,f,_)&&Qo.push(vt)});const s0=new Map;O.forEach((vt,Rt)=>{EF(s0,this.driver,new Set(vt),f,"!")}),Qo.forEach(vt=>{const Rt=pd.get(vt),Lt=s0.get(vt);pd.set(vt,Object.assign(Object.assign({},Rt),Lt))});const Sg=[],MF=[],kF={};l.forEach(vt=>{const{element:Rt,player:Lt,instruction:En}=vt;if(r.has(Rt)){if(T.has(Rt))return Lt.onDestroy(()=>Vl(Rt,En.toStyles)),Lt.disabled=!0,Lt.overrideTotalTime(En.totalTime),void i.push(Lt);let Ui=kF;if(Nr.size>1){let Jo=Rt;const hf=[];for(;Jo=Jo.parentNode;){const Mr=Nr.get(Jo);if(Mr){Ui=Mr;break}hf.push(Jo)}hf.forEach(Mr=>Nr.set(Mr,Ui))}const jl=this._buildAnimation(Lt.namespaceId,En,fn,a,s0,pd);if(Lt.setRealPlayer(jl),Ui===kF)Sg.push(Lt);else{const Jo=this.playersByElement.get(Ui);Jo&&Jo.length&&(Lt.parentPlayer=cf(Jo)),i.push(Lt)}}else Cg(Rt,En.fromStyles),Lt.onDestroy(()=>Vl(Rt,En.toStyles)),MF.push(Lt),T.has(Rt)&&i.push(Lt)}),MF.forEach(vt=>{const Rt=a.get(vt.element);if(Rt&&Rt.length){const Lt=cf(Rt);vt.setRealPlayer(Lt)}}),i.forEach(vt=>{vt.parentPlayer?vt.syncPlayerEvents(vt.parentPlayer):vt.destroy()});for(let vt=0;vt<ve.length;vt++){const Rt=ve[vt],Lt=Rt[qa];if(e_(Rt,YC),Lt&&Lt.hasAnimation)continue;let En=[];if(d.size){let jl=d.get(Rt);jl&&jl.length&&En.push(...jl);let Jo=this.driver.query(Rt,wP,!0);for(let hf=0;hf<Jo.length;hf++){let Mr=d.get(Jo[hf]);Mr&&Mr.length&&En.push(...Mr)}}const Ui=En.filter(jl=>!jl.destroyed);Ui.length?Yq(this,Rt,Ui):this.processLeaveNode(Rt)}return ve.length=0,Sg.forEach(vt=>{this.players.push(vt),vt.onDone(()=>{vt.destroy();const Rt=this.players.indexOf(vt);this.players.splice(Rt,1)}),vt.play()}),Sg}elementContainsData(e,t){let r=!1;const i=t[qa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const f=!a||a==r0;d.forEach(_=>{_.queued||!f&&_.triggerName!=i||l.push(_)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const a=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const _=f.element,T=_!==a,D=Zo(r,_,[]);this._getPreviousPlayers(_,T,l,d,t.toState).forEach(O=>{const V=O.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),O.destroy(),D.push(O)})}Cg(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,l){const d=t.triggerName,f=t.element,_=[],T=new Set,D=new Set,P=t.timelines.map(V=>{const Q=V.element;T.add(Q);const ve=Q[qa];if(ve&&ve.removedBeforeQueried)return new t0(V.duration,V.delay);const He=Q!==f,Qe=function Qq(n){const e=[];return IF(n,e),e}((r.get(Q)||$q).map(fn=>fn.getRealPlayer())).filter(fn=>!!fn.element&&fn.element===Q),et=a.get(Q),ze=l.get(Q),Nt=Z1(0,this._normalizer,0,V.keyframes,et,ze),kt=this._buildPlayer(V,Nt,Qe);if(V.subTimeline&&i&&D.add(Q),He){const fn=new kP(e,d,Q);fn.setRealPlayer(kt),_.push(fn)}return kt});_.forEach(V=>{Zo(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function zq(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,V.element,V))}),T.forEach(V=>Wa(V,sF));const O=cf(P);return O.onDestroy(()=>{T.forEach(V=>e_(V,sF)),Vl(f,t.toStyles)}),D.forEach(V=>{Zo(i,V,[]).push(O)}),O}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new t0(e.duration,e.delay)}}class kP{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new t0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>fP(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Zo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function dD(n){return n&&1===n.nodeType}function wF(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function EF(n,e,t,r,i){const a=[];t.forEach(f=>a.push(wF(f)));const l=[];r.forEach((f,_)=>{const T={};f.forEach(D=>{const P=T[D]=e.computeStyle(_,D,i);(!P||0==P.length)&&(_[qa]=Gq,l.push(_))}),n.set(_,T)});let d=0;return t.forEach(f=>wF(f,a[d++])),l}function bF(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function l(d){if(!d)return 1;let f=a.get(d);if(f)return f;const _=d.parentNode;return f=t.has(_)?_:i.has(_)?1:l(_),a.set(d,f),f}return e.forEach(d=>{const f=l(d);1!==f&&t.get(f).push(d)}),t}function Wa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function e_(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Yq(n,e,t){cf(t).onDone(()=>n.processLeaveNode(e))}function IF(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof z1?IF(r.players,e):e.push(r)}}function TF(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class hD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new Wq(e,t,r),this._timelineEngine=new Uq(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const f=[],T=TP(this._driver,a,f,[]);if(f.length)throw function BG(n,e){return new g.vHH(3404,hn)}();d=function kq(n,e,t){return new Oq(n,e,t)}(i,T,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,l]=Y1(r);this._timelineEngine.command(a,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[l,d]=Y1(r);return this._timelineEngine.listen(l,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let e3=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Vl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vl(this._element,this._initialStyles),this._endStyles&&(Vl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Cg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Cg(this._element,this._endStyles),this._endStyles=null),Vl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function OP(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];t3(i)&&(e=e||{},e[i]=n[i])}return e}function t3(n){return"display"===n||"position"===n}class CF{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:cF(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class n3{validateStyleProperty(e){return eF(e)}matchesElement(e,t){return!1}containsElement(e,t){return tF(e,t)}getParentElement(e){return yP(e)}query(e,t,r){return nF(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,l=[]){const f={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(f.easing=a);const _={},T=l.filter(P=>P instanceof CF);(function oq(n,e){return 0===n||0===e})(r,i)&&T.forEach(P=>{let O=P.currentSnapshot;Object.keys(O).forEach(V=>_[V]=O[V])}),t=function aq(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],l=[];if(r.forEach(d=>{a.hasOwnProperty(d)||l.push(d),a[d]=t[d]}),l.length)for(var i=1;i<e.length;i++){let d=e[i];l.forEach(function(f){d[f]=cF(n,f)})}}return e}(e,t=t.map(P=>df(P,!1)),_);const D=function Xq(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=OP(e[0]),e.length>1&&(r=OP(e[e.length-1]))):e&&(t=OP(e)),t||r?new e3(n,t,r):null}(e,t);return new CF(e,t,f,D)}}let r3=(()=>{class n extends $1{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:g.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?G1(t):t;return DF(this._renderer,null,r,"register",[i]),new i3(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class i3 extends class yG{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new s3(this._id,e,t||{},this._renderer)}}class s3{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return DF(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function DF(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const SF="@.disabled";let o3=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,l)=>{const d=null==l?void 0:l.parentNode(a);d&&l.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(a);return T||(T=new AF("",a,this.engine),this._rendererCache.set(a,T)),T}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=T=>{Array.isArray(T)?T.forEach(f):this.engine.registerTrigger(l,d,t,T.name,T)};return r.data.animation.forEach(f),new a3(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,d]=a;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(hD),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class AF{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==SF?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class a3 extends AF{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==SF?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function u3(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),l="";return"@"!=a.charAt(0)&&([a,l]=function l3(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let c3=(()=>{class n extends hD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(_P),g.LFG(RP))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const RF=new g.OlP("AnimationModuleType"),xF=[{provide:$1,useClass:r3},{provide:RP,useFactory:function d3(){return new Rq}},{provide:hD,useClass:c3},{provide:g.FYo,useFactory:function h3(n,e,t){return new o3(n,e,t)},deps:[Tn,hD,g.R0b]}],PF=[{provide:_P,useFactory:()=>new n3},{provide:RF,useValue:"BrowserAnimations"},...xF],f3=[{provide:_P,useClass:rF},{provide:RF,useValue:"NoopAnimations"},...xF];let p3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?f3:PF}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:PF,imports:[Ks]}),n})(),g3=(()=>{class n{constructor(t){this.db=t,this.dbPath="/user-profiles",this.profileRef=t.list(this.dbPath)}getAll(){return this.profileRef}create(t){return this.profileRef.push(t)}update(t,r){return this.profileRef.update(t,r)}delete(t){return this.profileRef.remove(t)}deleteAll(){return this.profileRef.remove()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(j1))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[gB]}),n.\u0275inj=g.cJS({providers:[cg,g3,BM],imports:[[Br.hO.initializeApp(H1_firebase),SU,OU,s2,mG,Ks,pB,p3,iB]]}),n})();(0,g.G48)(),tu().bootstrapModule(m3).catch(n=>console.error(n))},5867:(pt,De,L)=>{L.d(De,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=L(9681);(0,g.registerVersion)("firebase","9.7.0","app")},127:(pt,De,L)=>{L.d(De,{Z:()=>g.Z});var g=L(3942);g.Z.registerVersion("firebase","9.7.0","app-compat")},5881:(pt,De,L)=>{L.r(De);var g=L(5861),q=L(3942),M=L(573),se=L(2090),de=(L(9681),L(1877),L(4859));function le(){return window}function z(){return(z=(0,g.Z)(function*(F,j,G){var ue;const{BuildInfo:Ve}=le();(0,M.ap)(j.sessionId,"AuthEvent did not contain a session ID");const Ye=yield Ie(j.sessionId),Ct={};return(0,M.aq)()?Ct.ibi=Ve.packageName:(0,M.ar)()?Ct.apn=Ve.packageName:(0,M.as)(F,"operation-not-supported-in-this-environment"),Ve.displayName&&(Ct.appDisplayName=Ve.displayName),Ct.sessionId=Ye,(0,M.at)(F,G,j.type,void 0,null!==(ue=j.eventId)&&void 0!==ue?ue:void 0,Ct)})).apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(F){const{BuildInfo:j}=le(),G={};(0,M.aq)()?G.iosBundleId=j.packageName:(0,M.ar)()?G.androidPackageName=j.packageName:(0,M.as)(F,"operation-not-supported-in-this-environment"),yield(0,M.au)(F,G)})).apply(this,arguments)}function Ue(){return(Ue=(0,g.Z)(function*(F,j,G){const{cordova:ue}=le();let Ve=()=>{};try{yield new Promise((Ye,Ct)=>{let ot=null;function xt(){var Xt;Ye();const zr=null===(Xt=ue.plugins.browsertab)||void 0===Xt?void 0:Xt.close;"function"==typeof zr&&zr(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function xn(){ot||(ot=window.setTimeout(()=>{Ct((0,M.av)(F,"redirect-cancelled-by-user"))},2e3))}function yr(){"visible"===(null==document?void 0:document.visibilityState)&&xn()}j.addPassiveListener(xt),document.addEventListener("resume",xn,!1),(0,M.ar)()&&document.addEventListener("visibilitychange",yr,!1),Ve=()=>{j.removePassiveListener(xt),document.removeEventListener("resume",xn,!1),document.removeEventListener("visibilitychange",yr,!1),ot&&window.clearTimeout(ot)}})}finally{Ve()}})).apply(this,arguments)}function Ie(F){return it.apply(this,arguments)}function it(){return(it=(0,g.Z)(function*(F){const j=$e(F),G=yield crypto.subtle.digest("SHA-256",j);return Array.from(new Uint8Array(G)).map(Ve=>Ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $e(F){if((0,M.ap)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(F);const j=new ArrayBuffer(F.length),G=new Uint8Array(j);for(let ue=0;ue<F.length;ue++)G[ue]=F.charCodeAt(ue);return G}class Re extends M.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(j)),super.onEvent(j)}initialized(){var j=this;return(0,g.Z)(function*(){yield j.initPromise})()}}function te(F){return nt.apply(this,arguments)}function nt(){return(nt=(0,g.Z)(function*(F){const j=yield ae()._get(ce(F));return j&&(yield ae()._remove(ce(F))),j})).apply(this,arguments)}function oe(){const F=[],j="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const ue=Math.floor(Math.random()*j.length);F.push(j.charAt(ue))}return F.join("")}function ae(){return(0,M.ax)(M.b)}function ce(F){return(0,M.ay)("authEvent",F.config.apiKey,F.name)}function Le(F){if(!(null==F?void 0:F.includes("?")))return{};const[j,...G]=F.split("?");return(0,se.zd)(G.join("?"))}function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.av)("no-auth-event")}}function Jt(){var F;return(null===(F=null==self?void 0:self.location)||void 0===F?void 0:F.protocol)||null}function Mn(F=(0,se.z$)()){return!("file:"!==Jt()&&"ionic:"!==Jt()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ci(){try{const F=self.localStorage,j=M.aG();if(F)return F.setItem(j,"1"),F.removeItem(j),!function Ji(F=(0,se.z$)()){return function kr(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Or(F=(0,se.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,se.hl)()}catch(F){return Tr()&&(0,se.hl)()}return!1}function Tr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fr(){return(function rn(){return"http:"===Jt()||"https:"===Jt()}()||(0,se.ru)()||Mn())&&!function Ir(){return(0,se.b$)()||(0,se.UG)()}()&&Ci()&&!Tr()}function Xi(){return Mn()&&"undefined"!=typeof document}function qr(){return(qr=(0,g.Z)(function*(){return!!Xi()&&new Promise(F=>{const j=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(j),F(!0)})})})).apply(this,arguments)}const cn={LOCAL:"local",NONE:"none",SESSION:"session"},Xn=M.aw,hi="persistence";function Bn(F){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(F){yield F._initializationPromise;const j=Gt(),G=M.ay(hi,F.config.apiKey,F.name);j&&j.setItem(G,F._getPersistence())})).apply(this,arguments)}function Gt(){var F;try{return(null===(F=function qn(){return"undefined"!=typeof window?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch(j){return null}}const ft=M.aw;class at{constructor(){this.browserResolver=M.ax(M.k),this.cordovaResolver=M.ax(class en{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aA}_initialize(j){var G=this;return(0,g.Z)(function*(){const ue=j._key();let Ve=G.eventManagers.get(ue);return Ve||(Ve=new Re(j),G.eventManagers.set(ue,Ve),G.attachCallbackListeners(j,Ve)),Ve})()}_openPopup(j){(0,M.as)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,G,ue,Ve){var Ye=this;return(0,g.Z)(function*(){!function ye(F){var j,G,ue,Ve,Ye,Ct,ot,xt,xn,yr;const Xt=le();(0,M.aw)("function"==typeof(null===(j=null==Xt?void 0:Xt.universalLinks)||void 0===j?void 0:j.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aw)(void 0!==(null===(G=null==Xt?void 0:Xt.BuildInfo)||void 0===G?void 0:G.packageName),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aw)("function"==typeof(null===(Ye=null===(Ve=null===(ue=null==Xt?void 0:Xt.cordova)||void 0===ue?void 0:ue.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===Ye?void 0:Ye.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aw)("function"==typeof(null===(xt=null===(ot=null===(Ct=null==Xt?void 0:Xt.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===ot?void 0:ot.browsertab)||void 0===xt?void 0:xt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aw)("function"==typeof(null===(yr=null===(xn=null==Xt?void 0:Xt.cordova)||void 0===xn?void 0:xn.InAppBrowser)||void 0===yr?void 0:yr.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const Ct=yield Ye._initialize(j);yield Ct.initialized(),Ct.resetRedirect(),(0,M.aB)(),yield Ye._originValidation(j);const ot=function be(F,j,G=null){return{type:j,eventId:G,urlResponse:null,sessionId:oe(),postBody:null,tenantId:F.tenantId,error:(0,M.av)(F,"no-auth-event")}}(j,ue,Ve);yield function Je(F,j){return ae()._set(ce(F),j)}(j,ot);const xt=yield function K(F,j,G){return z.apply(this,arguments)}(j,ot,G),xn=yield function Ne(F){const{cordova:j}=le();return new Promise(G=>{j.plugins.browsertab.isAvailable(ue=>{let Ve=null;ue?j.plugins.browsertab.openUrl(F):Ve=j.InAppBrowser.open(F,(0,M.ao)()?"_blank":"_system","location=yes"),G(Ve)})})}(xt);return function Fe(F,j,G){return Ue.apply(this,arguments)}(j,Ct,xn)})()}_isIframeWebStorageSupported(j,G){throw new Error("Method not implemented.")}_originValidation(j){const G=j._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function ne(F){return Ke.apply(this,arguments)}(j)),this.originValidationPromises[G]}attachCallbackListeners(j,G){const{universalLinks:ue,handleOpenURL:Ve,BuildInfo:Ye}=le(),Ct=setTimeout((0,g.Z)(function*(){yield te(j),G.onEvent(Ge())}),500),ot=function(){var yr=(0,g.Z)(function*(Xt){clearTimeout(Ct);const zr=yield te(j);let Bi=null;zr&&(null==Xt?void 0:Xt.url)&&(Bi=function tt(F,j){var G,ue;const Ve=function ge(F){const j=Le(F),G=j.link?decodeURIComponent(j.link):void 0,ue=Le(G).link,Ve=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return Le(Ve).link||Ve||ue||G||F}(j);if(Ve.includes("/__/auth/callback")){const Ye=Le(Ve),Ct=Ye.firebaseError?function Te(F){try{return JSON.parse(F)}catch(j){return null}}(decodeURIComponent(Ye.firebaseError)):null,ot=null===(ue=null===(G=null==Ct?void 0:Ct.code)||void 0===G?void 0:G.split("auth/"))||void 0===ue?void 0:ue[1],xt=ot?(0,M.av)(ot):null;return xt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:Ve,postBody:null}}return null}(zr,Xt.url)),G.onEvent(Bi||Ge())});return function(zr){return yr.apply(this,arguments)}}();void 0!==ue&&"function"==typeof ue.subscribe&&ue.subscribe(null,ot);const xt=Ve,xn=`${Ye.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var yr=(0,g.Z)(function*(Xt){if(Xt.toLowerCase().startsWith(xn)&&ot({url:Xt}),"function"==typeof xt)try{xt(Xt)}catch(zr){console.error(zr)}});return function(Xt){return yr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aA}_initialize(j){var G=this;return(0,g.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,G,ue,Ve){var Ye=this;return(0,g.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openPopup(j,G,ue,Ve)})()}_openRedirect(j,G,ue,Ve){var Ye=this;return(0,g.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openRedirect(j,G,ue,Ve)})()}_isIframeWebStorageSupported(j,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,G)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return Xi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,g.Z)(function*(){if(j.underlyingResolver)return;const G=yield function gt(){return qr.apply(this,arguments)}();j.underlyingResolver=G?j.cordovaResolver:j.browserResolver})()}}function fi(F){return F.unwrap()}function Zt(F){return Wn(F)}function Wn(F){const{_tokenResponse:j}=F instanceof se.ZR?F.customData:F;if(!j)return null;if(!(F instanceof se.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return M.P.credentialFromResult(F);const G=j.providerId;if(!G||G===M.o.PASSWORD)return null;let ue;switch(G){case M.o.GOOGLE:ue=M.N;break;case M.o.FACEBOOK:ue=M.M;break;case M.o.GITHUB:ue=M.Q;break;case M.o.TWITTER:ue=M.V;break;default:const{oauthIdToken:Ve,oauthAccessToken:Ye,oauthTokenSecret:Ct,pendingToken:ot,nonce:xt}=j;return Ye||Ct||Ve||ot?ot?G.startsWith("saml.")?M.aJ._create(G,ot):M.I._fromParams({providerId:G,signInMethod:G,pendingToken:ot,idToken:Ve,accessToken:Ye}):new M.T(G).credential({idToken:Ve,accessToken:Ye,rawNonce:xt}):null}return F instanceof se.ZR?ue.credentialFromError(F):ue.credentialFromResult(F)}function pn(F,j){return j.catch(G=>{throw G instanceof se.ZR&&function ts(F,j){var G;const ue=null===(G=j.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===j.code)j.resolver=new Yt(F,M.am(F,j));else if(ue){const Ve=Wn(j),Ye=j;Ve&&(Ye.credential=Ve,Ye.tenantId=ue.tenantId||void 0,Ye.email=ue.email||void 0,Ye.phoneNumber=ue.phoneNumber||void 0)}}(F,G),G}).then(G=>{const Ve=G.user;return{operationType:G.operationType,credential:Zt(G),additionalUserInfo:M.ak(G),user:qe.getOrCreate(Ve)}})}function wt(F,j){return zn.apply(this,arguments)}function zn(){return(zn=(0,g.Z)(function*(F,j){const G=yield j;return{verificationId:G.verificationId,confirm:ue=>pn(F,G.confirm(ue))}})).apply(this,arguments)}class Yt{constructor(j,G){this.resolver=G,this.auth=function es(F){return F.wrapped()}(j)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return pn(fi(this.auth),this.resolver.resolveSignIn(j))}}class qe{constructor(j){this._delegate=j,this.multiFactor=M.an(j)}static getOrCreate(j){return qe.USER_MAP.has(j)||qe.USER_MAP.set(j,new qe(j)),qe.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var G=this;return(0,g.Z)(function*(){return pn(G.auth,M.Y(G._delegate,j))})()}linkWithPhoneNumber(j,G){var ue=this;return(0,g.Z)(function*(){return wt(ue.auth,M.l(ue._delegate,j,G))})()}linkWithPopup(j){var G=this;return(0,g.Z)(function*(){return pn(G.auth,M.d(G._delegate,j,at))})()}linkWithRedirect(j){var G=this;return(0,g.Z)(function*(){return yield Bn(M.aC(G.auth)),M.g(G._delegate,j,at)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var G=this;return(0,g.Z)(function*(){return pn(G.auth,M.Z(G._delegate,j))})()}reauthenticateWithPhoneNumber(j,G){return wt(this.auth,M.r(this._delegate,j,G))}reauthenticateWithPopup(j){return pn(this.auth,M.e(this._delegate,j,at))}reauthenticateWithRedirect(j){var G=this;return(0,g.Z)(function*(){return yield Bn(M.aC(G.auth)),M.h(G._delegate,j,at)})()}sendEmailVerification(j){return M.aa(this._delegate,j)}unlink(j){var G=this;return(0,g.Z)(function*(){return yield M.aj(G._delegate,j),G})()}updateEmail(j){return M.af(this._delegate,j)}updatePassword(j){return M.ag(this._delegate,j)}updatePhoneNumber(j){return M.u(this._delegate,j)}updateProfile(j){return M.ae(this._delegate,j)}verifyBeforeUpdateEmail(j,G){return M.ab(this._delegate,j,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qe.USER_MAP=new WeakMap;const Ce=M.aw;let st=(()=>{class F{constructor(G,ue){if(this.app=G,ue.isInitialized())return this._delegate=ue.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ve}=G.options;Ce(Ve,"invalid-api-key",{appName:G.name}),Ce(Ve,"invalid-api-key",{appName:G.name});const Ye="undefined"!=typeof window?at:void 0;this._delegate=ue.initialize({options:{persistence:Ut(Ve,G.name),popupRedirectResolver:Ye}}),this._delegate._updateErrorMap(M.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,ue){M.E(this._delegate,G,ue)}applyActionCode(G){return M.a1(this._delegate,G)}checkActionCode(G){return M.a2(this._delegate,G)}confirmPasswordReset(G,ue){return M.a0(this._delegate,G,ue)}createUserWithEmailAndPassword(G,ue){var Ve=this;return(0,g.Z)(function*(){return pn(Ve._delegate,M.a4(Ve._delegate,G,ue))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return M.a9(this._delegate,G)}isSignInWithEmailLink(G){return M.a7(this._delegate,G)}getRedirectResult(){var G=this;return(0,g.Z)(function*(){Ce(Fr(),G._delegate,"operation-not-supported-in-this-environment");const ue=yield M.j(G._delegate,at);return ue?pn(G._delegate,Promise.resolve(ue)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function tn(F,j){(0,M.aC)(F)._logFramework(j)}(this._delegate,G)}onAuthStateChanged(G,ue,Ve){const{next:Ye,error:Ct,complete:ot}=mt(G,ue,Ve);return this._delegate.onAuthStateChanged(Ye,Ct,ot)}onIdTokenChanged(G,ue,Ve){const{next:Ye,error:Ct,complete:ot}=mt(G,ue,Ve);return this._delegate.onIdTokenChanged(Ye,Ct,ot)}sendSignInLinkToEmail(G,ue){return M.a6(this._delegate,G,ue)}sendPasswordResetEmail(G,ue){return M.$(this._delegate,G,ue||void 0)}setPersistence(G){var ue=this;return(0,g.Z)(function*(){let Ve;switch(function Un(F,j){Xn(Object.values(cn).includes(j),F,"invalid-persistence-type"),(0,se.b$)()?Xn(j!==cn.SESSION,F,"unsupported-persistence-type"):(0,se.UG)()?Xn(j===cn.NONE,F,"unsupported-persistence-type"):Tr()?Xn(j===cn.NONE||j===cn.LOCAL&&(0,se.hl)(),F,"unsupported-persistence-type"):Xn(j===cn.NONE||Ci(),F,"unsupported-persistence-type")}(ue._delegate,G),G){case cn.SESSION:Ve=M.a;break;case cn.LOCAL:Ve=(yield M.ax(M.i)._isAvailable())?M.i:M.b;break;case cn.NONE:Ve=M.K;break;default:return M.as("argument-error",{appName:ue._delegate.name})}return ue._delegate.setPersistence(Ve)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return pn(this._delegate,M.W(this._delegate))}signInWithCredential(G){return pn(this._delegate,M.X(this._delegate,G))}signInWithCustomToken(G){return pn(this._delegate,M._(this._delegate,G))}signInWithEmailAndPassword(G,ue){return pn(this._delegate,M.a5(this._delegate,G,ue))}signInWithEmailLink(G,ue){return pn(this._delegate,M.a8(this._delegate,G,ue))}signInWithPhoneNumber(G,ue){return wt(this._delegate,M.s(this._delegate,G,ue))}signInWithPopup(G){var ue=this;return(0,g.Z)(function*(){return Ce(Fr(),ue._delegate,"operation-not-supported-in-this-environment"),pn(ue._delegate,M.c(ue._delegate,G,at))})()}signInWithRedirect(G){var ue=this;return(0,g.Z)(function*(){return Ce(Fr(),ue._delegate,"operation-not-supported-in-this-environment"),yield Bn(ue._delegate),M.f(ue._delegate,G,at)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return M.a3(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=cn,F})();function mt(F,j,G){let ue=F;"function"!=typeof F&&({next:ue,error:j,complete:G}=F);const Ve=ue;return{next:Ct=>Ve(Ct&&qe.getOrCreate(Ct)),error:j,complete:G}}function Ut(F,j){const G=function js(F,j){const G=Gt();if(!G)return[];const ue=M.ay(hi,F,j);switch(G.getItem(ue)){case cn.NONE:return[M.K];case cn.LOCAL:return[M.i,M.a];case cn.SESSION:return[M.a];default:return[]}}(F,j);if("undefined"!=typeof self&&!G.includes(M.i)&&G.push(M.i),"undefined"!=typeof window)for(const ue of[M.b,M.a])G.includes(ue)||G.push(ue);return G.includes(M.K)||G.push(M.K),G}class Bt{constructor(){this.providerId="phone",this._delegate=new M.P(fi(q.Z.auth()))}static credential(j,G){return M.P.credential(j,G)}verifyPhoneNumber(j,G){return this._delegate.verifyPhoneNumber(j,G)}unwrap(){return this._delegate}}Bt.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,Bt.PROVIDER_ID=M.P.PROVIDER_ID;const Z=M.aw;class ${constructor(j,G,ue=q.Z.app()){var Ve;Z(null===(Ve=ue.options)||void 0===Ve?void 0:Ve.apiKey,"invalid-api-key",{appName:ue.name}),this._delegate=new M.R(j,G,ue.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function pe(F){F.INTERNAL.registerComponent(new de.wA("auth-compat",j=>{const G=j.getProvider("app-compat").getImmediate(),ue=j.getProvider("auth");return new st(G,ue)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.L,FacebookAuthProvider:M.M,GithubAuthProvider:M.Q,GoogleAuthProvider:M.N,OAuthProvider:M.T,SAMLAuthProvider:M.U,PhoneAuthProvider:Bt,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:$,TwitterAuthProvider:M.V,Auth:st,AuthCredential:M.G,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.2.12")}(q.Z)},8306:(pt,De,L)=>{L.d(De,{y:()=>K});var g=L(930),q=L(727),M=L(8822),se=L(4671);var de=L(2416),le=L(576),me=L(2806);let K=(()=>{class Ne{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const ye=new Ne;return ye.source=this,ye.operator=Ue,ye}subscribe(Ue,ye,Ie){const it=function Ke(Ne){return Ne&&Ne instanceof g.Lv||function ne(Ne){return Ne&&(0,le.m)(Ne.next)&&(0,le.m)(Ne.error)&&(0,le.m)(Ne.complete)}(Ne)&&(0,q.Nn)(Ne)}(Ue)?Ue:new g.Hp(Ue,ye,Ie);return(0,me.x)(()=>{const{operator:$e,source:Pe}=this;it.add($e?$e.call(it,Pe):Pe?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(ye){Ue.error(ye)}}forEach(Ue,ye){return new(ye=z(ye))((Ie,it)=>{const $e=new g.Hp({next:Pe=>{try{Ue(Pe)}catch(Re){it(Re),$e.unsubscribe()}},error:it,complete:Ie});this.subscribe($e)})}_subscribe(Ue){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Ue)}[M.L](){return this}pipe(...Ue){return function we(Ne){return 0===Ne.length?se.y:1===Ne.length?Ne[0]:function(Ue){return Ne.reduce((ye,Ie)=>Ie(ye),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=z(Ue))((ye,Ie)=>{let it;this.subscribe($e=>it=$e,$e=>Ie($e),()=>ye(it))})}}return Ne.create=Fe=>new Ne(Fe),Ne})();function z(Ne){var Fe;return null!==(Fe=null!=Ne?Ne:de.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(pt,De,L)=>{L.d(De,{x:()=>de});var g=L(8306),q=L(727);const se=(0,L(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=L(8737),we=L(2806);let de=(()=>{class me extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ne=new le(this,this);return ne.operator=z,ne}_throwIfClosed(){if(this.closed)throw new se}next(z){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(z)}})}error(z){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ne}=this;for(;ne.length;)ne.shift().error(z)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ne,isStopped:Ke,observers:Ne}=this;return ne||Ke?q.Lc:(this.currentObservers=null,Ne.push(z),new q.w0(()=>{this.currentObservers=null,(0,re.P)(Ne,z)}))}_checkFinalizedStatuses(z){const{hasError:ne,thrownError:Ke,isStopped:Ne}=this;ne?z.error(Ke):Ne&&z.complete()}asObservable(){const z=new g.y;return z.source=this,z}}return me.create=(K,z)=>new le(K,z),me})();class le extends de{constructor(K,z){super(),this.destination=K,this.source=z}next(K){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ne||ne.call(z,K)}error(K){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ne||ne.call(z,K)}complete(){var K,z;null===(z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===z||z.call(K)}_subscribe(K){var z,ne;return null!==(ne=null===(z=this.source)||void 0===z?void 0:z.subscribe(K))&&void 0!==ne?ne:q.Lc}}},930:(pt,De,L)=>{L.d(De,{Hp:()=>Ue,Lv:()=>ne});var g=L(576),q=L(727),M=L(2416),se=L(7849),re=L(5032);const we=me("C",void 0,void 0);function me(Pe,Re,be){return{kind:Pe,value:Re,error:be}}var K=L(3410),z=L(2806);class ne extends q.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,q.Nn)(Re)&&Re.add(this)):this.destination=$e}static create(Re,be,Je){return new Ue(Re,be,Je)}next(Re){this.isStopped?it(function le(Pe){return me("N",Pe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?it(function de(Pe){return me("E",void 0,Pe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?it(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Ne(Pe,Re){return Ke.call(Pe,Re)}class Fe{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:be}=this;if(be.next)try{be.next(Re)}catch(Je){ye(Je)}}error(Re){const{partialObserver:be}=this;if(be.error)try{be.error(Re)}catch(Je){ye(Je)}else ye(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(be){ye(be)}}}class Ue extends ne{constructor(Re,be,Je){let te;if(super(),(0,g.m)(Re)||!Re)te={next:null!=Re?Re:void 0,error:null!=be?be:void 0,complete:null!=Je?Je:void 0};else{let nt;this&&M.v.useDeprecatedNextContext?(nt=Object.create(Re),nt.unsubscribe=()=>this.unsubscribe(),te={next:Re.next&&Ne(Re.next,nt),error:Re.error&&Ne(Re.error,nt),complete:Re.complete&&Ne(Re.complete,nt)}):te=Re}this.destination=new Fe(te)}}function ye(Pe){M.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Pe):(0,se.h)(Pe)}function it(Pe,Re){const{onStoppedNotification:be}=M.v;be&&K.z.setTimeout(()=>be(Pe,Re))}const $e={closed:!0,next:re.Z,error:function Ie(Pe){throw Pe},complete:re.Z}},727:(pt,De,L)=>{L.d(De,{Lc:()=>we,w0:()=>re,Nn:()=>de});var g=L(576);const M=(0,L(3888).d)(me=>function(z){me(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ne,Ke)=>`${Ke+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var se=L(8737);class re{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ne of z)Ne.remove(this);else z.remove(this);const{initialTeardown:ne}=this;if((0,g.m)(ne))try{ne()}catch(Ne){K=Ne instanceof M?Ne.errors:[Ne]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Ne of Ke)try{le(Ne)}catch(Fe){K=null!=K?K:[],Fe instanceof M?K=[...K,...Fe.errors]:K.push(Fe)}}if(K)throw new M(K)}}add(K){var z;if(K&&K!==this)if(this.closed)le(K);else{if(K instanceof re){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(K)}}_hasParent(K){const{_parentage:z}=this;return z===K||Array.isArray(z)&&z.includes(K)}_addParent(K){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(K),z):z?[z,K]:K}_removeParent(K){const{_parentage:z}=this;z===K?this._parentage=null:Array.isArray(z)&&(0,se.P)(z,K)}remove(K){const{_finalizers:z}=this;z&&(0,se.P)(z,K),K instanceof re&&K._removeParent(this)}}re.EMPTY=(()=>{const me=new re;return me.closed=!0,me})();const we=re.EMPTY;function de(me){return me instanceof re||me&&"closed"in me&&(0,g.m)(me.remove)&&(0,g.m)(me.add)&&(0,g.m)(me.unsubscribe)}function le(me){(0,g.m)(me)?me():me.unsubscribe()}},2416:(pt,De,L)=>{L.d(De,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,De,L)=>{L.d(De,{E:()=>q});const q=new(L(8306).y)(re=>re.complete())},8996:(pt,De,L)=>{L.d(De,{D:()=>Re});var g=L(8421),q=L(5363),M=L(9468),we=L(8306),le=L(2202),me=L(576),K=L(9672);function ne(be,Je){if(!be)throw new Error("Iterable cannot be null");return new we.y(te=>{(0,K.f)(te,Je,()=>{const nt=be[Symbol.asyncIterator]();(0,K.f)(te,Je,()=>{nt.next().then(tt=>{tt.done?te.complete():te.next(tt.value)})},0,!0)})})}var Ke=L(3670),Ne=L(8239),Fe=L(1144),Ue=L(6495),ye=L(2206),Ie=L(4532),it=L(3260);function Re(be,Je){return Je?function Pe(be,Je){if(null!=be){if((0,Ke.c)(be))return function se(be,Je){return(0,g.Xf)(be).pipe((0,M.R)(Je),(0,q.Q)(Je))}(be,Je);if((0,Fe.z)(be))return function de(be,Je){return new we.y(te=>{let nt=0;return Je.schedule(function(){nt===be.length?te.complete():(te.next(be[nt++]),te.closed||this.schedule())})})}(be,Je);if((0,Ne.t)(be))return function re(be,Je){return(0,g.Xf)(be).pipe((0,M.R)(Je),(0,q.Q)(Je))}(be,Je);if((0,ye.D)(be))return ne(be,Je);if((0,Ue.T)(be))return function z(be,Je){return new we.y(te=>{let nt;return(0,K.f)(te,Je,()=>{nt=be[le.h](),(0,K.f)(te,Je,()=>{let tt,oe;try{({value:tt,done:oe}=nt.next())}catch(ae){return void te.error(ae)}oe?te.complete():te.next(tt)},0,!0)}),()=>(0,me.m)(null==nt?void 0:nt.return)&&nt.return()})}(be,Je);if((0,it.L)(be))return function $e(be,Je){return ne((0,it.Q)(be),Je)}(be,Je)}throw(0,Ie.z)(be)}(be,Je):(0,g.Xf)(be)}},8421:(pt,De,L)=>{L.d(De,{Xf:()=>Ke});var g=L(655),q=L(1144),M=L(8239),se=L(8306),re=L(3670),we=L(2206),de=L(4532),le=L(6495),me=L(3260),K=L(576),z=L(7849),ne=L(8822);function Ke(Pe){if(Pe instanceof se.y)return Pe;if(null!=Pe){if((0,re.c)(Pe))return function Ne(Pe){return new se.y(Re=>{const be=Pe[ne.L]();if((0,K.m)(be.subscribe))return be.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,q.z)(Pe))return function Fe(Pe){return new se.y(Re=>{for(let be=0;be<Pe.length&&!Re.closed;be++)Re.next(Pe[be]);Re.complete()})}(Pe);if((0,M.t)(Pe))return function Ue(Pe){return new se.y(Re=>{Pe.then(be=>{Re.closed||(Re.next(be),Re.complete())},be=>Re.error(be)).then(null,z.h)})}(Pe);if((0,we.D)(Pe))return Ie(Pe);if((0,le.T)(Pe))return function ye(Pe){return new se.y(Re=>{for(const be of Pe)if(Re.next(be),Re.closed)return;Re.complete()})}(Pe);if((0,me.L)(Pe))return function it(Pe){return Ie((0,me.Q)(Pe))}(Pe)}throw(0,de.z)(Pe)}function Ie(Pe){return new se.y(Re=>{(function $e(Pe,Re){var be,Je,te,nt;return(0,g.mG)(this,void 0,void 0,function*(){try{for(be=(0,g.KL)(Pe);!(Je=yield be.next()).done;)if(Re.next(Je.value),Re.closed)return}catch(tt){te={error:tt}}finally{try{Je&&!Je.done&&(nt=be.return)&&(yield nt.call(be))}finally{if(te)throw te.error}}Re.complete()})})(Pe,Re).catch(be=>Re.error(be))})}},6451:(pt,De,L)=>{L.d(De,{T:()=>we});var g=L(8189),q=L(8421),M=L(515),se=L(7669),re=L(8996);function we(...de){const le=(0,se.yG)(de),me=(0,se._6)(de,1/0),K=de;return K.length?1===K.length?(0,q.Xf)(K[0]):(0,g.J)(me)((0,re.D)(K,le)):M.E}},5403:(pt,De,L)=>{L.d(De,{x:()=>q});var g=L(930);function q(se,re,we,de,le){return new M(se,re,we,de,le)}class M extends g.Lv{constructor(re,we,de,le,me,K){super(re),this.onFinalize=me,this.shouldUnsubscribe=K,this._next=we?function(z){try{we(z)}catch(ne){re.error(ne)}}:super._next,this._error=le?function(z){try{le(z)}catch(ne){re.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(z){re.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(pt,De,L)=>{L.d(De,{U:()=>M});var g=L(4482),q=L(5403);function M(se,re){return(0,g.e)((we,de)=>{let le=0;we.subscribe((0,q.x)(de,me=>{de.next(se.call(re,me,le++))}))})}},8189:(pt,De,L)=>{L.d(De,{J:()=>M});var g=L(5577),q=L(4671);function M(se=1/0){return(0,g.z)(q.y,se)}},5577:(pt,De,L)=>{L.d(De,{z:()=>le});var g=L(4004),q=L(8421),M=L(4482),se=L(9672),re=L(5403),de=L(576);function le(me,K,z=1/0){return(0,de.m)(K)?le((ne,Ke)=>(0,g.U)((Ne,Fe)=>K(ne,Ne,Ke,Fe))((0,q.Xf)(me(ne,Ke))),z):("number"==typeof K&&(z=K),(0,M.e)((ne,Ke)=>function we(me,K,z,ne,Ke,Ne,Fe,Ue){const ye=[];let Ie=0,it=0,$e=!1;const Pe=()=>{$e&&!ye.length&&!Ie&&K.complete()},Re=Je=>Ie<ne?be(Je):ye.push(Je),be=Je=>{Ne&&K.next(Je),Ie++;let te=!1;(0,q.Xf)(z(Je,it++)).subscribe((0,re.x)(K,nt=>{null==Ke||Ke(nt),Ne?Re(nt):K.next(nt)},()=>{te=!0},void 0,()=>{if(te)try{for(Ie--;ye.length&&Ie<ne;){const nt=ye.shift();Fe?(0,se.f)(K,Fe,()=>be(nt)):be(nt)}Pe()}catch(nt){K.error(nt)}}))};return me.subscribe((0,re.x)(K,Re,()=>{$e=!0,Pe()})),()=>{null==Ue||Ue()}}(ne,Ke,me,z)))}},5363:(pt,De,L)=>{L.d(De,{Q:()=>se});var g=L(9672),q=L(4482),M=L(5403);function se(re,we=0){return(0,q.e)((de,le)=>{de.subscribe((0,M.x)(le,me=>(0,g.f)(le,re,()=>le.next(me),we),()=>(0,g.f)(le,re,()=>le.complete(),we),me=>(0,g.f)(le,re,()=>le.error(me),we)))})}},3099:(pt,De,L)=>{L.d(De,{B:()=>we});var g=L(8996),q=L(5698),M=L(7579),se=L(930),re=L(4482);function we(le={}){const{connector:me=(()=>new M.x),resetOnError:K=!0,resetOnComplete:z=!0,resetOnRefCountZero:ne=!0}=le;return Ke=>{let Ne=null,Fe=null,Ue=null,ye=0,Ie=!1,it=!1;const $e=()=>{null==Fe||Fe.unsubscribe(),Fe=null},Pe=()=>{$e(),Ne=Ue=null,Ie=it=!1},Re=()=>{const be=Ne;Pe(),null==be||be.unsubscribe()};return(0,re.e)((be,Je)=>{ye++,!it&&!Ie&&$e();const te=Ue=null!=Ue?Ue:me();Je.add(()=>{ye--,0===ye&&!it&&!Ie&&(Fe=de(Re,ne))}),te.subscribe(Je),Ne||(Ne=new se.Hp({next:nt=>te.next(nt),error:nt=>{it=!0,$e(),Fe=de(Pe,K,nt),te.error(nt)},complete:()=>{Ie=!0,$e(),Fe=de(Pe,z),te.complete()}}),(0,g.D)(be).subscribe(Ne))})(Ke)}}function de(le,me,...K){return!0===me?(le(),null):!1===me?null:me(...K).pipe((0,q.q)(1)).subscribe(()=>le())}},9468:(pt,De,L)=>{L.d(De,{R:()=>q});var g=L(4482);function q(M,se=0){return(0,g.e)((re,we)=>{we.add(M.schedule(()=>re.subscribe(we),se))})}},5698:(pt,De,L)=>{L.d(De,{q:()=>se});var g=L(515),q=L(4482),M=L(5403);function se(re){return re<=0?()=>g.E:(0,q.e)((we,de)=>{let le=0;we.subscribe((0,M.x)(de,me=>{++le<=re&&(de.next(me),re<=le&&de.complete())}))})}},8505:(pt,De,L)=>{L.d(De,{b:()=>re});var g=L(576),q=L(4482),M=L(5403),se=L(4671);function re(we,de,le){const me=(0,g.m)(we)||de||le?{next:we,error:de,complete:le}:we;return me?(0,q.e)((K,z)=>{var ne;null===(ne=me.subscribe)||void 0===ne||ne.call(me);let Ke=!0;K.subscribe((0,M.x)(z,Ne=>{var Fe;null===(Fe=me.next)||void 0===Fe||Fe.call(me,Ne),z.next(Ne)},()=>{var Ne;Ke=!1,null===(Ne=me.complete)||void 0===Ne||Ne.call(me),z.complete()},Ne=>{var Fe;Ke=!1,null===(Fe=me.error)||void 0===Fe||Fe.call(me,Ne),z.error(Ne)},()=>{var Ne,Fe;Ke&&(null===(Ne=me.unsubscribe)||void 0===Ne||Ne.call(me)),null===(Fe=me.finalize)||void 0===Fe||Fe.call(me)}))}):se.y}},4408:(pt,De,L)=>{L.d(De,{o:()=>re});var g=L(727);class q extends g.w0{constructor(de,le){super()}schedule(de,le=0){return this}}const M={setInterval(we,de,...le){const{delegate:me}=M;return(null==me?void 0:me.setInterval)?me.setInterval(we,de,...le):setInterval(we,de,...le)},clearInterval(we){const{delegate:de}=M;return((null==de?void 0:de.clearInterval)||clearInterval)(we)},delegate:void 0};var se=L(8737);class re extends q{constructor(de,le){super(de,le),this.scheduler=de,this.work=le,this.pending=!1}schedule(de,le=0){if(this.closed)return this;this.state=de;const me=this.id,K=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(K,me,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(K,this.id,le),this}requestAsyncId(de,le,me=0){return M.setInterval(de.flush.bind(de,this),me)}recycleAsyncId(de,le,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return le;M.clearInterval(le)}execute(de,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(de,le);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,le){let K,me=!1;try{this.work(de)}catch(z){me=!0,K=z||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:de,scheduler:le}=this,{actions:me}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(me,this),null!=de&&(this.id=this.recycleAsyncId(le,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,De,L)=>{L.d(De,{v:()=>M});var g=L(6063);class q{constructor(re,we=q.now){this.schedulerActionCtor=re,this.now=we}schedule(re,we=0,de){return new this.schedulerActionCtor(this,re).schedule(de,we)}}q.now=g.l.now;class M extends q{constructor(re,we=q.now){super(re,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:we}=this;if(this._active)return void we.push(re);let de;this._active=!0;do{if(de=re.execute(re.state,re.delay))break}while(re=we.shift());if(this._active=!1,de){for(;re=we.shift();)re.unsubscribe();throw de}}}},4986:(pt,De,L)=>{L.d(De,{z:()=>M});var g=L(4408);const M=new(L(7565).v)(g.o)},6063:(pt,De,L)=>{L.d(De,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(pt,De,L)=>{L.d(De,{z:()=>g});const g={setTimeout(q,M,...se){const{delegate:re}=g;return(null==re?void 0:re.setTimeout)?re.setTimeout(q,M,...se):setTimeout(q,M,...se)},clearTimeout(q){const{delegate:M}=g;return((null==M?void 0:M.clearTimeout)||clearTimeout)(q)},delegate:void 0}},2202:(pt,De,L)=>{L.d(De,{h:()=>q});const q=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,De,L)=>{L.d(De,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,De,L)=>{L.d(De,{_6:()=>we,jO:()=>se,yG:()=>re});var g=L(576);function M(de){return de[de.length-1]}function se(de){return(0,g.m)(M(de))?de.pop():void 0}function re(de){return function q(de){return de&&(0,g.m)(de.schedule)}(M(de))?de.pop():void 0}function we(de,le){return"number"==typeof M(de)?de.pop():le}},8737:(pt,De,L)=>{function g(q,M){if(q){const se=q.indexOf(M);0<=se&&q.splice(se,1)}}L.d(De,{P:()=>g})},3888:(pt,De,L)=>{function g(q){const se=q(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}L.d(De,{d:()=>g})},2806:(pt,De,L)=>{L.d(De,{O:()=>se,x:()=>M});var g=L(2416);let q=null;function M(re){if(g.v.useDeprecatedSynchronousErrorHandling){const we=!q;if(we&&(q={errorThrown:!1,error:null}),re(),we){const{errorThrown:de,error:le}=q;if(q=null,de)throw le}}else re()}function se(re){g.v.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=re)}},9672:(pt,De,L)=>{function g(q,M,se,re=0,we=!1){const de=M.schedule(function(){se(),we?q.add(this.schedule(null,re)):this.unsubscribe()},re);if(q.add(de),!we)return de}L.d(De,{f:()=>g})},4671:(pt,De,L)=>{function g(q){return q}L.d(De,{y:()=>g})},1144:(pt,De,L)=>{L.d(De,{z:()=>g});const g=q=>q&&"number"==typeof q.length&&"function"!=typeof q},2206:(pt,De,L)=>{L.d(De,{D:()=>q});var g=L(576);function q(M){return Symbol.asyncIterator&&(0,g.m)(null==M?void 0:M[Symbol.asyncIterator])}},576:(pt,De,L)=>{function g(q){return"function"==typeof q}L.d(De,{m:()=>g})},3670:(pt,De,L)=>{L.d(De,{c:()=>M});var g=L(8822),q=L(576);function M(se){return(0,q.m)(se[g.L])}},6495:(pt,De,L)=>{L.d(De,{T:()=>M});var g=L(2202),q=L(576);function M(se){return(0,q.m)(null==se?void 0:se[g.h])}},8239:(pt,De,L)=>{L.d(De,{t:()=>q});var g=L(576);function q(M){return(0,g.m)(null==M?void 0:M.then)}},3260:(pt,De,L)=>{L.d(De,{L:()=>se,Q:()=>M});var g=L(655),q=L(576);function M(re){return(0,g.FC)(this,arguments,function*(){const de=re.getReader();try{for(;;){const{value:le,done:me}=yield(0,g.qq)(de.read());if(me)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(le)}}finally{de.releaseLock()}})}function se(re){return(0,q.m)(null==re?void 0:re.getReader)}},4482:(pt,De,L)=>{L.d(De,{A:()=>q,e:()=>M});var g=L(576);function q(se){return(0,g.m)(null==se?void 0:se.lift)}function M(se){return re=>{if(q(re))return re.lift(function(we){try{return se(we,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,De,L)=>{function g(){}L.d(De,{Z:()=>g})},7849:(pt,De,L)=>{L.d(De,{h:()=>M});var g=L(2416),q=L(3410);function M(se){q.z.setTimeout(()=>{const{onUnhandledError:re}=g.v;if(!re)throw se;re(se)})}},4532:(pt,De,L)=>{function g(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(De,{z:()=>g})},655:(pt,De,L)=>{function se(oe,ae){var ce={};for(var Te in oe)Object.prototype.hasOwnProperty.call(oe,Te)&&ae.indexOf(Te)<0&&(ce[Te]=oe[Te]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(Te=Object.getOwnPropertySymbols(oe);ge<Te.length;ge++)ae.indexOf(Te[ge])<0&&Object.prototype.propertyIsEnumerable.call(oe,Te[ge])&&(ce[Te[ge]]=oe[Te[ge]])}return ce}function le(oe,ae,ce,Te){return new(ce||(ce=Promise))(function(Le,Mt){function en(tn){try{Ge(Te.next(tn))}catch(mr){Mt(mr)}}function ln(tn){try{Ge(Te.throw(tn))}catch(mr){Mt(mr)}}function Ge(tn){tn.done?Le(tn.value):function ge(Le){return Le instanceof ce?Le:new ce(function(Mt){Mt(Le)})}(tn.value).then(en,ln)}Ge((Te=Te.apply(oe,ae||[])).next())})}function ye(oe){return this instanceof ye?(this.v=oe,this):new ye(oe)}function Ie(oe,ae,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,Te=ce.apply(oe,ae||[]),Le=[];return ge={},Mt("next"),Mt("throw"),Mt("return"),ge[Symbol.asyncIterator]=function(){return this},ge;function Mt(Ln){Te[Ln]&&(ge[Ln]=function(nn){return new Promise(function(Jt,rn){Le.push([Ln,nn,Jt,rn])>1||en(Ln,nn)})})}function en(Ln,nn){try{!function ln(Ln){Ln.value instanceof ye?Promise.resolve(Ln.value.v).then(Ge,tn):mr(Le[0][2],Ln)}(Te[Ln](nn))}catch(Jt){mr(Le[0][3],Jt)}}function Ge(Ln){en("next",Ln)}function tn(Ln){en("throw",Ln)}function mr(Ln,nn){Ln(nn),Le.shift(),Le.length&&en(Le[0][0],Le[0][1])}}function $e(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,ae=oe[Symbol.asyncIterator];return ae?ae.call(oe):(oe=function ne(oe){var ae="function"==typeof Symbol&&Symbol.iterator,ce=ae&&oe[ae],Te=0;if(ce)return ce.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&Te>=oe.length&&(oe=void 0),{value:oe&&oe[Te++],done:!oe}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),ce={},Te("next"),Te("throw"),Te("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function Te(Le){ce[Le]=oe[Le]&&function(Mt){return new Promise(function(en,ln){!function ge(Le,Mt,en,ln){Promise.resolve(ln).then(function(Ge){Le({value:Ge,done:en})},Mt)}(en,ln,(Mt=oe[Le](Mt)).done,Mt.value)})}}}L.d(De,{FC:()=>Ie,KL:()=>$e,_T:()=>se,mG:()=>le,qq:()=>ye})},5e3:(pt,De,L)=>{L.d(De,{$8M:()=>au,$Z:()=>Bc,AFp:()=>fT,AaK:()=>le,BQk:()=>Fm,CHM:()=>_f,CRH:()=>ZI,CZH:()=>Wp,CqO:()=>We,EJc:()=>pT,EpF:()=>ml,F4k:()=>gv,FYo:()=>rw,FiY:()=>wi,G48:()=>Zw,GfV:()=>Oh,JOm:()=>Ca,Jf7:()=>y0,LFG:()=>ut,LSH:()=>jd,Lbi:()=>Mw,MAs:()=>Pb,NdJ:()=>Lm,OlP:()=>jn,Oqu:()=>fs,PXZ:()=>$w,Q6J:()=>pv,QGY:()=>Vc,Qsj:()=>uA,R0b:()=>Ns,RDi:()=>qs,Rgc:()=>Dl,SBq:()=>kh,Sil:()=>Fw,Suo:()=>ei,TTD:()=>ia,TgZ:()=>$o,VKq:()=>Qc,VLi:()=>Hw,WLB:()=>dw,X6Q:()=>Ru,XFs:()=>gt,Xpm:()=>Bt,Y36:()=>wr,YKP:()=>aw,YNc:()=>Rb,Yjl:()=>Ve,Yz7:()=>nn,ZZ4:()=>tg,_UZ:()=>Iu,_Vd:()=>Fa,_c5:()=>GA,_uU:()=>qc,aQg:()=>Ny,c2e:()=>kw,cJS:()=>rn,cg1:()=>an,dDg:()=>yT,deG:()=>Ug,dqk:()=>Zt,eFA:()=>bT,g9A:()=>Ey,h0i:()=>Uh,hGG:()=>qA,hij:()=>wp,iGM:()=>KI,ifc:()=>Gt,ip1:()=>hT,kL8:()=>Uv,lG2:()=>ue,oAB:()=>F,oJD:()=>m_,oxw:()=>yv,q4F:()=>bl,qLn:()=>Qg,qZA:()=>Yn,s9C:()=>fp,sBO:()=>FA,sIi:()=>Rc,s_b:()=>iy,soG:()=>xl,tBr:()=>Ri,tb:()=>id,tp0:()=>Po,uIk:()=>up,vHH:()=>Fe,vpe:()=>lo,wAp:()=>bt,xp6:()=>M0,ynx:()=>gl,z2F:()=>Yp,zSh:()=>tv,zs3:()=>jo});var g=L(7579),q=L(727),M=L(8306),se=L(6451),re=L(3099);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=we({__forward_ref__:we});function z(s){return s.__forward_ref__=z,s.toString=function(){return le(this())},s}function ne(s){return function Ke(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===z}(s)?s():s}class Fe extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}function Re(s,o){const u=o?` in ${o}`:"";throw new Fe(-201,`No provider for ${Ie(s)} found${u}`)}function ln(s,o){null==s&&function Ge(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function rn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Mn(s){return Ir(s,Ci)||Ir(s,Fr)}function Ir(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ji(s){return s&&(s.hasOwnProperty(Tr)||s.hasOwnProperty(Xi))?s[Tr]:null}const Ci=we({\u0275prov:we}),Tr=we({\u0275inj:we}),Fr=we({ngInjectableDef:we}),Xi=we({ngInjectorDef:we});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let qr;function cn(s){const o=qr;return qr=s,o}function Xn(s,o,u){const c=Mn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&gt.Optional?null:void 0!==o?o:void Re(le(s),"Injector")}function Un(s){return{toString:s}.toString()}var Bn=(()=>((Bn=Bn||{})[Bn.OnPush=0]="OnPush",Bn[Bn.Default=1]="Default",Bn))(),Gt=(()=>{return(s=Gt||(Gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Gt;var s})();const ft="undefined"!=typeof globalThis&&globalThis,at="undefined"!=typeof window&&window,fi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Zt=ft||"undefined"!=typeof global&&global||at||fi,pn={},wt=[],zn=we({\u0275cmp:we}),Yt=we({\u0275dir:we}),qe=we({\u0275pipe:we}),Ce=we({\u0275mod:we}),st=we({\u0275fac:we}),mt=we({__NG_ELEMENT_ID__:we});let Ut=0;function Bt(s){return Un(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||wt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Gt.Emulated,id:"c",styles:s.styles||wt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,v=s.pipes;return c.id+=Ut++,c.inputs=G(s.inputs,u),c.outputs=G(s.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map($):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(Y):null,c})}function $(s){return Ye(s)||function Ct(s){return s[Yt]||null}(s)}function Y(s){return function ot(s){return s[qe]||null}(s)}const pe={};function F(s){return Un(()=>{const o={type:s.type,bootstrap:s.bootstrap||wt,declarations:s.declarations||wt,imports:s.imports||wt,exports:s.exports||wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(pe[s.id]=s.type),o})}function G(s,o){if(null==s)return pn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const ue=Bt;function Ve(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ye(s){return s[zn]||null}function xt(s,o){const u=s[Ce]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function pi(s){return Array.isArray(s)&&"object"==typeof s[1]}function is(s){return Array.isArray(s)&&!0===s[1]}function Uu(s){return 0!=(8&s.flags)}function ea(s){return 2==(2&s.flags)}function ta(s){return 1==(1&s.flags)}function Vi(s){return null!==s.template}function Bu(s){return 0!=(512&s[2])}function Di(s,o){return s.hasOwnProperty(st)?s[st]:null}class pf{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ia(){return Hu}function Hu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ya),gf}function gf(){const s=ji(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===pn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ya(s,o,u,c){const h=ji(s)||function _s(s,o){return s[mf]=o}(s,{previous:pn,current:null}),p=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[u],I=v[E];p[E]=new pf(I&&I.currentValue,o,v===pn),s[c]=o}ia.ngInherit=!0;const mf="__ngSimpleChanges__";function ji(s){return s[mf]||null}let Gu;function qs(s){Gu=s}function mo(){return void 0!==Gu?Gu:"undefined"!=typeof document?document:void 0}function In(s){return!!s.listen}const yo={createRenderer:(s,o)=>mo()};function vn(s){for(;Array.isArray(s);)s=s[0];return s}function Lr(s,o){return vn(o[s.index])}function qu(s,o){return s.data[o]}function ti(s,o){const u=o[s];return pi(u)?u:u[0]}function vs(s){return 4==(4&s[2])}function vo(s){return 128==(128&s[2])}function Hi(s,o){return null==o?null:s[o]}function ss(s){s[18]=0}function ws(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Et={lFrame:Ql(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ca(){return Et.bindingsEnabled}function Se(){return Et.lFrame.lView}function qt(){return Et.lFrame.tView}function _f(s){return Et.lFrame.contextLView=s,s[8]}function Tn(){let s=Wu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Wu(){return Et.lFrame.currentTNode}function $i(s,o){const u=Et.lFrame;u.currentTNode=s,u.isParent=o}function Wl(){return Et.lFrame.isParent}function eu(){Et.lFrame.isParent=!1}function da(){return Et.isInCheckNoChangesMode}function ha(s){Et.isInCheckNoChangesMode=s}function vr(){const s=Et.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function pa(){return Et.lFrame.bindingIndex++}function Id(s,o){const u=Et.lFrame;u.bindingIndex=u.bindingRootIndex=s,Kl(o)}function Kl(s){Et.lFrame.currentDirectiveIndex=s}function wf(){return Et.lFrame.currentQueryIndex}function Zl(s){Et.lFrame.currentQueryIndex=s}function Yl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function zu(s,o,u){if(u&gt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&gt.Host||(h=Yl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Et.lFrame=wo();return c.currentTNode=o,c.lView=s,!0}function nu(s){const o=wo(),u=s[1];Et.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function wo(){const s=Et.lFrame,o=null===s?null:s.child;return null===o?Ql(s):o}function Ql(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ef(){const s=Et.lFrame;return Et.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Td=Ef;function Eo(){const s=Ef();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ni(){return Et.lFrame.selectedIndex}function Ys(s){Et.lFrame.selectedIndex=s}function Zn(){const s=Et.lFrame;return qu(s.tView,s.selectedIndex)}function ru(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:R}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function ec(s,o,u){Dd(s,o,3,u)}function Ku(s,o,u,c){(3&s[2])===u&&Dd(s,o,u,c)}function cr(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Dd(s,o,u,c){const p=null!=c?c:-1,v=o.length-1;let E=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(s[18]+=65536),(E<p||-1==p)&&(Sd(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Sd(s,o,u,c){const h=u[c]<0,p=u[c+1],E=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Zu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function yt(s,o,u){const c=In(s);let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const v=u[h++],E=u[h++],I=u[h++];c?s.setAttribute(o,E,I,v):o.setAttributeNS(v,E,I)}else{const v=p,E=u[++h];yi(v)?c&&s.setProperty(o,v,E):c?s.setAttribute(o,v,E):o.setAttribute(v,E),h++}}return h}function bs(s){return 3===s||4===s||6===s}function yi(s){return 64===s.charCodeAt(0)}function dr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Rd(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Rd(s,o,u,c,h){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function er(s){return-1!==s}function Qs(s){return 32767&s}function Js(s,o){let u=function tc(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let ya=!0;function Gi(s){const o=ya;return ya=s,o}let Yu=0;function An(s,o){const u=rc(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Xs(c.data,s),Xs(o,null),Xs(c.blueprint,null));const h=ri(s,o),p=s.injectorIndex;if(er(h)){const v=Qs(h),E=Js(h,o),I=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[v+A]|I[v+A]}return o[p+8]=h,p}function Xs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function rc(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ri(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const p=h[1],v=p.type;if(c=2===v?p.declTNode:1===v?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Io(s,o,u){!function Qu(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(mt)&&(c=u[mt]),null==c&&(c=u[mt]=Yu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function eo(s,o,u){if(u&gt.Optional)return s;Re(o,"NodeInjector")}function su(s,o,u,c){if(u&gt.Optional&&void 0===c&&(c=null),0==(u&(gt.Self|gt.Host))){const h=s[9],p=cn(void 0);try{return h?h.get(o,c,u&gt.Optional):Xn(o,c,u&gt.Optional)}finally{cn(p)}}return eo(c,o,u)}function To(s,o,u,c=gt.Default,h){if(null!==s){const p=function wa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(mt)?s[mt]:void 0;return"number"==typeof o?o>=0?255&o:ic:o}(u);if("function"==typeof p){if(!zu(o,s,c))return c&gt.Host?eo(h,u,c):su(o,u,c,h);try{const v=p(c);if(null!=v||c&gt.Optional)return v;Re(u)}finally{Td()}}else if("number"==typeof p){let v=null,E=rc(s,o),I=-1,A=c&gt.Host?o[16][6]:null;for((-1===E||c&gt.SkipSelf)&&(I=-1===E?ri(s,o):o[E+8],-1!==I&&hr(c,!1)?(v=o[1],E=Qs(I),o=Js(I,o)):E=-1);-1!==E;){const R=o[1];if(ou(p,E,R.data)){const B=Cf(E,o,u,v,c,A);if(B!==Is)return B}I=o[E+8],-1!==I&&hr(c,o[1].data[E+8]===A)&&ou(p,E,o)?(v=R,E=Qs(I),o=Js(I,o)):E=-1}}}return su(o,u,c,h)}const Is={};function ic(){return new Ts(Tn(),Se())}function Cf(s,o,u,c,h,p){const v=o[1],E=v.data[s+8],R=to(E,v,u,null==c?ea(E)&&ya:c!=v&&0!=(3&E.type),h&gt.Host&&p===E);return null!==R?va(o,v,R,E):Is}function to(s,o,u,c,h){const p=s.providerIndexes,v=o.data,E=1048575&p,I=s.directiveStart,R=p>>20,W=h?E+R:s.directiveEnd;for(let J=c?E:E+R;J<W;J++){const Ee=v[J];if(J<I&&u===Ee||J>=I&&Ee.type===u)return J}if(h){const J=v[I];if(J&&Vi(J)&&J.type===u)return I}return null}function va(s,o,u,c){let h=s[u];const p=o.data;if(function iu(s){return s instanceof Zu}(h)){const v=h;v.resolving&&function it(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${s}${u}`)}(Ie(p[u]));const E=Gi(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?cn(v.injectImpl):null;zu(s,c,gt.Default);try{h=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function bo(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const v=Hu(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==I&&cn(I),Gi(E),v.resolving=!1,Td()}}return h}function ou(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function hr(s,o){return!(s&gt.Self||s&gt.Host&&o)}class Ts{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return To(this._tNode,this._lView,o,c,u)}}function au(s){return function _a(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(bs(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(Tn(),s)}const Cs="__parameters__";function On(s,o,u){return Un(()=>{const c=function us(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const v=new h(...p);return E.annotation=v,E;function E(I,A,R){const B=I.hasOwnProperty(Cs)?I[Cs]:Object.defineProperty(I,Cs,{value:[]})[Cs];for(;B.length<=R;)B.push(null);return(B[R]=B[R]||[]).push(v),I}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class jn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ug=new jn("AnalyzeForEntryComponents");function Qr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Qr(c,o)):o!==s&&o.push(c)}return o}function cs(s,o){s.forEach(u=>Array.isArray(u)?cs(u,o):o(u))}function lu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ao(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const xo={},tl="__NG_DI_FLAG__",du="ngTempTokenPath",S=/\n/gm,H="__source",X=we({provide:String,useValue:we});let ie;function Me(s){const o=ie;return ie=s,o}function Oe(s,o=gt.Default){if(void 0===ie)throw new Fe(203,"");return null===ie?Xn(s,void 0,o):ie.get(s,o&gt.Optional?null:void 0,o)}function ut(s,o=gt.Default){return(function qn(){return qr}()||Oe)(ne(s),o)}const zt=ut;function Pt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Fe(900,"");let h,p=gt.Default;for(let v=0;v<c.length;v++){const E=c[v],I=nr(E);"number"==typeof I?-1===I?h=E.token:p|=I:h=E}o.push(ut(h,p))}else o.push(ut(c))}return o}function pr(s,o){return s[tl]=o,s.prototype[tl]=o,s}function nr(s){return s[tl]}const Ri=pr(On("Inject",s=>({token:s})),-1),wi=pr(On("Optional"),8),Po=pr(On("SkipSelf"),4);let ko,Ld;function fu(s){var o;return(null===(o=function Fd(){if(void 0===ko&&(ko=null,Zt.trustedTypes))try{ko=Zt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return ko}())||void 0===o?void 0:o.createHTML(s))||s}function Nf(s){var o;return(null===(o=function sl(){if(void 0===Ld&&(Ld=null,Zt.trustedTypes))try{Ld=Zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Ld}())||void 0===o?void 0:o.createHTML(s))||s}class Ud{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ia(s){return s instanceof Ud?s.changingThisBreaksApplicationSecurity:s}function Oo(s,o){const u=function pc(s){return s instanceof Ud&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}class d_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(fu(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class l0{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=fu(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=fu(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const v=u.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const m=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,b=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function x(s){return(s=String(s)).match(m)||s.match(b)?s:"unsafe:"+s}function ee(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function xe(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const dt=ee("area,br,col,hr,img,wbr"),Tt=ee("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jt=ee("rp,rt"),ol=xe(dt,xe(Tt,ee("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xe(jt,ee("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xe(jt,Tt)),Vd=ee("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gc=ee("srcset"),Ta=xe(Vd,gc,ee("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ee("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),zg=ee("script,style,template");class al{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!ol.hasOwnProperty(u))return this.sanitizedSomething=!0,!zg.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),v=p.name,E=v.toLowerCase();if(!Ta.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=p.value;Vd[E]&&(I=x(I)),gc[E]&&(s=I,I=(s=String(s)).split(",").map(o=>x(o.trim())).join(", ")),this.buf.push(" ",v,'="',Ff(I),'"')}var s;return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();ol.hasOwnProperty(u)&&!dt.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Ff(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const yc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kg=/([^\#-~ |!])/g;function Ff(s){return s.replace(/&/g,"&amp;").replace(yc,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Kg,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gu;function p_(s){return"content"in s&&function g_(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var wn=(()=>((wn=wn||{})[wn.NONE=0]="NONE",wn[wn.HTML=1]="HTML",wn[wn.STYLE=2]="STYLE",wn[wn.SCRIPT=3]="SCRIPT",wn[wn.URL=4]="URL",wn[wn.RESOURCE_URL=5]="RESOURCE_URL",wn))();function m_(s){const o=ul();return o?Nf(o.sanitize(wn.HTML,s)||""):Oo(s,"HTML")?Nf(Ia(s)):function f_(s,o){let u=null;try{gu=gu||function Wg(s){const o=new l0(s);return function w(){try{return!!(new window.DOMParser).parseFromString(fu(""),"text/html")}catch(s){return!1}}()?new d_(o):o}(s);let c=o?String(o):"";u=gu.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=u.innerHTML,u=gu.getInertBodyElement(c)}while(c!==p);return fu((new al).sanitizeChildren(p_(u)||u))}finally{if(u){const c=p_(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(mo(),ye(s))}function jd(s){const o=ul();return o?o.sanitize(wn.URL,s)||"":Oo(s,"URL")?Ia(s):x(ye(s))}function ul(){const s=Se();return s&&s[12]}const d0="__ngContext__";function Pi(s,o){s[d0]=o}function __(s){const o=function Uf(s){return s[d0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function wc(s){return s.ngOriginalError}function DD(s,...o){s.error(...o)}class Qg{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function CD(s){return s&&s.ngErrorLogger||DD}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&wc(o);for(;u&&wc(u);)u=wc(u);return u||null}}const OD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zt))();function y0(s){return s.ownerDocument.defaultView}function Lo(s){return s instanceof Function?s():s}var Ca=(()=>((Ca=Ca||{})[Ca.Important=1]="Important",Ca[Ca.DashCase=2]="DashCase",Ca))();function Jg(s,o){return undefined(s,o)}function Vf(s){const o=s[3];return is(o)?o[3]:o}function jf(s){return b0(s[13])}function em(s){return b0(s[4])}function b0(s){for(;null!==s&&!is(s);)s=s[4];return s}function Hd(s,o,u,c,h){if(null!=c){let p,v=!1;is(c)?p=c:pi(c)&&(v=!0,c=c[0]);const E=vn(c);0===s&&null!==u?null==h?S_(o,u,E):Ss(o,u,E,h||null,!0):1===s&&null!==u?Ss(o,u,E,h||null,!0):2===s?function P_(s,o,u){const c=Hf(s,o);c&&function HD(s,o,u,c){In(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,v):3===s&&o.destroyNode(E),null!=p&&function Zi(s,o,u,c,h){const p=u[7];p!==vn(u)&&Hd(o,s,c,p,h);for(let E=10;E<u.length;E++){const I=u[E];im(I[1],I,s,o,c,p)}}(o,s,p,u,h)}}function I_(s,o,u){if(In(s))return s.createElement(o,u);{const c=null!==u?function wd(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function T0(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,ws(h,-1)),u.splice(c,1)}function T_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&T0(h,c),o>0&&(s[u-1][4]=c[4]);const p=Ao(s,10+o);!function Ki(s,o){im(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function C_(s,o){if(!(256&o[2])){const u=o[11];In(u)&&u.destroyNode&&im(s,o,u,3,null,null),function bc(s){let o=s[13];if(!o)return D_(s[1],s);for(;o;){let u=null;if(pi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)pi(o)&&D_(o[1],o),o=o[3];null===o&&(o=s),pi(o)&&D_(o[1],o),u=o&&o[4]}o=u}}(o)}}function D_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function D0(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Zu)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=h[p[v]],I=p[v+1];try{I.call(E)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function C0(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],E="function"==typeof v?v(o):vn(o[v]),I=c[h=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],I,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),p+=2}else{const v=c[h=u[p+1]];u[p].call(v)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&In(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&is(o[3])){u!==o[3]&&T0(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function nm(s,o,u){return function jD(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Gt.None||h===Gt.Emulated)return null}return Lr(c,u)}(s,o.parent,u)}function Ss(s,o,u,c,h){In(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function S_(s,o,u){In(s)?s.appendChild(o,u):o.appendChild(u)}function S0(s,o,u,c,h){null!==c?Ss(s,o,u,c,h):S_(s,o,u)}function Hf(s,o){return In(s)?s.parentNode(o):o.parentNode}let A_=function R0(s,o,u){return 40&s.type?Lr(s,u):null};function rm(s,o,u,c){const h=nm(s,c,o),p=o[11],E=function A0(s,o,u){return A_(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let I=0;I<u.length;I++)S0(p,h,u[I],E,!1);else S0(p,h,u,E,!1)}function Gd(s,o){if(null!==o){const u=o.type;if(3&u)return Lr(o,s);if(4&u)return x_(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Gd(s,c);{const h=s[o.index];return is(h)?x_(-1,h):vn(h)}}if(32&u)return Jg(o,s)()||vn(s[o.index]);{const c=P0(s,o);return null!==c?Array.isArray(c)?c[0]:Gd(Vf(s[16]),c):Gd(s,o.next)}}return null}function P0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function x_(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Gd(c,h)}return o[7]}function N_(s,o,u,c,h,p,v){for(;null!=u;){const E=c[u.index],I=u.type;if(v&&0===o&&(E&&Pi(vn(E),c),u.flags|=4),64!=(64&u.flags))if(8&I)N_(s,o,u.child,c,h,p,!1),Hd(o,s,h,E,p);else if(32&I){const A=Jg(u,c);let R;for(;R=A();)Hd(o,s,h,R,p);Hd(o,s,h,E,p)}else 16&I?k(s,o,c,u,h,p):Hd(o,s,h,E,p);u=v?u.projectionNext:u.next}}function im(s,o,u,c,h,p){N_(u,c,s.firstChild,o,h,p,!1)}function k(s,o,u,c,h,p){const v=u[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Hd(o,s,h,I[A],p);else N_(s,o,I,v[3],h,p,!0)}function io(s,o,u){In(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function $f(s,o,u){In(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function gn(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const M_="ng-template";function qD(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==gn(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Br(s){return 4===s.type&&s.value!==M_}function VP(s,o,u){return o===(4!==s.type||u?s.value:M_)}function k_(s,o,u){let c=4;const h=s.attrs||[],p=function O_(s){for(let o=0;o<s.length;o++)if(bs(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!VP(s,I,u)||""===I&&1===o.length){if(he(c))return!1;v=!0}}else{const A=8&c?I:o[++E];if(8&c&&null!==s.attrs){if(!qD(s.attrs,A,u)){if(he(c))return!1;v=!0}continue}const B=WD(8&c?"class":I,h,Br(s),u);if(-1===B){if(he(c))return!1;v=!0;continue}if(""!==A){let W;W=B>p?"":h[B+1].toLowerCase();const J=8&c?W:null;if(J&&-1!==gn(J,A,0)||2&c&&A!==W){if(he(c))return!1;v=!0}}}}else{if(!v&&!he(c)&&!he(I))return!1;if(v&&he(I))continue;v=!1,c=I|1&c}}return he(c)||v}function he(s){return 0==(1&s)}function WD(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function Ht(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Da(s,o,u=!1){for(let c=0;c<o.length;c++)if(k_(s,o[c],u))return!0;return!1}function om(s,o){return s?":not("+o.trim()+")":o}function Gf(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const E=s[++u];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!he(v)&&(o+=om(p,h),h=""),c=v,p=p||!he(c);u++}return""!==h&&(o+=om(p,h)),o}const $t={};function M0(s){k0(qt(),Se(),ni()+s,da())}function k0(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ec(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Ku(o,p,0,u)}Ys(u)}function $_(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];Zl(h),v.contentQueries(2,o[p],p)}}}function Zd(s,o,u,c,h,p,v,E,I,A){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,ss(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=E||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function ll(s,o,u,c,h){let p=s.data[o];if(null===p)p=function gm(s,o,u,c,h){const p=Wu(),v=Wl(),I=s.data[o]=function tS(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,u,c,h),function vf(){return Et.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const v=function zs(){const s=Et.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return $i(p,!0),p}function Yd(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Cc(s,o,u){nu(o);try{const c=s.viewQuery;null!==c&&Cm(1,c,u);const h=s.template;null!==h&&Jr(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&$_(s,o),s.staticViewQueries&&Cm(2,s.viewQuery,u);const p=s.components;null!==p&&function K0(s,o){for(let u=0;u<o.length;u++)K_(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Eo()}}function cl(s,o,u,c){const h=o[2];if(256==(256&h))return;nu(o);const p=da();try{ss(o),function fa(s){return Et.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Jr(s,o,u,2,c);const v=3==(3&h);if(!p)if(v){const A=s.preOrderCheckHooks;null!==A&&ec(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Ku(o,A,0,null),cr(o,0)}if(function ib(s){for(let o=jf(s);null!==o;o=em(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(1024&h[2])&&ws(p,1),h[2]|=1024}}}(o),function rb(s){for(let o=jf(s);null!==o;o=em(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];vo(c)&&cl(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&$_(s,o),!p)if(v){const A=s.contentCheckHooks;null!==A&&ec(o,A)}else{const A=s.contentHooks;null!==A&&Ku(o,A,1),cr(o,1)}!function z0(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Ys(~h);else{const p=h,v=u[++c],E=u[++c];Id(v,p),E(2,o[p])}}}finally{Ys(-1)}}(s,o);const E=s.components;null!==E&&function eS(s,o){for(let u=0;u<o.length;u++)Yf(s,o[u])}(o,E);const I=s.viewQuery;if(null!==I&&Cm(2,I,c),!p)if(v){const A=s.viewCheckHooks;null!==A&&ec(o,A)}else{const A=s.viewHooks;null!==A&&Ku(o,A,2),cr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ws(o[3],-1))}finally{Eo()}}function G_(s,o,u,c){const h=o[10],p=!da(),v=vs(o);try{p&&!v&&h.begin&&h.begin(),v&&Cc(s,o,c),cl(s,o,u,c)}finally{p&&!v&&h.end&&h.end()}}function Jr(s,o,u,c,h){const p=ni(),v=2&c;try{Ys(-1),v&&o.length>20&&k0(s,o,20,da()),u(c,h)}finally{Ys(p)}}function ui(s,o,u){if(Uu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}function Qd(s,o,u){!ca()||(function oS(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||An(u,o),Pi(c,o);const v=u.initialInputs;for(let E=h;E<p;E++){const I=s.data[E],A=Vi(I);A&&nb(o,u,I);const R=va(o,s,E,u);Pi(R,o),null!==v&&Zf(0,E-h,R,I,0,v),A&&(ti(u.index,o)[8]=R)}}(s,o,u,Lr(u,o)),128==(128&u.flags)&&function Xd(s,o,u){const c=u.directiveStart,h=u.directiveEnd,v=u.index,E=function tu(){return Et.lFrame.currentDirectiveIndex}();try{Ys(v);for(let I=c;I<h;I++){const A=s.data[I],R=o[I];Kl(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&eb(A,R)}}finally{Ys(-1),Kl(E)}}(s,o,u))}function zf(s,o,u=Lr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],E=-1===v?u(o,s):s[v];s[h++]=E}}}function Z0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=mm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function mm(s,o,u,c,h,p,v,E,I,A){const R=20+c,B=R+h,W=function Y0(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:$t);return u}(R,B),J="function"==typeof A?A():A;return W[1]={type:s,blueprint:W,template:u,queries:null,viewQuery:E,declTNode:o,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:J,incompleteFirstPass:!1}}function _m(s,o,u,c){const h=th(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&J_(s).push(c,h.length-1))}function vm(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Ni(s,o,u,c,h,p,v,E){const I=Lr(o,u);let R,A=o.inputs;!E&&null!=A&&(R=A[c])?(hl(s,u,R,c,h),ea(o)&&function q_(s,o){const u=ti(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function nS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,In(p)?p.setProperty(I,c,h):yi(c)||(I.setProperty?I.setProperty(c,h):I[c]=h))}function wm(s,o,u,c){let h=!1;if(ca()){const p=function aS(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];Da(u,v.selectors,!1)&&(h||(h=[]),Io(An(u,o),s,v.type),Vi(v)?(dl(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===c?null:{"":-1};if(null!==p){h=!0,z_(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const B=p[R];B.providersResolver&&B.providersResolver(B)}let E=!1,I=!1,A=Yd(s,o,p.length,null);for(let R=0;R<p.length;R++){const B=p[R];u.mergedAttrs=dr(u.mergedAttrs,B.hostAttrs),eh(s,u,o,A,B),Em(A,B,v),null!==B.contentQueries&&(u.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(u.flags|=128);const W=B.type.prototype;!E&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!I&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),A++}!function J0(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,v=[];let E=null,I=null;for(let A=o.directiveStart;A<c;A++){const R=h[A],B=R.inputs,W=null===p||Br(o)?null:Im(B,p);v.push(W),E=vm(B,A,E),I=vm(R.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=I}(s,u)}v&&function tb(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new Fe(-301,!1);c.push(o[h],p)}}}(u,c,v)}return u.mergedAttrs=dr(u.mergedAttrs,u.attrs),h}function Kf(s,o,u,c,h,p){const v=p.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function sS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=I&&E.push(I),E.push(c,h,v)}}function eb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function dl(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Em(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Vi(o)&&(u[""]=s)}}function z_(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function eh(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=Di(h.type)),v=new Zu(p,Vi(h),null);s.blueprint[c]=v,u[c]=v,Kf(s,o,0,c,Yd(s,u,h.hostVars,$t),h)}function nb(s,o,u){const c=Lr(o,s),h=Z0(u),p=s[10],v=Dc(s,Zd(s,h,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=v}function rr(s,o,u,c,h,p){const v=Lr(s,o);!function bm(s,o,u,c,h,p,v){if(null==p)In(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const E=null==v?ye(p):v(p,c||"",h);In(s)?s.setAttribute(o,h,E,u):u?o.setAttributeNS(u,h,E):o.setAttribute(h,E)}}(o[11],v,p,s.value,u,c,h)}function Zf(s,o,u,c,h,p){const v=p[o];if(null!==v){const E=c.setInput;for(let I=0;I<v.length;){const A=v[I++],R=v[I++],B=v[I++];null!==E?c.setInput(u,B,A,R):u[R]=B}}}function Im(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Tm(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Yf(s,o){const u=ti(o,s);if(vo(u)){const c=u[1];80&u[2]?cl(c,u,c.template,u[8]):u[5]>0&&Qf(u)}}function Qf(s){for(let c=jf(s);null!==c;c=em(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const v=p[1];cl(v,p,v.template,p[8])}else p[5]>0&&Qf(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=ti(u[c],s);vo(h)&&h[5]>0&&Qf(h)}}function K_(s,o){const u=ti(o,s),c=u[1];(function Z_(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Cc(c,u,u[8])}function Dc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Sc(s){for(;s;){s[2]|=64;const o=Vf(s);if(Bu(s)&&!o)return s;s=o}return null}function Jf(s,o,u){const c=o[10];c.begin&&c.begin();try{cl(s,o,s.template,u)}catch(h){throw nh(o,h),h}finally{c.end&&c.end()}}function Xf(s){!function Y_(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=__(u),h=c[1];G_(h,c,h.template,u)}}(s[8])}function Cm(s,o,u){Zl(0),o(s,u)}const cS=(()=>Promise.resolve(null))();function th(s){return s[7]||(s[7]=[])}function J_(s){return s.cleanup||(s.cleanup=[])}function nh(s,o){const u=s[9],c=u?u.get(Qg,null):null;c&&c.handleError(o)}function hl(s,o,u,c,h){for(let p=0;p<u.length;){const v=u[p++],E=u[p++],I=o[v],A=s.data[v];null!==A.setInput?A.setInput(I,h,c,E):I[E]=h}}function Bo(s,o,u){const c=function Ws(s,o){return vn(o[s])}(o,s);!function b_(s,o,u){In(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Dm(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?p=E:1==p?h=me(h,E):2==p&&(c=me(c,E+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const yu=new jn("INJECTOR",-1);class ev{get(o,u=xo){if(u===xo){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}const tv=new jn("Set Injector scope."),Vo={},_u={};let ih;function tp(){return void 0===ih&&(ih=new ev),ih}function np(s,o=null,u=null,c){const h=nv(s,o,u,c);return h._resolveInjectorDefTypes(),h}function nv(s,o=null,u=null,c){return new ir(s,u,o||tp(),c)}class ir{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&cs(u,E=>this.processProvider(E,o,u)),cs([o],E=>this.processInjectorType(E,[],p)),this.records.set(yu,Ra(void 0,this));const v=this.records.get(tv);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=xo,c=gt.Default){this.assertNotDestroyed();const h=Me(this),p=cn(void 0);try{if(!(c&gt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function fl(s){return"function"==typeof s||"object"==typeof s&&s instanceof jn}(o)&&Mn(o);E=I&&this.injectableDefInScope(I)?Ra(sh(o),Vo):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&gt.Self?tp():this.parent).get(o,u=c&gt.Optional&&u===xo?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[du]=v[du]||[]).unshift(le(o)),h)throw v;return function hu(s,o,u,c){const h=s[du];throw o[H]&&h.unshift(o[H]),s.message=function ro(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):le(E)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(S,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[du]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{cn(p),Me(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(le(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let h=Ji(o);const p=null==h&&o.ngModule||void 0,v=void 0===p?o:p,E=-1!==c.indexOf(v);if(void 0!==p&&(h=Ji(p)),null==h)return!1;if(null!=h.imports&&!E){let R;c.push(v);try{cs(h.imports,B=>{this.processInjectorType(B,u,c)&&(void 0===R&&(R=[]),R.push(B))})}finally{}if(void 0!==R)for(let B=0;B<R.length;B++){const{ngModule:W,providers:J}=R[B];cs(J,Ee=>this.processProvider(Ee,W,J||wt))}}this.injectorDefTypes.add(v);const I=Di(v)||(()=>new v);this.records.set(v,Ra(I,Vo));const A=h.providers;if(null!=A&&!E){const R=o;cs(A,B=>this.processProvider(B,R,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let h=ah(o=ne(o))?o:ne(o&&o.provide);const p=function hS(s,o,u){return ub(s)?Ra(void 0,s.useValue):Ra(function oh(s,o,u){let c;if(ah(s)){const h=ne(s);return Di(h)||sh(h)}if(ub(s))c=()=>ne(s.useValue);else if(function fS(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Pt(s.deps||[]));else if(function lb(s){return!(!s||!s.useExisting)}(s))c=()=>ut(ne(s.useExisting));else{const h=ne(s&&(s.useClass||s.provide));if(!function gS(s){return!!s.deps}(s))return Di(h)||sh(h);c=()=>new h(...Pt(s.deps))}return c}(s),Vo)}(o);if(ah(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Ra(void 0,Vo,!0),v.factory=()=>Pt(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,p)}hydrate(o,u){return u.value===Vo&&(u.value=_u,u.value=u.factory()),"object"==typeof u.value&&u.value&&function rp(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function sh(s){const o=Mn(s),u=null!==o?o.factory:Di(s);if(null!==u)return u;if(s instanceof jn)throw new Fe(204,!1);if(s instanceof Function)return function dS(s){const o=s.length;if(o>0)throw function vi(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Fe(204,!1);const u=function kr(s){const o=s&&(s[Ci]||s[Fr]);if(o){const u=function Or(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Fe(204,!1)}function Ra(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function ub(s){return null!==s&&"object"==typeof s&&X in s}function ah(s){return"function"==typeof s}let jo=(()=>{class s{static create(u,c){var h;if(Array.isArray(u))return np({name:""},c,u,"");{const p=null!==(h=u.name)&&void 0!==h?h:"";return np({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=xo,s.NULL=new ev,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>ut(yu)}),s.__NG_ELEMENT_ID__=-1,s})();function yS(s,o){ru(__(s)[1],Tn())}let lh=null;function xa(){if(!lh){const s=Zt.Symbol;if(s&&s.iterator)lh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(lh=c)}}}return lh}function Rc(s){return!!sp(s)&&(Array.isArray(s)||!(s instanceof Map)&&xa()in s)}function sp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function As(s,o,u){return s[o]=u}function bi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function up(s,o,u,c){const h=Se();return bi(h,pa(),o)&&(qt(),rr(Zn(),h,s,o,u,c)),up}function xc(s,o,u,c){return bi(s,pa(),u)?o+ye(u)+c:$t}function Rb(s,o,u,c,h,p,v,E){const I=Se(),A=qt(),R=s+20,B=A.firstCreatePass?function vS(s,o,u,c,h,p,v,E,I){const A=o.consts,R=ll(o,s,4,v||null,Hi(A,E));wm(o,u,R,Hi(A,I)),ru(o,R);const B=R.tViews=mm(2,R,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),B.queries=o.queries.embeddedTView(R)),R}(R,A,I,o,u,c,h,p,v):A.data[R];$i(B,!1);const W=I[11].createComment("");rm(A,I,W,B),Pi(W,I),Dc(I,I[R]=Tm(W,I,W,B)),ta(B)&&Qd(A,I,B),null!=v&&zf(I,B,E)}function Pb(s){return function Si(s,o){return s[o]}(function zl(){return Et.lFrame.contextLView}(),20+s)}function wr(s,o=gt.Default){const u=Se();return null===u?ut(s,o):To(Tn(),u,ne(s),o)}function Bc(){throw new Error("invalid")}function pv(s,o,u){const c=Se();return bi(c,pa(),o)&&Ni(qt(),Zn(),c,s,o,c[11],u,!1),pv}function Rr(s,o,u,c,h){const v=h?"class":"style";hl(s,u,o.inputs[v],v,c)}function $o(s,o,u,c){const h=Se(),p=qt(),v=20+s,E=h[11],I=h[v]=I_(E,o,function Cd(){return Et.lFrame.currentNamespace}()),A=p.firstCreatePass?function AS(s,o,u,c,h,p,v){const E=o.consts,A=ll(o,s,2,h,Hi(E,p));return wm(o,u,A,Hi(E,v)),null!==A.attrs&&Dm(A,A.attrs,!1),null!==A.mergedAttrs&&Dm(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,p,h,0,o,u,c):p.data[v];$i(A,!0);const R=A.mergedAttrs;null!==R&&yt(E,I,R);const B=A.classes;null!==B&&$f(E,I,B);const W=A.styles;return null!==W&&io(E,I,W),64!=(64&A.flags)&&rm(p,h,I,A),0===function Ed(){return Et.lFrame.elementDepthCount}()&&Pi(I,h),function la(){Et.lFrame.elementDepthCount++}(),ta(A)&&(Qd(p,h,A),ui(p,A,h)),null!==c&&zf(h,A),$o}function Yn(){let s=Tn();Wl()?eu():(s=s.parent,$i(s,!1));const o=s;!function bd(){Et.lFrame.elementDepthCount--}();const u=qt();return u.firstCreatePass&&(ru(u,s),Uu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Tf(s){return 0!=(16&s.flags)}(o)&&Rr(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function n_(s){return 0!=(32&s.flags)}(o)&&Rr(u,o,Se(),o.stylesWithoutHost,!1),Yn}function Iu(s,o,u,c){return $o(s,o,u,c),Yn(),Iu}function gl(s,o,u){const c=Se(),h=qt(),p=s+20,v=h.firstCreatePass?function Ub(s,o,u,c,h){const p=o.consts,v=Hi(p,c),E=ll(o,s,8,"ng-container",v);return null!==v&&Dm(E,v,!0),wm(o,u,E,Hi(p,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,h,c,o,u):h.data[p];$i(v,!0);const E=c[p]=c[11].createComment("");return rm(h,c,E,v),Pi(E,c),ta(v)&&(Qd(h,c,v),ui(h,v,c)),null!=u&&zf(c,v),gl}function Fm(){let s=Tn();const o=qt();return Wl()?eu():(s=s.parent,$i(s,!1)),o.firstCreatePass&&(ru(o,s),Uu(s)&&o.queries.elementEnd(s)),Fm}function ml(){return Se()}function Vc(s){return!!s&&"function"==typeof s.then}function gv(s){return!!s&&"function"==typeof s.subscribe}const We=gv;function Lm(s,o,u,c){const h=Se(),p=qt(),v=Tn();return function Go(s,o,u,c,h,p,v,E){const I=ta(c),R=s.firstCreatePass&&J_(s),B=o[8],W=th(o);let J=!0;if(3&c.type||E){const Ze=Lr(c,o),lt=E?E(Ze):Ze,Ae=W.length,It=E?_t=>E(vn(_t[c.index])):c.index;if(In(u)){let _t=null;if(!E&&I&&(_t=function jc(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===u&&h[p+1]===c){const E=o[7],I=h[p+2];return E.length>I?E[I]:null}"string"==typeof v&&(p+=2)}return null}(s,o,h,c.index)),null!==_t)(_t.__ngLastListenerFn__||_t).__ngNextListenerFn__=p,_t.__ngLastListenerFn__=p,J=!1;else{p=Na(c,o,B,p,!1);const Rn=u.listen(lt,h,p);W.push(p,Rn),R&&R.push(h,It,Ae,Ae+1)}}else p=Na(c,o,B,p,!0),lt.addEventListener(h,p,v),W.push(p),R&&R.push(h,It,Ae,v)}else p=Na(c,o,B,p,!1);const Ee=c.outputs;let Be;if(J&&null!==Ee&&(Be=Ee[h])){const Ze=Be.length;if(Ze)for(let lt=0;lt<Ze;lt+=2){const co=o[Be[lt]][Be[lt+1]].subscribe(p),Gn=W.length;W.push(p,co),R&&R.push(h,c.index,Gn,-(Gn+1))}}}(p,h,h[11],v,s,o,!!u,c),Lm}function fh(s,o,u,c){try{return!1!==u(c)}catch(h){return nh(s,h),!1}}function Na(s,o,u,c,h){return function p(v){if(v===Function)return c;const E=2&s.flags?ti(s.index,o):o;0==(32&o[2])&&Sc(E);let I=fh(o,0,c,v),A=p.__ngNextListenerFn__;for(;A;)I=fh(o,0,A,v)&&I,A=A.__ngNextListenerFn__;return h&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function yv(s=1){return function Zs(s){return(Et.lFrame.contextLView=function Jl(s,o){for(;s>0;)o=o[15],s--;return o}(s,Et.lFrame.contextLView))[8]}(s)}function fp(s,o,u){return $c(s,"",o,"",u),fp}function $c(s,o,u,c,h){const p=Se(),v=xc(p,o,u,c);return v!==$t&&Ni(qt(),Zn(),p,s,v,p[11],h,!1),$c}function qc(s,o=""){const u=Se(),c=qt(),h=s+20,p=c.firstCreatePass?ll(c,h,1,o,null):c.data[h],v=u[h]=function E_(s,o){return In(s)?s.createText(o):s.createTextNode(o)}(u[11],o);rm(c,u,v,p),$i(p,!1)}function fs(s){return wp("",s,""),fs}function wp(s,o,u){const c=Se(),h=xc(c,s,o,u);return h!==$t&&Bo(c,ni(),h),wp}const wl=void 0;var Lv=["en",[["a","p"],["AM","PM"],wl],[["AM","PM"],wl,wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wl,"{1} 'at' {0}",wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tp(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ch={};function an(s){const o=function Ti(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Cu(o);if(u)return u;const c=o.split("-")[0];if(u=Cu(c),u)return u;if("en"===c)return Lv;throw new Error(`Missing locale data for the locale "${s}".`)}function Uv(s){return an(s)[bt.PluralCase]}function Cu(s){return s in Ch||(Ch[s]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[s]),Ch[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const Du="en-US";let iI=Du;class Xv{}class Zc{resolveComponentFactory(o){throw function aA(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Fa=(()=>{class s{}return s.NULL=new Zc,s})();function Mh(){return La(Tn(),Se())}function La(s,o){return new kh(Lr(s,o))}let kh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Mh,s})();function nw(s){return s instanceof kh?s.nativeElement:s}class rw{}let uA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function PI(){const s=Se(),u=ti(Tn().index,s);return function xI(s){return s[11]}(pi(u)?u:s)}(),s})(),iw=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class Oh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const bl=new Oh("13.3.5"),sw={};function Mp(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(vn(p)),is(p))for(let E=10;E<p.length;E++){const I=p[E],A=I[1].firstChild;null!==A&&Mp(I[1],I,A,c)}const v=u.type;if(8&v)Mp(s,o,u.child,c);else if(32&v){const E=Jg(u,o);let I;for(;I=E();)c.push(I)}else if(16&v){const E=P0(o,u);if(Array.isArray(E))c.push(...E);else{const I=Vf(o[16]);Mp(I[1],I,E,c,!0)}}u=h?u.projectionNext:u.next}return c}class kp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Mp(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(is(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(T_(o,c),Ao(u,c))}this._attachedToViewContainer=!1}C_(this._lView[1],this._lView)}onDestroy(o){_m(this._lView[1],this._lView,null,o)}markForCheck(){Sc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Jf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Q_(s,o,u){ha(!0);try{Jf(s,o,u)}finally{ha(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I0(s,o){im(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=o}}class lA extends kp{constructor(o){super(o),this._view=o}detectChanges(){Xf(this._view)}checkNoChanges(){!function ob(s){ha(!0);try{Xf(s)}finally{ha(!1)}}(this._view)}get context(){return null}}class NI extends Fa{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Ye(o);return new ey(u,this.ngModule)}}function Fh(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class ey extends Xv{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function zD(s){return s.map(Gf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Fh(this.componentDef.inputs)}get outputs(){return Fh(this.componentDef.outputs)}create(o,u,c,h){const p=(h=h||this.ngModule)?function Yc(s,o){return{get:(u,c,h)=>{const p=s.get(u,sw,h);return p!==sw||c===sw?p:o.get(u,c,h)}}}(o,h.injector):o,v=p.get(rw,yo),E=p.get(iw,null),I=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function ym(s,o,u){if(In(s))return s.selectRootElement(o,u===Gt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):I_(v.createRenderer(null,this.componentDef),A,function Il(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),B=this.componentDef.onPush?576:528,W=function av(s,o){return{components:[],scheduler:s||OD,clean:cS,playerHandler:o||null,flags:0}}(),J=mm(0,null,null,1,0,null,null,null,null,null),Ee=Zd(null,J,W,B,null,null,v,I,E,p);let Be,Ze;nu(Ee);try{const lt=function _b(s,o,u,c,h,p){const v=u[1];u[20]=s;const I=ll(v,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(Dm(I,A,!0),null!==s&&(yt(h,s,A),null!==I.classes&&$f(h,s,I.classes),null!==I.styles&&io(h,s,I.styles)));const R=c.createRenderer(s,o),B=Zd(u,Z0(o),null,o.onPush?64:16,u[20],I,c,R,p||null,null);return v.firstCreatePass&&(Io(An(I,u),v,o.type),dl(v,I),z_(I,u.length,1)),Dc(u,B),u[20]=B}(R,this.componentDef,Ee,v,I);if(R)if(c)yt(I,R,["ng-version",bl.full]);else{const{attrs:Ae,classes:It}=function F_(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!he(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ae&&yt(I,R,Ae),It&&It.length>0&&$f(I,R,It.join(" "))}if(Ze=qu(J,20),void 0!==u){const Ae=Ze.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const _t=u[It];Ae.push(null!=_t?Array.from(_t):null)}}Be=function Sr(s,o,u,c,h){const p=u[1],v=function X0(s,o,u){const c=Tn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),eh(s,c,o,Yd(s,o,1,null),u));const h=va(o,s,c.directiveStart,c);Pi(h,o);const p=Lr(c,o);return p&&Pi(p,o),h}(p,u,o);if(c.components.push(v),s[8]=v,h&&h.forEach(I=>I(v,o)),o.contentQueries){const I=Tn();o.contentQueries(1,v,I.directiveStart)}const E=Tn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ys(E.index),Kf(u[1],E,0,E.directiveStart,E.directiveEnd,o),eb(o,v)),v}(lt,this.componentDef,Ee,W,[yS]),Cc(J,Ee,null)}finally{Eo()}return new ow(this.componentType,Be,La(Ze,Ee),Ee,Ze)}}class ow extends class El{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new lA(h),this.componentType=o}get injector(){return new Ts(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Uh{}class aw{}const Ua=new Map;class ty extends Uh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new NI(this);const c=xt(o);this._bootstrapComponents=Lo(c.bootstrap),this._r3Injector=nv(o,u,[{provide:Uh,useValue:this},{provide:Fa,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=jo.THROW_IF_NOT_FOUND,c=gt.Default){return o===jo||o===Uh||o===yu?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ny extends aw{constructor(o){super(),this.moduleType=o,null!==xt(o)&&function MI(s){const o=new Set;!function u(c){const h=xt(c,!0),p=h.id;null!==p&&(function Op(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(p,Ua.get(p),c),Ua.set(p,c));const v=Lo(h.imports);for(const E of v)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new ty(this.moduleType,o)}}function Qc(s,o,u,c){return function OI(s,o,u,c,h,p){const v=o+u;return bi(s,v,h)?As(s,v+1,p?c.call(p,h):c(h)):Vh(s,v+1)}(Se(),vr(),s,o,u,c)}function dw(s,o,u,c,h){return function FI(s,o,u,c,h,p,v){const E=o+u;return function Ho(s,o,u,c){const h=bi(s,o,u);return bi(s,o+1,c)||h}(s,E,h,p)?As(s,E+2,v?c.call(v,h,p):c(h,p)):Vh(s,E+2)}(Se(),vr(),s,o,u,c,h)}function Vh(s,o){const u=s[o];return u===$t?void 0:u}function ry(s){return o=>{setTimeout(s,void 0,o)}}const lo=class pA extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,p,v;let E=o,I=u||(()=>null),A=c;if(o&&"object"==typeof o){const B=o;E=null===(h=B.next)||void 0===h?void 0:h.bind(B),I=null===(p=B.error)||void 0===p?void 0:p.bind(B),A=null===(v=B.complete)||void 0===v?void 0:v.bind(B)}this.__isAsync&&(I=ry(I),E&&(E=ry(E)),A&&(A=ry(A)));const R=super.subscribe({next:E,error:I,complete:A});return o instanceof q.w0&&o.add(R),R}};function fw(){return this._results[xa()]()}class td{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=xa(),c=td.prototype;c[u]||(c[u]=fw)}get changes(){return this._changes||(this._changes=new lo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Qr(o);(this._changesDetected=!function Xu(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Dl=(()=>{class s{}return s.__NG_ELEMENT_ID__=gw,s})();const pw=Dl,gA=class extends pw{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Zd(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),Cc(u,c,o),new kp(c)}};function gw(){return Up(Tn(),Se())}function Up(s,o){return 4&s.type?new gA(o,s,La(s,o)):null}let iy=(()=>{class s{}return s.__NG_ELEMENT_ID__=HI,s})();function HI(){return qI(Tn(),Se())}const $I=iy,sy=class extends $I{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return La(this._hostTNode,this._hostLView)}get injector(){return new Ts(this._hostTNode,this._hostLView)}get parentInjector(){const o=ri(this._hostTNode,this._hostLView);if(er(o)){const u=Js(o,this._hostLView),c=Qs(o);return new Ts(u[1].data[c+8],u)}return new Ts(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=GI(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,p){const v=o&&!function Ju(s){return"function"==typeof s}(o);let E;if(v)E=u;else{const B=u||{};E=B.index,c=B.injector,h=B.projectableNodes,p=B.ngModuleRef}const I=v?o:new ey(Ye(o)),A=c||this.parentInjector;if(!p&&null==I.ngModule){const W=(v?A:this.parentInjector).get(Uh,null);W&&(p=W)}const R=I.create(A,h,void 0,p);return this.insert(R.hostView,E),R}insert(o,u){const c=o._lView,h=c[1];if(function ua(s){return is(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const B=c[3],W=new sy(B,B[6],B[3]);W.detach(W.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function tm(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],lu(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function $d(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,c,v,p);const E=x_(p,v),I=c[11],A=Hf(I,v[7]);return null!==A&&function VD(s,o,u,c,h,p){c[0]=h,c[6]=o,im(s,c,u,1,h,p)}(h,v[6],I,c,A,E),o.attachToViewContainerRef(),lu(oy(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=GI(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=T_(this._lContainer,u);c&&(Ao(oy(this._lContainer),u),C_(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=T_(this._lContainer,u);return c&&null!=Ao(oy(this._lContainer),u)?new kp(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function GI(s){return s[8]}function oy(s){return s[8]||(s[8]=[])}function qI(s,o){let u;const c=o[s.index];if(is(c))u=c;else{let h;if(8&s.type)h=vn(c);else{const p=o[11];h=p.createComment("");const v=Lr(s,o);Ss(p,Hf(p,v),h,function $D(s,o){return In(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=u=Tm(c,o,h,s),Dc(o,u)}return new sy(u,s,o)}class Sl{constructor(o){this.queryList=o,this.matches=null}clone(){return new Sl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new Vp(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==JI(o,u).matches&&this.queries[u].setDirty()}}class jp{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class ay{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new ay(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class uy{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new uy(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,zI(u,p)),this.matchTNodeWithReadOption(o,u,to(u,o,p,!1,!1))}else c===Dl?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,to(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===kh||h===iy||h===Dl&&4&u.type)this.addMatch(u.index,-2);else{const p=to(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function zI(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function mw(s,o,u,c){return-1===u?function yA(s,o){return 11&s.type?La(s,o):4&s.type?Up(s,o):null}(o,s):-2===u?function _A(s,o,u){return u===kh?La(o,s):u===Dl?Up(o,s):u===iy?qI(o,s):void 0}(s,o,c):va(s,s[1],u,o)}function ly(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,v=u.matches,E=[];for(let I=0;I<v.length;I+=2){const A=v[I];E.push(A<0?null:mw(o,p[A],v[I+1],u.metadata.read))}h.matches=E}return h.matches}function yw(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const v=ly(s,o,h,u);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(v[E/2]);else{const A=p[E+1],R=o[-I];for(let B=10;B<R.length;B++){const W=R[B];W[17]===W[3]&&yw(W[1],W,A,c)}if(null!==R[9]){const B=R[9];for(let W=0;W<B.length;W++){const J=B[W];yw(J[1],J,A,c)}}}}}return c}function KI(s){const o=Se(),u=qt(),c=wf();Zl(c+1);const h=JI(u,c);if(s.dirty&&vs(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?yw(u,o,c,[]):ly(u,o,h,c);s.reset(p,nw),s.notifyOnChanges()}return!0}return!1}function ei(s,o,u,c){const h=qt();if(h.firstCreatePass){const p=Tn();(function QI(s,o,u){null===s.queries&&(s.queries=new ay),s.queries.track(new uy(o,u))})(h,new jp(o,u,c),p.index),function wA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function YI(s,o,u){const c=new td(4==(4&u));_m(s,o,c,c.destroy),null===o[19]&&(o[19]=new Vp),o[19].queries.push(new Sl(c))}(h,Se(),u)}function ZI(){return function vA(s,o){return s[19].queries[o].queryList}(Se(),wf())}function JI(s,o){return s.queries.getByIndex(o)}function vy(...s){}const hT=new jn("Application Initializer");let Wp=(()=>{class s{constructor(u){this.appInits=u,this.resolve=vy,this.reject=vy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Vc(p))u.push(p);else if(We(p)){const v=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(ut(hT,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const fT=new jn("AppId",{providedIn:"root",factory:function wy(){return`${zp()}${zp()}${zp()}`}});function zp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ey=new jn("Platform Initializer"),Mw=new jn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),id=new jn("appBootstrapListener");let kw=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const xl=new jn("LocaleId",{providedIn:"root",factory:()=>zt(xl,gt.Optional|gt.SkipSelf)||function qh(){return"undefined"!=typeof $localize&&$localize.locale||Du}()}),pT=new jn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ow{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Fw=(()=>{class s{compileModuleSync(u){return new ny(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Lo(xt(u).declarations).reduce((v,E)=>{const I=Ye(E);return I&&v.push(new ey(I)),v},[]);return new Ow(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const SA=(()=>Promise.resolve(0))();function Uw(s){"undefined"==typeof Zone?SA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ns{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lo(!1),this.onMicrotaskEmpty=new lo(!1),this.onStable=new lo(!1),this.onError=new lo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Bw(){let s=Zt.requestAnimationFrame,o=Zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function mT(s){const o=()=>{!function RA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Zt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Iy(s),s.isCheckStableRunning=!0,by(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Iy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,v,E)=>{try{return Vw(s),u.invokeTask(h,p,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),jw(s)}},onInvoke:(u,c,h,p,v,E,I)=>{try{return Vw(s),u.invoke(h,p,v,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),jw(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Iy(s),by(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ns.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ns.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,o,AA,vy,vy);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const AA={};function by(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Iy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Vw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function jw(s){s._nesting--,by(s)}class xA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lo,this.onMicrotaskEmpty=new lo,this.onStable=new lo,this.onError=new lo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let yT=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ns.assertNotInAngularZone(),Uw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(ut(Ns))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),PA=(()=>{class s{constructor(){this._applications=new Map,Zp.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Zp.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class NA{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function Hw(s){Zp=s}let Zp=new NA,Au=null;const _T=new jn("AllowMultipleToken"),Ty=new jn("PlatformOnDestroy");class $w{constructor(o,u){this.name=o,this.token=u}}function bT(s,o,u=[]){const c=`Platform: ${o}`,h=new jn(c);return(p=[])=>{let v=qw();if(!v||v.injector.get(_T,!1)){const E=[...u,...p,{provide:h,useValue:!0}];s?s(E):function ET(s){if(Au&&!Au.get(_T,!1))throw new Fe(400,"");Au=s;const o=s.get(Cy),u=s.get(Ey,null);u&&u.forEach(c=>c())}(function kA(s=[],o){return jo.create({name:o,providers:[{provide:tv,useValue:"platform"},{provide:Ty,useValue:()=>Au=null},...s]})}(E,c))}return function Gw(s){const o=qw();if(!o)throw new Fe(401,"");return o}()}}function qw(){var s;return null!==(s=null==Au?void 0:Au.get(Cy))&&void 0!==s?s:null}let Cy=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function OA(s,o){let u;return u="noop"===s?new xA:("zone.js"===s?void 0:s)||new Ns({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Ns,useValue:E}];return E.run(()=>{const A=jo.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(A),B=R.injector.get(Qg,null);if(!B)throw new Fe(402,"");return E.runOutsideAngular(()=>{const W=E.onError.subscribe({next:J=>{B.handleError(J)}});R.onDestroy(()=>{Pl(this._modules,R),W.unsubscribe()})}),function Ww(s,o,u){try{const c=u();return Vc(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(B,E,()=>{const W=R.injector.get(Wp);return W.runInitializers(),W.donePromise.then(()=>(function jS(s){ln(s,"Expected localeId to be defined"),"string"==typeof s&&(iI=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(xl,Du)||Du),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const h=Dy({},c);return function MA(s,o,u){const c=new ny(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(Yp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Fe(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Ty,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(ut(jo))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Dy(s,o){return Array.isArray(o)?o.reduce(Dy,s):Object.assign(Object.assign({},s),o)}let Yp=(()=>{class s{constructor(u,c,h,p){this._zone=u,this._injector=c,this._exceptionHandler=h,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new M.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new M.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Ns.assertNotInAngularZone(),Uw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Ns.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),R.unsubscribe()}});this.isStable=(0,se.T)(v,E.pipe((0,re.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Fe(405,"");let h;h=u instanceof Xv?u:this._injector.get(Fa).resolveComponentFactory(u),this.componentTypes.push(h.componentType);const p=function wT(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Uh),E=h.create(jo.NULL,[],c||h.selector,p),I=E.location.nativeElement,A=E.injector.get(yT,null),R=A&&E.injector.get(PA);return A&&R&&R.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Pl(this.components,E),R&&R.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Pl(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(id,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(ut(Ns),ut(jo),ut(Qg),ut(Wp))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Pl(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let TT=!0,Sy=!1;function Ru(){return Sy=!0,TT}function Zw(){if(Sy)throw new Error("Cannot enable prod mode after platform setup.");TT=!1}let FA=(()=>{class s{}return s.__NG_ELEMENT_ID__=Yw,s})();function Yw(s){return function LA(s,o,u){if(ea(s)&&!u){const c=ti(s.index,o);return new kp(c,c)}return 47&s.type?new kp(o[16],o):null}(Tn(),Se(),16==(16&s))}class OT{constructor(){}supports(o){return Rc(o)}create(o){return new jA(o)}}const VA=(s,o)=>o;class jA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||VA}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<eE(c,h,p)?u:c,E=eE(v,h,p),I=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{p||(p=[]);const A=E-h,R=I-h;if(A!=R){for(let W=0;W<A;W++){const J=W<p.length?p[W]:p[W]=0,Ee=J+W;R<=Ee&&Ee<A&&(p[W]=J+1)}p[v.previousIndex]=R-A}}E!==I&&o(v,E,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Rc(o))throw new Fe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],v=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,E),c=!0),u=u._next}else h=0,function Db(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[xa()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(h,E),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,E,v,h)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new HA(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ry),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ry),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class HA{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Ry{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new FT,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function eE(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class xy{constructor(){}supports(o){return o instanceof Map||sp(o)}create(){return new tE}}class tE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||sp(o)))throw new Fe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const c=new nE(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class nE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eg(){return new tg([new OT])}let tg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||eg()),deps:[[s,new Po,new wi]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Fe(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:eg}),s})();function Py(){return new Ny([new xy])}let Ny=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Py()),deps:[[s,new Po,new wi]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Fe(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Py}),s})();const GA=bT(null,"core",[]);let qA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(ut(Yp))},s.\u0275mod=F({type:s}),s.\u0275inj=rn({}),s})()},3942:(pt,De,L)=>{L.d(De,{Z:()=>Fe});var g=L(2090),q=L(4859),M=L(9681),se=L(1877);class re{constructor(ye,Ie){this._delegate=ye,this.firebase=Ie,(0,M._addComponent)(ye,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(ye,Ie=M._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(ye);return!$e.isInitialized()&&"EXPLICIT"===(null===(it=$e.getComponent())||void 0===it?void 0:it.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Ie})}_removeServiceInstance(ye,Ie=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(Ie)}_addComponent(ye){(0,M._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,M._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function me(){const Ue=function le(Ue){const ye={},Ie={__esModule:!0,initializeApp:function Pe(te,nt={}){const tt=M.initializeApp(te,nt);if((0,g.r3)(ye,tt.name))return ye[tt.name];const oe=new Ue(tt,Ie);return ye[tt.name]=oe,oe},app:$e,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function be(te){const nt=te.name,tt=nt.replace("-compat","");if(M._registerComponent(te)&&"PUBLIC"===te.type){const oe=(ae=$e())=>{if("function"!=typeof ae[tt])throw de.create("invalid-app-argument",{appName:nt});return ae[tt]()};void 0!==te.serviceProps&&(0,g.ZB)(oe,te.serviceProps),Ie[tt]=oe,Ue.prototype[tt]=function(...ae){return this._getService.bind(this,nt).apply(this,te.multipleInstances?ae:[])}}return"PUBLIC"===te.type?Ie[tt]:null},removeApp:function it(te){delete ye[te]},useAsService:function Je(te,nt){return"serverAuth"===nt?null:nt},modularAPIs:M}};function $e(te){if(!(0,g.r3)(ye,te=te||M._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:te});return ye[te]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Re(){return Object.keys(ye).map(te=>ye[te])}}),$e.App=Ue,Ie}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ye(Ie){(0,g.ZB)(Ue,Ie)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ue}(),z=new se.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=K;!function Ne(Ue){(0,M.registerVersion)("@firebase/app-compat","0.1.23",Ue)}()},9681:(pt,De,L)=>{L.r(De),L.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Ji,_DEFAULT_ENTRY_NAME:()=>en,_addComponent:()=>mr,_addOrOverwriteComponent:()=>Ln,_apps:()=>Ge,_clearComponents:()=>Mn,_components:()=>tn,_getProvider:()=>Jt,_registerComponent:()=>nn,_removeServiceInstance:()=>rn,deleteApp:()=>Xi,getApp:()=>Tr,getApps:()=>Fr,initializeApp:()=>Ci,onLog:()=>qn,registerVersion:()=>qr,setLogLevel:()=>cn});var g=L(5861),q=L(4859),M=L(1877),se=L(2090);class re{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function we(qe){const Ce=qe.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(st)){const mt=st.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(st=>st).join(" ")}}const de="@firebase/app",me=new M.Yd("@firebase/app"),en="[DEFAULT]",ln={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ge=new Map,tn=new Map;function mr(qe,Ce){try{qe.container.addComponent(Ce)}catch(st){me.debug(`Component ${Ce.name} failed to register with FirebaseApp ${qe.name}`,st)}}function Ln(qe,Ce){qe.container.addOrOverwriteComponent(Ce)}function nn(qe){const Ce=qe.name;if(tn.has(Ce))return me.debug(`There were multiple attempts to register component ${Ce}.`),!1;tn.set(Ce,qe);for(const st of Ge.values())mr(st,qe);return!0}function Jt(qe,Ce){const st=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),qe.container.getProvider(Ce)}function rn(qe,Ce,st=en){Jt(qe,Ce).clearInstance(st)}function Mn(){tn.clear()}const kr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Or{constructor(Ce,st,mt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}const Ji="9.7.0";function Ci(qe,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const st=Object.assign({name:en,automaticDataCollectionEnabled:!1},Ce),mt=st.name;if("string"!=typeof mt||!mt)throw kr.create("bad-app-name",{appName:String(mt)});const Ut=Ge.get(mt);if(Ut){if((0,se.vZ)(qe,Ut.options)&&(0,se.vZ)(st,Ut.config))return Ut;throw kr.create("duplicate-app",{appName:mt})}const Bt=new q.H0(mt);for(const $ of tn.values())Bt.addComponent($);const Z=new Or(qe,st,Bt);return Ge.set(mt,Z),Z}function Tr(qe=en){const Ce=Ge.get(qe);if(!Ce)throw kr.create("no-app",{appName:qe});return Ce}function Fr(){return Array.from(Ge.values())}function Xi(qe){return gt.apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(qe){const Ce=qe.name;Ge.has(Ce)&&(Ge.delete(Ce),yield Promise.all(qe.container.getProviders().map(st=>st.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function qr(qe,Ce,st){var mt;let Ut=null!==(mt=ln[qe])&&void 0!==mt?mt:qe;st&&(Ut+=`-${st}`);const Bt=Ut.match(/\s|\//),Z=Ce.match(/\s|\//);if(Bt||Z){const $=[`Unable to register library "${Ut}" with version "${Ce}":`];return Bt&&$.push(`library name "${Ut}" contains illegal characters (whitespace or "/")`),Bt&&Z&&$.push("and"),Z&&$.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void me.warn($.join(" "))}nn(new q.wA(`${Ut}-version`,()=>({library:Ut,version:Ce}),"VERSION"))}function qn(qe,Ce){if(null!==qe&&"function"!=typeof qe)throw kr.create("invalid-log-argument");(0,M.Am)(qe,Ce)}function cn(qe){(0,M.Ub)(qe)}const Un="firebase-heartbeat-store";let Bn=null;function Wr(){return Bn||(Bn=(0,se.X3)("firebase-heartbeat-database",1,(qe,Ce)=>{0===Ce&&qe.createObjectStore(Un)}).catch(qe=>{throw kr.create("storage-open",{originalErrorMessage:qe.message})})),Bn}function Gt(){return(Gt=(0,g.Z)(function*(qe){try{return(yield Wr()).transaction(Un).objectStore(Un).get(fi(qe))}catch(Ce){throw kr.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function ft(qe,Ce){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(qe,Ce){try{const mt=(yield Wr()).transaction(Un,"readwrite");return yield mt.objectStore(Un).put(Ce,fi(qe)),mt.complete}catch(st){throw kr.create("storage-set",{originalErrorMessage:st.message})}})).apply(this,arguments)}function fi(qe){return`${qe.name}!${qe.options.appId}`}class ts{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new wt(st),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var Ce=this;return(0,g.Z)(function*(){const mt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ut=Wn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Ut&&!Ce._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Ut))return Ce._heartbeatsCache.heartbeats.push({date:Ut,agent:mt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Bt=>{const Z=new Date(Bt.date).valueOf();return Date.now()-Z<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,g.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const st=Wn(),{heartbeatsToSend:mt,unsentEntries:Ut}=function pn(qe,Ce=1024){const st=[];let mt=qe.slice();for(const Ut of qe){const Bt=st.find(Z=>Z.agent===Ut.agent);if(Bt){if(Bt.dates.push(Ut.date),zn(st)>Ce){Bt.dates.pop();break}}else if(st.push({agent:Ut.agent,dates:[Ut.date]}),zn(st)>Ce){st.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:st,unsentEntries:mt}}(Ce._heartbeatsCache.heartbeats),Bt=(0,se.L)(JSON.stringify({version:2,heartbeats:mt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=st,Ut.length>0?(Ce._heartbeatsCache.heartbeats=Ut,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Bt})()}}function Wn(){return(new Date).toISOString().substring(0,10)}class wt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,g.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function js(qe){return Gt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var st=this;return(0,g.Z)(function*(){var mt;if(yield st._canUseIndexedDBPromise){const Bt=yield st.read();return ft(st.app,{lastSentHeartbeatDate:null!==(mt=Ce.lastSentHeartbeatDate)&&void 0!==mt?mt:Bt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var st=this;return(0,g.Z)(function*(){var mt;if(yield st._canUseIndexedDBPromise){const Bt=yield st.read();return ft(st.app,{lastSentHeartbeatDate:null!==(mt=Ce.lastSentHeartbeatDate)&&void 0!==mt?mt:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...Ce.heartbeats]})}})()}}function zn(qe){return(0,se.L)(JSON.stringify({version:2,heartbeats:qe})).length}!function Yt(qe){nn(new q.wA("platform-logger",Ce=>new re(Ce),"PRIVATE")),nn(new q.wA("heartbeat",Ce=>new ts(Ce),"PRIVATE")),qr(de,"0.7.22",qe),qr(de,"0.7.22","esm2017"),qr("fire-js","")}("")},4859:(pt,De,L)=>{L.d(De,{H0:()=>le,wA:()=>M,zt:()=>re});var g=L(5861),q=L(2090);class M{constructor(K,z,ne){this.name=K,this.instanceFactory=z,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const se="[DEFAULT]";class re{constructor(K,z){this.name=K,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(z)){const ne=new q.BH;if(this.instancesDeferred.set(z,ne),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:z});Ke&&ne.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get(z).promise}getImmediate(K){var z;const ne=this.normalizeInstanceIdentifier(null==K?void 0:K.identifier),Ke=null!==(z=null==K?void 0:K.optional)&&void 0!==z&&z;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ne){if(Ke)return null;throw Ne}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function de(me){return"EAGER"===me.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:se})}catch(z){}for(const[z,ne]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(z);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ke});ne.resolve(Ne)}catch(Ne){}}}}clearInstance(K=se){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,g.Z)(function*(){const z=Array.from(K.instances.values());yield Promise.all([...z.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...z.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=se){return this.instances.has(K)}getOptions(K=se){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:z={}}=K,ne=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ne,options:z});for(const[Ne,Fe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ne)&&Fe.resolve(Ke);return Ke}onInit(K,z){var ne;const Ke=this.normalizeInstanceIdentifier(z),Ne=null!==(ne=this.onInitCallbacks.get(Ke))&&void 0!==ne?ne:new Set;Ne.add(K),this.onInitCallbacks.set(Ke,Ne);const Fe=this.instances.get(Ke);return Fe&&K(Fe,Ke),()=>{Ne.delete(K)}}invokeOnInitCallbacks(K,z){const ne=this.onInitCallbacks.get(z);if(ne)for(const Ke of ne)try{Ke(K,z)}catch(Ne){}}getOrInitializeService({instanceIdentifier:K,options:z={}}){let ne=this.instances.get(K);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(me=K,me===se?void 0:me),options:z}),this.instances.set(K,ne),this.instancesOptions.set(K,z),this.invokeOnInitCallbacks(ne,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,ne)}catch(Ke){}var me;return ne||null}normalizeInstanceIdentifier(K=se){return this.component?this.component.multipleInstances?K:se:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const z=this.getProvider(K.name);if(z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const z=new re(K,this);return this.providers.set(K,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,De,L)=>{L.d(De,{Am:()=>me,Ub:()=>le,Yd:()=>de,in:()=>q});const g=[];var q=(()=>{return(K=q||(q={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",q;var K})();const M={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},se=q.INFO,re={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},we=(K,z,...ne)=>{if(z<K.logLevel)return;const Ke=(new Date).toISOString(),Ne=re[z];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ne](`[${Ke}]  ${K.name}:`,...ne)};class de{constructor(z){this.name=z,this._logLevel=se,this._logHandler=we,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in q))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?M[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...z),this._logHandler(this,q.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...z),this._logHandler(this,q.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,q.INFO,...z),this._logHandler(this,q.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,q.WARN,...z),this._logHandler(this,q.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...z),this._logHandler(this,q.ERROR,...z)}}function le(K){g.forEach(z=>{z.setLogLevel(K)})}function me(K,z){for(const ne of g){let Ke=null;z&&z.level&&(Ke=M[z.level]),ne.userLogHandler=null===K?null:(Ne,Fe,...Ue)=>{const ye=Ue.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(it){return null}}).filter(Ie=>Ie).join(" ");Fe>=(null!=Ke?Ke:Ne.logLevel)&&K({level:q[Fe].toLowerCase(),message:ye,args:Ue,type:Ne.name})}}}},5861:(pt,De,L)=>{function g(M,se,re,we,de,le,me){try{var K=M[le](me),z=K.value}catch(ne){return void re(ne)}K.done?se(z):Promise.resolve(z).then(we,de)}function q(M){return function(){var se=this,re=arguments;return new Promise(function(we,de){var le=M.apply(se,re);function me(z){g(le,we,de,me,K,"next",z)}function K(z){g(le,we,de,me,K,"throw",z)}me(void 0)})}}L.d(De,{Z:()=>q})}},pt=>{pt(pt.s=7307)}]);